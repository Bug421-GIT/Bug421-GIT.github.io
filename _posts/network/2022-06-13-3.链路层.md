---
title: 3. 链路层
author: Ana-Ana
date: 2022-06-13
tags: [computerNetwork]
categories: ["计算机网络"]
render_with_liquid: true
layout: post
---

## 链路层

1. 链路（Link）：两个结点间的物理线路
2. 数据链路：把实现通信协议的硬件和软件，加到链路上

- **封装成帧：加上帧头 帧尾**
- **差错检测：帧尾的检验码**
- **可靠传输：接收方发现帧验证错误，丢弃该帧而不接受**

广播通道链路：将目标地址、源地址写入帧头

共享式局域网信号碰撞问题：接入控制协议 CSMA/CD

### 封装成帧

| 1字节        | 1字节 | 1字节 | 2字节 | <1500字节 | 2字节 | 1字节        |
| ------------ | ----- | ----- | ----- | --------- | ----- | ------------ |
| 标志（开始） | 地址  | 控制  | 协议  | 数据      | FCS   | 标志（结束） |
| 帧头         |       |       | 帧头  |           | 帧尾  | 帧尾         |

- 帧定界：
  - 帧头帧尾
  - MAC没有帧头定界标志，用物理层的前导码作为其帧开始标志
  - 帧间间隔（96bite发送时间）作为标志
- 透明传输：数据链路层 <u>对上层交付的数据没有任何限制</u>，就如同透明的一样
  - 帧中出现数据与定界符一致，将导致接收方识别错误信息，不能实现透明
  - 发送前扫描，将相似的数据添加转义 【面向字符类型：1字节，值27】【面向比特类型：每五个比特1插入一个0】
- **最大传输单元 MTU**，数据部分应该尽可能大些，但为差错检查等数据链路层功能的保证，设定的值

### 差错检测

- 基本概念：
  - 比特差错：比特在传输过程中可能发生的差错，1→0,0→1
  - 误码率（BER，bit error rate）= 传输错误的比特 / 总比特
  - 使用错误检测码 检验是否发生了错误
- 奇偶校验
  - 使整个数据（包括检验位）中“1”的个数为奇数 / 偶数；
  - 出现偶个数误码，无法检出
- 循环冗余校验（CRC，cyclic redundancy check）
  - 双方约定的生成多项式G(x)，必须包含最低次项
  - 发送方：计算出冗余码，添加到待传输数据后面
  - 接收方：使用多项式计算数据，判断是否产生误码
  - 漏检率极低，只能检测出发生差错，而不能定位

```
G(x) = x^4 +x^2 +X^1 + 1 
 	 = 1*x^4 + 0*x^3 + 1x^2 + 1x^1 + 1*x^0
	 = 生成多项式各项系数构成的比特串：10111

发送方：[ 待传输数据bit + G(x)最高次个0（4个0）]÷生成多项式各项系数构成的比特串 = 商 ···· 余数
发生的数据：待传输数据bit + 补全的余数

接收方：[ 接收数据 + 余数 ] ÷ 生成多项式各项系数构成的比特串 = 商 ···· 0 才是正确的
```

### 可靠传输服务

​	当发生误码时，对帧的操作，取决于向上层提供的服务类型。

- 不可靠传输服务：仅仅丢弃（有线链路中使用，出现误码由上层负责）
- 可靠传输服务：检测到误码发生的位置（无线链路必须提供）

#### 其它层级也可使用

可靠传输服务不仅仅局限于数据链路层，其他层级也可能出现**传输差错**

| 比特差错   | 分组丢失 | 分组失序 | 分组重复 |
| ---------- | -------- | -------- | -------- |
| 数据链路层 |          |          |          |

网络层 IP协议：无连接、不可靠

运输层 TCP协议：连接、可靠

运输层 UDP协议：无连接、不可靠

#### 可靠传输的实现机制

​	【三种方式，待补充】
