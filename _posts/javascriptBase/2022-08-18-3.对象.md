---
title: 3.对象
author: Ana-Ana
date: 2022-08-18
tags: [javascriptBase]
categories: ["JavaScript","对象"]
render_with_liquid: true
layout: post
pin: true
---
## 对象

​	ECMA-262定义对象为：一组属性的无序集合  —— 对象的每个属性或方法都有一个名称来标识`(key)` ，并映射到一个值`(value)`，散列值

### 三种创建方法

1. `new Object()`
2. 字面量创建对象 `let obj = {}`
3. 构造函数创建对象
   1. `function obj() = { }`
   2. 浪费空间：每个方法都需要一个内存空间存放

### 成员对象

1. 静态成员：由构造函数本身访问
2. 实例成员：由实例化对象访问

### 对象方法

`Object.keys(obj)`：用于获取对象自身 **所有的** 属性；返回 数组 `[属性名1，属性名2，….]`

### 对象属性

​	ECMA-262使用一些内部特性描述属性特征，由为Javascript实现引擎的规范定义的。不能直接访问，在规范中，使用双中括号，如 `[[Enumerable]]` 表示。

#### 数据属性

`[[Configurable]]`： 属性是否可以被删除、再次修改 **特性**，true | false(默认)，影响`Object.defineProperty`方法调用

`[[Enuumerable]]`：属性是否可以枚举，true | false(默认) ，会影响`Object.key()`显示这个方法

`[[writable]]`：值是否可以重写，true | false(默认)，不使用`defineProperty`时，属性值为true；使用后默认值为false

`[[value]]`：属性值，默认为`undefined`



​	在显性添加属性到对象之后，除了`[[value]]`绑定赋予的值，其他值都会被设置为true。修改属性的默认特性，需要使用`Object.defineProperty()`方法。

​	`Object.defineProperty(目标对象obj, 需修改的属性名prop, 其特性descriptor)`

```JavaScript
Object.defineProperty(obj, 'num', {value:1000}); 

// writable=false, 非严格模式下无效；严格模式下报错
Object.defineProperty(obj, 'id', {writabel:false}); 
```

#### 访问器属性

`[[Configurable]]`： 属性是否可以被删除、再次修改 **特性**、<u>是否可以改为数据属性</u>，true (默认) | false，

`[[Enuumerable]]`：属性是否可以通过`for-in`枚举，true (默认)  | false，会影响`Object.key()`显示这个方法

`[[Get]]`：获取函数，在读取属性是调用，默认值为undefined

`[[Set]]`：设置函数，在读取属性是调用，默认值为undefined



​	不包含数据值，`get` 和 `set` 又称为对象属性监视器，用于获取和设置值

​	访问器属性不能直接定义，必须使用 `Object.defineProperty()`

```js
let value = 10;
let person = {
    age:29;
    name:'张三'
}
Object.defineProperty(person,'age',{
    // get函数(getter) -- 属性值被映射到getter上
    get:function(){
		// 当 person.age 被读取时（每次读取，都会触发getter）
        return value;
    } // person.age = 10
    set(value){
    	// 当 修改person.age值时，新值作为形参value传递
	}
})
```

#### 读取属性特性

`Object.getOwnPropertyDesciptor()`可以获取指定属性的属性描述符。

```javascript
let book = new Object()
Object.defineProperties(book,{
    year_:{ value:2001; }
    year:{
    	get: function() { return this.year_; }
		set: function(newValue) { this.year_ = newValue; } 
	}
})
// 数据属性：
let value_Descriptor = Object.getOwnPropertyDesciptor(book, 'year_');
value_Descriptor.value; // 2001
value_Descriptor.set // get、set = undefined
value_Descriptor.configurable // false
// 访问属性：
let access_Descriptor = Object.getOwnPropertyDesciptor(book, 'year');
access_Descriptor.value; // undefined
access_Descriptor.set; // get、set = function
access_Descriptor.enumerable; // false;
```

`Object.getOwnPropertyDesciptors()`静态方法，在每个自有属性上调用`Object.getOwnPropertyDesciptor()`并在一个新对象中返回他们。

### ES6 对象语法糖

1. 属性值简写（键值同名）

```javascript
let name = 'matter'
let person = { name: name };
// 等价于
let person = { name };
```

​	代码压缩程序会在<u>不同作用域</u>内保留属性名，编译器会保留初始标识符

```javascript
function makePeraon(a){
    return { name: a };
}
```

2. 可计算属性：使用变量值作为属性

   :one:必须先声明对象； :two:使用中括号 —— 对象属性键告诉运行时将其作为JavaScript表达式而不是字符串求值

```javascript
const nameKey = 'name';
let person = {
    [nameKey]: 'Matt'
}
```

​	JavaScript表达式求值，可以搭配复制表达式

```javascript
const className = ObjectClass
function getUniqueKey(key){
    return `${className}_${key}`
}

let person = {
    [getUniqueKey(namekey)] : 'Matt'
}
// person = { ObjectClass_nameKey:'Matt' };
```

​	JavaScript表达式求值可能抛出任何错误，都会中断对象创建