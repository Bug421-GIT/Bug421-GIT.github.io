---
title: 2.4.基本数据类型（String）
author: Ana-Ana
date: 2022-08-07
tags: [javascriptBase]
categories: ["JavaScript","基本类型"]
render_with_liquid: true
layout: post
pin: true
---
## 字符串 String

固有属性： length属性，取长度

重复输出：`repeat(n)`，重复n次，返回一个新字符串

## 码元组成

（U+0000 ~ U+FFFF范围内的字符）**基本多语言平面（BMP)** ：由16位码元（code unit）组成一个字符

| 函数                           | 返回值                                 |
| ------------------------------ | -------------------------------------- |
| charAt( index )                | 指定16位码元的指定位置，返回其对应字符 |
| charCodeAt( index )            | 指定位置的码元值                       |
| fromCharCode( 码元1, 码元2, …) | 根据数值对应字符拼接起来，返回字符串   |

**代码对** = 基本多语言平面 + **增补平面** ：需要由另外16位码元组成，2×16=32位组成一个字符

|                                 |                                        |      |
| ------------------------------- | -------------------------------------- | ---- |
| codePointAt( index )            | 指定16位码元的指定位置，识别完整的码点 |      |
| codePointAt( index )            | 指定位置的码元值                       |      |
| fromCodePoint( 码元1, 码元2, …) | 根据数值对应字符拼接起来，返回字符串   |      |

**码点（codePoint）**是Unicode中一个字符的完整标识。

如果传入的码元索引不是代理对的开始，就会返回错误的码点。这种错误只有检查单个字符时出现。

```js
console.log([...'abcv①']) // ['a', 'b', 'c', 'v', '①']
```

迭代字符串可以智能识别代码对的码点

## 编码方式

​	Unicode提供4种规范化形式：**NFD**(Normalization From D) 、**NFC**(Normalization From D)、**NFKD**(Normalization From KD)、**NFKC**(Normalization From KD)

​	`String.normalize(NFD)` 根据传入的模式，返回Boolean值，判断是否以规范化

## 转换

- toString()： null、undefined不能用；参数是转出数值的基数
- String()：可以转任何类型
  - 可以转化的，调用toString()
  - null，返回null
  - undefined，返回undefined

## 截取

|           | 参数               | 正数            | 负数                                                         |
| --------- | ------------------ | --------------- | ------------------------------------------------------------ |
| slice     | (start, **end**)   | [start, end)    | [start, length+(-end)+1)                                     |
| subString | (start, **end**)   | [start, end)    | 将所有负数视为0，输出[0,start] == [start,0]                  |
| subStr    | (start, strNumber) | [start, length) | 第一个负参数当作length+end，之后的所有负参数都转为0<br />start>0, length<=0, 返回`''` |

## 检索

1. `indexOf('') `& `lastIndexOf('')`：从0开始，不存在返回-1
2. `includes('', start)`： 返回true / false，检索整个字符串
3. `startsWith` & `endWith` ：是否在字符串头部 / 尾部出现
   - start：第二个参数表示开始位置
   - end：第二个参数表示字符串末尾的位置
4. `.some()` & `every()` ：短路遍历

|                                |                              |                     |
| ------------------------------ | ---------------------------- | ------------------- |
| 指定字符的位置，不存在返回`-1` | indexOf('')                  | lastIndex('')       |
| 是否包含指定字符，返回Boolean  | includes("char", startIndex) |                     |
| 指定字符串是否出现在头部/尾部  | startsWith('hello')          | endWith('hello')    |
| 遍历，短路判断                 | .some(''=>{}) 存在           | .every(''=>{}) 任意 |

## 替换

1. `arr.replace(searchvalue, newValue)`

   1. searchvalue 可以是正则表达式，也可以是字符串

   2. newValue 是字符串的情况下，可以使用 <u>字符序列</u> ，使用之前匹配的内容：

      ```javascript
      let text = 'cat, bat, sat, fat';
      result = text.replace('/(.at)/g',"word($1)")
      result // 'word(cat), word(bat), word(sat), word(fat)' 返回一个字符串
      ```

   3. newValue 可以是一个函数，接受3个参数，可以有多个捕获组`match`，但最后两个参数还是与整个匹配模式的开始位置和原始字符串

      ```javascript
      str.replace(/[<>"&]/g,function(match, pos, originalText){
          switch(match){
              case "<" : return '&lt;';
              case ">" : return '&gt;';
              case "&" : return '&amp;';            
          }
      })
      ```

      

2. `str.reduce()`

   1. `(function(...),0)`： 第二个参数指定了`pre`的初始值不再是word/arry[0],而是第二个参数的值
   2. `pre.replace(word,``)`：对目标字符串中的与关键字列表相同的字段进行替换操作
   3. **数组同**，可做引用引用对象等Max/Min比较

3. `match(regexp)` ： 参数与返回类型等同于`exec()`，返回查找位置

4. `trim()`：不影响原字符串， 删除前、后所有空格符； `trimLeft()`&`trimRight()` 从开始/末尾清理空格符

5. `padStart(targetLengh, padString)` & `padEnd(targetLengh, padString)` 复制字符串

   - 第一个参数是目标长度；第二个参数指定填充的字符（默认为‘’ “空格0）

## 迭代

​	String 在原型中暴露一个`@@interator`方法，表示可以迭代字符串中的每个字符

```javascript
let message = 'abc';
let stringIterator = massage[Symbol.iterator]();

stringIterator.next(); [value:'a',done: false]
// ... 
```



## 模板字符串（ES6）

​	使用反引号定义 <span id='ES6-3'></span>

​	字符串连接： `'str1' + 'str2'`

```javascript
1. 解析变量
`${字符串1}成立与${字符串2}`

2. 可调用函数：显示代码执行的返回值
`www.${show()}`

3. 可拼接<>
`<ul> ... </ul>`

4. 可嵌套模板字面量,可换行、排版友好
let html = `<ul>
	<li>${result.name}</li>
    <li>${result.age}</li>
    <li>${result.sex}</li>
</ul>`
```
